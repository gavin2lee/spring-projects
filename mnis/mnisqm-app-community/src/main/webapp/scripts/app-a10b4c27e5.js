!function(){"use strict";angular.module("nqms",["ngLocale","ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","toastr","w5c.validator","ngTable","AngularPrint","ui.grid","smart-table","echarts-ng","treeControl","angularFileUpload","ui.select2","countTo"])}(),function(){"use strict";function e(e,t){function a(t){var a=n.deleter,l={};return l.seqId=t,e[a.method]([a.url],{params:l})}function l(t){var a=n.setter;return e[a.method](a.url,t)}function s(t){var a=n.getter;return e[a.method](a.url,{params:t})}var o={getForm:s,saveForm:l,deleteForm:a},n=t.qualityManager.model;return o}e.$inject=["$http","apiHost"],angular.module("nqms").factory("formService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d,m){function p(){return e.getForm().then(function(e){})}function u(){}function v(t){e.deleteForm(t).then(function(e){e&&"0"===e.data.code&&(o.success("已删除！","提示"),p(),t==f.formData.seqId&&(f.formData={}),n.close("success"))})}var f=this;f.options={month:{datepickerMode:"month",minMode:"month"}},f.edit=u,f.del=v,f.load={func:p,init:!0}}e.$inject=["formService","$scope","$log","$q","$uibModal","toastr","modalService","security","$injector","$state","$location","deptService"],angular.module("nqms").controller("QualityFormController",e)}(),function(){"use strict";function e(e,t,a,l,s){function o(){return g?s.getForm({seqId:g}).then(function(e){u.formData=e.data.data[0],m()}):(u.formData={modelName:"新建模板"},s.saveForm(u.formData).then(function(e){u.formData.seqId=e.data.data,g=e.data.data,m()}))}function n(){u.formData.qualityFormDetailList=u.lst,s.saveForm(u.formData).then(function(e){t.$broadcast("toast"),a.go("home.qualityModel")})}function i(e){u.lst.splice(e,1),m()}function r(t,a){p=a;var l=e.open({templateUrl:"app/quality/setting/template/add.modal.html",controller:"QualityAddFormModalCtrl",controllerAs:"vm",backdrop:"static",animation:!0,size:"md",resolve:{id:function(){return{data:angular.copy(t),id:u.formData.seqId,types:angular.copy(u.formData.qualityFormList)}}}});l.result.then(function(e){u.load.func()})}function c(e){e=_.sortBy(e,function(e,t){return e.name}),f=_.uniq(_.pluck(e,"cate")),b=_.uniq(_.pluck(e,"subcate"));var t=_.groupBy(e,function(e){return e.cate}),a=[];return _.forEach(t,function(e,a){var l=_.groupBy(e,function(e){return e.subcate}),s=t[a].length;t[a]=l,t[a].length=s}),_.forEach(f,function(e){_.forEach(b,function(l){a=a.concat(t[e][l])})}),a=_.compact(a),{raw:a,dirty:t}}function d(e,t,a){var l;return a=a||"",v[t+a]?l=v[t+a][e]||0:a?(l=u.dirtyLst[t][a].length,v[t+a]={},v[t+a][e]=l):(l=u.dirtyLst[t].length,v[t]={},v[t][e]=l),l}function m(){var e=c(u.lst);u.totalScore=_.reduce(u.lst,function(e,t){return e+t.points},0),u.dirtyLst=e.dirty,u.lst=e.raw,v={}}var p,u=this,v={},f=[],b=[],g=l.id;u.open=r,u.save=n,u.del=i,u.tableLayout=d,u.lst=[],u.load={func:o,init:!0}}e.$inject=["$uibModal","$rootScope","$state","$stateParams","formService"],angular.module("nqms").controller("QualityAddFormController",e)}(),function(){"use strict";function e(e,t,a){function l(){e.dismiss()}function s(){i.cParent=_.findWhere(i.parent,{formName:i.cateText}),i.cParent?i.son=_.filter(i.types,function(e){return e.parentType===i.cParent.formCode}):i.son=[],console.log(i.son),i.cSon=null}function o(){i.cSon=_.findWhere(i.son,{formName:i.cateText})}function n(){i.cParent?i.cSon?i.formData.formCode=i.cSon.formCode:i.model.qualityFormList.push({formName:i.subCateText,parentType:i.cParent.formCode}):(i.model.qualityFormList.push({formName:i.cateText}),i.model.qualityFormList.push({formName:i.subCateText})),i.model.qualityFormDetailList.push(i.formData),t.saveForm(i.model).then(function(){e.close()})}var i=this;i.model={seqId:a.id,qualityFormList:[],qualityFormDetailList:[]},i.types=a.types||[],_.each(i.types,function(e){e.parentType||(e.parentType="")}),i.parent=_.filter(i.types,function(e){return!e.parentType}),i.formData=a.data||{},i.cancel=l,i.ok=n,i.pChange=s,i.sChange=o}e.$inject=["$uibModalInstance","formService","id"],angular.module("nqms").controller("QualityAddFormModalCtrl",e)}(),function(){"use strict";function e(e,t){function a(t){var a=n.deleter;return e[a.method](a.url,{params:{teamName:t}}).then(o)}function l(t){var a=n.setter;return e[a.method](a.url,t).then(o)}function s(){var t=n.getter;return e[t.method](t.url).then(o)}function o(e){return"0"===e.data.code?e:void 0}var n=t.qualityManager.group,i={getGroup:s,saveGroup:l,deleteGroup:a};return i}e.$inject=["$http","apiHost"],angular.module("nqms").factory("qualityGroupService",e)}(),function(){"use strict";function e(e,t,a){function l(){return t.getGroup().then(function(e){o.list=e.data.data})}function s(t){var a=e.open({templateUrl:"app/quality/setting/group/group.modal.html",controller:"QualityAddGroupCtrl",controllerAs:"vm",backdrop:"static",animation:!0,size:"lg",resolve:{id:function(){return angular.copy(t)}}});a.result["finally"](function(){o.load.func()})}var o=this;o.open=s,o.load={func:l,init:!0},a.getUserHelper(!0).then(function(e){o.userHelper=e})}e.$inject=["$uibModal","qualityGroupService","comService"],angular.module("nqms").controller("QualityGroupCtrl",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(){t.dismiss()}function i(){d.formData.userList=_.pluck(d.grouped.yes,"userCode"),s.saveGroup(d.formData).then(function(){e.$broadcast("toast"),t.close()})}function r(e){var t=d.grouped.no.indexOf(e);d.grouped.yes.push(d.grouped.no.splice(t,1)[0])}function c(e){var t=d.grouped.yes.indexOf(e);d.grouped.no.push(d.grouped.yes.splice(t,1)[0])}var d=this;d.cancel=n,d.ok=i,d.choose=r,d.remove=c,d.formData=o||{},l.getUserHelper().then(function(e){d.grouped=_.groupBy(e.users,function(e){return _.contains(d.formData.userList,e.userCode)?"yes":"no"}),d.grouped.yes||(d.grouped.yes=[]),d.grouped.no||(d.grouped.no=[])})}e.$inject=["$rootScope","$uibModalInstance","security","comService","qualityGroupService","id"],angular.module("nqms").controller("QualityAddGroupCtrl",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d,m,p){function u(){return v(s.reportCode)}function v(e){var t=o.getUserinfo().role.deptCode;x.reportCode=e;var a=p.getUserList(t),s=m.getEventRequirement({reportCode:e}),n=m.getEventMeasures({reportCode:e}),i=m.getReportDetail({reportCode:e}),r=l.all([s,n,i,a]).then(function(e){var t=e[0].data.data.lst,a=e[1].data.data.lst,l={},s=e[3];e[2].data.data.lst.forEach(function(e){l[e.itemCode]={value:e.itemValue,seqId:e.seqId}}),D.metaData.userList=s,D.formData.requirementList=t,D.formData.measureList=a,D.formData.reportDetailList=l});return r}function f(){var e,t=this,a=angular.extend({},t.formData.reportDetailList),l=[];for(e in a)a.hasOwnProperty(e)&&l.push({reportCode:t.formData.reportCode,itemCode:e,seqId:a[e].seqId||null,itemValue:a[e].value});m.saveReportDetail(l).then(function(e){e&&"0"===e.data.code&&(r.success("保存成功！","提示"),D.scope.$broadcast("resfreshReportDetail",t.formData.reportCode,t),i.close("success"))})}function b(e,t){n.del(e,t).then(function(e){e&&"0"===e.data.code&&(r.success("已删除！","提示"),D.load.func(),i.close("success"))})}function g(e,t,a){m.getEventRequirement({reportCode:t}).then(function(e){e&&(a.formData.requirementList=e.data.data.lst)})}function h(e,t,a){m.getEventMeasures({reportCode:t}).then(function(e){e&&(a.formData.measureList=e.data.data.lst)})}function y(e,t,a){m.getReportDetail({reportCode:t}).then(function(e){e&&(a.formData.reportDetailList=e.data.data.lst)})}var D=this,x={},k={};D.formData=x,D.metaData=k,D.saveReportDetail=f,D.rootScope=e,D.scope=t,D.open=open,D.del=b,D.load={func:u,init:!0},D.scope.$on("refreshMeasure",h),D.scope.$on("refreshRequirement",g),D.scope.$on("refreshReportDetail",y)}e.$inject=["$rootScope","$scope","$log","$q","$stateParams","security","levelService","modalService","toastr","fixService","deptService","handleService","filesService"],angular.module("nqms").controller("MalCaseUpRectifyController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d,m,p){function u(){return v(s.reportCode)}function v(e){var t=o.getUserinfo().role.deptCode;x.reportCode=e;var a=p.getUserList(t),s=m.getEventRequirement({reportCode:e}),n=m.getEventMeasures({reportCode:e}),i=m.getReportDetail({reportCode:e}),r=l.all([s,n,i,a]).then(function(e){var t=e[0].data.data.lst,a=e[1].data.data.lst,l={},s=e[3];e[2].data.data.lst.forEach(function(e){l[e.itemCode]={value:e.itemValue,seqId:e.seqId}}),D.metaData.userList=s,D.formData.requirementList=t,D.formData.measureList=a,D.formData.reportDetailList=l});return r}function f(){var e,t=this,a=angular.extend({},t.formData.reportDetailList),l=[];for(e in a)a.hasOwnProperty(e)&&l.push({reportCode:t.formData.reportCode,itemCode:e,seqId:a[e].seqId||null,itemValue:a[e].value});m.saveReportDetail(l).then(function(e){e&&"0"===e.data.code&&(r.success("保存成功！","提示"),D.scope.$broadcast("resfreshReportDetail",t.formData.reportCode,t),i.close("success"))})}function b(e,t){n.del(e,t).then(function(e){e&&"0"===e.data.code&&(r.success("已删除！","提示"),D.load.func(),i.close("success"))})}function g(e,t,a){m.getEventRequirement({reportCode:t}).then(function(e){e&&(a.formData.requirementList=e.data.data.lst)})}function h(e,t,a){m.getEventMeasures({reportCode:t}).then(function(e){e&&(a.formData.measureList=e.data.data.lst)})}function y(e,t,a){m.getReportDetail({reportCode:t}).then(function(e){e&&(a.formData.reportDetailList=e.data.data.lst)})}var D=this,x={},k={};D.formData=x,D.metaData=k,D.saveReportDetail=f,D.rootScope=e,D.scope=t,D.open=open,D.del=b,D.load={func:u,init:!0},D.scope.$on("refreshMeasure",h),D.scope.$on("refreshRequirement",g),D.scope.$on("refreshReportDetail",y)}e.$inject=["$rootScope","$scope","$log","$q","$stateParams","security","levelService","modalService","toastr","fixService","deptService","handleService","filesService"],angular.module("nqms").controller("MalCaseUpEsimateController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d,m){function p(){return u(s.reportCode)}function u(e){var t=m.getReportDetail({reportCode:e}),a=l.all([t]).then(function(t){var a={};t[0].data.data.lst.forEach(function(e){a[e.itemCode]={value:e.itemValue,seqId:e.seqId}}),b.formData.reportCode=e,b.formData.reportDetailList=a});return a}function v(){var e,t=angular.extend({},b.formData.reportDetailList),a=[];for(e in t)t.hasOwnProperty(e)&&a.push({reportCode:b.formData.reportCode,itemCode:e,seqId:t[e].seqId||null,itemValue:t[e].value});m.saveReportDetail(a).then(function(e){e&&"0"===e.data.code&&(r.success("保存成功！","提示"),b.scope.$broadcast("resfreshReportDetail",b.formData.reportCode,b),i.close("success"))})}function f(e,t,a){m.getReportDetail({reportCode:t}).then(function(e){e&&(a.formData.reportDetailList=e.data.data.lst)})}var b=this;b.formData={},b.metaData={},b.saveReportDetail=v,b.rootScope=e,b.scope=t,b.load={func:p,init:!0},b.scope.$on("refreshReportDetail",f)}e.$inject=["$rootScope","$scope","$log","$q","$stateParams","security","levelService","modalService","toastr","fixService","deptService","handleService"],angular.module("nqms").controller("MalCaseUpDisposeController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d){function m(){return p()}function p(){return d.getReportDetail({reportCode:s.reportCode}).then(function(e){e.data.data.lst.forEach(function(e){u.reportDetailList[e.itemCode]={value:e.itemValue,seqId:e.seqId}})})}var u=this;u.reportDetailList={},u.rootScope=e,u.scope=t,u.load={func:m,init:!0},m()}e.$inject=["$rootScope","$scope","$q","$state","$stateParams","security","moment","levelService","modalService","toastr","fixService"],angular.module("nqms").controller("SurveyInfoController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c){function d(){return m()}function m(){c.getEventRequirement({reportCode:s.reportCode}).then(function(e){b.requirementList=e.data.data.lst})}function p(){var t=angular.merge({},b.formData);angular.extend(t,{userCode:o.getUserinfo().user.userCode,reportCode:s.reportCode}),c.saveRequirement(t).then(function(t){t&&"0"===t.data.code&&(e.$broadcast("toast",{type:"success",content:"保存成功！"}),r.close("success"),b.load.func())})}function u(){b.formData={}}function v(e){b.formData=angular.merge({},e)}function f(t){var a;a={seqId:t.seqId},c.deleteRequirement(a).then(function(t){t&&(e.$broadcast("toast",{type:"success",content:"已删除！"}),b.load.func())})}var b=this;b.rootScope=e,b.formData={},b.scope=t,b.resetForm=u,b.fillItem=v,b.del=f,b.save=p,b.load={func:d,init:!0},d()}e.$inject=["$rootScope","$scope","$q","$state","$stateParams","security","moment","levelService","modalService","fixService"],angular.module("nqms").controller("RequirementController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d){function m(){return h.then(function(e){e&&(g.userList=e)}),p()}function p(){c.getEventMeasures({reportCode:s.reportCode}).then(function(e){g.measureList=e.data.data.lst})}function u(){var t=angular.merge({},g.formData);angular.extend(t,{userCode:o.getUserinfo().user.userCode,reportCode:s.reportCode,meaTime:n().format("YYYY-MM-DD HH:mm:ss")}),c.saveMeasure(t).then(function(t){t&&"0"===t.data.code&&(e.$broadcast("toast",{type:"success",content:"保存成功！"}),r.close("success"),g.load.func())})}function v(){g.formData={}}function f(e){g.formData=angular.merge({},e)}function b(t){var a;a={seqId:t.seqId},c.deleteRequirement(a).then(function(t){t&&(e.$broadcast("toast",{type:"success",content:"已删除！"}),g.load.func())})}var g=this,h=d.getUserList(o.getUserinfo().role.deptCode);g.rootScope=e,g.formData={},g.scope=t,g.resetForm=v,g.fillItem=f,g.del=b,g.save=u,g.load={func:m,init:!0},m()}e.$inject=["$rootScope","$scope","$q","$state","$stateParams","security","moment","levelService","modalService","fixService","baseInfoService"],angular.module("nqms").controller("MeasuresController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d){function m(){return h.then(function(e){e&&(g.userList=e)}),p()}function p(){c.getEventMeasures({reportCode:s.reportCode}).then(function(e){g.measureList=e.data.data.lst})}function u(){var t=angular.merge({},g.measure);angular.extend(t,{userCode:o.getUserinfo().user.userCode,reportCode:s.reportCode,meaTime:n().format("YYYY-MM-DD HH:mm:ss")}),c.saveEstimate(t).then(function(t){t&&"0"===t.data.code&&(e.$broadcast("toast",{type:"success",content:"保存成功！"}),r.close("success"),g.load.func())})}function v(){g.measure={}}function f(e){g.measure=angular.merge({},e)}function b(t){var a;a={seqId:t.seqId},c.deleteRequirement(a).then(function(t){t&&(e.$broadcast("toast",{type:"success",content:"已删除！"}),g.load.func())})}var g=this,h=d.getUserList(o.getUserinfo().role.deptCode);g.rootScope=e,g.measure={},g.scope=t,g.resetForm=v,g.fillItem=f,g.del=b,g.save=u,g.load={func:m,init:!0},m()}e.$inject=["$rootScope","$scope","$q","$state","$stateParams","security","moment","levelService","modalService","fixService","baseInfoService"],angular.module("nqms").controller("EstimateController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d,m){function p(){return u()}function u(){return m.getDetail(s.reportCode).then(function(e){e&&(v.metaData.malCaseInfo=e.data.data)})}var v=this;v.formData={},v.metaData={},v.rootScope=e,v.scope=t,v.load={func:p,init:!0},p()}e.$inject=["$rootScope","$scope","$q","$state","$stateParams","security","moment","levelService","modalService","toastr","fixService","callService"],angular.module("nqms").controller("CaseInfoController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d,m,p,u,v){function f(){return g()}function b(){var e,t=angular.merge({},h.formData.reportDetailList),a=[];for(e in t)t.hasOwnProperty(e)&&a.push({reportCode:s.reportCode,itemCode:e,seqId:t[e].seqId||null,itemValue:t[e].value});v.saveReportDetail(a).then(function(e){e&&"0"===e.data.code&&(d.success("保存成功！","提示"),c.close("success"),o(function(){l.go("home.call",null,{reload:!0})},500))})}function g(){return v.getReportDetail({reportCode:s.reportCode}).then(function(e){e.data.data.lst.forEach(function(e){h.formData.reportDetailList[e.itemCode]={value:e.itemValue,seqId:e.seqId}})})}var h=this;h.formData={},h.metaData={},h.formData.reportDetailList={},h.rootScope=e,h.scope=t,h.saveReportDetail=b,h.load={func:f,init:!0}}e.$inject=["$rootScope","$scope","$q","$state","$stateParams","$timeout","security","moment","levelService","modalService","toastr","fixService","callService","deptService","handleService"],angular.module("nqms").controller("SurveyController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d,m,p){function u(){var e=p.getCacheDeptList();return e?y.metaData.deptList=e.belongedDepts:h=p.getDeptData().then(function(e){return y.metaData.deptList=e.belongedDepts,v(e),e.belongedDepts}),e&&(v(e),h=t.defer(),h.resolve(y.metaData.deptList)),g=i.get().then(function(e){return e?(y.metaData.levelList=e.data.data.lst,e.data.data.lst):void 0}),""!==l.reportCode&&l.reportCode?m.getDetail(l.reportCode).then(function(e){y.formData=e.data.data,g.then(function(e){y.selectedLevel=e.find(function(e){return e.damageLevel===y.formData.damageLevel})}),"function"!=typeof h.then?h.promise.then(function(e){y.selectedDept=e.find(function(e){return e.deptCode===y.formData.deptCode})}):h.then(function(e){y.selectedDept=e.find(function(e){return e.deptCode===y.formData.deptCode})}),y.formData.eventDate=new Date(y.formData.eventTime.split(" ")[0]),y.formData.eventTime=new Date(y.formData.eventTime)}):(y.formData.userName=o.getUserinfo().user.userName,y.formData.eventDate=new Date,y.formData.eventTime=new Date,g)}function v(e){y.metaData.deptList.unshift({deptName:e.deptName,deptCode:e.deptCode})}function f(){y.eventTimeOpen=!y.eventTimeOpen}function b(){var e,t,l=angular.merge({},y.formData);l.deptName=y.selectedDept.deptName,e=n(l.eventDate).format("YYYY-MM-DD"),t=n(l.eventTime).format("HH:mm:ss"),delete l.eventDate,delete l.dept,l.eventTime=n(e+" "+t).format("YYYY-MM-DD HH:mm:ss"),m.save(l).then(function(e){e&&"0"===e.data.code&&(c.success("保存成功！","提示"),r.close("success"),s(function(){a.go("home.call",null,{reload:!0})},500))})}var g,h,y=this;y.formData={},y.metaData={},y.state=a,y.save=b,y.openPicker=f,y.load={func:u,init:!0},y.metaData.eventTypeList=[{code:1,name:"运送中病情变化"},{code:2,name:"误吸"},{code:3,name:"院内压疮"},{code:4,name:"坠床"},{code:5,name:"跌倒"}]}e.$inject=["$scope","$q","$state","$stateParams","$timeout","security","moment","levelService","modalService","toastr","fixService","callService","deptService"],angular.module("nqms").controller("CallFormController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.schedule.batchSaveUserNurse,e).then(c)}function r(e){return a.get(t.schedule.getUserNurses,{params:e}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var d={getUserNurses:r,batchSaveUserNurse:i};return d}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("areaService",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(){var e=a.getUserNurses({deptCode:c}).then(function(e){e&&(r.list=e.data.data.lst)}),l=s.getGroupList({deptCode:c}).then(function(e){e&&0==e.data.code&&(r.groupLst=e.data.data.lst)});return t.all([e,l])}function i(){a.batchSaveUserNurse(r.list).then(function(e){e&&0==e.data.code&&(l.success("保存成功！","提示"),r.load.func())})}var r=this,c=o.getUserinfo().role.deptCode;r.saveArea=i,r.load={func:n,init:!0},e.$on("groupreload",function(){r.load.func()}),e.$on("deptchange",function(e,t){c=t,r.load.func()})}e.$inject=["$scope","$q","areaService","toastr","bedService","security"],angular.module("nqms").controller("DepartmentManagerEndemicAreaController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.schedule.deleteGroup,{seqId:e}).then(d)}function r(e){return a.post(t.schedule.saveGroup,e).then(d)}function c(e){return a.get(t.schedule.getGroupList,{params:e}).then(d)}function d(e){return"0"===e.data.code?e:void 0}var m={getGroupList:c,saveGroup:r,deleteGroup:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("bedService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){return l.getGroupList({deptCode:b}).then(function(t){t&&(f.list=t.data.data.lst,e.$broadcast("groupreload"))})}function r(e){f.formData=angular.extend({},e),f.selectedLevel=e,e&&e.beds&&(f.formData.bedList=e.beds.split(";"))}function c(){f.formData={}}function d(e){var t=a.open({templateUrl:"app/duty/setting/group/group.modal.html",controller:"AddClassCtrl",controllerAs:"vm",backdrop:"static",animation:!0,size:"sm",resolve:{id:function(){return{data:angular.copy(e),dept:b}}}});t.result["finally"](function(){f.load.func()})}function m(){""!==f.flowText&&(f.formData.bedList=f.formData.bedList||[],f.formData.bedList.push(f.flowText),f.flowText="")}function p(e){f.formData.bedList.splice(e,1)}function u(){var e=angular.extend({},f.formData);e.beds=e.bedList?e.bedList.join(";"):"",e.deptCode=f.deptCode,l.saveGroup(e).then(function(e){e&&"0"===e.data.code&&(o.success("保存成功！","提示"),f.load.func(),f.formData={},s.close("success"))})}function v(e){l.deleteGroup(e).then(function(t){t&&"0"===t.data.code&&(o.success("已删除！","提示"),f.load.func(),e==f.formData.seqId&&(f.formData={}),s.close("success"))})}var f=this,b=n.getUserinfo().role.deptCode;f.list=[],f.saveGroup=u,f.edit=r,f.deleteGroup=v,f.formData={},f.add=c,f.deptCode=n.getUserinfo().role.deptCode,f.open=d,t.$on("deptchange",function(e,t){b=t,f.load.func()}),f.removeFlow=p,f.addFlow=m,f.load={func:i,init:!0}}e.$inject=["$rootScope","$scope","$uibModal","bedService","modalService","toastr","security"],angular.module("nqms").controller("DepartmentManagerBedController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(){""!==d.flowText&&(d.formData.bedList=d.formData.bedList||[],d.formData.bedList.push(d.flowText),d.flowText="")}function i(){a.dismiss()}function r(){var t=angular.extend({},d.formData);t.beds=t.bedList?t.bedList.join(";"):"",t.deptCode=m,l.saveGroup(t).then(function(t){t&&"0"===t.data.code&&(e.$broadcast("toast",{type:"success",content:"保存成功"}),a.close("success"))})}function c(e){d.formData.bedList.splice(e,1)}var d=this,m=o.dept,p=o.data;p&&p.beds&&(p.bedList=p.beds.split(";")),d.formData=p||{},d.addFlow=n,d.removeFlow=c,d.cancel=i,d.ok=r}e.$inject=["$rootScope","$scope","$uibModalInstance","bedService","security","id"],angular.module("nqms").controller("AddClassCtrl",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.schedule.deleteClass,{seqId:e}).then(d)}function r(e){return a.post(t.schedule.saveClass,e).then(d)}function c(e){return a.get(t.schedule.getClassList,{params:e}).then(d)}function d(e){return"0"===e.data.code?e:void 0}var m={getClassList:c,saveclass:r,deleteClass:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("classesService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d){function m(){return e.getClassList({deptCode:b.deptCode}).then(function(e){e&&(b.list=e.data.data.lst)})}function p(){g.formData.deptCode=b.deptCode,g.formData.deptName=b.deptName,g.formData.startTime="2099 09:00",g.formData.endTime="2099 18:00",i.open({templateUrl:"app/duty/setting/class/class.modal.html",size:"md",ok:f,data:g})}function u(e){function t(e){var t,a,l;return t="2099-01-01 "+e,a=new Date(t),l=d(a).format("YYYY HH:mm")}g.formData=angular.extend({},e),g.formData.startTime=t(e.startTime),g.formData.endTime=t(e.endTime),p()}function v(t){e.deleteClass(t).then(function(e){e&&"0"===e.data.code&&(n.success("已删除！","提示"),b.load.func(),i.close("success"))})}function f(){var t,a,l=g.formData.startTime,s=g.formData.endTime;t=d(l).format("HH:mm"),a=d(s).format("HH:mm"),g.formData.startTime=t,g.formData.endTime=a,e.saveclass(g.formData).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),b.load.func(),g.formData={},i.close("success"))})}var b=this,g={formData:{},metaData:{}};b.saveclass=f,b.addClasses=p,b.edit=u,b.del=v,b.load={func:m,init:!0},b.deptCode=r.getUserinfo().role.deptCode,b.deptName=r.getUserinfo().role.deptName,g.formData.deptCode=b.deptCode,g.formData.deptName=b.deptName,a.$on("deptchange",function(e,t){b.deptCode=t,b.load.func()})}e.$inject=["classesService","deptService","$scope","$log","$q","$uibModal","toastr","modalService","security","$injector","moment"],angular.module("nqms").controller("DepartmentManagerClassesController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.schedule.apprvScheduleLeave,e).then(m)}function r(e){return a.post(t.schedule.deleteScheduleLeave,{seqId:e}).then(m)}function c(e){return a.post(t.schedule.saveScheduleLeave,e).then(m)}function d(e){return a.get(t.schedule.getLeaveList,{params:e}).then(m)}function m(e){return"0"===e.data.code?e:void 0}var p={getLeaveList:d,saveScheduleLeave:c,deleteScheduleLeave:r,apprvScheduleLeave:i};return p}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("leaveService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){return t.getLeaveList({deptCode:b}).then(function(e){if(e){f.list=e.data.data.lst;for(var t=0;t<f.list.length;t++)f.list[t].startTime=l(new Date(f.list[t].startTime)).format("YYYY-MM-DD"),f.list[t].endTime=l(new Date(f.list[t].endTime)).format("YYYY-MM-DD")}})}function r(t){var a=e.open({templateUrl:"app/duty/leave/leave/leave.modal.html",controller:"LeaveModalCtrl",controllerAs:"vm",backdrop:"static",animation:!0,size:"lg",resolve:{id:function(){return angular.copy(t)}}});a.result["finally"](function(){f.load.func()})}function c(){g.startDate=new Date(g.startTime),g.endDate=new Date(g.endTime)}function d(){g.startTime=l(g.startTime).format("YYYY-MM-DD HH:mm:ss"),g.endTime=l(g.endTime).format("YYYY-MM-DD HH:mm:ss")}function m(e){t.deleteScheduleLeave(e).then(function(e){e&&"0"===e.data.code&&(s.success("已删除！","提示"),f.load.func(),o.close("success"))})}function p(e){g=angular.extend({},e),c(),d(),o.open({templateUrl:"app/duty/leave/leave/review.tpl.html",size:"md",ok:u,data:{formData:g}})}function u(){t.apprvScheduleLeave(g).then(function(e){e&&"0"===e.data.code&&(s.success("保存成功！","提示"),f.load.func(),g={},o.close("success"))})}function v(e){g=angular.extend({},e),g.approveStatus="02",d(),t.apprvScheduleLeave(g).then(function(e){e&&"0"===e.data.code&&(s.success("保存成功！","提示"),f.load.func())})}var f=this,b=n.getUserinfo().role.deptCode,g={};f.open=r,f.del=m,f.review=p,f.upload=v,f.load={func:i,init:!0},a.$on("deptchange",function(e,t){b=t,f.load.func()}),g.deptCode=n.getUserinfo().role.deptCode,g.deptName=n.getUserinfo().role.deptName,g.userCode=n.getUserinfo().user.userCode}e.$inject=["$uibModal","leaveService","$scope","moment","toastr","modalService","security"],angular.module("nqms").controller("DepartmentManagerLeaveController",e)}(),function(){"use strict";function e(e,t,a,l,s){function o(){t.dismiss()}function n(){var e=new Date;e-=e%864e5,m.formData.startDate=m.formData.startTime?new Date(m.formData.startTime):void 0,m.formData.endDate=m.formData.endTime?new Date(m.formData.endTime):void 0,c()}function i(){m.formData.startDate&&(m.endOptions.minDate=m.formData.startDate),m.formData.startDate&&m.formData.endDate&&c()}function r(){m.formData.endDate&&(m.startOptions.maxDate=m.formData.endDate),m.formData.startDate&&m.formData.endDate&&c()}function c(){m.formData.days=(m.formData.endDate-m.formData.startDate)/864e5+1}function d(){function s(e,t){var a,l,s;return a=moment(e).format("YYYY-MM-DD"),l=moment(t).format("HH:mm:ss"),s=moment(a+" "+l).format("YYYY-MM-DD HH:mm:ss")}var o=m.formData.startDate,n=m.formData.startTime,i=m.formData.endDate,r=m.formData.endTime;m.formData.startTime=s(o,n),m.formData.endTime=s(i,r),m.formData.deptCode=l.getUserinfo().role.deptCode,m.formData.deptNme=l.getUserinfo().role.deptNme,a.saveScheduleLeave(m.formData).then(function(a){e.$broadcast("toast"),t.close("success")})}var m=this;m.formData=s||{},m.cancel=o,m.ok=d,n(),m.startOptions={maxDate:m.formData.endDate,showWeeks:!1},m.endOptions={minDate:m.formData.startDate,showWeeks:!1},m.startChange=i,m.endChange=r}e.$inject=["$rootScope","$uibModalInstance","leaveService","security","id"],angular.module("nqms").controller("LeaveModalCtrl",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.schedule.deleteChangeClass,{seqId:e}).then(m)}function r(e){return a.post(t.schedule.saveChangeClass,e).then(m)}function c(e){return a.post(t.schedule.apprvChangeClass,e).then(m)}function d(e){return a.get(t.schedule.getChangeClass,{params:e}).then(m)}function m(e){return"0"===e.data.code?e:void 0}var p={getChangeClass:d,saveChangeClass:r,deleteChangeClass:i,apprvChangeClass:c};return p}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("attemperService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r){function c(){var e=a.getChangeClass({deptCode:D}).then(function(e){e&&(y.list=e.data.data.lst)}),l=n.getClassList({deptCode:D}).then(function(e){e&&(y.classes=e.data.data.lst,y.getClassName=_.memoize(function(e){var t;return _.some(y.classes,function(a){return a.classCode==e?(t=a.className,!0):void 0}),t}))});return t.all([e,l])}function d(e){p(e)}function m(){x={},p()}function p(e){var t=l.open({templateUrl:"app/duty/leave/attemper/attemper.model.html",controller:"AttemperModalCtrl",controllerAs:"vm",backdrop:"static",animation:!0,size:"lg",resolve:{id:function(){return e}}});t.result["finally"](function(){y.load.func()})}function u(e){var t=l.open({templateUrl:"app/duty/leave/attemper/review.tpl.html",controller:"AttemperHandlerCtrl",controllerAs:"vm",backdrop:"static",animation:!0,size:"sm",resolve:{id:function(){return angular.copy(e)}}});t.result["finally"](function(){y.load.func()})}function v(){a.saveChangeClass(x).then(function(e){e&&"0"==e.data.code&&(o.success("保存成功！","提示"),y.load.func(),modalService.close("success"))})}function f(e){a.deleteChangeClass(e).then(function(e){e&&"0"==e.data.code&&(o.success("已删除！","提示"),y.load.func())})}function b(e){var t=[];return t=t.concat(e.user),_.each(e.belongedDepts,function(e,a){t=t.concat(b(e))}),t=_.compact(_.flatten(t))}function g(e){e.createTime=s("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=s("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss"),e.status="02",a.apprvChangeClass(e).then(function(e){y.load.func(),o.success("处理成功！","提示")})}function h(e){return"01"===e.status||"02"===e.status||"03"===e.status}var y=this,D=r.getUserinfo().role.deptCode,x={};y.save=v,y.add=m,y.del=f,y.edit=d,y.load={func:c,init:!0},y.handler=u,y.filter=h,y.upload=g,e.$on("deptchange",function(e,t){D=t,y.load.func()}),i.getDeptData().then(function(e){y.users=b(e),y.getUserName=_.memoize(function(e){var t;return _.some(y.users,function(a){return a.userCode==e?(t=a.userName,!0):void 0}),t})})}e.$inject=["$scope","$q","attemperService","$uibModal","$filter","toastr","classesService","deptService","security"],angular.module("nqms").controller("DepartmentManagerAttemperController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d){function m(){l.dismiss()}function p(){k.formData.createTime&&(k.formData.createTime=a("date")(k.formData.createTime,"yyyy-MM-dd HH:mm:ss")),k.formData.updateTime&&(k.formData.updateTime=a("date")(k.formData.updateTime,"yyyy-MM-dd HH:mm:ss")),k.formData.applyClass=k.applyObj.classCode,k.formData.applyClassDate=k.applyObj.recordDate,k.formData.changeClass=k.changeObj.classCode,k.formData.changeClassDate=k.changeObj.recordDate,s.saveChangeClass(k.formData).then(function(e){i.success("保存成功！","提示"),l.close("success")})}function u(){d.getSchedule(k.apply.params).then(function(e){e&&(k.apply.data=e.data.data,k.apply.list=f(e.data.data.dtls),k.apply.params.weeks=e.data.data.weeks)})}function v(){d.getSchedule(k.change.params).then(function(e){e&&(k.change.data=e.data.data,
k.change.list=f(e.data.data.dtls),k.change.params.weeks=e.data.data.weeks)})}function f(e){return _.forEach(e,function(e){for(var t=1;7>=t;t++)e["week"+t+"class"]=_.compact(_.pluck(e["week"+t],"classCode")),e["week"+t+"meta"]=angular.copy(e["week"+t+"class"])}),e}function b(){v()}function g(e,t){e.classCode&&(k[t+"Obj"]=e)}function h(e,t){return k[t+"Obj"]===e}function y(e){"apply"===e?(k.apply.params.weeks++,u()):(k.change.params.weeks++,v())}function D(e){"apply"===e?(k.apply.params.weeks--,u()):(k.change.params.weeks--,v())}function x(e){e||(e=new Date);var t=e.getFullYear(),a=new Date(t,0,1),l=7-a.getDay()+1,s=Math.floor((e.getTime()-a.getTime())/864e5)+1;return Math.ceil((s-l)/7)+1}var k=this,w=n.getUserinfo().role.deptCode;k.userCode=n.getUserinfo().user.userCode,o.getClassList({deptCode:w}).then(function(e){e&&(k.classes=e.data.data.lst,k.getClassName=_.memoize(function(e){var t;return _.some(k.classes,function(a){return a.classCode==e?(t=a.className,!0):void 0}),t}),k.getClassColor=_.memoize(function(e){var t;return _.some(k.classes,function(a){return a.classCode==e?(t=a.color,!0):void 0}),t}))}),r.getDeptData(w).then(function(e){k.users=e.user}),k.cancel=m,k.ok=p,k.formData=c||{applyUserCode:n.getUserinfo().user.userCode,status:"01"},k.apply={list:null,params:{deptCode:w,weeks:k.formData.applyClassDate?x(new Date(k.formData.applyClassDate)):x()}},k.change={list:null,params:{deptCode:w,weeks:k.formData.applyClassDate?x(new Date(k.formData.changeClassDate)):x()}},k.changeUser=b,k.chooseClass=g,k.nextWeek=y,k.prevWeek=D,k.activeCell=h,u(),v()}e.$inject=["$rootScope","$scope","$filter","$uibModalInstance","attemperService","classesService","security","toastr","deptService","id","turnsService"],angular.module("nqms").controller("AttemperModalCtrl",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){c.formData.createTime=a("date")(c.formData.createTime,"yyyy-MM-dd HH:mm:ss"),c.formData.updateTime=a("date")(c.formData.updateTime,"yyyy-MM-dd HH:mm:ss"),s.apprvChangeClass(c.formData).then(function(e){o.success("处理成功！","提示"),l.close("success")})}function r(){l.dismiss()}var c=this;c.formData=n,c.ok=i,c.cancel=r}e.$inject=["$rootScope","$scope","$filter","$uibModalInstance","attemperService","toastr","id"],angular.module("nqms").controller("AttemperHandlerCtrl",e)}(),function(){"use strict";function e(){return{restrict:"A",templateUrl:function(e,t){return t.tplSrc||""},link:function(e,t){t.addClass("tr-expand")}}}function t(){return{restrict:"A",template:"<i class=\"fa\" ng-class=\"{'fa-caret-right': vm.expanedIndex !== $index, 'fa-caret-down': vm.expanedIndex == $index}\">",link:function(e,t,a){var l=t.parent()[0],s=a.gridExpandMethod,o=e.$parent.vm;o.expanded=!1,t.addClass("td-expand print-remove"),t.unbind().bind("click",function(){var t=l.querySelectorAll("td").length;o.expanded&&o.expanedIndex===e.$index||!s||""===s?(o.expanedIndex=null,o.expanded=!1):(o[s](e.row[a.gridP]),o.expanedIndex=e.$index,o.expanded=!0),e.tdLen=t})}}}angular.module("nqms").directive("gridExpand",e).directive("gridExpandTrigger",t)}(),function(){"use strict";function e(){return{require:"^stTable",template:'<input type="checkbox"/>',scope:{row:"=gridCheckbox"},link:function(e,t,a,l){t.addClass("print-remove"),t.bind("change",function(){e.$apply(function(){l.select(e.row,"multiple")})}),e.$watch("row.isSelected",function(e){var a,l=document.querySelector("#printWindow");l&&(a=l.contentWindow);var s,o="."+Array.prototype.find.call(t.parent()[0].classList,function(e){return e.indexOf("row")>=0});""!==o&&o&&a&&(s=a.document.querySelector(o)),e===!0?(t.parent().addClass("active print-remove"),s&&angular.element(s).addClass("print-remove")):(t.parent().removeClass("active print-remove"),s&&angular.element(s).removeClass("print-remove")),t[0].querySelector("input").checked="undefined"!=typeof e||e?e:!1})}}}angular.module("nqms").directive("gridCheckbox",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<input type="checkbox" ng-model="isAllSelected" />',scope:{all:"="},link:function(e,t){t.parent().addClass("checkbox-td print-remove"),e.$watch("isAllSelected",function(){"undefined"!=typeof e.all&&e.all.forEach(function(t){t.isSelected=e.isAllSelected})}),e.$watch("all",function(t,a){a&&a.forEach(function(e){e.isSelected=!1}),e.isAllSelected=!1})}}}angular.module("nqms").directive("gridCheckAll",e)}(),function(){"use strict";function e(e,t,a){function l(e){var a=r.getNurseList;return t[a.method](a.url,{params:{deptCode:e}})}function s(e){var a=r.updateNurseInfo;return t[a.method](a.url,{comUser:e,dataType:"comUser"})}function o(e){return function(a){var l=r[e].getter;return t[l.method](l.url,{userCode:a})}}function n(e){return function(a){var l=r[e].setter;return t[l.method](l.url,a)}}function i(e){return function(a){var l=r[e].deleter;return t[l.method](l.url,{params:{seqId:a}})}}var r=a.techFiles,c={getNurseList:l,updateNurseInfo:s,getNurseHirReg:o("nurseHirReg"),saveNurseHirReg:n("nurseHirReg"),deleteNurseHirReg:i("nurseHirReg"),getNurseExp:o("nurseExp"),saveNurseExp:n("nurseExp"),deleteNurseExp:i("nurseExp"),getAcademic:o("academic"),saveAcademic:n("academic"),deleteAcademic:i("academic"),getAwardPunish:o("awardPunish"),saveAwardPunish:n("awardPunish"),deleteAwardPunish:i("awardPunish"),getPerAssessment:o("perAssessment"),savePerAssessment:n("perAssessment"),deletePerAssessment:i("perAssessment")};return c}e.$inject=["$window","$http","apiHost"],angular.module("nqms").factory("techFilesService",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(t){o.delNurseJCI(t).then(function(t){e.$broadcast("toast",{type:"success",content:"删除成功"}),r()})}function i(e){var t=a.open({templateUrl:"app/techFiles/techFiles/modal.tpl.html",controller:"TechModalController",backdrop:"static",controllerAs:"vm",animation:!0,size:"xlg",resolve:{id:function(){return angular.extend({deptCode:d.selectedDept},e)}}});t.result["finally"](function(){r()})}function r(e){d.expanedIndex=null,d.expanded=!1,e?d.selectedDept=e:e=d.selectedDept,o.getNurseList(e).then(function(e){d.data=e.data.data.lst})}function c(e){o.getNurseHirReg(e).then(function(e){d.detail.nurseHirReg=e.data.data}),o.getNurseExp(e).then(function(e){d.detail.nurseExp=e.data.data}),o.getAcademic(e).then(function(e){d.detail.academic=e.data.data}),o.getAwardPunish(e).then(function(e){d.detail.awardPunish=e.data.data}),o.getPerAssessment(e).then(function(e){d.detail.perAssessment=e.data.data})}var d=this;d.rootScope=e,d.scope=t,d.del=n,d.open=i,d.load=r,d.loadDetail=c,d.detail={},d.genders=["女","男"],l.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a})})}e.$inject=["$rootScope","$scope","$uibModal","deptService","NgTableParams","techFilesService"],angular.module("nqms").controller("TechFileController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){D.getNurseHirReg(),D.getNurseExp(),D.getAcademic(),D.getAwardPunish(),D.getPerAssessment()}function c(){var t=_.pick(f.detail.info,"deptCode","hisCode","userName","birthday","gender","graduationDate","graduationSchool","education");n.updateNurseInfo(t).then(function(){e.$broadcast("toast",{type:"success",content:"保存成功"})})}function d(){a.dismiss()}function m(e){f.detail[e].push(angular.copy(x[e]))}function p(t,a){var l=n["save"+h(t)],s=D["get"+h(t)],a=angular.extend({},a);v(a),l(a).then(function(){e.$broadcast("toast",{type:"success",content:"保存成功"}),s()})}function u(t,a,l){if(a){var s=n["delete"+h(t)],o=D["get"+h(t)];s(a).then(function(){e.$broadcast("toast",{type:"success",content:"删除成功"}),o()})}else f.detail[t].splice(l,1)}function v(e){for(var t in e)t.indexOf("IsOpen")>-1&&delete e[t];return e.userCode=b.userCode,e.userName=b.userName,e}var f=this,b=i,g=b.userCode,h=l("capitalize"),y=l("filter"),D={getNurseHirReg:function(){n.getNurseHirReg(g).then(function(e){f.detail.nurseHirReg=e.data.data})},getNurseExp:function(){n.getNurseExp(g).then(function(e){f.detail.nurseExp=e.data.data})},getAcademic:function(){n.getAcademic(g).then(function(e){f.detail.academic=e.data.data})},getAwardPunish:function(){n.getAwardPunish(g).then(function(e){f.detail.award=y(e.data.data,{apType:1}),f.detail.punish=y(e.data.data,{apType:2})})},getPerAssessment:function(){n.getPerAssessment(g).then(function(e){f.detail.perAssessment=e.data.data})}},x={nurseHirReg:{},nurseExp:{rank:"一般专科护士"},academic:{},award:{apType:1},punish:{apType:2},perAssessment:{}};o.getDeptData().then(function(e){f.deptData=e.belongedDepts}),f.detail={info:b},f.rankArray=["一般专科护士","高级专科护士","临床护理专家"],f.save=c,f.cancel=d,f.addItem=m,f.saveItem=p,f.removeItem=u,r()}e.$inject=["$rootScope","$scope","$uibModalInstance","$filter","NgTableParams","deptService","techFilesService","id"],angular.module("nqms").controller("TechModalController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){y.getPosStatement(),y.getPreJobTrain(),y.getAssessment(),y.getConEducation(),y.getCprAcls(),y.getEduRecord()}function c(){var t=_.pick(f.detail.info,"seqId","deptCode","hisCode","userName","birthday","gender","graduationDate","graduationSchool","education");n.updateNurseInfo(t).then(function(){e.$broadcast("toast",{type:"success",content:"保存成功"})})}function d(){a.dismiss()}function m(e){f.detail[e].push(angular.copy(D[e]))}function p(t,a){var l=n["save"+h(t)],s=y["get"+h(t)],a=angular.extend({},a);v(a),l(a).then(function(){e.$broadcast("toast",{type:"success",content:"保存成功"}),s()})}function u(t,a,l){if(a){var s=n["delete"+h(t)],o=y["get"+h(t)];s(a).then(function(){e.$broadcast("toast",{type:"success",content:"删除成功"}),o()})}else f.detail[t].splice(l,1)}function v(e){for(var t in e)t.indexOf("IsOpen")>-1&&delete e[t];return e.userCode=b.userCode,e.userName=b.userName,e}var f=this,b=i,g=b.userCode,h=l("capitalize"),y={getPosStatement:function(){n.getPosStatement(g).then(function(e){f.detail.posStatement=e.data.data})},getPreJobTrain:function(){n.getPreJobTrain(g).then(function(e){f.detail.preJobTrain=e.data.data})},getAssessment:function(){n.getAssessment(g).then(function(e){f.detail.assessment=e.data.data})},getConEducation:function(){n.getConEducation(g).then(function(e){f.detail.conEducation=e.data.data})},getCprAcls:function(){n.getCprAcls(g).then(function(e){f.detail.cprAcls=e.data.data})},getEduRecord:function(){n.getEduRecord(g).then(function(e){f.detail.eduRecord=e.data.data})}},D={posStatement:{},preJobTrain:{rank:"全院",assessmentCondition:"合格"},assessment:{},conEducation:{rank:"全院"},cprAcls:{assessmentContent:"合格"},eduRecord:{rank:"全院",assessmentResult:"合格"}};f.detail={info:b},f.rankArray=["全院","护理部","科室"],f.resultArray=["合格","不合格"],f.save=c,f.cancel=d,f.addItem=m,f.saveItem=p,f.removeItem=u,r()}e.$inject=["$rootScope","$scope","$uibModalInstance","$filter","NgTableParams","deptService","techFilesJCIService","id"],angular.module("nqms").controller("JCIModalController",e)}(),function(){"use strict";function e(e,t,a){function l(e){var a=r.getNurseList;return t[a.method](a.url,{params:{deptCode:e}})}function s(e){var a=r.updateNurseInfo;return t[a.method](a.url,{comUser:e,dataType:"comUser"})}function o(e){return function(a){var l=r[e].getter;return t[l.method](l.url,{userCode:a})}}function n(e){return function(a){var l=r[e].setter;return t[l.method](l.url,a)}}function i(e){return function(a){var l=r[e].deleter;return t[l.method](l.url,{params:{seqId:a}})}}var r=a.techFiles,c={getNurseList:l,updateNurseInfo:s,getPosStatement:o("posStatement"),savePosStatement:n("posStatement"),deletePosStatement:i("posStatement"),getPreJobTrain:o("preJobTrain"),savePreJobTrain:n("preJobTrain"),deletePreJobTrain:i("preJobTrain"),getAssessment:o("assessment"),saveAssessment:n("assessment"),deleteAssessment:i("assessment"),getConEducation:o("conEducation"),saveConEducation:n("conEducation"),deleteConEducation:i("conEducation"),getCprAcls:o("cprAcls"),saveCprAcls:n("cprAcls"),deleteCprAcls:i("cprAcls"),getEduRecord:o("eduRecord"),saveEduRecord:n("eduRecord"),deleteEduRecord:i("eduRecord")};return c}e.$inject=["$window","$http","apiHost"],angular.module("nqms").factory("techFilesJCIService",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(t){o.delNurseJCI(t).then(function(t){e.$broadcast("toast",{type:"success",content:"删除成功"}),r()})}function i(e){var t=a.open({templateUrl:"app/techFiles/jci/modal.tpl.html",controller:"JCIModalController",controllerAs:"vm",backdrop:"static",animation:!0,size:"xlg",resolve:{id:function(){return angular.extend({deptCode:d.selectedDept},e)}}});t.result["finally"](function(){r()})}function r(e){d.expanedIndex=null,d.expanded=!1,e?d.selectedDept=e:e=d.selectedDept,o.getNurseList(e).then(function(e){d.data=e.data.data.lst})}function c(e){o.getPosStatement(e).then(function(e){d.detail.posStatement=e.data.data}),o.getPreJobTrain(e).then(function(e){d.detail.preJobTrain=e.data.data}),o.getAssessment(e).then(function(e){d.detail.assessment=e.data.data}),o.getConEducation(e).then(function(e){d.detail.conEducation=e.data.data}),o.getCprAcls(e).then(function(e){d.detail.cprAcls=e.data.data}),o.getEduRecord(e).then(function(e){d.detail.eduRecord=e.data.data})}var d=this;d.rootScope=e,d.scope=t,d.del=n,d.open=i,d.load=r,d.loadDetail=c,d.detail={},d.genders=["女","男"],l.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a})})}e.$inject=["$rootScope","$scope","$uibModal","deptService","NgTableParams","techFilesJCIService"],angular.module("nqms").controller("TechFileJCIController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e){function s(e){l.error("获取用户数据失败！\n"+angular.toJson(e.data,!0))}return a.get(t.users.getUserList,{params:{deptCode:e}}).then(m)["catch"](s)}function i(e){return a.post(t.users.deleteUser,{seqId:e}).then(m)}function r(e){return a.post(t.users.saveUser,e).then(m)}function c(e){return a.post(t.users.saveUserRole,e).then(m)}function d(e){return a.post(t.users.deleteUserRole,e).then(m)}function m(e){return"0"===e.data.code?e:void 0}var p={getUserList:n,deleteUser:i,save:r,saveUserRole:c,deleteUserRole:d};return p}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("usersService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r){function c(e,a){g.selectedDept=e,g.selectedUser=!1,h.formData={deptCode:e,deptName:a},o.getUserList(e).then(function(e){"0"===e.data.code&&(g.list=e.data.data)}),n.getUserList(e).then(function(e){e&&(h.metaData.userList=e,t.info(e))})}function d(e){if(e)h.formData=angular.extend({},h.formData,e);else for(var t in h.formData)h.formData.hasOwnProperty(t)&&"deptCode"!==t&&"deptName"!==t&&delete h.formData[t];i.open({templateUrl:"app/system/users/addUser.tpl.html",ok:u,size:"md",data:h})}function m(e){var t="app/system/users/addExistRole.tpl.html";t="app/system/users/addExistRole.tpl.html",r.getUserRoleList({userId:r.getCacheUser().user.seqId}).then(function(a){y.metaData.roleList=a.data.data,y.metaData.currentUser=e,y.metaData.deptList=angular.extend([],g.deptData.belongedDepts),y.metaData.deptList.unshift({deptCode:g.deptData.deptCode,deptName:g.deptData.deptName}),y.metaData.deptList=angular.extend({},[h.formData]),y.metaData.hadRoleList=g.userRoleList.map(function(e){return e.roleCode}),i.open({templateUrl:t,ok:v,size:"md",data:y})})}function p(e){o.deleteUser(e).then(function(e){e&&"0"===e.data.code&&(s.success("删除成功！","提示"),c(h.formData.deptCode,h.formData.deptName),i.close("success"))})}function u(e){o.save(e).then(function(e){e&&"0"===e.data.code&&(s.success("已保存！","提示"),c(h.formData.deptCode,h.formData.deptName),i.close("success"))})}function v(e){o.saveUserRole(e).then(function(t){t&&"0"===t.data.code&&(s.success("添加成功！","提示"),f(e.seqId),i.close("success"))})}function f(e){r.getUserRoleList({userId:e}).then(function(e){g.userRoleList=e.data.data})}function b(e){o.deleteUserRole(e).then(function(e){e&&"0"===e.data.code&&(s.success("删除成功！","提示"),f(g.selectedUser),i.close("success"))})}var g=this,h={formData:{},metaData:{}},y={formData:{},metaData:{}};l.getDeptData().then(function(e){g.deptData=e}),g.del=p,g.open=d,g.delUserRole=b,g.openRole=m,g.showRole=f,g.selectedDept=null,g.load=c}e.$inject=["$scope","$log","$uibModal","deptService","toastr","usersService","filesService","modalService","security"],angular.module("nqms").controller("UsersController",e)}(),function(){"use strict";function e(e,t,a,l,s){function o(){a.save(i.role).then(function(a){a&&"0"===a.data.code?(s.success("添加成功！","提示"),e.dismiss("cancel"),l.getUserRoleList(),t.$apply()):s.error("保存失败","警告")})}function n(){e.dismiss("cancel")}var i=this;i.cancel=n,i.save=o}e.$inject=["$uibModalInstance","$rootScope","rolesService","security","toastr"],angular.module("nqms").controller("RolesModalController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e){function s(e){return"0"===e.data.code?e:void l.error("获取用户数据失败！\n"+e.data.msg)}function o(e){l.error("获取用户数据失败！\n"+angular.toJson(e.data,!0))}return a.get(t.roles.getHaveFunction,{params:{roleCode:e}}).then(s)["catch"](o)}function i(e){function s(e){return"0"===e.data.code?e:void l.error("获取用户数据失败！\n"+e.data.msg)}function o(e){l.error("获取用户数据失败！\n"+angular.toJson(e.data,!0))}return a.get(t.roles.getNotHaveFunction,{params:{roleCode:e}}).then(s)["catch"](o)}function r(e){return a.post(t.roles.updateRole,e).then(function(e){return"0"===e.data.code?e:null})}function c(e){return a.post(t.roles.saveRole,e).then(function(e){return"0"===e.data.code?e:null})["catch"](function(e){})}function d(e){return a.post(t.roles.deleteRole,e).then(function(e){return"0"===e.data.code?e:null})}var m={getHaveFunction:n,getNotHaveFunction:i,save:c,edit:r,del:d};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("rolesService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c){function d(e){var l=s.getNotHaveFunction(e.roleCode),o=s.getHaveFunction(e.roleCode);g.roleDetail=e,a.all([l,o]).then(function(e){t.info(e),g.notHaveList=e[0]&&"0"===e[0].data.code?e[0].data.data:[],g.hadList=e[1]&&"0"===e[1].data.code?e[1].data.data:[]})}function m(){i.open({templateUrl:"app/system/roles/addRole.tpl.html",size:"md",ok:v})}function p(){var e={seqId:g.roleDetail.seqId,roleCode:g.roleDetail.roleCode};s.del(e).then(function(e){e&&(o.success("该角色已删除","提示"),g.roleDetail=null,b())})}function u(){var e=angular.copy(g.roleDetail),a=[];e.funs=angular.copy(g.hadList),e.funs.forEach(function(e,t){a=a.concat(e.child),e.child=[]}),e.funs=e.funs.concat(a),delete e.updateTime,delete e.createTime,t.info(e),s.edit(e).then(function(e){t.info(e),e&&"0"===e.data.code?(o.success("保存成功！","提示"),t.info(g.hadList)):o.error(e.data.msg,"警告")})}function v(e){s.save(e).then(function(e){e&&"0"===e.data.code?(o.success("添加成功！","提示"),i.close("success"),b()):o.error("保存失败","警告")})}function f(e,t,a,l,s){var o,n="add"===s?g.hadList:g.notHaveList,i="add"===s?g.notHaveList:g.hadList;n.some(function(a,l){return a.funCode===e.funCode?(a.child.push(t),!0):void(l===n.length-1&&(o=angular.copy(e),o.child=[t],n.push(o)))}),0===n.length&&(o=angular.copy(e),o.child=[t],n.push(o)),e.child.splice(l,1),0===e.child.length&&i.splice(a,1)}function b(){r.getUserRoleList().then(function(e){g.roleData=e.data.data})}var g=this;r.getUserRoleList().then(function(e){g.roleData=e.data.data});g.del=p,g.edit=u,g.open=m,g.navExchange=f,g.load=d}e.$inject=["$scope","$log","$q","$uibModal","rolesService","toastr","NgTableParams","modalService","security","$injector"],angular.module("nqms").controller("RolesController",e)}(),function(){"use strict";function e(e,t,a){function l(e){return function(t){var l=n[e].getter;return a[l.method](l.url,{params:t})}}function s(){return function(e){var t=n.calendar.setter;return a.get(t.url,{params:e})}}function o(e,t){return function(l){var s=n[e][t]||n[e].setter;return a[s.method](s.url,l)}}var n=t.system,i={getDate:l("calendar"),updateDate:o("calendar","update"),createDate:s()};return i}e.$inject=["$window","apiHost","$http"],angular.module("nqms").factory("calendarService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){o.getDate(h.loadParams).then(function(t){if(t&&"0"===t.data.code){var l=0;if(0===t.data.data.length)return h.isEmpty=!0,void e.$broadcast("toast",{type:"warning",content:"系统没有"+h.loadParams.year+"年的日历，如需使用请创建。"});h.isEmpty=!1,h.dataList=p(t.data.data);for(var s in h.dataList)if(h.dataList.hasOwnProperty(s)){if(0===l){l=h.dataList[s].length;break}++l}h.placeholderArr=new Array(7-l),a.info(h.dataList)}})}function c(){h.loadParams={year:(new Date).getFullYear(),month:(new Date).getMonth()+1},r()}function d(){h.loadParams.month++,h.loadParams.month>12&&(h.loadParams.month=1,h.loadParams.year++),r()}function m(){h.loadParams.month--,h.loadParams.month<1&&(h.loadParams.month=12,h.loadParams.year--),r()}function p(e){var t,a,l={},s=[["monday","星期一"],["tuesday","星期二"],["wednesday","星期三"],["thursday","星期四"],["friday","星期五"],["saturday","星期六"],["sunday","星期天"]],o=0;if(h.weeks=s,e&&Array.isArray(e)){for(t=0;t<e.length;t+=1)o=Number(e[t].weekDay)-1,a=u(e[t],{weekText:s[o][1],day:new Date(e[t].date).getUTCDate(),isHoliday:e[t].isHoliday?parseInt(e[t].isHoliday):0,isWeekend:e[t].isWeekend?parseInt(e[t].isWeekend):0}),l["week_"+a.weeks]||(l["week_"+a.weeks]=[]),l["week_"+a.weeks].push(a);return l}}function u(e,t){return angular.merge({},e,t)}function v(e){n.open({templateUrl:"app/system/calendar/calendarSetting.modal.html",size:"sm",ok:g,data:{formData:angular.extend({},e)}})}function f(){n.open({templateUrl:"app/system/calendar/calendarCreate.modal.html",size:"sm",ok:b})}function b(t){a.info(t),o.createDate(t).then(function(t){"0"===t.data.code&&(e.$broadcast("toast",{type:"success",content:"创建成功"}),n.close("success"))})}function g(t){delete t.day,delete t.weekText,t.createTime=i(t.createTime).format("YYYY-MM-DD hh:mm:ss"),o.updateDate(t).then(function(t){"0"===t.data.code&&(e.$broadcast("toast",{type:"success",content:"修改成功"}),r(),n.close("success"))})}var h=this;h.open=f,h.openSetting=v,h.loadParams={year:(new Date).getFullYear(),month:(new Date).getMonth()+1},h.nextMonth=d,h.previousMonth=m,h.resetCalendar=c,h.isEmpty=!1,h.currentDate=i().format("YYYY-MM-DD"),r()}e.$inject=["$rootScope","$scope","$log","$q","$uibModal","calendarService","modalService","moment"],angular.module("nqms").controller("CalendarController",e)}(),function(){"use strict";angular.module("nqms").controller("PatientSatStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){i()}function i(){var e=r("sat"),t=d.sat.config;t.legend.data=_.pluck(e,"name"),t.series[0].data=e,l.updateEchartsInstance(d.sat.identity,t)}function r(e){d.lst.forEach(function(e){e.value=_.random(5,10)});var t=[];return t.push({name:"满意",value:_.random(2e3,3e3)}),t.push({name:"良好",value:_.random(1e3,2e3)}),t.push({name:"不满意",value:_.random(0,1e3)}),t}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.filter={date:new Date},d.lst=[{key:"就诊环境"},{key:"床旁护理"},{key:"住院环境"},{key:"检查水平"},{key:"医护专业水准"}],c(),e.$watch("vm.filter.date",function(e){n()}),e.$watch("vm.filter.type",function(e){n()}),e.$watch("vm.filter.deptCode",function(e){n()}),d.dateOptions={datepickerMode:"month",minMode:"month"},d.sat={identity:l.generateInstanceIdentity(),dimension:"16:9",config:s.pieInit("患者满意度")}}])}(),function(){"use strict";angular.module("nqms").controller("NurseSatStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){i()}function i(){var e=r("sat"),t=d.sat.config;t.legend.data=_.pluck(e,"name"),t.series[0].data=e,l.updateEchartsInstance(d.sat.identity,t)}function r(e){d.lst.forEach(function(e){e.value=_.random(5,10)});var t=[];return t.push({name:"满意",value:_.random(2e3,3e3)}),t.push({name:"良好",value:_.random(1e3,2e3)}),t.push({name:"不满意",value:_.random(0,1e3)}),t}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.filter={date:new Date},d.lst=[{key:"工作环境"},{key:"工作氛围"},{key:"个人发展"},{key:"工资水平"}],c(),e.$watch("vm.filter.date",function(e){n()}),e.$watch("vm.filter.type",function(e){n()}),e.$watch("vm.filter.deptCode",function(e){n()}),d.dateOptions={datepickerMode:"month",minMode:"month"},d.sat={identity:l.generateInstanceIdentity(),dimension:"16:9",config:s.pieInit("护士满意度")}}])}(),function(){"use strict";angular.module("nqms").controller("ResearchStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){i()}function i(){var e=r("proj"),t=r("paper"),a=d.proj.config;a.legend.data=_.pluck(e.data,"name"),a.series[0].data=e.data;var s=d.paper.config;s.legend.data=_.pluck(t.data,"name"),s.series[0].data=t.data,d.baseData={proj:e.total,paper:t.total},l.updateEchartsInstance(d.proj.identity,a),l.updateEchartsInstance(d.paper.identity,s)}function r(e){var t,a=[];return"proj"===e?(t=_.random(2,20),a.push({name:"成功",value:_.random(0,t)}),a.push({name:"失败",value:t-a[0].value})):(t=_.random(5,50),a.push({name:"国家级",value:_.random(0,t)}),a.push({name:"省级发表",value:t-a[0].value})),{total:t,data:a}}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.filter={date:new Date},c(),e.$watch("vm.filter.date",function(e){n()}),e.$watch("vm.filter.deptCode",function(e){n()}),d.dateOptions={datepickerMode:"year",minMode:"year"},d.proj={identity:l.generateInstanceIdentity(),dimension:"16:9",config:s.pieInit("科研项目")},d.paper={identity:l.generateInstanceIdentity(),dimension:"16:9",config:s.pieInit("科研论文")}}])}(),function(){"use strict";angular.module("nqms").controller("QualityStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){i()}function i(){var e=r(),t=d.quality.config;m.forEach(function(a,l){p.forEach(function(a,s){var o=_.pluck(_.values(e[l]),s);t.series[l].data[s]={value:o,name:a}})}),console.log(t),l.updateEchartsInstance(d.quality.identity,t)}function r(){var e=[];return m.forEach(function(t){var a={};t.categories.forEach(function(e){a[e]=[_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100)]}),e.push(a)}),e}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.filter={date:new Date},c(),e.$watch("vm.filter.date",function(e){n()}),e.$watch("vm.filter.type",function(e){n()}),e.$watch("vm.filter.deptCode",function(e){n()}),d.dateOptions={datepickerMode:"year",minMode:"year"};var m=[{name:"临床护理表",categories:["书写标准","签名正规","人数相符","运用医学术语","特殊用药"]},{name:"危重护理表",categories:["按时检查","及时反馈","上报情况","特殊情况"]}],p=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],u=s.radarInit("护理质控",p);u.tooltip.formatter=function(e){var t=u.series[e.seriesIndex].radarIndex||0,a=u.radar[t].indicator,l=e.seriesName+" "+e.name;return a.forEach(function(t,a){l+="<br>"+t.text+" : "+e.value[a]}),l},m.forEach(function(e,t){var a=[];e.categories.forEach(function(e){a.push({text:e,max:100})}),u.radar.push({indicator:a,center:[25+50*t+"%","50%"],radius:100}),u.series.push(_.extend({radarIndex:t,name:e.name},angular.copy(u.serie)))}),d.quality={identity:l.generateInstanceIdentity(),dimension:"16:9",config:u}}])}(),function(){"use strict";angular.module("nqms").controller("NurseManagerStatTransferCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){d.deptData?i():c().then(i)}function i(){var e=d.transfer.config,t=r();e.yAxis[0].data=_.keys(t),e.series[0].data=_.pluck(_.values(t),0),e.series[1].data=_.pluck(_.values(t),1),l.updateEchartsInstance(d.transfer.identity,e)}function r(){d.baseData={total:_.random(400,500),transfer:_.random(20,100),increase:_.random(5,30),leave:_.random(5,30)};var e=_.pluck(d.deptData.belongedDepts,"deptName"),t={};return e.forEach(function(e){t[e]=[_.random(0,10),_.random(0,10)]}),t}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.date=new Date,e.$watch("vm.date",function(e){n()}),d.dateOptions={datepickerMode:"month",minMode:"month"};var m=s.horBarInit(["转入","转出"]);d.transfer={identity:l.generateInstanceIdentity(),dimension:"9:16",config:m}}])}(),function(){"use strict";angular.module("nqms").controller("NurseManagerStatFormCtrl",["$scope","$interval","$timeout","$echarts","chartsService",function(e,t,a,l,s){function o(){var e=n.level.config;e.legend.data=_.pluck(i,"name"),e.series[0].data=i;var t=n.edu.config;t.legend.data=_.pluck(r,"name"),t.series[0].data=r;var a=n.age.config;a.legend.data=_.pluck(c,"name"),a.series[0].data=c;var l=n.gender.config;l.legend.data=_.pluck(d,"name"),l.series[0].data=d;var s=n.political.config;s.legend.data=_.pluck(m,"name"),s.series[0].data=m}var n=this,i=[{value:12,name:"专科护士"},{value:116,name:"高级责任护士"},{value:213,name:"责任护士"},{value:198,name:"助理护士"}],r=[{value:167,name:"专科"},{value:207,name:"本科"},{value:129,name:"硕士"},{value:3,name:"博士"}],c=[{value:279,name:"21~30"},{value:207,name:"31~40"},{value:79,name:"41~50"},{value:23,name:"其他"}],d=[{value:478,name:"女"},{value:13,name:"男"}],m=[{value:367,name:"群众"},{value:163,name:"党员"}];n.level={identity:l.generateInstanceIdentity(),dimension:"16:9",config:s.pieInit("人员层级")},n.edu={identity:l.generateInstanceIdentity(),dimension:"16:9",config:s.pieInit("学历")},n.age={identity:l.generateInstanceIdentity(),dimension:"16:9",config:s.pieInit("年龄")},n.gender={identity:l.generateInstanceIdentity(),dimension:"16:9",config:s.pieInit("性别")},n.political={identity:l.generateInstanceIdentity(),dimension:"16:9",config:s.pieInit("政治面貌")},o()}])}(),function(){"use strict";angular.module("nqms").controller("MalCaseStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){i()}function i(){var e=r();u=e[1];var t=d.mal.config;t.xAxis[0].data=_.keys(e[0]),m.forEach(function(a,l){t.series[l].data=_.pluck(_.values(e[0]),l)}),l.updateEchartsInstance(d.mal.identity,t)}function r(e){var t=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],a={},l={};return t.forEach(function(e){a[e]=[_.random(10,30),_.random(10,30),_.random(10,30),_.random(10,30)]}),t.forEach(function(e){l[e]=[_.random(10,30),_.random(10,30),_.random(10,30),_.random(10,30)]}),[a,l]}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.filter={date:new Date},c(),e.$watch("vm.filter.date",function(e){n()}),e.$watch("vm.filter.deptCode",function(e){n()}),d.dateOptions={datepickerMode:"year",minMode:"year"};var m=["跌倒","压疮","误床","坠床"],p=s.lineInit("不良事件",m),u=null;p.tooltip.trigger="item",p.tooltip.formatter=function(e){console.log(e);var t="",a="";return t=d.filter.date.getFullYear()+" : "+e.data,a=d.filter.date.getFullYear()-1+" : "+u[e.name][m.indexOf(e.seriesName)],
e.seriesName+" - "+e.name+"<br>"+t+"<br>"+a},d.mal={identity:l.generateInstanceIdentity(),dimension:"16:9",config:p}}])}(),function(){"use strict";angular.module("nqms").controller("ExamStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){i()}function i(){var e=r("exam"),t=r("train"),a=d.exam.config;a.legend.data=_.pluck(e,"name"),a.series[0].data=e;var s=d.train.config;s.legend.data=_.pluck(t,"name"),s.series[0].data=t,l.updateEchartsInstance(d.exam.identity,a),l.updateEchartsInstance(d.train.identity,s)}function r(e){var t=[];return"exam"===e?(t.push({name:"优秀",value:_.random(100,200)}),t.push({name:"良好",value:_.random(200,300)}),t.push({name:"及格",value:_.random(100,200)}),t.push({name:"不及格",value:_.random(0,100)})):(t.push({name:"签到",value:_.random(400,500)}),t.push({name:"缺勤",value:_.random(0,100)})),t}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.filter={date:new Date},c(),e.$watch("vm.filter.date",function(e){n()}),e.$watch("vm.filter.type",function(e){n()}),e.$watch("vm.filter.deptCode",function(e){n()}),d.dateOptions={datepickerMode:"month",minMode:"month"},d.exam={identity:l.generateInstanceIdentity(),dimension:"16:9",config:s.pieInit("考试")},d.train={identity:l.generateInstanceIdentity(),dimension:"16:9",config:s.pieInit("培训")}}])}(),function(){"use strict";angular.module("nqms").controller("DutyStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){i()}function i(){var e=d.duty.config,t=r();e.yAxis[0].data=_.keys(t),e.series[0].data=_.pluck(_.values(t),0),e.series[1].data=_.pluck(_.values(t),1),e.series[2].data=_.pluck(_.values(t),2),l.updateEchartsInstance(d.duty.identity,e)}function r(){d.baseData={total:_.random(400,500),leave:_.random(20,100),shift:_.random(5,30),refuse:_.random(5,30)};var e=["何诗华","刘铭杨","李向宾","徐一帆","赵圳","夏琼","周荔"],t={};return e.forEach(function(e){t[e]=[_.random(100,200),_.random(0,60),_.random(0,100)]}),t}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.filter={date:new Date},c(),e.$watch("vm.filter.date",function(e){n()}),e.$watch("vm.filter.deptCode",function(e){n()}),d.dateOptions={datepickerMode:"month",minMode:"month"};var m=s.horBarInit(["工作时间","请假时间","夜班时间"]);d.duty={identity:l.generateInstanceIdentity(),dimension:"16:9",config:m}}])}(),function(){"use strict";angular.module("nqms").controller("BedNursingSignStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){i()}function i(){var e=r(),t=d.sign.config;t.xAxis[0].data=_.keys(e),t.series[0].data=_.pluck(_.values(e),0),l.updateEchartsInstance(d.sign.identity,t)}function r(){var e=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],t={};return e.forEach(function(e){t[e]=[_.random(500,2e3)]}),t}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.filter={date:new Date},c(),e.$watch("vm.filter.date",function(e){n()}),e.$watch("vm.filter.deptCode",function(e){n()}),d.dateOptions={datepickerMode:"year",minMode:"year"};var m=s.lineInit("生命体征",["体征采集总量"]);d.sign={identity:l.generateInstanceIdentity(),dimension:"16:9",config:m}}])}(),function(){"use strict";angular.module("nqms").controller("BedNursingPatrolStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){i()}function i(){d.charts.forEach(function(e){var t=r("pie"),a=e.config;a.legend.data=_.pluck(t,"name"),a.series[0].data=t,a.title.text=a.title.text.slice(0,5)+" "+_.random(50,100)+"%",l.updateEchartsInstance(e.identity,a)});var e=r("line"),t=d.chart.config;t.xAxis[0].data=_.keys(e),t.series=[{type:"line",data:_.pluck(_.values(e),0)},{type:"line",data:_.pluck(_.values(e),1)}],l.updateEchartsInstance(d.chart.identity,t)}function r(e){var t=[];return"pie"===e?(t.push({name:"体征巡视",value:_.random(0,500)}),t.push({name:"输液巡视",value:_.random(0,500)}),t.push({name:"病房巡视",value:_.random(0,500)}),t.push({name:"护理治疗巡视",value:_.random(0,500)}),t.push({name:"遗漏巡视",value:_.random(0,500)})):m.forEach(function(e){t[e]=[_.random(0,100)/100,_.random(0,100)/100]}),t}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.filter={date:new Date};var m=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],p=["特级","一级","二级","三级"];d.charts=[],c(),e.$watch("vm.filter.date",function(e){n()}),e.$watch("vm.filter.deptCode",function(e){n()}),d.dateOptions={datepickerMode:"year",minMode:"year"},p.forEach(function(e){d.charts.push({identity:l.generateInstanceIdentity(),dimension:"16:9",config:s.pieInit(e+"合格率")})});var u=s.lineInit("年合格率一览");u.tooltip.formatter=function(e){var t='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e[0].color+'"></span>'+d.filter.date.getFullYear()+" : "+e[0].data,a='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e[1].color+'"></span>'+(d.filter.date.getFullYear()-1)+" : "+e[1].data;return e[0].name+"<br>"+t+"<br>"+a},d.chart={identity:l.generateInstanceIdentity(),dimension:"16:9",config:u}}])}(),function(){"use strict";angular.module("nqms").controller("BedNursingLiqDisStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){i()}function i(){var e=r(),t=d.chart.config;t.series[0].data=_.pluck(_.values(e),0),t.series[1].data=_.pluck(_.values(e),1),t.series[2].data=_.pluck(_.values(e),2),t.series[3].data=_.pluck(_.values(e),3),l.updateEchartsInstance(d.chart.identity,t)}function r(){var e=d.chart.config.xAxis[0].data,t={};return e.forEach(function(e){t[e]=[_.random(500,2e3),_.random(500,2e3),_.random(500,2e3)],t[e][3]=t[e][0]+t[e][1]+t[e][2]}),t}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.filter={date:new Date},c(),e.$watch("vm.filter.date",function(e){n()}),e.$watch("vm.filter.deptCode",function(e){n()}),d.dateOptions={datepickerMode:"year",minMode:"year"},d.chart={identity:l.generateInstanceIdentity(),dimension:"16:9",config:{title:{x:"center",text:"配液统计"},tooltip:{trigger:"axis"},legend:{top:"30",data:["备药","审核","配液","配液总量"]},xAxis:[{type:"category",data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}],yAxis:[{type:"value"}],series:[{name:"备药",type:"bar",data:[]},{name:"审核",type:"bar",data:[]},{name:"配液",type:"bar",data:[]},{name:"配液总量",type:"line",data:[]}]}}}])}(),function(){"use strict";angular.module("nqms").controller("BedNursingDoctorStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){i()}function i(){var e=r(),t=d.chart.config;t.series[0].data=_.pluck(_.values(e),0),t.series[1].data=_.pluck(_.values(e),1),t.series[2].data=_.pluck(_.values(e),2),l.updateEchartsInstance(d.chart.identity,t)}function r(){var e=d.chart.config.xAxis[0].data,t={};return e.forEach(function(e){t[e]=[_.random(500,2e3),_.random(0,500)],t[e][2]=t[e][0]+t[e][1]}),t}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.filter={date:new Date},c(),e.$watch("vm.filter.date",function(e){n()}),e.$watch("vm.filter.deptCode",function(e){n()}),d.dateOptions={datepickerMode:"year",minMode:"year"},d.chart={identity:l.generateInstanceIdentity(),dimension:"16:9",config:{title:{x:"center",text:"医嘱统计"},tooltip:{trigger:"axis"},legend:{top:"30",data:["成功核对","近似出错","执行总量"]},xAxis:[{type:"category",data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}],yAxis:[{type:"value"}],series:[{name:"成功核对",type:"bar",data:[]},{name:"近似出错",type:"bar",data:[]},{name:"执行总量",type:"line",data:[]}]}}}])}(),function(){"use strict";angular.module("nqms").controller("BedNursingDocStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(e,t,a,l,s,o){function n(){i()}function i(){d.charts.forEach(function(e,t){var a=r(),s=e.config;s.series[0].data=a,s.title.text=s.title.text.slice(0,m[t].length+3)+" "+_.random(50,100)+"%",l.updateEchartsInstance(e.identity,s)})}function r(){d.baseData={miss:_.random(3,12)+"%",qualified:_.random(70,98)+"%"};var e=[];return e.push({name:"遗漏",value:_.random(0,500)}),e.push({name:"修改",value:_.random(0,500)}),e.push({name:"新增",value:_.random(2e3,3e3)}),e}function c(){return o.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})})}var d=this;d.filter={date:new Date};var m=["体温单","护理记录单","压疮报告单","跌倒评估单","疼痛评估单","自理能力评估单"];d.charts=[],c(),e.$watch("vm.filter.date",function(e){n()}),e.$watch("vm.filter.deptCode",function(e){n()}),d.dateOptions={datepickerMode:"month",minMode:"month"},m.forEach(function(e){d.charts.push({identity:l.generateInstanceIdentity(),dimension:"4:3",config:s.pieInit(e+"合格率")})})}])}(),function(){"use strict";function e(e,t,a,l,s,o){function n(t){o.deleteSatTemp(t).then(function(t){e.$broadcast("toast",{type:"success",content:"删除成功"}),r()})}function i(e){var t=a.open({templateUrl:"app/sat/patient/temp.modal.html",controller:"SatPatientTempModalController",controllerAs:"vm",backdrop:"static",animation:!0,size:"lg",resolve:{id:function(){return e}}});t.result["finally"](function(){r()})}function r(){o.getSatTemp().then(function(e){c.lst=e.data.data,c.lst.forEach(function(e){e.createTime=l("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=l("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss"),e.satTempDetailList.forEach(function(e){e.createTime=l("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=l("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss"),e.satOptionList.forEach(function(e){e.createTime=l("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=l("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss")})})})})}var c=this;c.rootScope=e,c.scope=t,c.del=n,c.open=i,c.load=r,r()}e.$inject=["$rootScope","$scope","$uibModal","$filter","NgTableParams","satPatientService"],angular.module("nqms").controller("SatPatientTempController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e){m.formData.satTempDetailList.splice(e,1)}function i(){m.formData.satTempDetailList.push({satOptionList:[{optionContent:"满意"},{optionContent:"基本满意"},{optionContent:"不满意"}]})}function r(){d(m.formData).then(function(){e.$broadcast("toast",{type:"success",content:"保存成功"}),a.close()})}function c(){a.dismiss()}var d,m=this;o?(m.formData=o,d=s.updateSatTemp):(m.formData={satTempDetailList:[],userType:"2"},d=s.saveSatTemp),m.rootScope=e,m.scope=t,m.del=n,m.add=i,m.ok=r,m.cancel=c}e.$inject=["$rootScope","$scope","$uibModalInstance","NgTableParams","satPatientService","id"],angular.module("nqms").controller("SatPatientTempModalController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(t){o.deleteSatResult(t).then(function(t){e.$broadcast("toast",{type:"success",content:"删除成功"}),c()})}function r(e){var t=a.open({templateUrl:"app/sat/patient/result.modal.html",controller:"SatPatientResultModalController",controllerAs:"vm",backdrop:"static",animation:!0,size:"lg",resolve:{id:function(){return e}}});t.result["finally"](function(){c()})}function c(){o.getSatResult(d.params).then(function(e){d.lst=e.data.data,d.lst.forEach(function(e){e.createTime=l("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=l("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss"),e.satResultDetailList.forEach(function(e){e.createTime=l("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=l("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss"),e.satOptionList.forEach(function(e){e.createTime=l("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=l("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss")})})})})}var d=this;n.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a})}),d.rootScope=e,d.scope=t,d.del=i,d.open=r,d.load=c,c()}e.$inject=["$rootScope","$scope","$uibModal","$filter","NgTableParams","satPatientService","deptService"],angular.module("nqms").controller("SatPatientResultController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){d(m.detail).then(function(){e.$broadcast("toast",{type:"success",content:"保存成功"}),a.close()})}function r(){a.dismiss()}function c(){m.tmpCode?(m.detail.resultName=m.getTmpName(m.tmpCode),m.detail.formType=m.getTmpType(m.tmpCode),o.getSatTempByCode(m.tmpCode).then(function(e){m.detail.satResultDetailList=[],e.data.data.satTempDetailList.forEach(function(e,t){var a=_.pick(e,"content","formCode","detailCode"),l=[];e.satOptionList.forEach(function(e,t){var a=_.pick(e,"detailCode","optionCode","optionContent","seqId");l.push(a)}),a.satOptionList=l,m.detail.satResultDetailList.push(a)})})):(m.detail.resultName="",m.detail.formType="",m.detail.satResultDetailList=[])}var d,m=this;o.getSatTemp().then(function(e){m.tmps=e.data.data,m.getTmpName=_.memoize(function(e){var t;return _.some(m.tmps,function(a){return a.formCode==e?(t=a.formName,!0):void 0}),t}),m.getTmpType=_.memoize(function(e){var t;return _.some(m.tmps,function(a){return a.formCode==e?(t=a.formType,!0):void 0}),t})}),s.getDeptData().then(function(e){m.deptData=e}),n?(m.detail=n,d=o.updateSatResult):(m.detail={satResultDetailList:[],userType:"2"},m.detail.satResultDetailList=m.detail.satTempDetailList,d=o.saveSatResult,m.isNew=!0),m.ok=i,m.cancel=r,m.reload=c}e.$inject=["$rootScope","$scope","$uibModalInstance","NgTableParams","deptService","satPatientService","id"],angular.module("nqms").controller("SatPatientResultModalController",e)}(),function(){"use strict";function e(e,t,a){function l(e){return function(a){var l=r[e].getter;return t[l.method](l.url,{params:_.extend({userType:2},a)})}}function s(e){return function(a){var l=r[e].setter;return t[l.method](l.url,a)}}function o(e){return function(a){var l=r[e].deleter;return t[l.method](l.url,{seqId:a})}}function n(e){return function(a){var l=r[e].updater;return t[l.method](l.url,a)}}function i(e){var a=r.satTemp.single;return t[a.method](a.url,{params:{formCode:e}})}var r=a.satisfaction,c={getSatTemp:l("satTemp"),saveSatTemp:s("satTemp"),updateSatTemp:n("satTemp"),deleteSatTemp:o("satTemp"),getSatResult:l("satResult"),saveSatResult:s("satResult"),updateSatResult:n("satResult"),deleteSatResult:o("satResult"),getSatTempByCode:i};return c}e.$inject=["$window","$http","apiHost"],angular.module("nqms").factory("satPatientService",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(t){o.deleteSatTemp(t).then(function(t){e.$broadcast("toast",{type:"success",content:"删除成功"}),r()})}function i(e){var t=a.open({templateUrl:"app/sat/nurse/temp.modal.html",controller:"SatNurseTempModalController",controllerAs:"vm",backdrop:"static",animation:!0,size:"lg",resolve:{id:function(){return e}}});t.result["finally"](function(){r()})}function r(){o.getSatTemp().then(function(e){c.lst=e.data.data,c.lst.forEach(function(e){e.createTime=l("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=l("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss"),e.satTempDetailList.forEach(function(e){e.createTime=l("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=l("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss"),e.satOptionList.forEach(function(e){e.createTime=l("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=l("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss")})})})})}var c=this;c.rootScope=e,c.scope=t,c.del=n,c.open=i,c.load=r,r()}e.$inject=["$rootScope","$scope","$uibModal","$filter","NgTableParams","satNurseService"],angular.module("nqms").controller("SatNurseTempController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e){m.formData.satTempDetailList.splice(e,1)}function i(){m.formData.satTempDetailList.push({satOptionList:[{optionContent:"满意"},{optionContent:"基本满意"},{optionContent:"不满意"}]})}function r(){d(m.formData).then(function(){e.$broadcast("toast",{type:"success",content:"保存成功"}),a.close()})}function c(){a.dismiss()}var d,m=this;o?(m.formData=o,d=s.updateSatTemp):(m.formData={satTempDetailList:[],userType:"1"},d=s.saveSatTemp),m.rootScope=e,m.scope=t,m.del=n,m.add=i,m.ok=r,m.cancel=c}e.$inject=["$rootScope","$scope","$uibModalInstance","NgTableParams","satNurseService","id"],angular.module("nqms").controller("SatNurseTempModalController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(t){o.deleteSatResult(t).then(function(t){e.$broadcast("toast",{type:"success",content:"删除成功"}),c()})}function r(e){var t=a.open({templateUrl:"app/sat/nurse/result.modal.html",controller:"SatNurseResultModalController",controllerAs:"vm",backdrop:"static",animation:!0,size:"lg",resolve:{id:function(){return e}}});t.result["finally"](function(){c()})}function c(){o.getSatResult(d.params).then(function(e){d.lst=e.data.data,d.lst.forEach(function(e){e.createTime=l("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=l("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss"),e.satResultDetailList.forEach(function(e){e.createTime=l("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=l("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss"),e.satOptionList.forEach(function(e){e.createTime=l("date")(e.createTime,"yyyy-MM-dd HH:mm:ss"),e.updateTime=l("date")(e.updateTime,"yyyy-MM-dd HH:mm:ss")})})})})}var d=this;n.getDeptData().then(function(e){d.deptData=e,d.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a})}),d.rootScope=e,d.scope=t,d.del=i,d.open=r,d.load=c,c()}e.$inject=["$rootScope","$scope","$uibModal","$filter","NgTableParams","satNurseService","deptService"],angular.module("nqms").controller("SatNurseResultController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){d(m.detail).then(function(){e.$broadcast("toast",{type:"success",content:"保存成功"}),a.close()})}function r(){a.dismiss()}function c(){m.tmpCode?(m.detail.resultName=m.getTmpName(m.tmpCode),m.detail.formType=m.getTmpType(m.tmpCode),o.getSatTempByCode(m.tmpCode).then(function(e){m.detail.satResultDetailList=[],e.data.data.satTempDetailList.forEach(function(e,t){var a=_.pick(e,"content","formCode","detailCode"),l=[];e.satOptionList.forEach(function(e,t){var a=_.pick(e,"detailCode","optionCode","optionContent","seqId");l.push(a)}),a.satOptionList=l,m.detail.satResultDetailList.push(a)})})):(m.detail.resultName="",m.detail.formType="",m.detail.satResultDetailList=[])}var d,m=this;o.getSatTemp().then(function(e){m.tmps=e.data.data,m.getTmpName=_.memoize(function(e){var t;return _.some(m.tmps,function(a){return a.formCode==e?(t=a.formName,!0):void 0}),t}),m.getTmpType=_.memoize(function(e){var t;return _.some(m.tmps,function(a){return a.formCode==e?(t=a.formType,!0):void 0}),t})}),s.getDeptData().then(function(e){m.deptData=e}),n?(m.detail=n,d=o.updateSatResult):(m.detail={satResultDetailList:[],userType:"1"},m.detail.satResultDetailList=m.detail.satTempDetailList,d=o.saveSatResult,m.isNew=!0),m.ok=i,m.cancel=r,m.reload=c}e.$inject=["$rootScope","$scope","$uibModalInstance","NgTableParams","deptService","satNurseService","id"],angular.module("nqms").controller("SatNurseResultModalController",e)}(),function(){"use strict";function e(e,t,a){function l(e){return function(a){var l=r[e].getter;return t[l.method](l.url,{params:_.extend({userType:1},a)})}}function s(e){return function(a){var l=r[e].setter;return t[l.method](l.url,a)}}function o(e){return function(a){var l=r[e].deleter;return t[l.method](l.url,{seqId:a})}}function n(e){return function(a){var l=r[e].updater;return t[l.method](l.url,a)}}function i(e){var a=r.satTemp.single;return t[a.method](a.url,{params:{formCode:e}})}var r=a.satisfaction,c={getSatTemp:l("satTemp"),saveSatTemp:s("satTemp"),updateSatTemp:n("satTemp"),deleteSatTemp:o("satTemp"),getSatResult:l("satResult"),saveSatResult:s("satResult"),updateSatResult:n("satResult"),deleteSatResult:o("satResult"),getSatTempByCode:i};return c}e.$inject=["$window","$http","apiHost"],angular.module("nqms").factory("satNurseService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.research.deleteResearchPaper,{seqId:e}).then(d)}function r(e){return a.post(t.research.saveResearchPaper,e).then(d)}function c(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.research.getResearchPapers,{params:e}).then(d)}function d(e){return"0"===e.data.code?e:void 0}var m={getResearchPapers:c,saveResearchPaper:r,deleteResearchPaper:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("paperService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){l.getResearchPapers().then(function(e){e&&(u.list=e.data.data.lst)})}function r(e){u.formData=e,p()}function c(){u.formData={},p()}function d(){l.saveResearchPaper(u.formData).then(function(e){e&&"0"===e.data.code&&(o.success("保存成功！","提示"),i(),s.close("success"))})}function m(e){l.deleteResearchPaper(e).then(function(e){e&&"0"===e.data.code&&(o.success("已删除！","提示"),i(),s.close("success"))})}function p(){u.formData.deptCode=u.deptCode,s.open({templateUrl:"app/research/papers/papers.model.html",size:"md",ok:d,data:{formData:u.formData}})}var u=this;u.savePaper=d,u.edit=r,u.deletePapers=m,u.formData={},u.add=c,u.deptCode=n.getUserinfo().role.deptCode,i()}e.$inject=["$scope","$log","$filter","paperService","modalService","toastr","security"],angular.module("nqms").controller("ResearchPapersController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.research.deleteResearchItem,{seqId:e}).then(d)}function r(e){return a.post(t.research.saveResearchItem,e).then(d)}function c(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.research.getResearchItems,{params:e}).then(d)}function d(e){return"0"===e.data.code?e:void 0}var m={getResearchItems:c,saveResearchItem:r,deleteResearchItem:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("researchItemService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){l.getResearchItems().then(function(e){e&&(u.list=e.data.data.lst,u.tableParams=new a({},{dataset:u.lst}))})}function r(e){v=e,p()}function c(){v={},p()}function d(){l.saveResearchItem(v).then(function(e){e&&"0"===e.data.code&&(o.success("保存成功！","提示"),i(),s.close("success"))})}function m(e){l.deleteResearchItem(e).then(function(e){e&&"0"===e.data.code&&(o.success("已删除！","提示"),i(),s.close("success"))})}function p(){v.deptCode=u.deptCode,s.open({templateUrl:"app/research/item/item.model.html",size:"md",ok:d,data:{formData:v}})}var u=this,v={};u.saveGroup=d,u.edit=r,u.deleteGroup=m,u.add=c,u.deptCode=n.getUserinfo().role.deptCode,u.open=p,i()}e.$inject=["$scope","$log","NgTableParams","researchItemService","modalService","toastr","security"],angular.module("nqms").controller("ResearchItemController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){var t=g.getter;return a[t.method](t.url,{params:e})}function r(e){var t=g.setter;return a[t.method](t.url,e)}function c(e){var t=g.deleter;return a[t.method](t.url,{params:e})}function d(e){var l={};return l.seqId=e,a.get(t.qualityManager.deleteQualityTask,{params:l}).then(f)}function m(e){return a.post(t.qualityManager.editQualityTask,e).then(f)}function p(e){return a.post(t.qualityManager.saveQualityTask,e).then(f)}function u(e){return a.get(t.qualityManager.getQualityTaskList,{params:e}).then(f)}function v(){return a.get(t.qualityManager.getAllQualityForm,{}).then(f)}function f(e){return"0"===e.data.code?e:void 0}var b={getTaskList:u,saveTask:p,deleteTask:d,editTask:m,getAllQualityForm:v,getPlan:i,setPlan:r,delPlan:c},g=t.qualityManager.plan;return b}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("taskService",e)}(),function(){"use strict";function e(e,t,a){function l(){return a.getPlan().then(function(e){e&&(n.list=e.data.data)})}function s(e){}function o(){var e=t.open({templateUrl:"app/quality/task/task.modal.html",controller:"QualityTaskModalCtrl",controllerAs:"vm",backdrop:"static",animation:!0,size:"md"});e.result["finally"](function(){n.load.func()})}var n=this;n.del=s,n.open=o,n.load={func:l,init:!0}}e.$inject=["$scope","$uibModal","taskService"],angular.module("nqms").controller("QualityTaskController",e)}(),function(){"use strict";function e(e,t,a,l){function s(){l.setPlan(n.formData).then(function(){$rootScope.$broadcast("toast")})}function o(){e.dismiss()}var n=this;n.ok=s,n.cancel=o,t.getGroup().then(function(e){n.groups=e.data.data}),a.getForm().then(function(e){n.models=e.data.data})}e.$inject=["$uibModalInstance","qualityGroupService","formService","taskService"],angular.module("nqms").controller("QualityTaskModalCtrl",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(){s.getPlan({seqId:$stateParams.id}).then(function(e){c.detail=e.data})}function i(e){s.deleteTask(e).then(function(){c.load.func()})}function r(a,l){if(!c.formData.teamName)return void t.$broadcast("toast",{type:"error",content:"请先选择调查组"});var s=e.open({templateUrl:"app/quality/task/add.modal.html",controller:"QualityTaskAddModalController",controllerAs:"vm",backdrop:"static",animation:!0,size:"md",resolve:{id:function(){return{data:angular.copy(a),userList:_.filter(c.helper.user.users,function(e){return c.currentTeam.userList.indexOf(e.userCode)>-1})}}}});s.result.then(function(e){c.load.func()})}var c=this;c.del=i,c.open=r,c.load={func:n,init:!0},o.getHelper(!0).then(function(e){c.helper=e}),a.getGroup().then(function(e){c.groups=e.data.data}),l.getForm().then(function(e){c.models=e.data.data})}e.$inject=["$uibModal","$rootScope","qualityGroupService","formService","taskService","comService"],angular.module("nqms").controller("QualityTaskAddController",e)}(),function(){"use strict";function e(e,t,a,l){function s(){e.dismiss()}function o(){l.saveTask(n.formData).then(function(){e.close()})}var n=this;n.cancel=s,n.ok=o,n.formData=t.data||{},n.userList=t.userList,a.getDeptHelper().then(function(e){n.depts=e.depts})}e.$inject=["$uibModalInstance","id","comService","taskService"],angular.module("nqms").controller("QualityTaskAddModalController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){var l={};return l.seqId=e,a.get(t.qualityManager.deleteQualityDeal,{params:l}).then(u)}function r(e){return a.post(t.qualityManager.saveQualityDeal,e).then(u)}function c(e){var l={};return e?l.resultCode=e:"",a.get(t.qualityManager.getQualityDealList,{params:l}).then(u)}function d(e){return a.get(t.qualityManager.getQualityResultCode,{params:e}).then(u)}function m(e,l,s){var o={};return e?o.date=e:"",l?o.deptCode=l:"",s?o.formName=s:"",a.get(t.qualityManager.getQualityCheckDetail,{params:o}).then(u)}function p(){var e={};return a.get(t.qualityManager.getAllQualityForm,{params:e}).then(u)}function u(e){return"0"===e.data.code?e:void 0}var v={getDealList:c,saveDeal:r,deleteDeal:i,getChekcDetail:m,getAllQualityForm:p,getResultCode:d};return v}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("dealService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r){function c(e){var t=[];return t=t.concat([_.pick(e,"deptCode","deptName")]),_.each(e.belongedDepts,function(e){t=t.concat(c(e))}),t}function d(){return s.getResultCode(y.queryParams).then(function(e){return e?(y.list=e.data.data,y.list[0].resultCode):void 0})}function m(e){s.getDealList(e).then(function(e){e&&(y.lst=e.data.data,y.tableParams=new a({},{dataset:y.lst}))})}function p(){s.getAllQualityForm().then(function(e){e&&(y.formList=e.data.data,y.tableParams=new a({},{dataset:y.formList}),D.metaData.qualityFormList=angular.extend({},y.formList))})}function u(){D={formData:{},metaData:{}},p(),o.open({templateUrl:"app/quality/deal/addDeal.tpl.html",size:"lg",ok:g,data:D,methodsObj:{qualityFormList:p,checkDetail:v}})}function v(){var e,t,l,n,i=this;D.metaData={},i.formData.checkDetail&&i.formData.checkDetail.taskDate&&i.formData.checkDetail.deptCode&&i.formData.checkDetail.selectForm.formName&&(n=i.formData.checkDetail.taskDate,e=moment(n).format("YYYY-MM-DD"),t=i.formData.checkDetail.deptCode,l=i.formData.checkDetail.selectForm.formName,s.getChekcDetail(e,t,l).then(function(e){e&&(y.get_lst=e.data.data,y.tableParams=new a({},{dataset:y.get_lst}),D.metaData.checkDetailList=angular.extend({},y.get_lst),x=D.metaData.checkDetailList[0].resultCode)}),o.open({templateUrl:"app/quality/deal/checkDetail.tpl.html",size:"md",data:D,methodsObj:{qualityFormList:p,checkDetail:v}}))}function f(e){D.formData=angular.extend({},e),y.selectedLevel=e,e&&(e.deptCode?D.formData.deptList=e.deptCode.split(","):"",e.joinUserName?D.formData.memberList=e.joinUserName.split(","):""),o.open({templateUrl:"app/quality/deal/addDeal.tpl.html",size:"lg",ok:b,data:D,methodsObj:{qualityFormList:p,checkDetail:v}})}function b(){var e=angular.extend({},D.formData),t=e.taskDate;e.deptCode=e.deptList?e.deptList.join(","):"",e.joinUserName=e.memberList?e.memberList.join(","):"",e.formCode=e.formCode.formCode,e.taskDate=moment(t).format("YYYY-MM-DD"),s.saveDeal(e).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),m(),y.formData={},o.close("success"))})}function g(){var e=angular.extend({},D.formData);(e.issueContent||e.reasonAnalysis||e.resDescribe||e.resPlan||e.evaluation)&&(e.formName=e.checkDetail.selectForm.formName,e.resultCode=x,e.issueTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),e.reasonTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),e.resDTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),e.resPTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),e.evaluationTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),e.issueUserCode=k,e.reasonUserCode=k,e.resDUserCode=k,e.resPUserCode=k,e.evaluationUserCode=k,s.saveDeal(e).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),m(),y.formData={},o.close("success"))}))}function h(e){s.deleteDeal(e).then(function(t){t&&"0"===t.data.code&&(n.success("已删除！","提示"),m(),e==y.formData.seqId&&(y.dataForDealModal.formData={}),o.close("success"))})}var y=this,D={formData:{},metaData:{}};y.options={month:{datepickerMode:"month",minMode:"month"}};var x,k=i.getUserinfo().user.userCode;y.add=u,y.saveEdit=b,y.save=g,y.edit=f,y.del=h,y.qualityFormList=p,y.deptCode=i.getUserinfo().role.deptCode,y.checkDetail=v,y.load={func:m,init:!0},y.queryParams={type:"",month:new Date,deptCode:i.getUserinfo().role.deptCode},d().then(m),r.getDeptData().then(function(e){y.deptData=c(e)})}e.$inject=["$scope","$log","NgTableParams","$filter","dealService","modalService","toastr","security","deptService"],angular.module("nqms").controller("QualityDealController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){var l={};return l.seqId=e,a.get(t.qualityManager.deleteQualityCheck,{params:l}).then(d)}function r(e){return a.post(t.qualityManager.editQualityCheck,e).then(d);
}function c(e){return a.get(t.qualityManager.getQualityCheckList,{params:e}).then(d)}function d(e){return"0"===e.data.code?e:void 0}var m={getCheckList:c,saveEditCheck:r,deleteCheck:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("checkService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){f={formData:{},metaData:{}},s.open({templateUrl:"app/quality/check/editCheck.tpl.html",size:"lg",ok:p,data:f,methodsObj:{deptData:v.deptData}})}function c(e){var t=[];return t=t.concat([_.pick(e,"deptCode","deptName")]),_.each(e.belongedDepts,function(e){t=t.concat(c(e))}),t}function d(){var e=angular.extend({},v.queryParams);return e.month=moment(e.month).format("YYYY-MM"),l.getCheckList(e).then(function(e){e&&(v.list=e.data.data)})}function m(e){f.formData=angular.extend({},e),s.open({templateUrl:"app/quality/check/editCheck.tpl.html",size:"lg",ok:p,data:f,methodsObj:{deptData:v.deptData}})}function p(){var e,t,a,n,i,r,c=0;e=angular.extend({},f.formData),i=e.qualityResultDetailList.length;for(var m=0;i>m;m++)r=e.qualityResultDetailList[m].count,c+=Number(r);if(e.count=c,a=e.createTime,e.createTime=moment(a).format("YYYY-MM-DD hh:mm:ss"),a=e.updateTime,e.updateTime=moment(a).format("YYYY-MM-DD hh:mm:ss"),e.qualityResultDetailList){t=e.qualityResultDetailList.length;for(var m=0;t>m;m++)n=e.qualityResultDetailList[m].createTime,e.qualityResultDetailList[m].createTime=moment(n).format("YYYY-MM-DD hh:mm:ss"),e.qualityResultDetailList[m].updateTime=moment(n).format("YYYY-MM-DD hh:mm:ss")}l.saveEditCheck(e).then(function(e){e&&"0"===e.data.code&&(o.success("保存成功！","提示"),d(),v.dataForCheckModal={},s.close("success"))})}function u(e){l.deleteCheck(e).then(function(e){e&&"0"===e.data.code&&(o.success("已删除！","提示"),d(),s.close("success"))})}var v=this,f={formData:{},metaData:{}};v.options={month:{datepickerMode:"month",minMode:"month"}},v.add=r,v.save=p,v.edit=m,v.del=u,v.deptCode=n.getUserinfo().role.deptCode,v.load={func:d,init:!0},v.queryParams={type:"",month:new Date,deptCode:n.getUserinfo().role.deptCode},i.getDeptData().then(function(e){v.deptData=c(e)})}e.$inject=["$scope","$log","$filter","checkService","modalService","toastr","security","deptService"],angular.module("nqms").controller("QualityCheckController",e)}(),function(){"use strict";function e(e,t){function a(t){return e.get(s.getUserList,{params:t})}var l={},s=t.files;return l.getUserList=a,l}e.$inject=["$http","apiHost"],angular.module("nqms").factory("hrSearchService",e)}(),function(){"use strict";function e(e,t,a){function l(){t.getUserList(o.params).then(function(e){o.userData=e.data.data.lst})}function s(e){var t=[];return t=t.concat([_.pick(e,"deptCode","deptName")]),_.each(e.belongedDepts,function(e){t=t.concat(s(e))}),t}var o=this;o.search=l,a.getDeptData().then(function(e){o.deptData=s(e),o.getDeptName=_.memoize(function(e){var t;return _.some(o.deptData,function(a){return a.deptCode==e?(t=a.deptName,!0):void 0}),t})})}e.$inject=["$rootScope","hrSearchService","deptService"],angular.module("nqms").controller("HrSearchController",e)}(),function(){"use strict";function e(e,t,a){function l(t){return e.get(n.getUserList,{params:t})}function s(l){var s=a.user.quit;return e[s.method](s.url,{userType:t.getDicCode("nature","离职"),userCode:l})}var o={},n=a.files;return o.getUserList=l,o.quit=s,o}e.$inject=["$http","$rootScope","apiHost"],angular.module("nqms").factory("hrQuitService",e)}(),function(){"use strict";function e(e,t,a){function l(){return t.getUserList(n.params).then(function(e){n.userData=e.data.data.lst})}function s(e){var t=[];return t=t.concat([_.pick(e,"deptCode","deptName")]),_.each(e.belongedDepts,function(e){t=t.concat(s(e))}),t}function o(a){t.quit(a).then(function(t){e.$broadcast("toast",{type:"success",content:"成功登记离职"})})}var n=this;n.search=l,n.quit=o,a.getDeptData().then(function(e){n.deptData=s(e),n.getDeptName=_.memoize(function(e){var t;return _.some(n.deptData,function(a){return a.deptCode==e?(t=a.deptName,!0):void 0}),t})})}e.$inject=["$rootScope","hrQuitService","deptService"],angular.module("nqms").controller("HrQuitController",e)}(),function(){"use strict";function e(e,t){function a(t){return e.get(s.getUserList,{params:t})}var l={},s=t.files;return l.getUserList=a,l}e.$inject=["$http","apiHost"],angular.module("nqms").factory("hrQrcodeService",e)}(),function(){"use strict";function e(e,t,a){function l(){t.getUserList(o.params).then(function(e){o.userData=e.data.data.lst,console.log(o.userData)})}function s(e){var t=[];return t=t.concat([_.pick(e,"deptCode","deptName")]),_.each(e.belongedDepts,function(e){t=t.concat(s(e))}),t}var o=this;o.search=l,a.getDeptData().then(function(e){o.deptData=s(e)})}e.$inject=["$rootScope","hrQrcodeService","deptService"],angular.module("nqms").controller("HrQrcodeController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r){function c(e){var t={};t[e]=m.count[e],"comUser"==e?(t[e].birthday&&(t[e].birthday=o(t[e].birthday).format("YYYY-MM-DD")),t[e].practiceApproveDate&&(t[e].practiceApproveDate=o(t[e].practiceApproveDate).format("YYYY-MM-DD")),t[e].inductionDate&&(t[e].inductionDate=o(t[e].inductionDate).format("YYYY-MM-DD")),t[e].graduationDate&&(t[e].graduationDate=o(t[e].graduationDate).format("YYYY-MM-DD")),t[e].practiceValidDate&&(t[e].practiceValidDate=o(t[e].practiceValidDate).format("YYYY-MM-DD")),m.count[e].deptCode=l.selectedDeptCode):("comUserFamily"!==e&&(t[e].startDate=o(t[e].startDate).format("YYYY-MM-DD"),t[e].endDate=o(t[e].endDate).format("YYYY-MM-DD")),t[e].map(function(e,t){return e.userCode=l.selectedUser.comUser.userCode,e})),t.dataType=e,l.add(t).then(function(e){e&&(n.success("保存成功！","提示"),l.getUserInfo(m.count.comUser.userCode,m.count.comUser.hisCode).then(function(e){m.accessible=!0,m.rootScope.$broadcast("refreshUserList",l.selectedDeptCode),m.rootScope.$broadcast("refreshUserDetail",e)}))})}function d(){a.dismiss("cancel")}var m=this;m.rootScope=e,m.scope=t,m.deptName=l.selectedDeptName,m.cancel=d,m.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:o(),startingDay:1},m.validationOption={blurTrig:!0},m.accessible=!l.isNew,m.save=c,m.count=l.isNew?{}:angular.extend({},l.selectedUser);var p={comUserPosition:{positionName:"",reviewUnit:"",startDate:"",endDate:""},comUserNursing:{reviewUnit:"",unitLevel:"",deptName:"",position:"",startDate:"",endDate:""},comUserEducation:{educationType:"",leaningTime:"",courseTopics:"",courseContent:"",startDate:"",endDate:""},comUserTraining:{learnContent:"",professional:"",diploma:"",speaker:"",creditType:"",credit:"",funding:"",describe:"",startDate:"",endDate:""},comUserLearning:{school:"",professional:"",diploma:"",diplomaNo:"",degree:"",degreeNo:"",describe:"",startDate:"",endDate:""},comUserFamily:{relation:"",name:"",phone:"",email:"",remark:""}};m.addItem=function(e){m.count[e].push(angular.extend({},p[e]))},m.removeItem=function(e,t,a){a?l.deleteUser(e,a).then(function(a){a&&m.count[e].splice(t,1)}):m.count[e].splice(t,1)},m.openCalender=function(e,t){t?t[e]=!0:m[e]=!0},m.scope.$on("resetCount",function(e,t){m.count=t})}e.$inject=["$rootScope","$scope","$uibModalInstance","filesService","$log","moment","toastr","$window","$controller"],angular.module("nqms").config(["w5cValidatorProvider",function(e){e.config({showError:!1,removeError:!0}),e.setRules({userCode:{number:"必须输入数字"},userName:{required:"姓名不能为空"},duty:{required:"职务不能为空"},email:{required:"邮箱不能为空"},phone:{required:"电话不能为空"},positionName:{required:"必填"},reviewUnit:{required:"必填"}})}]).controller("fileModalController",e)}(),function(){"use strict";function e(e,t,a,l){function s(e,l){return a.get(t.files.getUserDetailInfo,{params:{userCode:e,hisCode:l}}).then(c)}function o(e){function s(e){return"0"===e.data.code?(d.userList=e.data.data.lst,e.data.data.lst):void l.error("获取用户数据失败！\n"+e.data.msg)}return a.get(t.files.getUserList,{params:{deptCode:e}}).then(s)}function n(e){return d.selectedUser=e,e}function i(e){return a.post(t.files.save,e).then(c)}function r(e,l){return a.post(t.files["delete"],{dataType:e,delSeqId:l}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var d={selectedUser:{},isNew:!0,selectedDeptCode:"",userList:[],getUserInfo:s,getUserList:o,setSelectUser:n,add:i,deleteUser:r};return d}e.$inject=["$window","apiHost","$http","$log"],angular.module("nqms").config(["toastrConfig",function(e){e.tapToDismiss=!0,e.timeOut=0}]).factory("filesService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c){function d(e,t){b.selectedDept=e,b.selectedUserCode=!1,b.expanded=!1,b.expanedIndex=null,n.selectedDeptCode=e,n.selectedDeptName=t,n.getUserList(e).then(function(e){a.info("用户数据",e),b.userDataList=e})}function m(e){function t(){l.open({templateUrl:"app/nursingWorkers/files/modal.tpl.html",controller:"fileModalController",backdrop:"static",controllerAs:"vm",animation:!0,size:"xlg"})}n.isNew=!e,e?v(e,t):t()}function p(){r.open({templateUrl:"app/nursingWorkers/files/uploadFile.modal.html",size:"md",data:{formData:{uploader:new c({url:"mnisqm/system/importSysUserExcel"})}}})}function u(e){n.deleteUser("comUser",e.seqId).then(function(e){e&&(i.success("删除成功","提示"),b.scope.$emit("refreshUserList",b.selectedDept))})}function v(e,t){b.selectedUserCode=e,n.getUserInfo(e,"").then(function(e){f(e.data.data,t)})}function f(e,t){b.detail=angular.extend({},e);var a,l=e;for(a in l)l.hasOwnProperty(a)&&h.forEach(function(e){l[a][e]&&(l[a][e]=new Date(l[a][e])),l[a].length>0&&l[a].map(function(t){return t[e]&&(t[e]=new Date(t[e])),t})});n.selectedUser=l,b.rootScope.$broadcast("resetCount",n.selectedUser),t&&t()}var b=this,g=0,h=["birthday","inductionDate","practiceApproveDate","practiceValidDate","graduationDate","startDate","endDate"];b.rootScope=e,b.scope=t,b.uploader=new c,b.isOpen=!0,s.getDeptData().then(function(e){a.info("科室数据",e),b.deptData=e}),a.info(g),b.del=u,b.open=m,b.load=d,b.loadDetail=v,b.openUpload=p,b.scope.$on("refreshUserList",function(e,t){d(t)}),b.scope.$on("refreshUserDetail",function(e,t){b.selectedUserCode=t.comUser.userCode,f(t)})}e.$inject=["$rootScope","$scope","$log","$uibModal","deptService","NgTableParams","filesService","toastr","modalService","FileUploader"],angular.module("nqms").controller("NursingWorkersFileController",e)}(),function(){"use strict";function e(e,t){function a(){var t=c.dept.getter;return e[t.method](t.url)}function l(t){var a=c.dept.setter;return e[a.method](a.url,t)}function s(t){var a=c.dept.deleter;return e[a.method](a.url,{params:{seqId:t}})}function o(t){var a=c.userDept.setter;return e[a.method](a.url,t)}function n(t){var a=c.userDept.deleter;return e[a.method](a.url,{params:{seqId:t}})}function i(a){return e.get(t.user.getDept,{params:{deptCode:a}})}function r(a){function l(e){return"0"===e.data.code?(d.userList=e.data.data.lst,e.data.data.lst):void $log.error("获取用户数据失败！\n"+e.data.msg)}return e.get(t.files.getUserList,{params:{deptCode:a}}).then(l)}var c=t.deptManager,d={getAllDept:a,saveDept:l,deleteDept:s,saveUserDept:o,deleteUserDept:n,getUserDept:i,getUserList:r};return d}e.$inject=["$http","apiHost"],angular.module("nqms").factory("deptMgtService",e)}(),function(){"use strict";function e(e,t,a){function l(){a.getAllDept().then(function(e){i.deptData=e.data.data,i.getDeptName=_.memoize(function(e){var t;return _.some(i.deptData,function(a){return a.deptCode==e?(t=a.deptName,!0):void 0}),t})})}function s(e){i.detail=[],n=e,a.getUserList(e).then(function(e){i.detail=e})}function o(e){a.saveUserDept(_.pick(e,"userCode","deptCode")).then(function(e){s(n)})}var n,i=this;l(),i.loadDetail=s,i.open=function(e){var a=t.open({templateUrl:"app/nursingWorkers/dept/dept.modal.html",controller:"DeptModalController",backdrop:"static",controllerAs:"vm",animation:!0,size:"sm",resolve:{id:function(){return angular.copy(e)}}});a.result.then(function(){l()})},i.del=function(t){a.deleteDept(t).then(function(){e.$broadcast("toast",{type:"success",content:"操作成功"}),l()})},i.save=o}e.$inject=["$rootScope","$uibModal","deptMgtService"],angular.module("nqms").controller("DeptController",e)}(),function(){"use strict";function e(e,t,a,l){function s(){t.dismiss()}function o(){var l=_.pick(n.detail,"deptCode","deptName","fatherDept","seqId");a.saveDept(l).then(function(a){e.$broadcast("toast",{type:"success",content:"操作成功"}),t.close()})}var n=this;n.cancel=s,n.ok=o,n.detail=l?l:{},a.getAllDept().then(function(e){n.deptData=e.data.data})}e.$inject=["$rootScope","$uibModalInstance","deptMgtService","id"],angular.module("nqms").controller("DeptModalController",e)}(),function(){"use strict";function e(e,t,a,l,s){function o(e){return l.post(D.save,{comUser:e,dataType:"comUser"})}function n(e,t){return l.get(a.files.getUserDetailInfo,{params:{userCode:e,hisCode:t}}).then(h)}function i(e){return l.get(a.files.getDimissionUserList,{params:{deptCode:e}}).then(h)}function r(e){function t(e){return"0"===e.data.code?(y.userList=e.data.data.lst,e.data.data.lst):void s.error("获取用户数据失败！\n"+e.data.msg)}return l.get(a.files.getUserList,{params:{deptCode:e}}).then(t)}function c(e){return l.get(a.files.getUserStatistics,{params:{deptCode:e}}).then(h)}function d(e){return y.selectedUser=e,e}function m(e){return l.post(a.files.save,e).then(h)}function p(e,t){return l.post(a.files.saveUserDept,{userCode:e,deptCode:t}).then(h)}function u(t){var s=a.user.quit;return l[s.method](s.url,{userType:e.getDicCode("nature","离职"),userCode:t})}function v(t){var s=a.user.quit;return l[s.method](s.url,{userType:e.getDicCode("nature","退休"),userCode:t})}function f(e){return l[a.user.getComUserChange.method](a.user.getComUserChange.url,{params:{userCode:e}}).then(h)}function b(e,t){return l.post(a.files["delete"],{dataType:e,delSeqId:t}).then(h)}function g(e){return l.post(a.files.saveChange,e).then(h)}function h(e){return"0"===e.data.code?e:void 0}var y={selectedUser:{},isNew:!0,selectedDeptCode:"",userList:[],getUserInfo:n,getUserList:r,getComUserChange:f,getDimission:i,setSelectUser:d,getUserStatistics:c,add:m,deleteUser:b,saveUser:o,saveUserDept:p,saveChange:g,quit:u,retire:v},D=a.files;return y}e.$inject=["$rootScope","$window","apiHost","$http","$log"],angular.module("nqms").config(["toastrConfig",function(e){e.tapToDismiss=!0,e.timeOut=0}]).factory("baseInfoService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r){function c(e,t){var o=l.getCacheDeptList();o&&!t?d(o,e):l.getDeptData().then(function(t){d(t,e)}),s.getDimission(i.getUserinfo().role.deptCode).then(function(e){g.dimissionData=e.data.data.lst}),e?(a.go("home.baseInfo.detail",{hisCode:e.hisCode,deptN:"",deptCode:""}),g.selectedNode={}):g.selectedNode.deptName?"BaseInfoDetailCtrl"!==a.current.controller&&a.go("home.baseInfo.stat",{id:g.selectedNode.deptCode}):g.selectedNode.hisCode?a.go("home.baseInfo.detail",{hisCode:g.selectedNode.hisCode,deptN:"",deptCode:""}):g.selectedNode.userCode?a.go("home.baseInfo.detail",{id:g.selectedNode.userCode,deptN:"",deptCode:""}):a.go("home.baseInfo.stat",{id:i.getUserinfo().role.deptCode})}function d(e,t){g.deptData=e,g.treeData=[p(e)],0===Object.keys(g.selectedNode).length&&(g.expandedNodes=[g.treeData[0]],g.selectedNode=g.treeData[0]),g.scope.$watch("vm.filterText",function(e){e?g.expandedNodes=[].concat(g.treeData[0]).concat(g.treeData[0].children):g.expandedNodes=[g.treeData[0]]})}function m(t){g.selectedNode!==t&&(g.selectedNode=t,e.$broadcast("loading","tree"),t.deptName?a.go("home.baseInfo.stat",{id:t.deptCode}):a.go("home.baseInfo.detail",{id:t.userCode,hisCode:t.hisCode,dept:t.deptCode,deptN:t.deptN}),sessionStorage.setItem("selectedNode",angular.toJson(t)),e.$broadcast("loaded","tree"))}function p(e,t){var a={};return a.deptCode=e.deptCode,a.deptName=e.deptName,_.each(e.belongedDepts,function(t,a){e.belongedDepts[a]=p(t,a)}),Array.isArray(e.user)&&e.user.forEach(function(t){t.deptCode=e.deptCode,t.deptN=e.deptName}),a.children=_.compact([].concat(e.user,e.belongedDepts)),a}function u(){o.open({templateUrl:"app/nursingWorkers/baseInfo/uploadFile.modal.html",size:"md",data:{formData:{uploader:new n({url:"mnisqm/system/importSysUserExcel"})}}})}function v(){o.open({templateUrl:"app/nursingWorkers/baseInfo/add.modal.html",size:"md",data:{formData:{}},ok:function(e){f(e)}})}function f(t){var a={};a.dataType="comUser",a.comUser=t,s.add(a).then(function(t){t&&(e.$broadcast("toast",{type:"success",content:"保存成功！"}),o.close("success"),c(a.comUser,!0))})}function b(){g.isIncumbency=!g.isIncumbency}var g=this;g.scope=t,g.openUpload=u,g.openAdd=v,g.switchType=b,g.stateParam=r,g.isIncumbency=!0,g.treeOption={allowDeselect:!1},g.isTopDept=i.getUserinfo().role.isTopDept;try{g.selectedNode=angular.fromJson(sessionStorage.getItem("selectedNode"))||{}}catch(h){g.selectedNode={}}c(),g.select=m,t.$on("refreshTree",c)}e.$inject=["$rootScope","$scope","$state","deptService","baseInfoService","modalService","FileUploader","security","$stateParams"],angular.module("nqms").controller("BaseInfoCtrl",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r){function c(){n.getUserStatistics(s.id).then(function(e){var t,l=e.data.data;for(t in l)l.hasOwnProperty(t)&&l[t]&&(l[t]=l[t].map(function(e){return{value:e.sitcValue,name:e.sticType}}));for(t in m.stastics)m.stastics.hasOwnProperty(t)&&m.stastics[t]&&(m.stastics[t].config.legend.data=_.pluck(l[t],"name"),m.stastics[t].config.series[0].data=l[t],a.updateEchartsInstance(m.stastics[t].identity,m.stastics[t].config))})}function d(e){var a={deptCode:e.deptCode,deptN:t.$parent.vm.selectedNode.deptName,userCode:e.userCode,userName:e.userName};l.go("home.baseInfo.detail",{id:e.userCode,deptN:t.$parent.vm.selectedNode.deptName,dept:e.deptCode}),sessionStorage.setItem("selectedNode",angular.toJson(a)),t.$parent.vm.selectedNode=a}e.$broadcast("loaded","tree");var m=this;m.total=0,m.activeCount=0,m.inviteCount=0,m.scope=t,m.goDetail=d,m.stastics={duty:{identity:a.generateInstanceIdentity(),dimension:"4:3",config:o.pieInit("职务")},technicalPost:{identity:a.generateInstanceIdentity(),dimension:"4:3",config:o.pieInit("职称")},teachLevel:{identity:a.generateInstanceIdentity(),dimension:"4:3",config:o.pieInit("带教")},clinical:{identity:a.generateInstanceIdentity(),dimension:"4:3",config:o.pieInit("临床层级")},education:{identity:a.generateInstanceIdentity(),dimension:"4:3",config:o.pieInit("学历")}},c(),n.getUserList(s.id).then(function(e){m.userDataList=e,m.deptTotal=e.length,m.activeCount=e.filter(function(e){return"03"===e.userType}).length,m.inviteCount=e.filter(function(e){return"05"===e.userType}).length})}e.$inject=["$rootScope","$scope","$echarts","$state","$stateParams","chartsService","baseInfoService","deptService","$q"],angular.module("nqms").controller("BaseInfoStatCtrl",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){var e=l.id,t=l.hisCode;return t&&(e=""),s.getUserInfo(e,t).then(function(e){g.detail=e.data.data,g.originalDetail=angular.merge({},g.detail)})}function c(e){o.open({templateUrl:"app/common/confirm/confirm.tpl.html",size:"sm",ok:4===e?p:u,data:{metaData:{title:function(){switch(e){case 4:return"确定登记为离职吗？";case 6:return"确定登记为退休吗？"}}()},formData:g.detail.comUser.userCode}})}function d(e,t,a){o.open({templateUrl:"app/nursingWorkers/baseInfo/editInfoTime.modal.html",size:"md",data:{metaData:{title:t,name:e,list:g.detail[a]},formData:g.detail.comUser},initFn:function(e){["technicalPost","duty"].indexOf(e.metaData.name)<0&&s.getComUserChange(l.id).then(function(t){"clinical"===e.metaData.name?e.metaData.list=t.data.data.filter(function(e){return 1===parseInt(e.changeType)}):e.metaData.list=t.data.data.filter(function(e){return 2===parseInt(e.changeType)})})},ok:v,methodsObj:{openCalender:function(e,t){t?t[e]=!0:this[e]=!0},saveChanges:m}})}function m(t){var a,n,r=this;switch(t){case 1:a=g.originalDetail.comUser.clinical,n=r.formData.clinical;break;case 2:a=g.originalDetail.comUser.teachLevel,n=r.formData.teachLevel}s.saveChange({userCode:l.id,changeType:t,foreName:a,rearName:n,changeTime:i().format("YYYY-MM-DD HH:mm:ss")}).then(function(t){t&&(e.$broadcast("toast",{type:"success",content:"保存成功！"}),o.close())})}function p(t){s.quit(t).then(function(t){e.$broadcast("toast",{type:"success",content:"成功登记离职"}),b(),o.close()})}function u(t){s.retire(t).then(function(t){e.$broadcast("toast",{type:"success",content:"已登记为退休！"}),b(),o.close()})}function v(t,a){var n={};if(n.dataType=a||t,n[t]=g.detail[t],"comUser"==t?n[t].deptCode=l.dept:"string"==typeof t&&(n[t].forEach(function(e){e.userCode=g.detail.comUser.userCode,delete e.endDateIsOpen,delete e.startDateIsOpen}),g[t+"_len"]=g.detail[t].length),"object"==typeof t)switch(t.deptCode=l.dept,n={},n[a]={userCode:t.userCode},n.dataType=a,a){case"comUserPosition":n[a].technicalPost=t.technicalPost,n[a].reviewUnit=t.reviewUnit,n[a].startDate=t.positionStartDate;break;case"comUserNursing":n[a].duty=t.duty,n[a].startDate=t.dutyStartDate}s.add(n).then(function(t){t&&(e.$broadcast("toast",{type:"success",content:"保存成功！"}),o.close("success"),g.load.func())})}function f(e){"undefined"==typeof g[e+"_len"]&&(g[e+"_len"]=g[e+"_len"]||g.detail[e].length),g.detail[e].splice(g[e+"_len"],g.detail[e].length-g[e+"_len"])}function b(){e.$broadcast("refreshTree",!0)}e.$broadcast("loaded","tree");var g=this;g.isTopDept=t.$parent.vm.isTopDept,g.scope=t,g.openInfo=d,g.stateParam=l,g.quit=p,g.openConfirm=c,g.cancelEdit=f,g.marrige=[{code:"01",name:"已婚"},{code:"02",name:"未婚"},{code:"03",name:"离异"},{code:"04",name:"丧偶"}];var h={comUserPosition:{positionName:"",reviewUnit:"",startDate:"",endDate:""},comUserNursing:{reviewUnit:"",unitLevel:"",deptName:"",position:"",startDate:"",endDate:""},comUserEducation:{educationType:"",leaningTime:"",courseTopics:"",courseContent:"",startDate:"",endDate:""},comUserTraining:{learnContent:"",professional:"",diploma:"",speaker:"",creditType:"",credit:"",funding:"",describe:"",startDate:"",endDate:""},comUserLearning:{school:"",professional:"",diploma:"",diplomaNo:"",degree:"",degreeNo:"",describe:"",startDate:"",endDate:""},comUserFamily:{relation:"",name:"",phone:"",email:"",remark:""}};g.openCalender=function(e,t){t?t[e]=!0:g[e]=!0},g.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:i(),startingDay:1},g.addItem=function(e){g[e+"_len"]=g.detail[e].length,g.detail[e].push(angular.extend({},h[e]))},g.removeItem=function(e,t){g.detail[e].splice(t,1)},g.save=v,g.load={func:r,init:!0},t.$on("save",v)}e.$inject=["$rootScope","$scope","$state","$stateParams","baseInfoService","modalService","security","moment"],angular.module("nqms").controller("BaseInfoDetailCtrl",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){try{v.deptList.belongedDepts.unshift({deptCode:v.deptList.deptCode,deptName:v.deptList.deptName}),v.deptList=v.deptList.belongedDepts}catch(e){}}function r(){v.deptList?i():s.getDeptData().then(function(e){v.deptList=e,i()}),c(l.userCode),p(l.userCode)}function c(e){o.getComUserChange(e).then(function(e){v.clinicalList=e.data.data.filter(function(e){return 1===parseInt(e.changeType)}),v.teachingList=e.data.data.filter(function(e){return 2===parseInt(e.changeType)}),v.splitedDeptList=e.data.data.filter(function(e){return 3===parseInt(e.changeType)})})}function d(t){var a,s;switch(t){case 1:a=v.originalDetail.comUser.clinical,s=v.detail.comUser.clinical;break;case 2:a=v.originalDetail.comUser.teachLevel,s=v.detail.comUser.teachLevel;break;case 3:a=v.originalDetail.comUser.deptCode,s=v.detail.comUser.deptCode}o.saveChange({userCode:l.userCode,changeType:t,foreName:a,rearName:s,changeTime:n().format("YYYY-MM-DD HH:mm:ss")}).then(function(t){t&&e.$broadcast("toast",{type:"success",content:t.data.msg||"保存成功！"})})}function m(){o.saveUserDept(v.detail.comUser.userCode,v.detail.comUser.deptCode).then(function(t){t&&(e.$broadcast("toast",{type:"success",content:"保存成功！"}),v.load.func())})}function p(t){var a=t||l.userCode;return o.getUserInfo(a,"").then(function(t){v.originalDetail=angular.merge({},t.data.data),v.detail=t.data.data,v.detail.comUser.positionStartDate=n().format("YYYY-MM-DD"),v.detail.comUser.dutyStartDate=n().format("YYYY-MM-DD"),v.scope.userName=v.originalDetail.comUser.userName,v.originalDetail.comUser.deptCode=l.deptCode,v.originalDetail.comUser.deptName=l.deptName,e.$broadcast("loaded","content")})}function u(t,a){var l={};switch(l[t]={userCode:v.detail.comUser.userCode},"comUser"==t&&(l[t].deptCode=f.dept),t){case"comUserPosition":l[t].reviewUnit=v.detail.comUser.reviewUnit,l[t].startDate=v.detail.comUser.positionStartDate;break;case"comUserNursing":l[t].startDate=v.detail.comUser.dutyStartDate}l[t][a]=v.detail.comUser[a],l.dataType=t,o.add(l).then(function(t){t&&(e.$broadcast("toast",{type:"success",content:"保存成功！"}),v.load.func())})}var v=this,f={};v.originalDetail=null,v.scope=t,v.selectedNode={},v.deptList=s.getCacheDeptList(),v.saveChange=d,v.saveUserDept=m,r(),v.openCalender=function(e,t){t?t[e]=!0:v[e]=!0},v.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:n(),startingDay:1},v.addItem=function(e){v.detail[e].push(angular.extend({},itemInitData[e]))},v.removeItem=function(e,t){v.detail[e].splice(t,1)},v.save=u,v.load={func:p,init:!0}}e.$inject=["$rootScope","$scope","$state","$stateParams","deptService","baseInfoService","moment"],angular.module("nqms").controller("AltDetailCtrl",e)}(),function(){"use strict";function e(e,t,a,l){function s(e,l){return a.get(t.files.getUserDetailInfo,{params:{userCode:e,hisCode:l}}).then(c)}function o(e){function s(e){return"0"===e.data.code?(d.userList=e.data.data.lst,e.data.data.lst):void l.error("获取用户数据失败！\n"+e.data.msg)}return a.get(t.files.getUserList,{params:{deptCode:e}}).then(s)}function n(e){return d.selectedUser=e,e}function i(e){return a.post(t.files.save,e).then(c)}function r(e,l){return a.post(t.files["delete"],{dataType:e,delSeqId:l}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var d={selectedUser:{},isNew:!0,selectedDeptCode:"",userList:[],getUserInfo:s,getUserList:o,setSelectUser:n,add:i,deleteUser:r};return d}e.$inject=["$window","apiHost","$http","$log"],angular.module("nqms").config(["toastrConfig",function(e){e.tapToDismiss=!0,e.timeOut=0}]).factory("altService",e)}(),function(){"use strict";function e(e,t,a,l,s){function o(){var e=l.getCacheDeptList();e?n(e):l.getDeptData().then(function(e){n(e)})}function n(e){d.deptData=e,d.treeData=[r(e)],d.expandedNodes=[d.treeData[0]],d.scope.$watch("vm.filterText",function(e){e?d.expandedNodes=[].concat(d.treeData[0]).concat(d.treeData[0].children):d.expandedNodes=[d.treeData[0]]})}function i(t){c!==t&&(c=t,e.$broadcast("loading","tree"),t.userCode&&a.go("home.alt.detail",{userCode:t.userCode,deptCode:t.deptCode,deptName:t.deptN}),sessionStorage.setItem("selectedNode",angular.toJson(t)),e.$broadcast("loaded","tree"))}function r(e){var t={};return t.deptCode=e.deptCode,t.deptName=e.deptName,_.each(e.belongedDepts,function(t,a){e.belongedDepts[a]=r(t)}),t.children=_.compact([].concat(e.user,e.belongedDepts)),Array.isArray(e.user)&&e.user.forEach(function(t){t.deptCode=e.deptCode,t.deptN=e.deptName}),t}var c,d=this;d.select=i,d.scope=t,d.treeOption={allowDeselect:!1},o()}e.$inject=["$rootScope","$scope","$state","deptService","baseInfoService"],angular.module("nqms").controller("AltCtrl",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r){function c(){return n.getUserList(l.deptCode).then(function(e){p.userDataList=e;var t=null,a=p.userDataList.find(function(e,a){return"1"==e.isDeptNurseHeader?(t=a,!0):void 0});t&&(p.userDataList.splice(t,1),p.userDataList.unshift(a))})}function d(t){r.setUserHeader(t).then(function(t){t&&(e.$broadcast("toast",{type:"success",content:"设置成功！"}),i.close(),p.load.func())})}function m(e){i.open({templateUrl:"app/common/confirm/confirm.tpl.html",size:"sm",ok:d,data:{metaData:{title:"确定设为科护长吗？"},formData:{deptCode:e.deptCode,deptNurseHeader:e.userCode}}})}var p=this;p.setNurse=d,p.openConfirm=m,p.scope=t,p.treeOption={allowDeselect:!1},p.load={func:c,init:!0}}e.$inject=["$rootScope","$scope","$state","$stateParams","$q","deptService","baseInfoService","modalService","hrAddService"],angular.module("nqms").controller("AddDetailController",e)}(),function(){"use strict";function e(e,t){function a(t){return e.post(n.save,{comUser:t,dataType:"comUser"}).then(s)}function l(a){return e[t.user.setUserHeader.method](t.user.setUserHeader.url,a).then(s)}function s(e){return"0"===e.data.code?e:void 0}var o={},n=t.files;return o.saveUser=a,o.setUserHeader=l,o}e.$inject=["$http","apiHost"],angular.module("nqms").factory("hrAddService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r){function c(){var e=s.defer();return f?d(f):e.resolve(o.getDeptData().then(function(e){d(e)})),e.promise}function d(e){v.deptData=e,v.treeData=[p(e)],v.expandedNodes=[v.treeData[0]],v.scope.$watch("vm.filterText",function(e){e?v.expandedNodes=[].concat(v.treeData[0]).concat(v.treeData[0].children):v.expandedNodes=[v.treeData[0]]})}function m(t){u!==t&&(u=t,e.$broadcast("loading","tree"),t.deptCode&&a.go("home.add.detail",{deptCode:t.deptCode}),sessionStorage.setItem("selectedNode",angular.toJson(t)),e.$broadcast("loaded","tree"))}function p(e){var t={};return t.deptCode=e.deptCode,t.deptName=e.deptName,_.each(e.belongedDepts,function(t,a){e.belongedDepts[a]=p(t)}),t.children=_.compact([].concat(e.belongedDepts)),t}var u,v=this,f=o.getCacheDeptList();v.select=m,v.scope=t,v.treeOption={allowDeselect:!1},v.load={func:c,init:!0},v.load.func()}e.$inject=["$rootScope","$scope","$state","$stateParams","$q","deptService","baseInfoService","modalService","hrAddService"],angular.module("nqms").controller("HrAddController",e)}(),function(){"use strict";function e(e,t){function a(){return t.get(e.events.getEventTypeList).then(l)}function l(e){return"0"===e.data.code?e:void 0}var s={apiHost:e,getEventType:a};return s}e.$inject=["apiHost","$http"],angular.module("nqms").config(["toastrConfig",function(e){e.tapToDismiss=!0,e.timeOut=0}]).factory("typeService",e)}(),function(){"use strict";function e(e,t,a,l){function s(){return l.getEventType().then(function(e){e&&(o.list=e.data.data.lst)})}var o=this;o.load={func:s,init:!0}}e.$inject=["$scope","$log","$filter","typeService"],angular.module("nqms").controller("MalCaseUpTypeController",e)}(),function(){"use strict";function e(e,t,a,l){var s=this;s.lst=[{groupNo:"跌倒",groupName:"不良治疗",bedNo:"Ⅱ级",remark:"跌倒"},{groupNo:"坠床",groupName:"不良治疗",bedNo:"Ⅱ级",remark:"坠床"},{groupNo:"走失",groupName:"不良治疗",bedNo:"Ⅰ级",remark:"走失"},{groupNo:"烫伤",groupName:"不良治疗",bedNo:"Ⅲ级",remark:"烫伤"},{groupNo:"医患争吵",groupName:"医患沟通",bedNo:"Ⅰ级",remark:"医患争吵"},{groupNo:"身体攻击",groupName:"医患沟通",bedNo:"Ⅳ级",remark:"身体攻击"},{groupNo:"咽入异物",groupName:"饮食类",bedNo:"Ⅱ级",remark:"咽入异物"},{groupNo:"食物中毒",groupName:"饮食类",bedNo:"Ⅳ级",remark:"食物中毒"},{groupNo:"仪器故障",groupName:"医疗设备",bedNo:"0级",remark:"仪器故障"},{groupNo:"院内压疮",groupName:"皮肤类",bedNo:"Ⅲ级",remark:"院内压疮"}],t.debug(s.lst),s.tableParams=new a({page:1,count:10},{total:s.lst.length,getData:function(t,a){var o=a.sorting()?l("orderBy")(s.lst,a.orderBy()):s.lst;o=a.filter()?l("filter")(o,a.filter()):o,a.total(o.length),t.resolve(e.users=o.slice((a.page()-1)*a.count(),a.page()*a.count()))}})}e.$inject=["$scope","$log","NgTableParams","$filter"],angular.module("nqms").controller("MalCaseUpStatisticsController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e){return a.post(t.events.deleteEventLevel,{seqId:e}).then(c)}function i(e){return a.post(t.events.saveEventLevel,e).then(c)}function r(e){return a.get(t.events.getEventLevels,{params:e}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var d={save:i,get:r,del:n};return d}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("levelService",e)}(),function(){"use strict";
function e(e,t,a,l,s){function o(){return a.get().then(function(e){e&&(p.list=e.data.data.lst)})}function n(e){p.formData=angular.extend({},e),p.selectedLevel=e,e&&e.flow&&(p.formData.flowList=e.flow.split("|"))}function i(){p.formData={}}function r(){""!==p.flowText&&(p.formData.flowList=p.formData.flowList||[],p.formData.flowList.push(p.flowText),p.flowText="")}function c(e){p.formData.flowList.splice(e,1)}function d(){var e=angular.extend({},p.formData);e.flow=e.flowList?e.flowList.join("|"):"",a.save(e).then(function(e){e&&"0"===e.data.code&&(s.success("保存成功！","提示"),p.load.func(),p.formData={},l.close("success"))})}function m(e){a.del(e).then(function(t){t&&"0"===t.data.code&&(s.success("已删除！","提示"),p.load.func(),e==p.formData.seqId&&(p.formData={}),l.close("success"))})}var p=this;p.save=d,p.edit=n,p.del=m,p.formData={},p.add=i,p.load={func:o,init:!0},p.removeFlow=c,p.addFlow=r}e.$inject=["$scope","$log","levelService","modalService","toastr"],angular.module("nqms").controller("MalCaseUpLevelController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e,l){return a.post(t.events.deleteEventReport,{seqId:e,reportCode:l}).then(v)}function i(e){return a.get(t.events.getReportDetail,{params:e}).then(v)}function r(e){return a.get(t.events.getEventMeasures,{params:e}).then(v)}function c(e){return a.get(t.events.getEventRequirement,{params:e}).then(v)}function d(e){return a.post(t.events.saveReportDetail,e).then(v)}function m(e){return a.post(t.events.saveEventMeasures,e).then(v)}function p(e){return a.post(t.events.saveEventRequirement,e).then(v)}function u(e){return a.post(t.events.saveReportDetail,e).then(v)}function v(e){return"0"===e.data.code?e:void 0}function f(e){return a.post(t.events.deleteEventRequirement,e).then(v)}function b(e){return a.post(t.events.deleteEventMeasures,e).then(v)}function g(e){return a.post(t.events.deleteEventReport,e).then(v)}var h={saveReportDetail:d,saveMeasure:m,saveRequirement:p,saveEstimate:u,deleteMeasure:b,deleteRequirement:f,deleteEstimate:g,getReportDetail:i,getEventMeasures:r,getEventRequirement:c,del:n};return h}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("handleService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d,m){function p(){return r.getEventList().then(function(e){e&&(x.list=e.data.data.lst)})}function u(e){x.selectedEvent=e,f(e).then(v)}function v(){n.open({templateUrl:"app/malCaseUp/handle/handle.modal.html",size:"lg",appendTo:angular.element(".handle-wrapper"),data:{formData:k,metaData:w},methodsObj:{saveReportDetail:b,saveListItem:function(e,t){var a=this,l=a.upFirstLetter(e),o={};switch(l="Estimate"===l?"Measure":l,o.userCode=s.getUserinfo().user.userCode,e){case"requirement":angular.extend(o,{reportCode:a.formData.reportCode,seqId:a.formData[e].seqId||null,reqCode:a.formData[e]&&a.formData[e].reqCode||null,reqContent:a.formData[e].reqContent,remark:""});break;case"measure":a.formData[e].meaTime||(o.meaTime=moment().format("YYYY-MM-DD HH:mm:ss")),angular.extend(o,{seqId:a.formData[e].seqId||null,reportCode:a.formData.reportCode,meaCode:a.formData[e]&&a.formData[e].meaCode||null,meaContent:a.formData[e].meaContent,headUserCode:a.formData[e].headUserCode});break;case"estimate":angular.extend(o,{seqId:a.formData.measure.seqId||null,reportCode:a.formData.reportCode,meaCode:a.formData.measure&&a.formData.measure.meaCode||null,headUserCode:a.formData.measure.headUserCode,meaContent:a.formData.measure.meaContent,resStatus:"",resDescribe:a.formData.measure.resDescribe})}a.formData[e+"List"]||(a.formData[e+"List"]=[]),d["save"+l](o).then(function(t){t&&(i.success("保存成功","提示"),a.rootScope.$broadcast("refresh"+l,a.formData.reportCode,a),a.formData[e]={})})},removeListItem:function(e){var t,a=this,l=a.upFirstLetter(e.listName);switch(a.formData[e.listName+"List"].splice(e.index,1),e.listName){case"measure":t={reportCode:a.reportCode,meaCode:e.meaCode};break;case"requirement":t={seqId:e.seqId};break;case"estimate":return}d["delete"+l](t).then(function(e){e&&i.success("已删除","提示")})},fillItem:function(e,t){var a=this;a.formData[e]=angular.extend({},t)},resetForm:function(e){this.formData[e]={}},upFirstLetter:function(e){return e.replace(/^\w{1}/,function(e){return e.toUpperCase()})}}})}function f(e){var t=e.reportCode,a=s.getUserinfo().role.deptCode;k.reportCode=t;var o=m.getUserList(a),n=d.getEventRequirement({reportCode:t}),i=d.getEventMeasures({reportCode:t}),r=d.getReportDetail({reportCode:t}),c=l.all([n,i,r,o]).then(function(t){var a=t[0].data.data.lst,l=t[1].data.data.lst,s={},o=t[3];t[2].data.data.lst.forEach(function(e){s[e.itemCode]={value:e.itemValue,seqId:e.seqId}}),w.malCaseInfo=e,w.userList=o,k.requirementList=a,k.measureList=l,k.reportDetailList=s});return c}function b(){var e,t=this,a=angular.extend({},t.formData.reportDetailList),l=[];for(e in a)a.hasOwnProperty(e)&&l.push({reportCode:t.formData.reportCode,itemCode:e,seqId:a[e].seqId||null,itemValue:a[e].value});d.saveReportDetail(l).then(function(e){e&&"0"===e.data.code&&(i.success("保存成功！","提示"),x.scope.$broadcast("resfreshReportDetail",t.formData.reportCode,t),n.close("success"))})}function g(e,t){o.del(e,t).then(function(e){e&&"0"===e.data.code&&(i.success("已删除！","提示"),x.load.func(),n.close("success"))})}function h(e,t,a){d.getEventRequirement({reportCode:t}).then(function(e){e&&(a.formData.requirementList=e.data.data.lst)})}function y(e,t,a){d.getEventMeasures({reportCode:t}).then(function(e){e&&(a.formData.measureList=e.data.data.lst)})}function D(e,t,a){d.getReportDetail({reportCode:t}).then(function(e){e&&(a.formData.reportDetailList=e.data.data.lst)})}var x=this,k={},w={};x.formData=k,x.metaData=w,x.rootScope=e,x.scope=t,x.open=u,x.del=g,x.saveReportDetail=b,x.load={func:p,init:!0},x.scope.$on("refreshMeasure",y),x.scope.$on("refreshRequirement",h),x.scope.$on("refreshReportDetail",D)}e.$inject=["$rootScope","$scope","$log","$q","security","levelService","modalService","toastr","fixService","deptService","handleService","filesService"],angular.module("nqms").controller("MalCaseUpHandleController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.events.deleteEventLevel,{seqId:e}).then(D)}function r(e){return a.post(t.events.deleteEventRequirement,e).then(D)}function c(e){return a.post(t.events.deleteEventMeasures,e).then(D)}function d(e){return a.post(t.events.deleteEventReport,e).then(D)}function m(e){return a.post(t.events.saveEventLevel,e).then(D)}function p(e){return a.get(t.events.getReportDetail,{params:e}).then(D)}function u(e){return a.get(t.events.getEventMeasures,{params:e}).then(D)}function v(e){return a.get(t.events.getEventRequirement,{params:e}).then(D)}function f(e){return a.post(t.events.saveReportDetail,e).then(D)}function b(e){return a.post(t.events.saveEventMeasures,e).then(D)}function g(e){return a.post(t.events.saveEventRequirement,e).then(D)}function h(e){return a.post(t.events.saveReportDetail,e).then(D)}function y(e){var l=e||{};return l.deptCode=n.getUserinfo().role.deptCode,a.get(t.events.getEventList,{params:l}).then(D)}function D(e){return"0"===e.data.code?e:void 0}var x={save:m,getEventList:y,del:i,saveReportDetail:f,saveMeasure:b,saveRequirement:g,saveEstimate:h,deleteMeasure:c,deleteRequirement:r,deleteEstimate:d,getReportDetail:p,getEventMeasures:u,getEventRequirement:v};return x}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("fixService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d,m){function p(){return d.getEventList().then(function(e){e&&(x.list=e.data.data.lst)})}function u(e){x.selectedEvent=e,f(e).then(v)}function v(){i.open({templateUrl:"app/malCaseUp/handle/handle.modal.html",size:"lg",appendTo:angular.element(".handle-wrapper"),data:{formData:k,metaData:w},methodsObj:{saveReportDetail:b,saveListItem:function(e,t){var a=this,l=a.upFirstLetter(e),s={};switch(l="Estimate"===l?"Measure":l,s.userCode=o.getUserinfo().user.userCode,e){case"requirement":angular.extend(s,{reportCode:a.formData.reportCode,seqId:a.formData[e].seqId||null,reqCode:a.formData[e]&&a.formData[e].reqCode||null,reqContent:a.formData[e].reqContent,remark:""});break;case"measure":a.formData[e].meaTime||(s.meaTime=moment().format("YYYY-MM-DD HH:mm:ss")),angular.extend(s,{seqId:a.formData[e].seqId||null,reportCode:a.formData.reportCode,meaCode:a.formData[e]&&a.formData[e].meaCode||null,meaContent:a.formData[e].meaContent,headUserCode:a.formData[e].headUserCode});break;case"estimate":angular.extend(s,{seqId:a.formData.measure.seqId||null,reportCode:a.formData.reportCode,meaCode:a.formData.measure&&a.formData.measure.meaCode||null,headUserCode:a.formData.measure.headUserCode,meaContent:a.formData.measure.meaContent,resStatus:"",resDescribe:a.formData.measure.resDescribe})}a.formData[e+"List"]||(a.formData[e+"List"]=[]),d["save"+l](s).then(function(t){t&&(r.success("保存成功","提示"),a.rootScope.$broadcast("refresh"+l,a.formData.reportCode,a),a.formData[e]={})})},removeListItem:function(e){var t,a=this,l=a.upFirstLetter(e.listName);switch(a.formData[e.listName+"List"].splice(e.index,1),e.listName){case"measure":t={reportCode:a.reportCode,meaCode:e.meaCode};break;case"requirement":t={seqId:e.seqId};break;case"estimate":return}d["delete"+l](t).then(function(e){e&&r.success("已删除","提示")})},fillItem:function(e,t){var a=this;a.formData[e]=angular.extend({},t)},resetForm:function(e){this.formData[e]={}},upFirstLetter:function(e){return e.replace(/^\w{1}/,function(e){return e.toUpperCase()})}}})}function f(e){var t=e.reportCode,a=o.getUserinfo().role.deptCode;k.reportCode=t;var l=m.getUserList(a),n=d.getEventRequirement({reportCode:t}),i=d.getEventMeasures({reportCode:t}),r=d.getReportDetail({reportCode:t}),c=s.all([n,i,r,l]).then(function(t){var a=t[0].data.data.lst,l=t[1].data.data.lst,s={},o=t[3];t[2].data.data.lst.forEach(function(e){s[e.itemCode]={value:e.itemValue,seqId:e.seqId}}),w.malCaseInfo=e,w.userList=o,k.requirementList=a,k.measureList=l,k.reportDetailList=s});return c}function b(){var e,t=this,a=angular.extend({},t.formData.reportDetailList),l=[];for(e in a)a.hasOwnProperty(e)&&l.push({reportCode:t.formData.reportCode,itemCode:e,seqId:a[e].seqId||null,itemValue:a[e].value});d.saveReportDetail(l).then(function(e){e&&"0"===e.data.code&&(r.success("保存成功！","提示"),x.scope.$broadcast("resfreshReportDetail",t.formData.reportCode,t),i.close("success"))})}function g(e,t){n.del(e,t).then(function(e){e&&"0"===e.data.code&&(r.success("已删除！","提示"),x.load.func(),i.close("success"))})}function h(e,t,a){d.getEventRequirement({reportCode:t}).then(function(e){e&&(a.formData.requirementList=e.data.data.lst)})}function y(e,t,a){d.getEventMeasures({reportCode:t}).then(function(e){e&&(a.formData.measureList=e.data.data.lst)})}function D(e,t,a){d.getReportDetail({reportCode:t}).then(function(e){e&&(a.formData.reportDetailList=e.data.data.lst)})}var x=this,k={},w={};x.formData=k,x.metaData=w,x.state=a,x.rootScope=e,x.scope=t,x.open=u,x.del=g,x.saveReportDetail=b,x.load={func:p,init:!0},p(),x.scope.$on("refreshMeasure",y),x.scope.$on("refreshRequirement",h),x.scope.$on("refreshReportDetail",D)}e.$inject=["$rootScope","$scope","$state","$log","$q","security","levelService","modalService","toastr","deptService","fixService","filesService"],angular.module("nqms").controller("MalCaseUpHandleController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e,l){return a.post(t.events.deleteEventReport,{seqId:e,reportCode:l}).then(d)}function i(e){return a.get(t.events.getEventReport,{params:{reportCode:e}}).then(d)}function r(e){return a.post(t.events.saveEventReport,e).then(d)}function c(e,l){return a.post(t.events.handleEventReport,{reportCode:e,opType:l}).then(d)}function d(e){return"0"===e.data.code?e:void 0}var m={save:r,del:n,getDetail:i,doReport:c};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("callService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d,m,p){function u(){var e=c.getEventList().then(function(e){e&&(w.list=e.data.data.lst)}),t=p.getEventType().then(function(e){e&&(_.eventTypeList=e.data.data.lst)});return a.all([e,t])}function v(e){function t(){i.open({templateUrl:"app/malCaseUp/call/call.modal.html",size:"lg",ok:y,data:{formData:C,metaData:_},methodsObj:{eventTimeCalender:function(){var e=this;e.eventTimeOpen=!0},setUser:function(e){var t=this;t.formData.flowList.splice(e,1)}}})}C=angular.extend({},e),w.selectedLevel=e,_.deptList=m.deptList&&m.deptList.belongedDepts,f().then(function(){_.deptList?t():m.getDeptData().then(function(e){var a=e;a&&(_.deptList=a.belongedDepts,0===_.deptList.length&&(delete a.belongedDepts,_.deptList=[a]),t())})}),e&&(C.eventDate=new Date(e.eventTime),C.eventTime=new Date(e.eventTime),C.level={damageLevel:e.damageLevel},C.dept={deptCode:e.deptCode,deptName:e.deptName},C.eventType={eventTypeCode:e.eventTypeCode,eventTypeName:e.eventTypeName}),C.userCode=s.getUserinfo().user.userCode,C.userCode=s.getUserinfo().user.userName}function f(){return n.get().then(function(e){e&&(_.levelList=e.data.data.lst)})}function b(){w.formData={}}function g(){""!==w.flowText&&(w.formData.flowList=w.formData.flowList||[],w.formData.flowList.push(w.flowText),w.flowText="")}function h(e){w.formData.flowList.splice(e,1)}function y(e){var t,a,l=angular.extend({},e);l.deptName=l.dept.deptName,t=o(l.eventDate).format("YYYY-MM-DD"),a=o(l.eventTime).format("HH:mm:ss"),delete l.eventDate,delete l.dept,l.eventTypeCode=angular.fromJson(l.eventType).eventTypeCode,l.eventTypeName=angular.fromJson(l.eventType).eventTypeName,delete l.eventType,delete l.level,l.eventTime=o(t+" "+a).format("YYYY-MM-DD HH:mm:ss"),d.save(l).then(function(e){e&&"0"===e.data.code&&(r.success("保存成功！","提示"),w.load.func(),w.formData={},i.close("success"))})}function D(e){d.del(e.seqId,e.reportCode).then(function(e){e&&"0"===e.data.code&&(r.success("已删除！","提示"),w.load.func(),i.close("success"))})}function x(t){d.doReport(t.reportCode,w.opType).then(function(t){t&&(e.$broadcast("toast",{type:"success",content:"事件已成功上报！"}),w.load.func())})}function k(e,t){w.opType=t.value,i.open({templateUrl:"app/common/confirm/confirm.tpl.html",size:"sm",ok:"report"===t.type?x:D,data:{metaData:{title:function(){return"report"===t.type?"确定上报该事件吗？":"确定删除这条调查表吗？"}()},formData:e}})}var w=this,C={},_={};w.state=l,w.openConfirm=k,w.save=y,w.open=v,w.del=D,w.add=b,w.load={func:u,init:!0},_.eventTypeList=[{code:1,name:"运送中病情变化"},{code:2,name:"误吸"},{code:3,name:"院内压疮"},{code:4,name:"坠床"},{code:5,name:"跌倒"}],u(),w.removeFlow=h,w.addFlow=g}e.$inject=["$rootScope","$scope","$q","$state","security","moment","levelService","modalService","toastr","fixService","callService","deptService","typeService"],angular.module("nqms").controller("MalCaseUpCallController",e)}(),function(){"use strict";angular.module("nqms").controller("MalCaseUpElementController",["$uibModal","$log",function(e,t){var a=this;a.lst=[{elementCode:"1",elementName:"压疮大小",viewName:"压疮大小",groupName:"压疮信息",elementType:"文本框",width:"3/12",remark:"备注",required:"是"},{elementCode:"2",elementName:"发生时间",viewName:"发生时间",groupName:"压疮信息",elementType:"文本框",width:"3/12",remark:"备注",required:"是"},{elementCode:"3",elementName:"性别",viewName:"性别",groupName:"患者信息",elementType:"单选框",width:"3/12",remark:"备注",required:"是"},{elementCode:"4",elementName:"医疗类型",viewName:"医疗类型",groupName:"患者信息",elementType:"下拉框",width:"3/12",remark:"备注",required:"是"},{elementCode:"5",elementName:"年龄",viewName:"年龄",groupName:"患者信息",elementType:"文本框",width:"3/12",remark:"备注",required:"是"}]}])}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.manual.workManual["delete"],{seqId:e}).then(d)}function r(e){return a.post(t.manual.workManual.save,e).then(d)}function c(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.manual.workManual.get,{params:e}).then(d)}function d(e){return"0"===e.data.code?e:void 0}var m={get:c,save:r,"delete":i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("workManualService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){s.getGroupList().then(function(e){e&&(f.lst=e.data.data.lst,f.tableParams=new a({},{dataset:f.lst}))})}function c(e){f.formData=angular.extend({},e),f.selectedLevel=e,e&&e.beds&&(f.formData.bedList=e.beds.split(";"))}function d(){f.formData={}}function m(){""!==f.flowText&&(f.formData.bedList=f.formData.bedList||[],f.formData.bedList.push(f.flowText),f.flowText="")}function p(e){f.formData.bedList.splice(e,1)}function u(){var e=angular.extend({},f.formData);e.beds=e.bedList?e.bedList.join(";"):"",e.deptCode=f.deptCode,s.saveGroup(e).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),r(),f.formData={},o.close("success"))})}function v(e){s.deleteGroup(e).then(function(t){t&&"0"===t.data.code&&(n.success("已删除！","提示"),r(),e==f.formData.seqId&&(f.formData={}),o.close("success"))})}var f=this;f.saveGroup=u,f.edit=c,f.deleteGroup=v,f.formData={},f.add=d,f.deptCode=i.getUserinfo().role.deptCode,r(),f.removeFlow=p,f.addFlow=m}e.$inject=["$scope","$log","NgTableParams","$filter","bedService","modalService","toastr","security"],angular.module("nqms").controller("ManualWorkController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.manual.item["delete"],{itemCode:e}).then(d)}function r(e){return a.post(t.manual.item.save,e).then(d)}function c(e){var l={};return l.deptCode=e||n.getUserinfo().role.deptCode,a.get(t.manual.item.get,{params:l}).then(d)}function d(e){return"0"===e.data.code?e:void 0}var m={getItems:c,saveItem:r,deleteItem:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("manualItemService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){s.getItems().then(function(e){e&&(u.lst=e.data.data,u.tableParams=new a({},{dataset:u.lst}))})}function c(e){u.formData=angular.extend({},e),u.selectedItem=e,u.formData.dept={deptCode:u.formData.deptCode,deptName:u.formData.deptName}}function d(){u.formData={}}function m(){var e=angular.extend({},u.formData);e.deptCode=e.dept.deptCode,e.deptName=e.dept.deptName,delete e.dept,s.saveItem(e).then(function(e){e&&"0"===e.data.code&&(o.success("保存成功！","提示"),r(),u.formData={})})}function p(e){s.deleteItem(e).then(function(t){t&&"0"===t.data.code&&(o.success("已删除！","提示"),r(),e==u.formData.seqId&&(u.formData={}))})}var u=this;u.save=m,u.edit=c,u.deleteItem=p,u.formData={},u.add=d,u.deptCode=n.getUserinfo().role.deptCode,u.deptList=i.deptList,0===u.deptList.length&&i.getDeptData().then(function(e){u.deptList=e.belongedDepts,u.deptList.unshift({deptCode:e.deptCode,deptName:e.deptName})}),r()}e.$inject=["$scope","$log","NgTableParams","$filter","manualItemService","toastr","security","deptService"],angular.module("nqms").controller("ManualItemController",e)}(),function(){"use strict";function e(e,t,a,l){function s(){return e.getRuleList().then(function(e){e&&(d.list=e.data.data.lst)})}function o(e){m=e,i()}function n(){m={},i()}function i(){t.open({templateUrl:"app/departmentManager/turnsRule/turnsRule.model.html",size:"middle",ok:r,data:{formData:m,metaData:p}})}function r(){e.saveRule(m).then(function(e){e&&"0"==e.data.code&&(a.success("保存成功！","提示"),s(),t.close("success"))})}function c(t){e.deleteRule(t).then(function(e){e&&"0"==e.data.code&&(a.success("已删除！","提示"),s())})}var d=this,m={},p={};d.save=r,d.add=n,d.del=c,d.edit=o,d.load={func:s,init:!0},l.getClassList().then(function(e){e&&(d.classList=e.data.data.lst,p.classList=d.classList)})}e.$inject=["turnsRuleService","modalService","toastr","classesService"],angular.module("nqms").controller("DepartmentManagerTurnsRuleController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.schedule.deleteRule,{seqId:e}).then(d)}function r(e){return e.deptCode=n.getUserinfo().role.deptCode,a.post(t.schedule.saveRule,e).then(d)}function c(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.schedule.getRuleList,{params:e}).then(d)}function d(e){return"0"===e.data.code?e:void 0}var m={getRuleList:c,saveRule:r,deleteRule:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("turnsRuleService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.get(t.schedule.getSchedule,{params:e}).then(m)}function r(e){return e.deptCode=n.getUserinfo().role.deptCode,e.deptName=n.getUserinfo().role.deptName,a.post(t.schedule.saveSchedule,e).then(m)}function c(e){var l={};return l.deptCode=n.getUserinfo().role.deptCode,l.week=e,a.get(t.schedule.newSchedule,{params:l}).then(m)}function d(e){var l={};return l.deptCode=e.deptCode,l.outWeek=e.weeks,l.srcWeek=e.weeks-1,a.get(t.schedule.copySchedule,{params:l}).then(m)}function m(e){return"0"===e.data.code?e:void 0}var p={saveSchedule:r,newSchedule:c,getSchedule:i,copySchedule:d};return p}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("turnsService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){var e=_.find(D.treeData,function(e){return e.year==x.getFullYear()}),t=e.children[x.getMonth()],a=_.find(t.children,function(e){return e.start<x&&e.end>x});D.expandedNodes=[e,t],D.selectedNode=a}function r(e){e.index&&(D.params.year=e.year,D.params.weeks=e.index,D.load.func())}function c(){var a=t.getClassList({deptCode:D.params.deptCode}).then(function(e){e&&(D.classList=e.data.data.lst,D.getClassName=_.memoize(function(e){var t;return _.some(D.classList,function(a){return a.classCode==e?(t=a.className,!0):void 0}),t}),D.getClassColor=_.memoize(function(e){var t;return _.some(D.classList,function(a){return a.classCode==e?(t=a.color,!0):void 0}),t}))}),s=e.getSchedule(D.params).then(function(e){if(e){D.data=e.data.data;var t=g(D.data.dtls);D.lst=t.raw,D.weeks=D.data.weeks,D.dirtyLst=t.dirty,k={}}});return l.all([a,s])}function d(){var t=angular.copy(D.lst);_.forEach(t,function(e){for(var t=1;7>=t;t++)e["week"+t]=e["week"+t].slice(0,e["week"+t+"class"].length),_.forEach(e["week"+t+"class"],function(a,l){e["week"+t][l]?e["week"+t][l].classCode=a:e["week"+t][l]={classCode:a}}),delete e["week"+t+"class"],delete e["week"+t+"meta"]}),D.data.dtls=t,e.saveSchedule(D.data).then(function(e){e&&0==e.data.code&&(s.success("保存成功！","提示"),D.load.func(D.data.weeks))})}function m(){D.params.weeks=D.params.weeks+1,x.setDate(x.getDate()+7),i(),D.load.func()}function p(){D.params.weeks=D.params.weeks-1,x.setDate(x.getDate()-7),i(),D.load.func()}function u(){e.newSchedule(D.data.weeks).then(function(e){if(e&&0==e.data.code){D.data=e.data.data;var t=g(D.data.dtls);D.lst=t.raw,D.dirtyLst=t.dirty,k={}}})}function v(){e.copySchedule(D.params).then(function(e){if(e&&0==e.data.code){s.success("复制成功！","提示"),D.data=e.data.data;var t=g(D.data.dtls);D.lst=t.raw,D.dirtyLst=t.dirty,k={}}})}function f(e){function t(){var t=new Date(a.getFullYear(),a.getMonth(),a.getDate()-a.getDay()+1),l=new Date(t.getFullYear(),t.getMonth(),t.getDate()+6);return s++,{start:t,end:l,text:"第"+s+"周（"+t.getDate()+"~"+l.getDate()+"）",index:s,year:e}}var a=new Date(e,0,1),l={},s=0;for(l.text=e+"年",l.year=e,l.children=[];a.getFullYear()<=e;){var o=t(),a=o.end,n=o.start.getFullYear()<e?o.end.getMonth():o.start.getMonth();l.children[n]||(l.children[n]={children:[],text:n+1+"月",year:e}),l.children[n].children.push(o)}return l}function b(e){var t=[];return t=t.concat([_.pick(e,"deptCode","deptName")]),_.each(e.belongedDepts,function(e){t=t.concat(b(e))}),t}function g(e){_.forEach(e,function(e){for(var t=1;7>=t;t++)e["week"+t+"class"]=_.compact(_.pluck(e["week"+t],"classCode")),e["week"+t+"meta"]=angular.copy(e["week"+t+"class"])}),e=_.sortBy(e,function(e,t){return e.userName}),_.forEach(e,function(e){e.groupName=e.groupName||"未分组",e.clinical=e.clinical||"未分层"});var t=_.uniq(_.pluck(e,"groupName")),a=_.uniq(_.pluck(e,"clinical")),l=_.groupBy(e,function(e){return e.groupName}),s=[];return _.forEach(l,function(e,t){var a=_.groupBy(e,function(e){return e.clinical}),s=l[t].length;l[t]=a,l[t].length=s}),t=_.sortBy(t,function(e,t){var a="未分组"===e?999:t;return a}),a=_.sortBy(a,function(e,t){var a="未分层"===e?999:t;return a}),_.forEach(t,function(e){_.forEach(a,function(t){s=s.concat(l[e][t])})}),s=_.compact(s),{raw:s,dirty:l}}function h(e,t,a){var l;return k[t+a]?l=k[t+a][e]||0:a?(l=D.dirtyLst[t][a].length,k[t+a]={},k[t+a][e]=l):(l=D.dirtyLst[t].length,k[t+a]={},k[t+a][e]=l),l}function y(e,t){return _.isEqual(e["week"+t+"class"],e["week"+t+"meta"])}var D=this,x=new Date,k={};x.setDate(x.getDate()-x.getDay()+1),D.saveTurns=d,D.nextWeek=m,D.backWeek=p,D.newTurns=u,D.copyWeek=v,D.load={func:c,init:!0},D.treeData=[],D.treeOption={allowDeselect:!1,dirSelectable:!1},n.getDeptData().then(function(e){D.deptData=b(e)}),D.select=r,D.tableLayout=h,D.compare=y,function(){D.treeData.push(f(x.getFullYear()-1)),D.treeData.push(f(x.getFullYear())),D.treeData.push(f(x.getFullYear()+1)),i()}(),D.params={year:D.selectedNode.year,weeks:D.selectedNode.index,deptCode:o.getUserinfo().role.deptCode}}e.$inject=["turnsService","classesService","$log","$q","toastr","security","deptService"],angular.module("nqms").controller("DepartmentManagerTurnsController",e)}(),function(){"use strict";function e(e,t){function a(a){return t.get(e.schedule.statistics.getByLeave,{params:a}).then(o)}function l(a){return t.get(e.schedule.statistics.getByClass,{params:a}).then(o)}function s(a){return t.get(e.schedule.statistics.getByDays,{params:a}).then(o)}function o(e){return"0"===e.data.code?e:void 0}var n={getByLeave:a,getByClass:l,getByDays:s};return n}e.$inject=["apiHost","$http"],angular.module("nqms").config(["toastrConfig",function(e){e.tapToDismiss=!0,e.timeOut=0}]).factory("deptStatisticsService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){var t=[];return t=t.concat([_.pick(e,"deptCode","deptName")]),_.each(e.belongedDepts,function(e){t=t.concat(i(e))}),t}function r(){c.current=c.queryParams.type;var e=t("capitalize")(c.queryParams.type),a=angular.extend({},c.queryParams);switch("class"===a.type&&o.getClassList({deptCode:a.deptCode}).then(function(e){e&&(c.classesList=e.data.data.lst)}),a.deptCode=a.deptCode,a.month=s(a.month).format("YYYY-MM"),e){case"Leave":delete a.type;break;case"Days":delete a.type;break;default:delete a.type}return l["getBy"+e](a).then(function(e){e&&(c.statisticsData=e.data.data.lst)})}var c=this;c.options={month:{datepickerMode:"month",minMode:"month"}},c.queryParams={type:"leave",month:new Date,deptCode:n.getUserinfo().role.deptCode},c.current=c.queryParams.type,c.load={func:r,init:!0},a.getDeptData().then(function(e){c.deptData=i(e)}),c.getData=r,e.$on("deptchange",function(e,t){c.queryParams.deptCode=t,c.load.func()})}e.$inject=["$scope","$filter","deptService","deptStatisticsService","moment","classesService","security"],angular.module("nqms").controller("DepartmentManagerStatisticsController",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/pagination/pagination.tpl.html",replace:!0};return e}angular.module("nqms").directive("paginationSt",e)}(),function(){"use strict";function e(){function e(e,t,a,l){function s(){r.minMode=!r.minMode,e.$broadcast("toggleNavView",r.minMode)}function o(e){r.currentIndex=e,r.navData[e].child&&r.navData[e].child.length>0}function n(){r.isSubNavShow=!r.isSubNavShow,e.$broadcast("toggleSubNavView",r.isSubNavShow)}function i(){c.currentIndex=r.currentIndex,r.lastIndex=r.currentIndex,l.setCacheUser(c)}var r=this,c=l.getUserinfo();r.minMode=!1,r.isSubNavShow=!1,r.isActive=t.$parent.isActive,r.currentIndex=l.getUserinfo().currentIndex,r.lastIndex=r.currentIndex,r.navData=c.nav,r.currentIndex||(r.minMode=!1,r.isSubNavShow=!1),r.toggleNavView=s,r.toggleSubNavView=n,r.showSubNav=o,r.setActiveIndex=i,e.$broadcast("toggleNavView",r.minMode),e.$broadcast("toggleSubNavView",r.isSubNavShow)}e.$inject=["$rootScope","$scope","$log","security"];var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{},replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("nqms").directive("acmeNavbar",e)}(),function(){"use strict";function e(){function e(e,t,a,l,s,o,n,i,r){function c(){a.open({templateUrl:"app/components/header/changeUser.tpl.html",controller:"ChangeUserController",controllerAs:"vm",backdrop:"static",animation:!1,size:"sm"})}function d(){a.open({templateUrl:"app/components/header/changeRole.tpl.html",controller:"ChangeRoleController",controllerAs:"vm",backdrop:"static",animation:!1,size:"md"})}function m(t){return v.currentRole.roleCode==t.roleCode?void e.$broadcast("toast",{type:"warning",content:"\b\b\b已是当前角色！"}):void o.getNavigation(t).then(function(a){var l=o.getUserinfo();l.nav=a.data.data,l.role=t,o.setCacheUser(l),e.$broadcast("toast",{type:"success",content:"正在切换..."}),i(function(){n.go("home"),r.location.reload()},1e3)})}function p(){e.$broadcast("logout")}var u,v=this;v.openUserDialog=c,v.openRoleDialog=d,v.logout=p,v.changeRole=m,t(function(){v.time_now=l().format("YYYY年MM月DD日  HH:mm:ss")},1e3);try{u=o.getUserinfo().user.seqId,v.currentRole=o.getUserinfo().role,v.user=o.getUserinfo().user}catch(f){e.$broadcast("toast",{type:"error",content:"您还未登录！"}),n.go("login")}o.getUserRoleList({userId:u}).then(function(e){v.userRoleList=e.data.data}),s.info(v.user)}e.$inject=["$rootScope","$interval","$uibModal","moment","$log","security","$state","$timeout","$window"];var t={restrict:"E",templateUrl:"app/components/header/header.html",scope:{},replace:!0,controller:e,controllerAs:"hd",bindToController:!0};return t}angular.module("nqms").directive("acmeHeader",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){e.dismiss("cancel")}function c(){d.loginBtnStatus.title="切换",d.loginBtnStatus.state=""}var d=this;d.cancel=r,d.formData={},d.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:s(),startingDay:1},d.validationOption={blurTrig:!0},d.loginBtnStatus={title:"切换",state:""},d.changeUser=function(s){var r=a.getUserinfo().user;return l.info(s),d.loginBtnStatus.title="正在切换...",d.loginBtnStatus.state="disabled",s.loginName===r.loginName?(i.info("您切换的用户已是当前登录用户，无需切换～","提示"),void c()):void a.login(s).then(function(l){var s;c(),l&&"-1"==l.data.code||(s={user:l.data.data.user,nav:l.data.data.funs,role:l.data.data.role,tab:{}},a.setUserinfo(s),a.setCacheUser(s),e.dismiss("cancel"),n(function(){t.path("/home"),o.location.reload()},0))},c)}}e.$inject=["$uibModalInstance","$location","security","$log","moment","$window","$timeout","toastr"],angular.module("nqms").config(["w5cValidatorProvider",function(e){e.setRules({loginName:{required:"用户名不能为空",pattern:"用户名必须输入字母、数字、下划线"},password:{required:"密码不能为空",minlength:"密码长度不能小于{minlength}",maxlength:"密码长度不能大于{maxlength}"}})}]).controller("ChangeUserController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r){function c(){e.dismiss("cancel")}function d(){m.roleBtnStatus.title="切换",m.roleBtnStatus.state=""}var m=this,p=r.getUserinfo().role,u=r.getUserinfo().user.seqId;m.currentRole=r.getUserinfo().role,m.cancel=c,m.formData={},m.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:s(),startingDay:1},m.validationOption={blurTrig:!0},m.roleBtnStatus={title:"切换",state:""},r.getUserRoleList({userId:u}).then(function(e){m.userRoleList=e.data.data}),m.selectedRole=p,m.showRole=function(e){t.info(e),m.changedRole=e},m.changeRole=function(){return p=r.getUserinfo().role,m.changedRole?(m.roleBtnStatus.title="正在切换...",m.roleBtnStatus.state="disabled",m.changedRole.seqId===p.seqId?(n.info("您切换的角色已是当前登录的角色，无需切换～","提示"),void d()):void r.getNavigation(m.changedRole).then(function(e){
var t=r.getUserinfo();t.nav=e.data.data,t.role=m.changedRole,t.tab={},r.setCacheUser(t),n.success("正在切换角色...","恭喜"),a.go("home"),l(function(){o.location.reload()},2e3)})["finally"](d)):void 0}}e.$inject=["$uibModalInstance","$log","$state","$timeout","moment","$window","toastr","$scope","security"],angular.module("nqms").controller("ChangeRoleController",e)}(),function(){"use strict";function e(e){var t={restrict:"E",require:"ngModel",scope:{},replace:!0,templateUrl:"app/components/colorPicker/colorPicker.html",link:function(t,a,l,s){e(function(){t.current=s.$viewValue}),t.colorArr=["white","#CC6666","#FFFF66","#00CCff","#00FF66","#CC99FF","#CC9933","#CCCCFF"],t.choose=function(e){s.$setViewValue(e),a.find(".color-picker-selector").hide(),t.current=e},t.toggle=function(){l.handle&&a.find(".color-picker-selector").toggle()}}};return t}e.$inject=["$timeout"],angular.module("nqms").directive("colorPicker",e)}(),function(){"use strict";function e(e,t){return{restrict:"E",templateUrl:function(e,t){var a="app/components/breadcrumb/breadcrumb.tpl.html";return t.templateUrl||a},scope:{displaynameProperty:"@",abstractProxyProperty:"@?"},controller:["$scope",function(e){e.$on("toggleNavView",function(t,a){e.minMode=a}),e.$on("toggleSubNavView",function(t,a){e.isSubNavShow=a})}],link:function(a){function l(){for(var e,l,n=[],r=t.$current;r&&""!==r.name;)e=s(r),e&&(l=o(e),l===!1||i(e,n)||n.push({displayName:l,route:e.name})),r=r.parent;n.reverse(),a.breadcrumbs=n}function s(e){var l,s=e;return e["abstract"]===!0&&("undefined"!=typeof a.abstractProxyProperty?(l=n(a.abstractProxyProperty,e),s=l?t.get(l):!1):s=!1),s}function o(t){var l,s,o;return a.displaynameProperty?(s=n(a.displaynameProperty,t),s===!1?!1:"undefined"==typeof s?t.name:(l="undefined"!=typeof t.locals?t.locals.globals:t,o=e(s)(l))):t.name}function n(e,t){var a,l=e.split("."),s=t;for(a=0;a<l.length;a++){if(!angular.isDefined(s[l[a]]))return void 0;s=s[l[a]]}return s}function i(e,t){var a,l=!1;for(a=0;a<t.length;a++)t[a].route===e.name&&(l=!0);return l}a.breadcrumbs=[],""!==t.$current.name&&l(),a.$on("$stateChangeSuccess",function(){l()})}}}e.$inject=["$interpolate","$state"],angular.module("nqms").directive("acmeBreadcrumb",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){return h}function r(e){h=e}function c(){h=null}function d(){return angular.fromJson(a.sessionStorage.getItem("userinfo"))}function m(e){a.sessionStorage.setItem("userinfo",angular.toJson(e))}function p(){a.sessionStorage.removeItem("userinfo")}function u(t){return e.post(n.system.login,t)}function v(t){return e.get(n.system.getRoleList,{params:t})}function f(t){return e.get(n.system.getNavigation,{params:{roleCode:t.roleCode,userRoleId:t.seqId}})}function b(e,t){h.tab[e]=t,m(h)}function g(e){delete h.tab[e],m(h)}var h,y={getUserinfo:i,setUserinfo:r,clearUserinfo:c,getCacheUser:d,setCacheUser:m,clearCacheUser:p,login:u,getUserRoleList:v,getNavigation:f,addToBreadcrumb:b,removeFromBreadcrumb:g,minMode:!1};return y}e.$inject=["$http","$log","$window","$location","$timeout","$state","apiHost"],angular.module("nqms").factory("security",e)}(),function(){"use strict";function e(e,t,a){return{request:function(e){return e||a.when(e)},requestError:function(l){return t.info("请求失败："+l.statusText,l),e.$broadcast("toast",{type:"error",content:"请检查网络连接或联系服务器管理员！",title:"请求错误"}),a.reject(l)},response:function(t){return-2==t.data.code&&e.$broadcast("logout"),-1==t.data.code&&e.$broadcast("toast",{type:"error",content:t.data.msg}),t.data.code&&0!=t.data.code?a.reject("code error"):t||a.when(t)},responseError:function(l){return t.info("响应失败："+l.statusText,l),e.$broadcast("toast",{type:"error",content:"错误码："+l.status+"<br> URL："+(l.config&&l.config.url||"")+"\n "+(l.message||"")+"<br> 请检查网络连接或联系服务器管理员！",title:"没有响应"}),a.reject(l)}}}e.$inject=["$rootScope","$log","$q"],angular.module("nqms").factory("myHttpInterceptor",e)}(),function(){"use strict";function e(e,t){function a(a){var l=t.system.getDic;return e[l.method](l.url,[{dicType:a}])}var l={getSysDic:a};return l}e.$inject=["$http","apiHost"],angular.module("nqms").factory("dicService",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(){return r?angular.copy(r,[]):null}function i(e){function s(e){return"0"===e.data.code?(r=e.data.data,angular.copy(e.data.data,[])):void l.error("获取科室数据失败！\n"+e.data.msg)}function n(e){l.error("获取科室数据失败！\n"+angular.toJson(e.data,!0))}return t.get(a.user.getDept,{params:{deptCode:e||o.getUserinfo().role.deptCode}}).then(s)["catch"](n)}var r=null,c={apiHost:a,getDeptData:i,getCacheDeptList:n};return c}e.$inject=["$window","$http","apiHost","$log","toastr","security"],angular.module("nqms").factory("deptService",e)}(),function(){"use strict";function e(e,t,a,l){function s(a){var s=t.defer();return u&&!a?s.resolve({users:u,getUserName:i,getUserCode:r}):e.get(l.user.getDept,{params:{deptCode:b}}).then(function(e){var t=e.data.data;u=m(t),v=p(t),s.resolve({users:u,getUserName:i,getUserCode:r})}),s.promise}function o(a){var s=t.defer();return v&&!a?s.resolve({depts:v,getDeptName:c,getDeptCode:d}):e.get(l.user.getDept,{params:{deptCode:b}}).then(function(e){var t=e.data.data;u=m(t),v=p(t),s.resolve({depts:v,getDeptName:c,getDeptCode:d})}),s.promise}function n(a){var s=t.defer();return u&&v&&!a?s.resolve({dept:{depts:v,getDeptName:c,getDeptCode:d},user:{users:u,getUserName:i,getUserCode:r}}):e.get(l.user.getDept,{params:{deptCode:b}}).then(function(e){var t=e.data.data;u=m(t),v=p(t),s.resolve({dept:{depts:v,getDeptName:c,getDeptCode:d},user:{users:u,getUserName:i,getUserCode:r}})}),s.promise}function i(e){var t=_.findWhere(u,{userCode:e});return t?t.userName:""}function r(e){var t=_.findWhere(u,{userName:e});return t?t.userCode:""}function c(e){var t=_.findWhere(v,{deptCode:e});return t?t.deptName:""}function d(e){var t=_.findWhere(v,{deptName:e});return t?t.deptName:""}function m(e){var t=[];return t=t.concat(e.user),_.each(e.belongedDepts,function(e){t=t.concat(m(e))}),t=_.compact(t)}function p(e){var t=[];return t=t.concat([_.pick(e,"deptCode","deptName")]),_.each(e.belongedDepts,function(e){t=t.concat(p(e))}),t}var u,v,f={},b=a.getUserinfo().role.deptCode;return f.getUserHelper=s,f.getDeptHelper=o,f.getHelper=n,f}e.$inject=["$http","$q","security","apiHost"],angular.module("nqms").factory("comService",e)}(),function(){"use strict";function e(e){return{restrict:"E",scope:{list:"="},replace:!0,templateUrl:"app/common/noneDataInfo/noneDataInfo.tpl.html",link:function(t,a){t.isLoading=function(){return e.pendingRequests.length>0},t.$watch(t.isLoading,function(e){e||t.list&&0!==t.list.length?a[0].setAttribute("style","display: none"):a[0].setAttribute("style","display: block")})}}}e.$inject=["$http"],angular.module("nqms").directive("noneDataInfo",e)}(),function(){"use strict";function e(e,t){return{open:function(t){e.open({templateUrl:t.templateUrl,size:t.size,backdrop:"static",appendTo:t.appendTo,animation:t.animation||!0,controller:"ModalController",controllerAs:"vm",resolve:{initFn:function(){return t.initFn},ok:function(){return t.ok},data:function(){return t.data?t.data:void 0},methodsObj:function(){return t.methodsObj?t.methodsObj:void 0}}})},close:function(e){t.dismissAll(e)}}}e.$inject=["$uibModal","$uibModalStack"],angular.module("nqms").factory("modalService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){var i=this;if(i.rootScope=e,i.scope=t,i.formData=s&&s.formData,i.metaData=s&&s.metaData,angular.isObject(o))for(var r in o)i[r]=o[r];else o&&$log.error("methodsObj必须是对象!");n&&n(i),i.ok=function(e){l(i.formData,e)},i.cancel=function(){a.dismiss("cancel")}}e.$inject=["$rootScope","$scope","$uibModalInstance","ok","data","methodsObj","initFn"],angular.module("nqms").controller("ModalController",e)}(),function(){"use strict";function e(e){function t(t,a,l){var s=t.options,o=t.options.func;a.css("position")&&"static"!==a.css("position")||a.css("position","relative"),s.func=function(){e(function(){t.$broadcast("loading",t.type)}),o().then(function(){e(function(){t.$broadcast("loaded",t.type)})})},s.init&&s.func(s.params)}return{restrict:"A",template:'<div ng-transclude></div><loading type="{{type}}"></loading>',scope:{type:"@loadingType",options:"=loadingOptions",init:"@loadingInit"},link:t,transclude:!0}}e.$inject=["$timeout"],angular.module("nqms").directive("loadingWrapper",e)}(),function(){"use strict";function e(e){function t(e,t,a){e.$on("loading",function(e,l){l===a.type&&t.show()}),e.$on("loaded",function(e,l){l===a.type&&t.hide()})}return{restrict:"E",template:'<div class="loading-wrapper"> <div class="spinner"> <div class="spinner-container container1"> <div class="circle1"></div> <div class="circle2"></div> <div class="circle3"></div> <div class="circle4"></div> </div> <div class="spinner-container container2"> <div class="circle1"></div> <div class="circle2"></div> <div class="circle3"></div> <div class="circle4"></div> </div> <div class="spinner-container container3"> <div class="circle1"></div> <div class="circle2"></div> <div class="circle3"></div> <div class="circle4"></div> </div> </div> </div> ',link:t,scope:!0,replace:!0}}e.$inject=["$http"],angular.module("nqms").directive("loading",e)}(),function(){"use strict";angular.module("nqms").filter("capitalize",function(){return function(e){return e?e[0].toUpperCase()+e.slice(1):void 0}})}(),function(){"use strict";function e(e,t,a,l,s){function o(t,a){return e({url:t,method:"POST",data:a}).then(n)}function n(e){return"0"===e.data.code?e:void 0}var i={downloadExcel:o};return i}e.$inject=["$http","$log","$q","toastr","security"],angular.module("nqms").factory("exportExcelService",e)}(),function(){"use strict";function e(e){return{restrict:"E",scope:{},controller:"ExportExcelController",controllerAs:"vm",replace:!0,bindToController:{exslSrc:"=",classList:"="},templateUrl:"app/common/exportExcel/exportExcel.tpl.html"}}e.$inject=["$http"],angular.module("nqms").directive("exportExcel",e)}(),function(){"use strict";function e(e,t,a){function l(){var e,t,a=document.querySelectorAll(".table[st-table] .header-export th"),l=document.querySelectorAll(".table[st-table] tbody td");return e=[].map.call(a,function(e){return e.textContent}),t=[].map.call(l,function(e){return e.textContent}),{header:e,body:t}}function s(t){var s=l();a.downloadExcel(t,s).then(function(t){t&&e.$broadcast("toast",{type:"success",content:"导出成功！"})})}var o=this;o.doExport=s}e.$inject=["$rootScope","$http","exportExcelService"],angular.module("nqms").controller("ExportExcelController",e)}(),function(){"use strict";function e(e){return{restrict:"C",link:function(t,a,l){a.click(function(){a.find(".edit-text-dir").hide(),a.find(".edit-input-dir").show(),a.find(".edit-input-dir").find(".select2-choices").click(),e.$broadcast("hide",a)}),t.$on("hide",function(e,t){a!==t&&(a.find(".edit-text-dir").show(),a.find(".edit-input-dir").hide())})}}}function t(){return{restrict:"C",link:function(e,t,a){}}}function a(){return{restrict:"C",link:function(e,t,a){}}}e.$inject=["$rootScope"],angular.module("nqms").directive("editCellDir",e).directive("editTextDir",t).directive("editInputDir",a)}(),function(){"use strict";function e(){return{restrict:"A",scope:{},controller:"EditableController",controllerAs:"vm",bindToController:{mainCtrl:"=editableForm",name:"=formName"},link:function(e,t,a){e.$parent.editableForm=a.name,e.$parent[a.name].showEdit=function(){e.$parent.isEditing=!0,t.addClass("form-editing")},e.$parent[a.name].endEdit=function(){e.$parent.isEditing=!1,t.removeClass("form-editing")}}}}function t(){return{restrict:"A",scope:!1,require:"?^editableForm",link:function(e,t,a,l){l&&e.$watch("isEditing",function(e){e?t.css("display","inline-block"):t.css("display","none")})}}}function a(){return{restrict:"A",scope:!1,require:"?^editableForm",link:function(e,t,a,l){l&&e.$watch("isEditing",function(e){e?t.css("display","none"):t.css("display","inline-block")})}}}function l(){return{restrict:"A",scope:!1,require:"?^editableForm",link:function(e,t,a,l){l&&e.$watch("isEditing",function(e){e?t.css("display","none"):t.css("display","inline-block")})}}}function s(){return{restrict:"A",scope:!1,require:"?^editableForm",link:function(e,t,a,l){l&&e.$watch("isEditing",function(e){e?t.css("display","inline-block"):t.css("display","none")})}}}angular.module("nqms").directive("editableForm",e).directive("editableInput",t).directive("editableStart",a).directive("editableLabel",l).directive("editableEnd",s)}(),function(){"use strict";function e(e,t){var a=this;a.isEditing=!1,t.$parent.editableForm=a.name}e.$inject=["$rootScope","$scope"],angular.module("nqms").controller("EditableController",e)}(),function(){"use strict";function e(e){var t={restrict:"A",require:"ngModel",link:function(e,t,a,l){l.$formatters.shift(),l.$formatters.shift(),l.$parsers.shift()}};return t}e.$inject=["$filter"],angular.module("nqms").directive("timestampToString",e)}(),function(){"use strict";function e(){var e={restrict:"A",link:function(e,t,a){var l=t.find(".list-content");t.css({height:innerHeight-t.offset().top-10}),l.length>0&&t.find(".list-content").css({height:innerHeight-t.offset().top-t.find(".list-content").position().top-36})}};return e}angular.module("nqms").directive("fullHeight",e)}(),function(){"use strict";function e(e){var t=e("date"),a={restrict:"A",require:"ngModel",link:function(e,a,l,s){s.$formatters.shift(),s.$formatters.shift(),s.$formatters.unshift(function(e){var a;return a="month"==l.commonPicker?t(e,"yyyy-MM"):t(e,"yyyy")}),s.$parsers.push(function(e){var s;return s="month"==l.commonPicker?t(e,"yyyy-MM"):t(e,"yyyy"),a.val(s),e})}};return a}e.$inject=["$filter"],angular.module("nqms").directive("commonPicker",e)}();var countTo=angular.module("countTo",[]).directive("countTo",["$timeout",function(e){return{replace:!1,scope:!0,link:function(t,a,l){var s,o,n,r,c,d,m,p=a[0],u=1,v=0,f=function(){var e=(l.countTo+"").indexOf(".");for(e>-1&&(v=(l.countTo+"").length-e-1),i=v;i>0;i--)u*=10;o=30,c=0,t.timoutId=null,d=parseInt(l.countTo*u)||0,t.value=parseInt(l.value*u,10)||0,n=1e3*parseFloat(l.duration)||0,r=Math.ceil(n/o),m=(d-t.value)/r,s=t.value},b=function(){t.timoutId=e(function(){s+=m,c++,c>=r?(e.cancel(t.timoutId),s=d,p.textContent=(d/u).toFixed(v)):(p.textContent=(Math.round(s)/u).toFixed(v),b())},o)},g=function(){t.timoutId&&e.cancel(t.timoutId),f(),b()};return l.$observe("countTo",function(e){e&&g()}),l.$observe("value",function(e){g()}),!0}}}]);!function(){"use strict";function e(e,t,a,l,s,o,n,i,r,c,d){function m(e){return e.belongedDepts.map(function(e){return e.deptName})}var p=this,u=d.getCacheDeptList(),v=a.defer(),f=[{value:_.random(10),name:"22"},{value:_.random(10),name:"2"},{value:_.random(10),name:"224"},{value:_.random(10),name:"212"},{value:_.random(10),name:"252"}];u?v.resolve(u):v.promise=d.getDeptData(),p.table_1_list=[{name:"蓝色",age:"事故",sex:"31",job:"31%",addr:"广东"},{name:"蓝色",age:"事故",sex:"31",job:"31%",addr:"广东"},{name:"蓝色",age:"事故",sex:"31",job:"31%",addr:"广东"},{name:"蓝色",age:"事故",sex:"31",job:"31%",addr:"广东"},{name:"蓝色",age:"事故",sex:"31",job:"31%",addr:"广东"},{name:"蓝色",age:"事故",sex:"31",job:"31%",addr:"广东"},{name:"蓝色",age:"事故",sex:"31",job:"31%",addr:"广东"},{name:"蓝色",age:"事故",sex:"31",job:"31%",addr:"广东"}],p.stastics={err:{identity:o.generateInstanceIdentity(),dimension:"4:3",config:r.pieInit("")},dept:{identity:o.generateInstanceIdentity(),dimension:"4:1",config:{color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["门诊科","外科","内科","妇产科","儿科","五官科","肝病二区","门诊科","外科","内科","妇产科","儿科","五官科","肝病二区"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"直接访问",type:"bar",barWidth:"60%",data:[10,52,200,334,390,330,220,10,52,200,334,390,330,220]}]}},turns:{identity:o.generateInstanceIdentity(),dimension:"4:1",config:{color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["门诊科","外科","内科","妇产科","儿科","五官科","肝病二区","门诊科","外科","内科","妇产科","儿科","五官科","肝病二区"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"直接访问",type:"bar",barWidth:"60%",data:[10,52,200,334,390,330,220,10,52,200,334,390,330,220]}]}}},p.stastics.err.config.legend.show=!1,p.stastics.err.config.series[0].data=f,v.promise.then(function(e){p.deptArr=m(e)})}e.$inject=["$rootScope","$scope","$q","$state","$stateParams","$echarts","security","moment","chartsService","modalService","deptService"],angular.module("nqms").controller("BDErrorRateController",e)}(),function(){"use strict";function e(e,t,a,l){function s(){var t=i.deptUse.config,a=o();r.forEach(function(e,t){i.catesData[t]={text:e,data:_.pluck(a,t)}}),t.xAxis[0].data=_.keys(a),t.series[0].data=_.pluck(_.values(a),0),t.series[1].data=_.pluck(_.values(a),1),t.series[2].data=_.pluck(_.values(a),2),e.updateEchartsInstance(i.deptUse.identity,t)}function o(){i.names=_.sample(_.pluck(i.depts,"deptName"),8);var e={};return i.names.forEach(function(t){e[t]=[_.random(100,200),_.random(10,100),_.random(10,100)]}),e}function n(e){var t=[];return t=t.concat([_.pick(e,"deptCode","deptName")]),_.each(e.belongedDepts,function(e){t=t.concat(n(e))}),t}var i=this,r=["核对","护记","评估单"];i.catesData=[];var c=a.verBarInit(r);i.deptUse={identity:e.generateInstanceIdentity(),dimension:"16:6",config:c},i.options={month:{datepickerMode:"month",minMode:"month"}},i.queryParams={month:new Date},l.getDeptData().then(function(e){i.depts=n(e),s()})}e.$inject=["$echarts","$state","chartsService","deptService"],angular.module("nqms").controller("BDDeptUseController",e)}(),function(){"use strict";function e(e,t){function a(){var t=s.ba.getter;return e[t.method](t.url)}var l={},s=t.businessAnalyser;return l.getBABrief=a,l}e.$inject=["$http","apiHost"],angular.module("nqms").factory("bDBusAnalyserService",e)}(),function(){"use strict";function e(e,t,a,l){function s(){l.getBABrief().then(function(t){var a=t.data.data,l=[{value:a.statis.hj,name:"护理记录"},{value:a.statis.pgd,name:"护理评估"},{value:a.statis.tys,name:"知情同意书"}];i.series[0].data=l,e.updateEchartsInstance(n.pie.identity,i),n.baseData={bh:a.statis.model,er:(a.statis.errOrderNum/a.statis.orderNum*100).toFixed(2),ws:a.statis.docNum},n.bhData=a.statis.lst,n.wsData=a.statis.lst})}function o(e){t.go("home."+e)}var n=this,i=a.pieInit();delete i.legend,i.series[0].label.normal.show=!1,i.series[0].radius="80%",n.options={month:{datepickerMode:"month",minMode:"month"}},n.queryParams={month:new Date},n.pie={identity:e.generateInstanceIdentity(),dimension:"16:9",config:i},n.go=o,n.load=s,s()}e.$inject=["$echarts","$state","chartsService","bDBusAnalyserService"],angular.module("nqms").controller("BDBusAnalyserController",e)}(),function(){"use strict";function e(e){var t=this;e.getDeptData().then(function(e){t.deptData=e,t.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a=a.replace("护士站","")})}),t.nurseCount={total:778,increase:109,leave:65},t.dutyRoster=[{deptCode:"0211",hours:3376},{deptCode:"5063",hours:3265},{deptCode:"5043",hours:2998},{deptCode:"5042",hours:2776},{deptCode:"2032",hours:2552}],t.malCase={type:"压疮",deptCode:"5043"},t.research={proj:78,paper:691},t.quality={worst:["书写标准","签名正规","人数相符","运用医学术语","特殊用药"],bestDeptCode:"5042",worstDeptCode:"0211"},t.bedNursing={liqDis:10018,doctor:9780,doc:20012,patrol:5012},t.exam={worst:["学习能力","抗压能力","礼貌用语","专业技能","工作态度"],bestDeptCode:"2032",worstDeptCode:"5063"},t.sat={patient:["医疗费用","医院环境","医护态度"],nurse:["工资待遇","排班制度","工作环境"]}}e.$inject=["deptService"],angular.module("nqms").controller("StatisticsController",e)}(),function(){"use strict";function e(e){function t(e){var t=m.pie,a=angular.copy(t,{});return a.title.text=e,a}function a(e){var t=m.horBar,a=angular.copy(t,{});return e.forEach(function(e){var t=angular.copy(a.serie,{});t.name=e,a.series.push(t)}),a.legend.data=e,delete a.serie,a}function l(e){var t=m.verBar,a=angular.copy(t,{});return e.forEach(function(e){var t=angular.copy(a.serie,{});t.name=e,a.series.push(t)}),a.legend.data=e,delete a.serie,a}function s(e,t){var a=m.line,l=angular.copy(a,{});return t&&(t.forEach(function(e){var t=angular.copy(l.serie,{});t.name=e,l.series.push(t)}),l.legend.data=t),l.title.text=e,delete l.serie,l}function o(e,t){var a=m.radar,l=angular.copy(a,{});return l.legend.data=t,l.title.text=e,l}var n={title:{x:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},legend:{orient:"horizontal",bottom:"bottom",data:[]},series:[{type:"pie",radius:"55%",center:["50%","50%"],label:{normal:{show:!0,formatter:"{b} : {c} ({d}%)"}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:[]}]},i={grid:{top:60,right:"2%",left:"2%",bottom:"2%",containLabel:!0},legend:{orient:"horizontal",top:0,data:[]},xAxis:[{type:"value"}],yAxis:[{type:"category",axisTick:{show:!1},data:[]}],serie:{type:"bar",label:{normal:{show:!0}},data:[]},series:[]},r={grid:{top:60,right:"2%",left:"2%",bottom:"2%",containLabel:!0},legend:{orient:"horizontal",top:0,data:[]},xAxis:[{type:"category",axisTick:{show:!1},data:[]}],yAxis:[{type:"value"}],serie:{type:"bar",label:{normal:{show:!0}},data:[]},series:[]},c={title:{x:"center"},tooltip:{trigger:"axis"},legend:{data:[],top:"30"},grid:{left:"3%",right:"3%",top:"80",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[],serie:{type:"line",data:[]}},d={title:{},tooltip:{trigger:"axis"},legend:{x:"center",data:[],top:"30"},grid:{left:"3%",right:"3%",top:"80",containLabel:!0},radar:[],series:[],serie:{type:"radar",tooltip:{trigger:"item"},itemStyle:{normal:{areaStyle:{type:"default"}}},data:[]}},m={pie:n,horBar:i,verBar:r,line:c,radar:d},p={pieInit:t,horBarInit:a,verBarInit:l,lineInit:s,radarInit:o};return p}e.$inject=["$log"],angular.module("nqms").factory("chartsService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){var r,c=this;c.$scope=a,c.minMode=n.minMode,a.isActive=c.isActive=function(e){var t,a=0;return""===e?!1:(a=e.length,t=s.path().substr(-a,a),e===t)},c.$scope.$on("toggleNavView",function(e,t){c.minMode=t}),c.$scope.$on("toggleSubNavView",function(e,t){c.isSubNavShow=t}),t.$on("$stateChangeStart",function(e,t,a,l,s,o){r=n.getUserinfo("isLogined"),"login"===t.name&&r&&e.preventDefault()})}e.$inject=["$log","$rootScope","$scope","$uibModal","$location","$window","security","$state"],angular.module("nqms").controller("MainController",e)}(),function(){"use strict";function e(e,t,a,l){function s(){n.loginBtnStatus.title="登录",n.loginBtnStatus.state=""}function o(){n.formData={}}var n=this;n.reset=o,n.loginBtnStatus={title:"登录",state:""},n.login=function(t){n.loginBtnStatus.title="正在登录...",n.loginBtnStatus.state="disabled",l.login(t).then(function(t){var s={user:t.data.data.user,nav:t.data.data.funs,role:t.data.data.role,tab:{}};l.setUserinfo(s),l.setCacheUser(s),e.$broadcast("toast",{type:"success",content:"登陆成功"}),a.go("home"),e.$broadcast("init")})["finally"](s)},n.validationOption={blurTrig:!0}}e.$inject=["$rootScope","$log","$state","security"],angular.module("nqms").config(["w5cValidatorProvider",function(e){e.setRules({loginName:{required:"用户名不能为空",pattern:"用户名必须输入字母、数字、下划线"},password:{required:"密码不能为空",minlength:"密码长度不能小于{minlength}",maxlength:"密码长度不能大于{maxlength}"}})}]).controller("LoginController",e)}(),function(){"use strict";function e(e,t){function a(e){var t={};return t.deptCode=e.deptCode,t.deptName=e.deptName,_.each(e.belongedDepts,function(t,l){e.belongedDepts[l]=a(t)}),Array.isArray(e.user)&&e.user.forEach(function(t){t.deptCode=e.deptCode,t.deptName=e.deptName}),t.children=_.compact([].concat(e.belongedDepts)),t}function l(t){e.$broadcast("deptchange",t.deptCode)}var s=this;s.select=l,s.treeOption={allowDeselect:!1},t.getDeptData().then(function(t){s.deptData=t,s.treeData=[a(t)],s.expandedNodes=[s.treeData[0]],s.selectedNode=s.treeData[0],e.$watch("vm.filterText",function(e){e?s.expandedNodes=[].concat(s.treeData[0]).concat(s.treeData[0].children):s.expandedNodes=[s.treeData[0]]})})}e.$inject=["$scope","deptService"],angular.module("nqms").controller("DeptTreeCtrl",e)}(),angular.module("ngLocale",[],["$provide",function(e){var t={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["上午","下午"],DAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ERANAMES:["公元前","公元"],ERAS:["公元前","公元"],FIRSTDAYOFWEEK:6,MONTH:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],SHORTDAY:["周日","周一","周二","周三","周四","周五","周六"],SHORTMONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],STANDALONEMONTH:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],WEEKENDRANGE:[5,6],fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"y年M月d日 ah:mm:ss",mediumDate:"y年M月d日",mediumTime:"ah:mm:ss","short":"yy/M/d ah:mm",shortDate:"yy/M/d",shortTime:"ah:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"¥",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤ ",negSuf:"",posPre:"¤ ",posSuf:""}]},id:"zh-cn",localeID:"zh_CN",pluralCat:function(e,a){return t.OTHER}})}]),function(){"use strict";function e(e,t,a,l,s){e.$on("toast",function(e,t){t=t||{},a[t.type||"success"](t.content||"操作成功",t.title||"")}),e.$on("logout",function(e){l.clearUserinfo(),l.clearCacheUser(),t.go("login")}),e.$on("init",function(t){s.getSysDic().then(function(t){e.dicInfo=t.data.data.dicInfo,e.getDicName=_.memoize(function(t,a){var l;return _.some(e.dicInfo[t],function(e){return e.dicCode==a?(l=e.dicName,!0):void 0}),l||a},function(e,t){return e+t}),e.getDicCode=_.memoize(function(t,a){var l;return _.some(e.dicInfo[t],function(e){return e.dicName==a?(l=e.dicCode,!0):void 0}),l||code},function(e,t){return e+t})})})}e.$inject=["$rootScope","$state","toastr","security","dicService"],angular.module("nqms").run(e)}(),function(){"use strict";function e(e,t,a,l){a.patientSatTypes=["住院安全与环境","护理技术","尊重病人","情感支持","健康教育"],a.nurseSatTypes=["医院与工作环境"];var s=l.getCacheUser();s?(l.setUserinfo(s),a.$broadcast("init")):t.go("login")}e.$inject=["$window","$state","$rootScope","security"],angular.module("nqms").run(e)}(),function(){"use strict";function e(e,t,a){e.state("home",{url:"/home",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main",data:{displayName:"首页"}}).state("home.files",{url:"/files",templateUrl:"app/nursingWorkers/files/files.tpl.html",controller:"NursingWorkersFileController",controllerAs:"vm",data:{displayName:"员工档案"}}).state("home.add",{url:"/add",templateUrl:"app/nursingWorkers/add/add.tpl.html",controller:"HrAddController",controllerAs:"vm",data:{displayName:"科护长维护"}}).state("home.add.detail",{url:"/add/:deptCode",templateUrl:"app/nursingWorkers/add/add.detail.html",controller:"AddDetailController",controllerAs:"vm",data:{displayName:"员工列表"}}).state("home.alt",{url:"/alt",templateUrl:"app/nursingWorkers/alt/alt.tpl.html",controller:"AltCtrl",controllerAs:"vm",data:{displayName:"员工变更"}}).state("home.alt.detail",{url:"/altDetail/:userCode?deptCode&deptName",templateUrl:"app/nursingWorkers/alt/alt.detail.html",controller:"AltDetailCtrl",controllerAs:"vm",data:{displayName:"变更细则"}}).state("home.dept",{url:"/dept",templateUrl:"app/nursingWorkers/dept/dept.tpl.html",controller:"DeptController",controllerAs:"vm"}).state("home.quit",{url:"/quit",templateUrl:"app/nursingWorkers/quit/quit.tpl.html",controller:"HrQuitController",controllerAs:"vm"}).state("home.search",{url:"/search",templateUrl:"app/nursingWorkers/search/search.tpl.html",controller:"HrSearchController",controllerAs:"vm"}).state("home.qrcode",{url:"/qrcode",templateUrl:"app/nursingWorkers/qrcode/qrcode.tpl.html",controller:"HrQrcodeController",controllerAs:"vm"}).state("home.baseInfo",{url:"/baseInfo",templateUrl:"app/nursingWorkers/baseInfo/base.tpl.html",controller:"BaseInfoCtrl",controllerAs:"vm",data:{displayName:"员工档案"}}).state("home.baseInfo.stat",{url:"/stat/:id",templateUrl:"app/nursingWorkers/baseInfo/stat.tpl.html",controller:"BaseInfoStatCtrl",controllerAs:"vm",data:{displayName:"科室概况"}}).state("home.baseInfo.detail",{url:"/detail/:id?dept&deptN&hisCode",templateUrl:"app/nursingWorkers/baseInfo/detail.tpl.html",controller:"BaseInfoDetailCtrl",controllerAs:"vm",data:{displayName:"详细信息"}}).state("home.internship",{url:"/internship",templateUrl:"app/nursingWorkers/internship/internship.tpl.html",controller:"NursingWorkersInternshipController",controllerAs:"vm"}).state("home.graduate",{url:"/graduate",templateUrl:"app/nursingWorkers/graduate/graduate.tpl.html",controller:"NursingWorkersGraduateController",controllerAs:"vm"}).state("home.technical",{url:"/technical",templateUrl:"app/nursingWorkers/technical/technical.tpl.html",controller:"NursingWorkersTechnicalController",controllerAs:"vm"}).state("home.ulteriorly",{url:"/ulteriorly",templateUrl:"app/nursingWorkers/ulteriorly/ulteriorly.tpl.html",controller:"NursingWorkersUlteriorlyController",controllerAs:"vm"}).state("home.endemicArea",{url:"/endemicArea",templateUrl:"app/duty/setting/setting.tpl.html",data:{displayName:"排班配置"}}).state("home.turns",{url:"/turns",templateUrl:"app/duty/turns/turns.tpl.html",controller:"DepartmentManagerTurnsController",controllerAs:"vm",data:{displayName:"排班表"}}).state("home.leave",{url:"/leave",templateUrl:"app/duty/leave/leave.tpl.html",data:{displayName:"请假"}}).state("home.departmentStatistics",{url:"/departmentStatistics",templateUrl:"app/duty/statistics/statistics.tpl.html",data:{displayName:"统计上报"}}).state("home.config",{url:"/eventConfig",templateUrl:"app/malCaseUp/type/type.tpl.html",controller:"MalCaseUpTypeController",controllerAs:"vm",data:{displayName:"事件配置"}}).state("home.call",{url:"/eventCall",templateUrl:"app/malCaseUp/call/call.tpl.html",controller:"MalCaseUpCallController",controllerAs:"vm",data:{displayName:"不良事件上报"}}).state("home.call.callForm",{url:"/callForm/:reportCode",templateUrl:"app/malCaseUp/call/callForm/callForm.tpl.html",controller:"CallFormController",controllerAs:"vm",data:{displayName:"上报信息"},params:{report:null}}).state("home.call.survey",{url:"/survey/:reportCode",templateUrl:"app/malCaseUp/call/survey/survey.tpl.html",controller:"SurveyController",controllerAs:"vm",data:{displayName:"调查处理表"}}).state("home.fix",{url:"/eventFix",templateUrl:"app/malCaseUp/fix/fix.tpl.html",controller:"MalCaseUpHandleController",controllerAs:"vm",data:{displayName:"不良事件整改"}}).state("home.fix.fixCenter",{url:"/eventFixCenter/:reportCode",templateUrl:"app/malCaseUp/fix/abstract.html",controller:["$stateParams",function(e){console.log(e)}],"abstract":!0}).state("home.fix.fixCenter.caseInfo",{url:"/caseInfo",templateUrl:"app/malCaseUp/fix/caseInfo/caseInfo.tpl.html",controller:"CaseInfoController",controllerAs:"vm",data:{displayName:"不良事件信息"}}).state("home.fix.fixCenter.surveyInfo",{url:"/surveyInfo",templateUrl:"app/malCaseUp/fix/surveyInfo/surveyInfo.tpl.html",controller:"SurveyInfoController",controllerAs:"vm",data:{displayName:"调查处理信息"}}).state("home.fix.fixCenter.requirement",{url:"/requirement",templateUrl:"app/malCaseUp/fix/requirement/requirement.tpl.html",controller:"RequirementController",controllerAs:"vm",data:{displayName:"整改要求"}}).state("home.fix.fixCenter.measures",{url:"/measures",templateUrl:"app/malCaseUp/fix/measures/measures.tpl.html",controller:"MeasuresController",controllerAs:"vm",data:{displayName:"整改措施"}}).state("home.fix.fixCenter.estimate",{url:"/estimate",templateUrl:"app/malCaseUp/fix/estimate/estimate.tpl.html",controller:"EstimateController",controllerAs:"vm",data:{displayName:"整改效果评估"}}).state("home.query",{url:"/eventQuery",templateUrl:"app/malCaseUp/handle/handle.tpl.html",controller:"MalCaseUpHandleController",controllerAs:"vm",data:{displayName:"不良事件整改"}}).state("home.type",{url:"/type",templateUrl:"app/malCaseUp/type/type.tpl.html",controller:"MalCaseUpTypeController",
controllerAs:"vm",data:{displayName:"不良事件上报类型"}}).state("home.level",{url:"/level",templateUrl:"app/malCaseUp/level/level.tpl.html",controller:"MalCaseUpLevelController",controllerAs:"vm",data:{displayName:"不良事件分级标准"}}).state("home.handle",{url:"/handle",templateUrl:"app/malCaseUp/handle/handle.tpl.html",controller:"MalCaseUpHandleController",controllerAs:"vm",data:{displayName:"不良事件处理"}}).state("home.dispose",{url:"/dispose/:reportCode",templateUrl:"app/malCaseUp/handle/dispose/placeholder.html",controller:"MalCaseUpDisposeController",controllerAs:"vm",data:{displayName:"不良事件整改"}}).state("home.rectify",{url:"/rectify/:reportCode",templateUrl:"app/malCaseUp/handle/rectify/rectify.tpl.html",controller:"MalCaseUpRectifyController",controllerAs:"vm"}).state("home.estimate",{url:"/estimate/:reportCode",templateUrl:"app/malCaseUp/handle/estimate/estimate.tpl.html",controller:"MalCaseUpEstimateController",controllerAs:"vm"}).state("home.handle.malCase",{url:"/malCase",templateUrl:"app/malCaseUp/handle/malCaseInfo.tpl.html"}).state("home.handle.report",{url:"/report",templateUrl:"app/malCaseUp/handle/report.tpl.html"}).state("home.handle.reportXk",{url:"/reportXk",templateUrl:"app/malCaseUp/handle/reportXk.tpl.html"}).state("home.handle.requirement",{url:"/requirement",templateUrl:"app/malCaseUp/handle/requirement.tpl.html"}).state("home.handle.measures",{url:"/measures",templateUrl:"app/malCaseUp/handle/measures.tpl.html"}).state("home.handle.estimate",{url:"/estimate",templateUrl:"app/malCaseUp/handle/estimate.tpl.html"}).state("home.element",{url:"/element",templateUrl:"app/malCaseUp/element/element.tpl.html",controller:"MalCaseUpElementController",controllerAs:"vm"}).state("malCaseUpStatistics",{url:"/statistics",templateUrl:"app/malCaseUp/statistics/statistics.tpl.html",controller:"MalCaseUpStatisticsController",controllerAs:"vm"}).state("home.roles",{url:"/roles",templateUrl:"app/system/roles/roles.tpl.html",controller:"RolesController",controllerAs:"vm"}).state("home.users",{url:"/users",templateUrl:"app/system/users/users.tpl.html",controller:"UsersController",controllerAs:"vm"}).state("home.workManual",{url:"/manualWork",templateUrl:"app/manual/workManual/workManual.tpl.html",controller:"ManualWorkController",controllerAs:"vm"}).state("home.manualItem",{url:"/manualItem",templateUrl:"app/manual/item/item.tpl.html",controller:"ManualItemController",controllerAs:"vm"}).state("home.qualityCheck",{url:"/qualityCheck",templateUrl:"app/quality/check/check.tpl.html",controller:"QualityCheckController",controllerAs:"vm"}).state("home.qualityDeal",{url:"/qualityDeal",templateUrl:"app/quality/deal/deal.tpl.html",controller:"QualityDealController",controllerAs:"vm"}).state("home.qualityForm",{url:"/qualityForm",templateUrl:"app/quality/setting/group/group.tpl.html"}).state("home.qualityModel",{url:"/qualityModel",templateUrl:"app/quality/setting/template/template.tpl.html"}).state("home.qualityTask",{url:"/qualityTask",templateUrl:"app/quality/task/task.tpl.html",controller:"QualityTaskController",controllerAs:"vm"}).state("home.qualityFormAdd",{url:"/qualityFormAdd?id",templateUrl:"app/quality/setting/template/add.tpl.html",controller:"QualityAddFormController",controllerAs:"vm"}).state("home.qualityTaskAdd",{url:"/qualityTaskAdd?id",templateUrl:"app/quality/task/add.tpl.html",controller:"QualityTaskAddController",controllerAs:"vm"}).state("home.researchItem",{url:"/researchItem",templateUrl:"app/research/item/item.tpl.html",controller:"ResearchItemController",controllerAs:"vm"}).state("home.researchPapers",{url:"/researchPapers",templateUrl:"app/research/papers/papers.tpl.html",controller:"ResearchPapersController",controllerAs:"vm"}).state("home.techFiles",{url:"/techFiles",templateUrl:"app/techFiles/techFiles/techFiles.tpl.html",controller:"TechFileController",controllerAs:"vm"}).state("home.jci",{url:"/jci",templateUrl:"app/techFiles/jci/jci.tpl.html",controller:"TechFileJCIController",controllerAs:"vm"}).state("home.nurseSatTemp",{url:"/nurseSatTemp",templateUrl:"app/sat/nurse/temp.tpl.html",controller:"SatNurseTempController",controllerAs:"vm"}).state("home.nurseSatResult",{url:"/nurseSatResult",templateUrl:"app/sat/nurse/result.tpl.html",controller:"SatNurseResultController",controllerAs:"vm"}).state("home.patientSatTemp",{url:"/patientSatTemp",templateUrl:"app/sat/patient/temp.tpl.html",controller:"SatPatientTempController",controllerAs:"vm"}).state("home.patientSatResult",{url:"/patientSatResult",templateUrl:"app/sat/patient/result.tpl.html",controller:"SatPatientResultController",controllerAs:"vm"}).state("home.statistics",{url:"/statisticsGlance",templateUrl:"app/statistics/main.tpl.html",controller:"StatisticsController",controllerAs:"vm"}).state("home.nurseManagerStat",{templateUrl:"app/statistics/nurseManager/stat.tpl.html"}).state("home.nurseManagerStat.form",{url:"/nurseManagerStatForm",templateUrl:"app/statistics/nurseManager/form.tpl.html",controller:"NurseManagerStatFormCtrl",controllerAs:"vm"}).state("home.nurseManagerStat.transfer",{url:"/nurseManagerStatTransfer",templateUrl:"app/statistics/nurseManager/transfer.tpl.html",controller:"NurseManagerStatTransferCtrl",controllerAs:"vm"}).state("home.researchStat",{url:"/researchStat",templateUrl:"app/statistics/research/stat.tpl.html",controller:"ResearchStatCtrl",controllerAs:"vm"}).state("home.dutyStat",{url:"/dutyStat",templateUrl:"app/statistics/duty/stat.tpl.html",controller:"DutyStatCtrl",controllerAs:"vm"}).state("home.examStat",{url:"/examStat",templateUrl:"app/statistics/exam/stat.tpl.html",controller:"ExamStatCtrl",controllerAs:"vm"}).state("home.satStat",{templateUrl:"app/statistics/sat/stat.tpl.html"}).state("home.satStat.patient",{url:"/patientSatStat",templateUrl:"app/statistics/sat/patient.tpl.html",controller:"PatientSatStatCtrl",controllerAs:"vm"}).state("home.satStat.nurse",{url:"/nurseSatStat",templateUrl:"app/statistics/sat/nurse.tpl.html",controller:"NurseSatStatCtrl",controllerAs:"vm"}).state("home.malCaseStat",{url:"/malCaseStat",templateUrl:"app/statistics/malCase/stat.tpl.html",controller:"MalCaseStatCtrl",controllerAs:"vm"}).state("home.qualityStat",{url:"/qualityStat",templateUrl:"app/statistics/quality/stat.tpl.html",controller:"QualityStatCtrl",controllerAs:"vm"}).state("home.bedNursing",{templateUrl:"app/statistics/bedNursing/stat.tpl.html"}).state("home.bedNursing.liqDis",{url:"/bedNursingLiqDisStat",templateUrl:"app/statistics/bedNursing/liqDis.tpl.html",controller:"BedNursingLiqDisStatCtrl",controllerAs:"vm"}).state("home.bedNursing.doctor",{url:"/bedNursingDoctorStat",templateUrl:"app/statistics/bedNursing/doctor.tpl.html",controller:"BedNursingDoctorStatCtrl",controllerAs:"vm"}).state("home.bedNursing.doc",{url:"/bedNursingDocStat",templateUrl:"app/statistics/bedNursing/doc.tpl.html",controller:"BedNursingDocStatCtrl",controllerAs:"vm"}).state("home.bedNursing.patrol",{url:"/bedNursinPatrolStat",templateUrl:"app/statistics/bedNursing/patrol.tpl.html",controller:"BedNursingPatrolStatCtrl",controllerAs:"vm"}).state("home.bedNursing.sign",{url:"/bedNursinSignStat",templateUrl:"app/statistics/bedNursing/sign.tpl.html",controller:"BedNursingSignStatCtrl",controllerAs:"vm"}).state("home.systemCalendar",{url:"/systemCalendar",templateUrl:"app/system/calendar/calendar.tpl.html",controller:"CalendarController",controllerAs:"vm"}).state("home.ba",{url:"/busAnalyser",templateUrl:"app/bd/ba/ba.tpl.html",controller:"BDBusAnalyserController",controllerAs:"vm",data:{displayName:"护理业务分析"}}).state("home.er",{url:"/errorRate",templateUrl:"app/bd/er/er.tpl.html",controller:"BDErrorRateController",controllerAs:"vm",data:{displayName:"近似差错率分析"}}).state("home.du",{url:"/deptUse",templateUrl:"app/bd/du/du.tpl.html",controller:"BDDeptUseController",controllerAs:"vm",data:{displayName:"科室使用情况"}}).state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginController",controllerAs:"vm"}),t.otherwise("/login")}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("nqms").config(e)}(),function(){"use strict";angular.module("nqms").constant("moment",moment).constant("apiHost",function(){var e="/mnisqm";return{system:{login:e+"/system/login",getRoleList:e+"/system/getRoleLst",getDic:{url:e+"/system/getSysDic",method:"post"},getNavigation:e+"/system/getFunction",calendar:{setter:{url:e+"/system/creatSysDate",method:"post"},update:{url:e+"/system/updateSysDate",method:"post"},getter:{url:e+"/system/querySysDate",method:"get"}}},user:{getDept:e+"/user/getUserDepts",quit:{url:e+"/user/changeUserType",method:"post"},retire:{url:e+"/user/changeUserType",method:"post"},getComUserChange:{url:e+"/user/getAllComUserChange",method:"get"},setUserHeader:{url:e+"/user/saveDeptNurseHeader",method:"post"}},files:{getUserList:e+"/user/getUserList",getDimissionUserList:e+"/user/getDimissionUserList",getUserDetailInfo:e+"/user/getUserDetailInfo",add:e+"/user/insertObj","delete":e+"/user/deleteUserInfo",update:e+"/user/updateObj",save:e+"/user/saveComUser",saveChange:e+"/user/saveComUserChange",saveUserDept:e+"/user/saveUserDept",getUserStatistics:e+"/user/getUserStatistics"},roles:{getNotHaveFunction:e+"/system/getNotHaveFunction",getFunction:e+"/system/getFunction",getHaveFunction:e+"/system/getHaveFunction",updateRole:e+"/system/saveSysRoleFuns",deleteRole:e+"/system/deleteRole",saveRole:e+"/system/saveRole"},users:{getUserList:e+"/system/getSysUserList",deleteUser:e+"/system/deleteSysUser",deleteUserRole:e+"/system/deleteSysUserRole",saveUserRole:e+"/system/saveSysUserRole",saveUser:e+"/system/saveSysUser"},events:{getEventTypeList:e+"/event/getEventTypeList",getEventList:e+"/event/getEventList",getEventReport:e+"/event/getEventReport",saveEventReport:e+"/event/saveEventReport",deleteEventReport:e+"/event/deleteEventReport",getReportDetail:e+"/event/getReportDetail",saveReportDetail:e+"/event/saveReportDetail",saveEventRequirement:e+"/event/saveEventRequirement",getEventRequirement:e+"/event/getEventRequirement",deleteEventRequirement:e+"/event/deleteEventRequirement",saveEventMeasures:e+"/event/saveEventMeasures",getEventMeasures:e+"/event/getEventMeasures",deleteEventMeasures:e+"/event/deleteEventMeasures",saveEventLevel:e+"/event/saveEventLevel",getEventLevels:e+"/event/getEventLevels",deleteEventLevel:e+"/event/deleteEventLevel",handleEventReport:e+"/event/handleEventReport"},schedule:{copySchedule:e+"/schedule/copySchedule",newSchedule:e+"/schedule/newSchedule",saveSchedule:e+"/schedule/saveSchedule",getSchedule:e+"/schedule/getSchedule",getGroupList:e+"/schedule/getGroupList",deleteGroup:e+"/schedule/deleteGroup",saveGroup:e+"/schedule/saveGroup",getClassList:e+"/schedule/getClassList",saveClass:e+"/schedule/saveClass",deleteClass:e+"/schedule/deleteClass",getLeaveList:e+"/schedule/getLeaveList",saveScheduleLeave:e+"/schedule/saveScheduleLeave",deleteScheduleLeave:e+"/schedule/deleteScheduleLeave",apprvScheduleLeave:e+"/schedule/apprvScheduleLeave",getRuleList:e+"/schedule/getRuleList",saveRule:e+"/schedule/saveRule",deleteRule:e+"/schedule/deleteRule",getUserNurses:e+"/schedule/getUserNurses",batchSaveUserNurse:e+"/schedule/batchSaveUserNurse",getChangeClass:e+"/schedule/getChangeClass",saveChangeClass:e+"/schedule/saveChangeClass",deleteChangeClass:e+"/schedule/deleteChangeClass",apprvChangeClass:e+"/schedule/apprvChangeClass",statistics:{getByLeave:e+"/schedule/getCountByLeave",getByDays:e+"/schedule/getCountByDays",getByClass:e+"/schedule/getCountByClass"}},manual:{item:{get:e+"/manualWork/queryManualWorkItemByDeptCode",save:e+"/manualWork/saveManualWorkItem","delete":e+"/manualWork/deleteManualWorkItem",update:e+"/manualWork/updateManualWorkItem"},workManual:{get:e+"/manualWork/queryManualWorkByDeptCodeAndDate",save:e+"/manualWork/saveManualWork","delete":e+"/manualWork/saveManualWorkDetail",update:e+"/manualWork/updateManualWorkDetail"}},research:{getResearchItems:e+"/research/getResearchItems",saveResearchItem:e+"/research/saveResearchItem",deleteResearchItem:e+"/research/deleteResearchItem",saveResearchPaper:e+"/research/saveResearchPaper",getResearchPapers:e+"/research/getResearchPapers",deleteResearchPaper:e+"/research/deleteResearchPaper"},qualityManager:{getQualityFormList:e+"/quality/queryQualityFormByDeptCodeAndType",editQualityForm:e+"/quality/updateQualityForm",saveQualityForm:e+"/quality/saveQualityForm",deleteQualityForm:e+"/quality/deleteQualityForm",getQualityTaskList:e+"/quality/queryQTRByTimeAndTypeAndDeptCode",editQualityTask:e+"/quality/updateQualityTask",saveQualityTask:e+"/quality/saveQualityTask",deleteQualityTask:e+"/quality/deleteQualityTask",getAllQualityForm:e+"/quality/queryAllQualityForm",getQualityCheckDetail:e+"/quality/queryQRByTimeAndFormNameAndDeptCode",getQualityCheckList:e+"/quality/queryQRByTimeAndFormNameAndDeptCode",editQualityCheck:e+"/quality/updateQualityResult",deleteQualityCheck:e+"/quality/deleteQualityResult",getQualityDealList:e+"/quality/getQualityIssueManageByResultCode",saveQualityDeal:e+"/quality/saveQualityIssueManage",editQualityDeal:e+"/quality/updateQualityIssueManage",deleteQualityDeal:e+"/quality/deleteQualityIssueManage",getQualityResultCode:e+"/quality/queryQIMByTimeAndTypeAndDeptCode",group:{setter:{url:e+"/quality/saveQualityTeam",method:"post"},getter:{url:e+"/quality/queryQualityTeamByTeamName",method:"post"},deleter:{url:e+"/quality/deleteQualityTeam",method:"post"}},model:{setter:{url:e+"/quality/saveQualityModel",method:"post"},getter:{url:e+"/quality/getQualityModel",method:"get"},deleter:{url:e+"/quality/deleteQualityModel",method:"post"}},plan:{setter:{url:e+"/quality/saveQualityPlan",method:"post"},getter:{url:e+"/quality/getQualityPlan",method:"post"},deleter:{url:e+"/quality/getQualityPlan",method:"post"}}},techFiles:{getNurseList:{url:e+"/user/getUserList",method:"get"},updateNurseInfo:{url:e+"/user/saveComUser",method:"post"},academic:{setter:{url:e+"/ProfSkillDoc/saveAcademicConference",method:"post"},getter:{url:e+"/ProfSkillDoc/getAcademicConferences",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteAcademicConference",method:"get"}},assessment:{setter:{url:e+"/ProfSkillDoc/saveAssessment",method:"post"},getter:{url:e+"/ProfSkillDoc/getAssessment",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteAssessment",method:"get"}},awardPunish:{setter:{url:e+"/ProfSkillDoc/saveAwardPunishmentInfo",method:"post"},getter:{url:e+"/ProfSkillDoc/getAwardPunishmentInfo",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteAwardPunishmentInfo",method:"get"}},conEducation:{setter:{url:e+"/ProfSkillDoc/saveContinuingEducation",method:"post"},getter:{url:e+"/ProfSkillDoc/getContinuingEducation",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteContinuingEducation",method:"get"}},cprAcls:{setter:{url:e+"/ProfSkillDoc/saveCprAcls",method:"post"},getter:{url:e+"/ProfSkillDoc/getCprAcls",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteCprAcls",method:"get"}},eduRecord:{setter:{url:e+"/ProfSkillDoc/saveEducationRecordInspection",method:"post"},getter:{url:e+"/ProfSkillDoc/getEducationRecordInspection",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteEducationRecordInspection",method:"get"}},nurseHirReg:{setter:{url:e+"/ProfSkillDoc/saveNurseHirarchicalRegistration",method:"post"},getter:{url:e+"/ProfSkillDoc/getNurseHirarchicalRegistration",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteNurseHirarchicalRegistration",method:"get"}},perAssessment:{setter:{url:e+"/ProfSkillDoc/savePersonalAssessment",method:"post"},getter:{url:e+"/ProfSkillDoc/getPersonalAssessment",method:"post"},deleter:{url:e+"/ProfSkillDoc/deletePersonalAssessment",method:"get"}},posStatement:{setter:{url:e+"/ProfSkillDoc/savePositionStatement",method:"post"},getter:{url:e+"/ProfSkillDoc/getPositionStatement",method:"post"},deleter:{url:e+"/ProfSkillDoc/deletePositionStatement",method:"get"}},preJobTrain:{setter:{url:e+"/ProfSkillDoc/savePreJobTraining",method:"post"},getter:{url:e+"/ProfSkillDoc/getPreJobTraining",method:"post"},deleter:{url:e+"/ProfSkillDoc/deletePreJobTraining",method:"get"}},nurseExp:{setter:{url:e+"/ProfSkillDoc/saveSpecialistNursesExperience",method:"post"},getter:{url:e+"/ProfSkillDoc/getSpecialistNursesExperience",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteSpecialistNursesExperience",method:"get"}}},satisfaction:{satTemp:{single:{url:e+"/satTemplate/getSatTemplateByFormCode",method:"get"},setter:{url:e+"/satTemplate/saveSatTemplate",method:"post"},updater:{url:e+"/satTemplate/updateSatTemplate",method:"post"},deleter:{url:e+"/satTemplate/deleteSatTemplate",method:"post"},getter:{url:e+"/satTemplate/querySatTemplateByFormType",method:"get"}},satResult:{setter:{url:e+"/satTemplate/saveSatResult",method:"post"},updater:{url:e+"/satTemplate/updateSatResult",method:"post"},deleter:{url:e+"/satTemplate/deleteSatResult",method:"post"},getter:{url:e+"/satTemplate/queryByDateAndFormTypeAndPatient",method:"get"}}},deptManager:{dept:{setter:{url:e+"/user/saveDept",method:"post"},deleter:{url:e+"/user/deleteDept",method:"get"},getter:{url:e+"/user/getAllDepts",method:"get"}},userDept:{setter:{url:e+"/user/saveUserDept",method:"post"},deleter:{url:e+"/user/deleteUserDept",method:"get"}}},businessAnalyser:{ba:{getter:{url:e+"/smart/getMnisStatis",method:"get"}}}}}())}(),function(){"use strict";function e(e,t,a,l,s){e.debugEnabled(!0),t.autoDismiss=!0,t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-center",t.progressBar=!1,t.preventOpenDuplicates=!0,t.iconClasses={error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},a.config({blurTrig:!0,showError:!0,removeError:!0}),a.setRules({calendarYear:{number:"必须输入数字"},leaningTime:{required:"必填项",number:"请输入数字"}}),s.pagination.template="app/components/pagination/pagination.tpl.html",l.interceptors.push("myHttpInterceptor")}e.$inject=["$logProvider","toastrConfig","w5cValidatorProvider","$httpProvider","stConfig"],angular.module("nqms").config(e)}(),angular.module("nqms").run(["$templateCache",function(e){e.put("app/login/login.html",'<div class="login-wrapper"><div class="header"><div class="container"><img src="../../assets/images/logo2.png" alt=""></div></div><div class="content"><div class="form-box"><div class="form-title"><span class="title-text">用户登录</span></div><div class="form-content"><form class="clearfix w5c-form" id="loginForm" novalidate="" w5c-form-validate="vm.validationOption" name="loginForm"><div class="form-unit"><label for="userName">用户名</label><div class="form-input"><input type="text" id="userName" autocomplete="off" ng-pattern="/^[0-9A-Za-z_]{1,19}$/" required="" ng-model="vm.formData.loginName" name="loginName" placeholder="用户名"></div></div><div class="form-unit"><label for="userName">密&nbsp;&nbsp;码</label><div class="form-input"><input type="password" name="password" id="password" autocomplete="off" required="" ng-model="vm.formData.password" placeholder="密码"> <span class="reset" ng-click="vm.reset()">重置</span></div></div><div class="form-btn"><input class="_btn" id="loginBtn" type="button" value="登 录" w5c-form-submit="vm.login(vm.formData)"></div></form></div></div></div><div class="footer"><p>深圳市联新移动医疗科技有限公司版权所有</p><p>当前版本：v3</p></div></div>'),e.put("app/main/main.html",'<div class="main-wrapper container-fluid full-screen"><acme-header></acme-header><acme-navbar></acme-navbar><acme-breadcrumb displayname-property="data.displayName" abstract-proxy-property="data.proxy"></acme-breadcrumb><div class="main-body container-fluid" ui-view="" ng-class="{\'main-body_min-nav\': main.minMode, \'sub-nav-hidden\': !main.isSubNavShow}"></div><div class="footer">Copyright © 2016 深圳联新移动医疗有限公司 All Rights Reserved.</div></div>'),e.put("app/role/role.tpl.html",'<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Title</title></head><body></body></html>'),e.put("app/statistics/main.tpl.html",'<div class="statistics-wrapper"><div class="row"><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.nurseManagerStat.form"><div class="statistics-title">护理人员管理</div><div class="statistics-content"><p class="row"><span class="col-md-6">总人数：</span><span class="col-md-6 text-right">{{vm.nurseCount.total}}人</span></p><p class="row"><span class="col-md-6">新增：</span><span class="col-md-6 text-right">{{vm.nurseCount.increase}}人</span></p><p class="row"><span class="col-md-6">离开：</span><span class="col-md-6 text-right">{{vm.nurseCount.leave}}人</span></p></div></a></div></div><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.researchStat"><div class="statistics-title">科研管理</div><div class="statistics-content"><p class="row"><span class="col-md-8">全院科研项目：</span> <span class="col-md-4 text-right">{{vm.research.proj}}个</span></p><p class="row"><span class="col-md-8">全院科研论文：</span> <span class="col-md-4 text-right">{{vm.research.paper}}篇</span></p></div></a></div></div><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.bedNursing.liqDis"><div class="statistics-title">床旁护理</div><div class="statistics-content"><p class="row"><span class="col-md-8">配液次数：</span> <span class="col-md-4 text-right">{{vm.bedNursing.liqDis}}</span></p><p class="row"><span class="col-md-8">医嘱执行次数：</span> <span class="col-md-4 text-right">{{vm.bedNursing.doctor}}</span></p><p class="row"><span class="col-md-8">文书体征使用次数：</span> <span class="col-md-4 text-right">{{vm.bedNursing.doc}}</span></p><p class="row"><span class="col-md-8">巡视次数：</span> <span class="col-md-4 text-right">{{vm.bedNursing.patrol}}</span></p></div></a></div></div><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.dutyStat"><div class="statistics-title">科室排班</div><div class="statistics-content"><p class="row" ng-repeat="item in vm.dutyRoster"><span class="col-md-6">{{vm.getDeptName(item.deptCode)}}：</span> <span class="col-md-6 text-right">{{item.hours}}小时</span></p></div></a></div></div></div><div class="row"><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.malCaseStat"><div class="statistics-title">不良事件</div><div class="statistics-content"><p class="row"><span class="col-md-8">上报最多的类型：</span> <span class="col-md-4 text-right text-danger">{{vm.malCase.type}}</span></p><p class="row"><span class="col-md-8">上报最多的科室：</span> <span class="col-md-4 text-right text-danger">{{vm.getDeptName(vm.malCase.deptCode)}}</span></p></div></a></div></div><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.qualityStat"><div class="statistics-title">护理质控</div><div class="statistics-content"><p class="row"><span class="col-md-12">评分最差的5项：</span></p><p class="row" ng-repeat="item in vm.quality.worst"><span class="col-md-12 text-right" ng-class="{\'text-danger\': $index === 0, \'text-warning\': $index === 1}">{{item}}</span></p><p class="row"><span class="col-md-8">评分最高的科室：</span> <span class="col-md-4 text-right text-success">{{vm.getDeptName(vm.quality.bestDeptCode)}}</span></p><p class="row"><span class="col-md-8">评分最低的科室：</span> <span class="col-md-4 text-right text-danger">{{vm.getDeptName(vm.quality.worstDeptCode)}}</span></p></div></a></div></div><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.examStat"><div class="statistics-title">考试培训</div><div class="statistics-content"><p class="row"><span class="col-md-12">考试最薄弱的5项：</span></p><p class="row" ng-repeat="item in vm.exam.worst"><span class="col-md-12 text-right" ng-class="{\'text-danger\': $index === 0, \'text-warning\': $index === 1}">{{item}}</span></p><p class="row"><span class="col-md-8">分数最高的科室：</span> <span class="col-md-4 text-right text-success">{{vm.getDeptName(vm.exam.bestDeptCode)}}</span></p><p class="row"><span class="col-md-8">分数最低的科室：</span> <span class="col-md-4 text-right text-danger">{{vm.getDeptName(vm.exam.worstDeptCode)}}</span></p></div></a></div></div><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.satStat.patient"><div class="statistics-title">满意度</div><div class="statistics-content"><p class="row"><span class="col-md-12">患者最不满意的3项：</span></p><p class="row" ng-repeat="item in vm.sat.patient"><span class="col-md-12 text-right" ng-class="{\'text-danger\': $index === 0, \'text-warning\': $index === 1}">{{item}}</span></p><p class="row"><span class="col-md-12">护士最不满意的3项：</span></p><p class="row" ng-repeat="item in vm.sat.nurse"><span class="col-md-12 text-right" ng-class="{\'text-danger\': $index === 0, \'text-warning\': $index === 1}">{{item}}</span></p></div></a></div></div></div></div>'),e.put("app/bd/ba/ba.tpl.html",'<div class="wrapper bd-ba-wrapper padding-content"><ul class="page-nav"><li class="active"><a>护理业务分析</a></li></ul><div class="panel panel-layout panel-default"><div class="tool-wrapper container-fluid form-inline"><div class="filter-item"><label>月份：</label> <span class="input-group"><input ng-model="vm.queryParams.month" type="text" id="month" name="month" required="" uib-datepicker-popup="" datepicker-options="vm.options.month" on-open-focus="true" is-open="vm.monthOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month" readonly=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.monthOpen = true"><i class="fa fa-calendar"></i></button></span></span></div><div class="filter-item"><button class="btn btn-primary btn-sm" ng-click="vm.load()">查询</button></div></div><div class="panel-body"><table class="table table-bordered data-table no-border"><tbody><tr><td class="data-title" colspan="2">闭环管理</td><td class="data-title" colspan="2">护理文书</td></tr><tr><td class="data-content" ng-click="vm.go(\'du\')">覆盖闭环管理<br><span count-to="{{vm.baseData.bh}}" duration="0.5"></span>个</td><td class="data-content" ng-click="vm.go(\'er\')">近似差错率<br><span count-to="{{vm.baseData.er}}" duration="0.5"></span>%</td><td class="data-content" ng-click="vm.go(\'du\')">护理文书模板<br><span count-to="{{vm.baseData.ws}}" duration="0.5"></span>份</td><td class="data-content" ng-click="vm.go(\'du\')"><div class="echarts-wrap" echarts="vm.pie.identity" echarts-dimension="vm.pie.dimension" config="vm.pie.config"></div></td></tr></tbody></table><div class="col-xs-6 no-padding"><table class="table table-condensed table-bordered bh-table no-border"><thead><tr class="header-export"><th>流程</th><th>流程覆盖</th><th>业务覆盖</th></tr></thead><tbody><tr ng-repeat="item in vm.bhData"><td>{{item.lc}}</td><td>{{item.lcfg}}</td><td>{{(item.execNum / item.orderNum * 100 || 0).toFixed(2)}}%</td></tr></tbody></table></div><div class="col-xs-6 no-padding"><table class="table table-condensed table-bordered ws-table no-border"><thead><tr class="header-export"><th>名称</th><th>已创建</th><th>转抄率</th></tr></thead><tbody><tr ng-repeat="item in vm.wsData"><td>{{item.docName}}</td><td>{{item.cNum}}</td><td>{{(item.zcNum / item.cNum * 100 || 0).toFixed(2)}}%</td></tr></tbody></table></div></div></div></div>'),e.put("app/bd/du/du.tpl.html",'<div class="wrapper bd-du-wrapper padding-content"><ul class="page-nav"><li class="active"><a>科室使用情况一览</a></li></ul><div class="panel panel-layout panel-default"><div class="tool-wrapper container-fluid form-inline"><div class="filter-item"><label>月份：</label> <span class="input-group"><input ng-model="vm.queryParams.month" type="text" id="month" name="month" required="" uib-datepicker-popup="" datepicker-options="vm.options.month" on-open-focus="true" is-open="vm.monthOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month" readonly=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.monthOpen = true"><i class="fa fa-calendar"></i></button></span></span></div><div class="filter-item"><button class="btn btn-primary btn-sm" ng-click="vm.load.func()">查询</button></div></div><div class="echarts-wrap" echarts="vm.deptUse.identity" echarts-dimension="vm.deptUse.dimension" config="vm.deptUse.config"></div><table class="table table-condensed table-bordered"><thead><tr class="header-export"><th></th><th ng-repeat="item in vm.names">{{item}}</th></tr></thead><tbody><tr ng-repeat="item in vm.catesData"><td>{{item.text}}</td><td ng-repeat="sub in item.data track by $index">{{sub}}</td></tr></tbody></table></div></div>'),e.put("app/bd/er/er.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-pie-chart"></i> 近似差错率 （\b2016\b年8月）</div><div class="panel-body"><div class="chart-wrapper"><div class="row"><div class="col-md-3 chart_text bd-err-text"><div class="form-group bd-err-text_title"><span class="col-md-6 control-label">近似差错率</span></div><div class="form-group bd-err-text_main"><span class="value-label">{{\'1.35\'}} ‰</span></div><div class="form-group"><span class="col-md-5 control-label">累计核对：</span> <span class="value-label">{{\'2133454\'}}次</span></div><div class="form-group"><span class="col-md-5 control-label">近似差错：</span> <span class="value-label">{{137}}</span></div><div class="form-group row"><span class="col-md-3 control-label">同比：</span> <span class="value-label col-md-3 success-text">16% <i class="fa fa-long-arrow-up"></i></span> <span class="col-md-3 control-label">环比：</span> <span class="value-label col-md-3 danger-text">1.55% <i class="fa fa-long-arrow-down"></i></span></div></div><div class="col-md-5 chart-content"><div class="echarts-wrap" echarts="vm.stastics.err.identity" echarts-dimension="vm.stastics.err.dimension" config="vm.stastics.err.config"></div></div><div class="col-md-4"><table st-table="vm.displayList1" st-safe-src="vm.table_1_list" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>颜色</th><th>类别</th><th>次数</th><th>百分比</th></tr></thead><tbody><tr ng-repeat="row in vm.displayList1"><td>{{row.name}}</td><td>{{row.age}}</td><td>{{row.sex}}</td><td>{{row.job}}</td></tr></tbody></table></div></div></div></div></div><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-bar-chart"></i> <span>科室情况</span></div><div class="panel-body"><div class="echarts-wrap" echarts="vm.stastics.dept.identity" echarts-dimension="vm.stastics.dept.dimension" config="vm.stastics.dept.config"></div></div></div><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-bar-chart"></i> <span>业务流程</span></div><div class="panel-body no-padding"><div class="echarts-wrap" echarts="vm.stastics.turns.identity" echarts-dimension="vm.stastics.turns.dimension" config="vm.stastics.turns.config"></div></div></div><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-bar-chart"></i> <span>班次情况</span></div><div class="panel-body"><div class="col-md-4"><div class="echarts-wrap" echarts="vm.stastics.err.identity" echarts-dimension="vm.stastics.err.dimension" config="vm.stastics.err.config"></div></div><div class="col-md-8"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-bomb"></i> <span>潜在风险</span></div><table st-table="vm.displayList1" st-safe-src="vm.table_1_list" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>科室Top5</th><th>人员Top5</th></tr></thead><tbody><tr ng-repeat="row in vm.displayList1"><td>{{row.name}}</td><td>{{row.age}}</td></tr></tbody></table></div></div></div></div></div>'),e.put("app/common/confirm/confirm.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">警告</h5></div><div class="modal-body"><div class="row"><div class="col-sm-12"><h6>{{vm.metaData.title}}</h6></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-danger" type="button" ng-click="vm.ok()">确定</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div>'),e.put("app/common/exportExcel/exportExcel.tpl.html",'<button class="btn {{vm.classList}}" ng-click="vm.doExport(vm.exslSrc)"><i class="fa fa-download"></i> 导出</button>'),
e.put("app/common/loading/loading.tpl.html",'<div class="loading-wrapper"><div class="spinner"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div></div>'),e.put("app/common/loading/loadingWrapper.tpl.html",'<div ng-transclude=""></div><loading type="{{type}}"></loading>'),e.put("app/common/noneDataInfo/noneDataInfo.tpl.html",'<div class="empty-placeholder"><h5><i class="fa fa-info-circle"></i> 没有查询到记录</h5></div>'),e.put("app/components/breadcrumb/breadcrumb.html",'<div class="tab-bread-wrapper"><ul class="tab-bread"><li ng-repeat="(id, name) in bc.tabTemp" uib-tooltip="{{name}}" tooltip-placement="bottom"><div ui-sref=".{{id}}" ui-sref-active="active" ng-class="{active: bc.isActive(\'{{id}}\')}" class="tab-bread__item" href="#"><span>{{name}}</span> <a ng-click="bc.removeTab($event)" data-id="{{id}}" class="close-tab" href="javascript:;">×</a></div></li></ul></div>'),e.put("app/components/breadcrumb/breadcrumb.tpl.html",'<div class="breadcrumb-wrapper" ng-class="{\'main-body_min-nav\': minMode, \'sub-nav-hidden\': isSubNavShow}"><ol class="breadcrumb"><li>当前位置：</li><li ng-repeat="crumb in breadcrumbs" ng-class="{ active: $last }"><a ui-sref="{{ crumb.route }}" ui-sref-opts="{ reload: true }" ng-if="!$last">{{ crumb.displayName }}&nbsp;</a><span ng-show="$last">{{ crumb.displayName }}</span></li></ol></div>'),e.put("app/components/colorPicker/colorPicker.html",'<div class="color-picker-wrapper"><div class="color-picker-item color-picker-current" ng-click="toggle()" ng-style="{\'background-color\': current}"></div><div class="color-picker-selector"><div class="color-picker-box" ng-repeat="item in colorArr"><div class="color-picker-item" ng-style="{\'background-color\': item}" ng-click="choose(item)"></div></div></div></div>'),e.put("app/components/header/changeRole.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">切换角色</h5></div><div class="modal-body">您的现有角色：<table class="table table-condensed table-bordered table-striped"><tr><th></th><th>角色编号</th><th>角色名称</th><th>所属部门</th></tr><tr ng-repeat="row in vm.userRoleList" ng-class="{success: row.seqId === vm.currentRole.seqId, active: row.seqId === vm.selectedRole.seqId}"><td><input id="{{row.seqId}}" name="userRole" ng-click="vm.showRole(row)" type="radio" value="{{row.seqId}}" ng-model="vm.selectedRole.seqId"></td><td data-title="\'角色编号\'"><label for="{{row.seqId}}">{{row.roleCode}}</label></td><td data-title="\'角色名称\'"><label for="{{row.seqId}}">{{row.roleName}}</label></td><td data-title="\'所属部门\'"><label for="{{row.seqId}}">{{ row.deptName }}</label></td></tr></table></div><div class="modal-footer"><button class="btn btn-sm btn-success {{vm.roleBtnStatus.state}}" type="button" {{vm.loginbtnstatus.state}}="" ng-click="vm.changeRole()">{{vm.roleBtnStatus.title}}</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div>'),e.put("app/components/header/changeUser.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">切换用户</h5></div><form class="form w5c-form login-box__form change-user-form" novalidate="" w5c-form-validate="vm.validationOption" name="changeUserForm"><div class="modal-body"><div class="form-item form-item__sm"><label class="name-label"><span class="fa fa-user"></span></label> <input autocomplete="off" ng-pattern="/^[0-9A-Za-z_]{1,19}$/" required="" type="text" ng-model="vm.formData.loginName" name="loginName" class="form-ctr input" id="user-name" placeholder="用户名"></div><div class="form-item form-item__sm"><label class="name-label" for="password"><span class="fa fa-lock"></span></label> <input autocomplete="off" type="password" required="" name="password" ng-model="vm.formData.password" class="form-ctr input" id="password" placeholder="密码"></div></div><div class="modal-footer"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" {{vm.loginbtnstatus.state}}="" w5c-form-submit="vm.changeUser(vm.formData)">{{vm.loginBtnStatus.title}}</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/components/header/header.html",'<nav class="navbar header-top navbar-default navbar-fixed-top navbar-lx"><div class="navbar-header"><div class="logo-wrapper pull-left"><a ui-sref="home" ui-sref-opts="{ reload: true }" class="logo"><i class="fa fa-foursquare"></i></a></div></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="home-link"><a href="#"><i class="fa fa-dashboard"></i>\b 管理控制台</a></li><li class="header-time"><i class="fa fa-calendar"></i> {{hd.time_now}}</li></ul><ul class="nav navbar-nav navbar-right"><li uib-dropdown=""><a id="msg-button" class="dropdown-link" uib-dropdown-toggle="" ng-disabled="disabled"><i class="fa fa-flag"></i> {{(hd.userRoleList | filter: hd.currentRole.roleCode)[0].roleName}} <i class="fa fa-caret-down"></i></a><ul uib-dropdown-menu="" role="menu" aria-labelledby="msg-button"><li ng-repeat="role in hd.userRoleList"><a href="javascript:;" ng-click="hd.changeRole(role)">{{role.roleName}} <span class="label label-primary label-sm pull-right">{{role.deptName}}</span></a></li></ul></li><li uib-dropdown=""><a id="msg-button" class="dropdown-link" uib-dropdown-toggle="" ng-disabled="disabled"><i class="fa fa-bell"></i> 消息 <i class="fa fa-caret-down"></i></a><ul uib-dropdown-menu="" role="menu" aria-labelledby="msg-button"><li><a href="">账号信息</a></li><li><a href="">账号信息</a></li><li><a href="">账号信息</a></li><li><a href="">账号信息</a></li></ul></li><li uib-dropdown=""><a id="user-button" class="dropdown-link" uib-dropdown-toggle="" ng-disabled="disabled"><i class="fa fa-user"></i> {{hd.user.loginName}} <i class="fa fa-caret-down"></i></a><ul uib-dropdown-menu="" role="menu" aria-labelledby="user-button"><li><a href="javascript:;"><i class="fa fa-exclamation-circle"></i> 账号信息</a></li><li><a href="javascript:;" ng-click="hd.openUserDialog()"><i class="fa fa-users"></i> <span>切换用户</span></a></li><li><a ng-click="hd.logout()" href="javascript:;"><i class="fa fa-sign-out"></i> <span>退出系统</span></a></li></ul></li></ul></div></nav>'),e.put("app/components/navbar/navbar.html",'<div class="left-nav" print-remove="" ng-class="{\'left-min\': vm.minMode, \'left-sub-min\': !vm.isSubNavShow}"><div class="nav-container" print-remove="" print-hide=""><div class="nav-wrapper" ng-class="{\'left-nav-min\': vm.minMode}"><ul class="nav-menu" print-remove=""><li class="nav-menu_item nav-view-trigger"><a href="javascript:;" ng-click="vm.toggleNavView()"><i class="fa nav-menu_item-icon" ng-class="{\'fa-list\': !vm.minMode, \'fa-square\': vm.minMode}"></i></a></li></ul><uib-accordion class="nav-menu"><uib-accordion-group panel-class="no-panel" ng-repeat="item in vm.navData" data-title="{{item.funUrl}}" is-open="item.isOpen"><uib-accordion-heading><div class="nav-menu_item" ng-click="vm.showSubNav($index)" ng-class="{\'active\': $index === vm.currentIndex, \'current\': $index === vm.lastIndex}"><a href="javascript:;" tooltip-enable="vm.minMode" uib-tooltip="{{item.funName}}" tooltip-placement="right" tooltip-append-to-body="true"><i class="fa icomoon icomoon-{{item.icoName}} nav-menu_item-icon"></i> <span class="nav-menu_item-text">{{item.funName}}</span> <i class="pull-right fa nav-menu_item-arrow" ng-class="{\'fa-angle-down\': item.isOpen, \'fa-angle-right\': !item.isOpen}"></i></a></div></uib-accordion-heading><ul class="nav-menu_sub-item"><li ng-repeat="subItem in item.child" tooltip-enable="vm.minMode" uib-tooltip="{{subItem.funName}}" tooltip-placement="right" tooltip-append-to-body="true"><a ui-sref-active="active" class="nav-menu_sub-item-text" ng-click="vm.setActiveIndex()" data-id="{{subItem.funUrl}}" data-name="{{subItem.funName}}" ui-sref=".{{subItem.funUrl}}"><i class="fa fa-caret-square-o-right nav-menu_item-icon"></i> {{subItem.funName}}</a></li></ul></uib-accordion-group></uib-accordion></div></div></div>'),e.put("app/components/pagination/pagination.tpl.html",'<nav ng-if="pages.length >= 2" class="pagination-wrapper"><div class="pagination-text">共{{pages.length}}页</div><ul class="pagination"><li ng-class="{\'disabled\': currentPage == 1}"><a href="javascript:;" uib-tooltip="首页" ng-click="selectPage(1)"><i class="fa fa-step-backward"></i></a></li><li ng-class="{\'disabled\': currentPage == 1}"><a href="javascript:;" uib-tooltip="上一页" ng-click="selectPage(currentPage - 1)">&laquo;</a></li><li ng-repeat="page in pages" ng-class="{\'active\': currentPage == page}"><a href="javascript:;" ng-click="selectPage(page)">{{page}}</a></li><li ng-class="{\'disabled\': currentPage == pages[pages.length - 1]}"><a href="javascript:;" uib-tooltip="下一页" ng-click="selectPage(currentPage + 1)">&raquo;</a></li><li ng-class="{\'disabled\': currentPage == pages[pages.length - 1]}"><a href="javascript:;" uib-tooltip="末页" ng-click="selectPage(numPages)"><i class="fa fa-step-forward"></i></a></li></ul></nav>'),e.put("app/duty/leave/leave.tpl.html",'<div class="wrapper" ng-controller="DeptTreeCtrl as vm"><div class="page-left-menu" print-remove="" ng-if="vm.treeData[0].children && vm.treeData[0].children.length"><div class="panel pull-left dept-wrapper panel-default" full-height=""><div class="panel-heading"><i class="fa fa-sitemap"></i> <span>科室列表</span></div><div class="panel-body dept-list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText" placeholder="输入关键字搜索"></div><div class="list-content"><treecontrol class="tree-light" tree-model="vm.treeData" on-selection="vm.select(node)" filter-expression="vm.filterText" expanded-nodes="vm.expandedNodes" selected-node="vm.selectedNode" options="vm.treeOption">{{node.deptName}}</treecontrol><loading type="tree"></loading></div></div></div></div><div ng-class="{\'page-right-content\': vm.treeData[0].children && vm.treeData[0].children.length, \'padding-content\': !(vm.treeData[0].children && vm.treeData[0].children.length)}"><uib-tabset active="active"><uib-tab index="0" heading="请假"><div class="leave-wrapper" ng-controller="DepartmentManagerLeaveController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid"><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.open()">请假</button></div></div><div class="panel-body"><table st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered no-border"><thead><tr class="header-export"><th>员工姓名</th><th>开始时间</th><th>结束时间</th><th>天数</th><th>请假类型</th><th>请假原因</th><th>审批状态</th><th>备注</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td class="text-center">{{row.userName}}</td><td class="text-center">{{row.startTime}}</td><td class="text-center">{{row.endTime}}</td><td class="text-center">{{row.days}}</td><td class="text-center">{{getDicName(\'leaveType\', row.leaveType)}}</td><td class="text-center">{{row.leaveWhy}}</td><td class="text-center">{{getDicName(\'approveStatus\', row.approveStatus)}}</td><td class="text-center">{{row.approveRemark}}</td><td class="print-remove"><button class="btn btn-primary btn-xs classes-handler-btn" ng-click="vm.review(row)" ng-show="row.permission == \'02\'"><span class="fa fa-pencil"></span>审核</button> <button class="btn btn-success btn-xs classes-handler-btn" ng-click="vm.upload(row)" ng-show="row.permission == \'01\'"><span class="fa fa-upload"></span>提交</button> <button class="btn btn-primary btn-xs classes-handler-btn" ng-click="vm.open(row)" ng-show="row.permission == \'01\'"><span class="fa fa-edit"></span>编辑</button> <button class="btn btn-danger btn-xs classes-handler-btn" ng-click="vm.del(row.seqId)" ng-show="row.permission == \'01\'"><span class="fa fa-trash"></span>删除</button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></uib-tab><uib-tab index="1" heading="调班"><div class="attemper-wrapper" ng-controller="DepartmentManagerAttemperController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid"><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.add()">调班</button></div></div><div class="panel-body"><table st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered no-border"><thead><tr class="header-export"><th>申请人</th><th>申请时间</th><th>申请原因</th><th>申请人班次</th><th>申请人班次日期</th><th>调班人</th><th>调班人班次</th><th>调班人班次日期</th><th>处理状态</th><th>处理备注</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list | filter : vm.filter"><tr class="row-{{$index}}"><td>{{vm.getUserName(row.applyUserCode)}}</td><td>{{row.createTime | date: \'yyyy-MM-dd HH:mm:ss\'}}</td><td>{{row.changeCause}}</td><td>{{vm.getClassName(row.applyClass)}}</td><td>{{row.applyClassDate}}</td><td>{{vm.getUserName(row.changeUserCode)}}</td><td>{{vm.getClassName(row.changeClass)}}</td><td>{{row.changeClassDate}}</td><td>{{getDicName(\'approveStatus\', row.status)}}</td><td>{{row.refuseCause}}</td><td><button class="btn btn-primary btn-xs classes-handler-btn" ng-click="vm.handler(row)" ng-show="row.permission == \'02\'"><span class="fa fa-pencil"></span>审核</button> <button class="btn btn-success btn-xs classes-handler-btn" ng-click="vm.upload(row)" ng-show="row.permission == \'01\'"><span class="fa fa-upload"></span>提交</button> <button class="btn btn-primary btn-xs classes-handler-btn" ng-click="vm.edit(row)" ng-show="row.permission == \'01\'"><span class="fa fa-edit"></span>编辑</button> <button class="btn btn-danger btn-xs classes-handler-btn" ng-click="vm.del(row.seqId)" ng-show="row.permission == \'01\'"><span class="fa fa-trash"></span>删除</button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></uib-tab></uib-tabset></div></div>'),e.put("app/duty/setting/setting.tpl.html",'<div class="wrapper" ng-controller="DeptTreeCtrl as vm"><div class="page-left-menu" print-remove="" ng-if="vm.treeData[0].children && vm.treeData[0].children.length"><div class="panel pull-left dept-wrapper panel-default" full-height=""><div class="panel-heading"><i class="fa fa-sitemap"></i> <span>科室列表</span></div><div class="panel-body dept-list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText" placeholder="输入关键字搜索"></div><div class="list-content"><treecontrol class="tree-light" tree-model="vm.treeData" on-selection="vm.select(node)" filter-expression="vm.filterText" expanded-nodes="vm.expandedNodes" selected-node="vm.selectedNode" options="vm.treeOption">{{node.deptName}}</treecontrol><loading type="tree"></loading></div></div></div></div><div ng-class="{\'page-right-content\': vm.treeData[0].children && vm.treeData[0].children.length, \'padding-content\': !(vm.treeData[0].children && vm.treeData[0].children.length)}"><uib-tabset active="active"><uib-tab index="0" heading="人员分组"><div class="endemic-wrapper" ng-controller="DepartmentManagerEndemicAreaController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid"><div class="pull-right"><button class="btn btn-sm btn-success" ng-click="vm.saveArea()">保存</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped no-border"><thead><tr class="header-export"><th class="index-cell">序号</th><th>工号</th><th>姓名</th><th>床位</th><th>所属护理组</th><th>是否参与排班</th></tr></thead><tbody><tr class="row-{{$index}}" ng-repeat="row in vm.list"><td class="index-cell">{{$index + 1}}</td><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td><input class="form-control input-sm" type="text" placeholder="使用;分割" ng-model="row.beds"></td><td><select class="input-sm" ng-model="row.groupCode"><option ng-repeat="group in vm.groupLst" value="{{group.groupCode}}">{{group.groupName}}</option></select></td><td><input type="checkbox" ng-model="row.isSchedule" ng-true-value="\'1\'" ng-false-value="\'0\'"></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></uib-tab><uib-tab index="1" heading="班次定义"><div class="class-wrapper" ng-controller="DepartmentManagerClassesController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid"><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.addClasses()">新增班次</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped no-border"><thead><tr class="header-export"><th>班次</th><th>开始时间</th><th>结束时间</th><th>颜色区分</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td>{{ row.className }}</td><td>{{ row.startTime }}</td><td>{{ row.endTime }}</td><td class="space-ignore"><color-picker ng-model="row.color"></color-picker></td><td class="print-remove" data-title="\'操作\'"><button class="btn btn-primary btn-xs classes-handler-btn" ng-click="vm.edit(row)"><span class="fa fa-edit"></span>编辑</button> <button class="btn btn-danger btn-xs classes-handler-btn" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span>删除</button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></uib-tab><uib-tab index="2" heading="分组定义"><div class="bed-wrapper" ng-controller="DepartmentManagerBedController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid"><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.open()">新增分组</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped no-border"><thead><tr class="header-export"><th class="index-cell">序号</th><th>组名</th><th>床位</th><th print-remove="">操作</th></tr></thead><tbody><tr class="row-{{$index}}" ng-repeat="row in vm.list"><td class="index-cell">{{ $index + 1 }}</td><td>{{ row.groupName }}</td><td>{{ row.beds }}</td><td class="print-remove" data-title="\'操作\'"><button class="btn btn-primary btn-xs classes-handler-btn" ng-click="vm.open(row)"><span class="fa fa-edit"></span>编辑</button> <button class="btn btn-danger btn-xs" ng-click="vm.deleteGroup(row.seqId)" ng-if="!row.isEditing"><span class="fa fa-trash"></span>删除</button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></uib-tab></uib-tabset></div></div>'),e.put("app/duty/statistics/detail.grid.html",'<td colspan="{{tdLen}}"><div class="tpl"><table class="table table-hover table-condensed table-bordered table-striped"><thead><tr><th st-sort="rowNumber">序号</th><th st-sort="month">月份</th><th st-sort="deptCode">病区</th><th st-sort="hisCode">HIS工号</th><th st-sort="userName">姓名</th><th st-sort="bj" ng-if="vm.queryParams.type === \'leave\'">病假（天）</th><th st-sort="nj" ng-if="vm.queryParams.type === \'leave\'">年假（天）</th><th st-sort="hj" ng-if="vm.queryParams.type === \'leave\'">婚假（天）</th><th st-sort="txj" ng-if="vm.queryParams.type === \'leave\'">调休假（天）</th><th st-sort="sj" ng-if="vm.queryParams.type === \'leave\'">丧假（天）</th><th st-sort="cj" ng-if="vm.queryParams.type === \'leave\'">产假（天）</th><th st-sort="yb" ng-if="vm.queryParams.type === \'class\'">夜班（个）</th><th st-sort="jjr" ng-if="vm.queryParams.type === \'days\'">节假日上班（天）</th></tr></thead><tbody><tr ng-repeat="row in vm.statisticsData"><td>{{row.rowNumber}}</td><td>{{row.month}}</td><td>{{row.deptCode}}</td><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.bj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.nj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.hj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.txj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.sj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.cj}}</td><td ng-if="vm.queryParams.type === \'class\'">{{row.yb}}</td><td ng-if="vm.queryParams.type === \'days\'">{{row.jjr}}</td></tr></tbody></table></div></td>'),e.put("app/duty/statistics/statistics.tpl.html",'<div class="wrapper duty-statistics-wrapper padding-content"><div ng-controller="DepartmentManagerStatisticsController as vm"><uib-tabset active="active"><uib-tab index="0" heading="排班记录"><div class="panel panel-layout panel-default"><div class="tool-wrapper filter-bar form-inline"><div class="filter-item"><label>统计类别：</label><select name="" ng-model="vm.queryParams.type" class="form-control input-sm"><option value="leave">考勤数据</option><option value="class">班次数据</option><option value="days">值班数据</option></select></div><div class="filter-item"><label>月份：</label> <span class="input-group"><input ng-model="vm.queryParams.month" type="text" id="month" name="month" required="" uib-datepicker-popup="" datepicker-options="vm.options.month" on-open-focus="true" is-open="vm.monthOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month" readonly=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.monthOpen = true"><i class="fa fa-calendar"></i></button></span></span></div><div class="filter-item"><label>科室：</label><select class="form-control input-sm" ng-model="vm.queryParams.deptCode" name="deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="filter-item"><button class="btn btn-primary btn-sm" ng-click="vm.load.func()">查询</button></div></div><div class="panel-body" loading-wrapper="" loading-type="content" loading-options="vm.load"><table class="table table-hover table-condensed table-bordered table-striped no-border"><thead><tr class="header-export"><th>HIS工号</th><th>姓名</th><th ng-if="vm.current === \'leave\'">病假（天）</th><th ng-if="vm.current === \'leave\'">事假（天）</th><th ng-if="vm.current === \'leave\'">年假（天）</th><th ng-if="vm.current === \'leave\'">婚假（天）</th><th ng-if="vm.current === \'leave\'">调休假（天）</th><th ng-if="vm.current === \'leave\'">丧假（天）</th><th ng-if="vm.current === \'leave\'">产假（天）</th><th ng-if="vm.current === \'days\'">节假日上班（天）</th><th ng-repeat="c in vm.classesList" ng-if="vm.current == \'class\'">{{c.className}}</th></tr></thead><tbody ng-repeat="row in vm.statisticsData"><tr><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td ng-if="vm.current === \'leave\'">{{row.bj}}</td><td ng-if="vm.current === \'leave\'">{{row.shj}}</td><td ng-if="vm.current === \'leave\'">{{row.nj}}</td><td ng-if="vm.current === \'leave\'">{{row.hj}}</td><td ng-if="vm.current === \'leave\'">{{row.txj}}</td><td ng-if="vm.current === \'leave\'">{{row.sj}}</td><td ng-if="vm.current === \'leave\'">{{row.cj}}</td><td ng-repeat="c in row.classList" ng-if="vm.current === \'class\'">{{c.count || 0}}</td><td ng-if="vm.current === \'days\'">{{row.jjr}}</td></tr></tbody></table><none-data-info list="vm.statisticsData"></none-data-info></div></div></uib-tab></uib-tabset></div></div>'),e.put("app/duty/turns/turns.tpl.html",'<div class="turns-wrapper wrapper"><div class="page-left-menu" print-remove="" full-height=""><div class="selector-wrapper"><select class="form-control input-sm" ng-model="vm.params.deptCode" ng-change="vm.load.func()"><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-calendar"></i><span>排版时间表</span></div><div class="panel-body dept-list"><div class="list-content"><treecontrol class="tree-light" tree-model="vm.treeData" on-selection="vm.select(node)" expanded-nodes="vm.expandedNodes" selected-node="vm.selectedNode" options="vm.treeOption">{{node.text}}</treecontrol><loading type="tree"></loading></div></div></div></div><div class="page-right-content"><uib-tabset active="active"><uib-tab index="0" heading="排班管理"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid"><button class="btn btn-sm btn-default" ng-click="vm.backWeek()">上一周</button> <span>第{{vm.params.weeks}}周</span> <button class="btn btn-sm btn-default" ng-click="vm.nextWeek()">下一周</button><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.newTurns()">重新排班</button> <button class="btn btn-sm btn-primary" ng-click="vm.copyWeek()">复制上周</button> <button class="btn btn-sm btn-success" ng-click="vm.saveTurns()">保存</button> <button class="btn btn-sm btn-success" print-landscape="" print-btn="">打印</button></div></div><div class="panel-body"><table print-table="vm.lst" class="table table-condensed table-bordered table-striped no-border"><thead><tr><th>分组</th><th>分层</th><th>员工姓名</th><th>{{vm.data.week1}}</th><th>{{vm.data.week2}}</th><th>{{vm.data.week3}}</th><th>{{vm.data.week4}}</th><th>{{vm.data.week5}}</th><th>{{vm.data.week6}}</th><th>{{vm.data.week7}}</th></tr></thead><tbody><tr ng-repeat="row in vm.lst"><td class="grey-td" ng-if="vm.tableLayout(row.userCode, row.groupName)" ng-attr-rowspan="{{vm.tableLayout(row.userCode, row.groupName)}}">{{row.groupName}}</td><td class="grey-td" ng-if="vm.tableLayout(row.userCode, row.groupName, row.clinical)" ng-attr-rowspan="{{vm.tableLayout(row.userCode, row.groupName, row.clinical)}}">{{getDicName(\'clinical\', row.clinical)}}</td><td>{{row.userName}}</td><td class="edit-cell-dir" ng-class="{dirty: !vm.compare(row, 1)}"><div class="edit-text-dir class-text-wrapper"><div class="class-text" ng-repeat="item in row.week1class" ng-style="{\'background-color\': vm.getClassColor(item)}">{{vm.getClassName(item)}}</div></div><select class="form-control input-sm edit-input-dir" ng-model="row.week1class" ui-select2="" multiple="multiple"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></td><td class="edit-cell-dir" ng-class="{dirty: !vm.compare(row, 2)}"><div class="edit-text-dir class-text-wrapper"><div class="class-text" ng-repeat="item in row.week2class" ng-style="{\'background-color\': vm.getClassColor(item)}">{{vm.getClassName(item)}}</div></div><select class="form-control input-sm edit-input-dir" ng-model="row.week2class" ui-select2="" multiple="multiple"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></td><td class="edit-cell-dir" ng-class="{dirty: !vm.compare(row, 3)}"><div class="edit-text-dir class-text-wrapper"><div class="class-text" ng-repeat="item in row.week3class" ng-style="{\'background-color\': vm.getClassColor(item)}">{{vm.getClassName(item)}}</div></div><select class="form-control input-sm edit-input-dir" ng-model="row.week3class" ui-select2="" multiple="multiple"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></td><td class="edit-cell-dir" ng-class="{dirty: !vm.compare(row, 4)}"><div class="edit-text-dir class-text-wrapper"><div class="class-text" ng-repeat="item in row.week4class" ng-style="{\'background-color\': vm.getClassColor(item)}">{{vm.getClassName(item)}}</div></div><select class="form-control input-sm edit-input-dir" ng-model="row.week4class" ui-select2="" multiple="multiple"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></td><td class="edit-cell-dir" ng-class="{dirty: !vm.compare(row, 5)}"><div class="edit-text-dir class-text-wrapper"><div class="class-text" ng-repeat="item in row.week5class" ng-style="{\'background-color\': vm.getClassColor(item)}">{{vm.getClassName(item)}}</div></div><select class="form-control input-sm edit-input-dir" ng-model="row.week5class" ui-select2="" multiple="multiple"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></td><td class="edit-cell-dir" ng-class="{dirty: !vm.compare(row, 6)}"><div class="edit-text-dir class-text-wrapper"><div class="class-text" ng-repeat="item in row.week6class" ng-style="{\'background-color\': vm.getClassColor(item)}">{{vm.getClassName(item)}}</div></div><select class="form-control input-sm edit-input-dir" ng-model="row.week6class" ui-select2="" multiple="multiple"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></td><td class="edit-cell-dir" ng-class="{dirty: !vm.compare(row, 7)}"><div class="edit-text-dir class-text-wrapper"><div class="class-text" ng-repeat="item in row.week7class" ng-style="{\'background-color\': vm.getClassColor(item)}">{{vm.getClassName(item)}}</div></div><select class="form-control input-sm edit-input-dir" ng-model="row.week7class" ui-select2="" multiple="multiple"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></td></tr></tbody></table></div></div></uib-tab></uib-tabset></div></div>'),e.put("app/duty/turnsRule/turnsRule.model.html",'<div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写排班规则</h5></div><form class="w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-5">规则名称</label><div class="col-sm-7"><input class="form-control input-sm" ng-model="vm.formData.ruleName"></div></div><div class="form-group col-sm-6"><label class="control-label col-sm-5">日期类型</label><div class="col-sm-7"><select class="form-control input-sm" ng-model="vm.formData.dateType"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.dateType">{{item.dicName}}</option></select></div></div></div><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-5">班次</label><div class="col-sm-7"><select class="form-control input-sm" ng-model="vm.formData.classCode"><option ng-repeat="c in vm.metaData.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></div><div class="form-group col-sm-6"><label class="control-label col-sm-5">班次次数</label><div class="col-sm-7"><input class="form-control input-sm" ng-model="vm.formData.userCount"></div></div></div><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-5">护理人员级别</label><div class="col-sm-7"><select class="input-sm" ng-model="vm.formData.userLevel"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.level">{{item.dicName}}</option></select></div></div><div class="form-group col-sm-6"><label class="control-label col-sm-5">备注</label><div class="col-sm-7"><input class="form-control input-sm" ng-model="vm.formData.remark"></div></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),
e.put("app/duty/turnsRule/turnsRule.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-eye-slash"></i> <span>排班规则管理</span> <button class="btn btn-sm btn-primary" ng-click="vm.add()">新增规则</button></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">规则名称</th><th>日期类型</th><th>班次</th><th>班次次数</th><th>护理人员级别</th><th>备注</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td>{{ row.ruleName }}</td><td>{{ row.dateTypeName }}</td><td>{{ row.className }}</td><td>{{ row.userCount }}</td><td>{{ getDicName(\'level\', row.userLevel) }}</td><td>{{ row.remark }}</td><td class="print-remove" data-title="\'操作\'"><button class="btn btn-xs btn-primary" ng-click="vm.edit(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-xs btn-danger" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),e.put("app/malCaseUp/call/call.include.html",'<form class="w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><div class="form-group col-sm-3"><label for="name" class="control-label col-sm-5">事件等级</label><div class="col-sm-7"><input type="hidden" ng-model="vm.formData.damageLevel"><select ng-change="vm.formData.damageLevel = (vm.metaData.levelList | filter:vm.formData.level.damageLevelName)[0].damageLevel" data="" class="form-controll input-sm" ng-options="level.damageLevelName for level in vm.metaData.levelList track by level.damageLevel" ng-model="vm.formData.level"></select></div></div><div class="form-group col-sm-3"><label for="name" class="control-label col-sm-5">上报科室</label><div class="col-sm-7"><input type="hidden" ng-model="vm.formData.deptCode"><select ng-change="vm.formData.deptCode = (vm.metaData.deptList | filter:vm.formData.dept.deptName)[0].deptCode" data="" class="form-controll input-sm" ng-options="dept.deptName for dept in vm.metaData.deptList track by dept.deptCode" ng-model="vm.formData.dept"></select></div></div><div class="form-group col-sm-3"><label for="email" class="control-label col-sm-5">上报人</label><div class="col-sm-7"><input type="hidden" ng-model="vm.formData.userCode"> <input readonly="" type="text" ng-model="vm.formData.userName" class="form-control input-sm"></div></div><div class="form-group col-sm-3"><label><input ng-model="vm.formData.userRole" value="当事人" name="userRole" type="radio"> 当事人</label> <label><input ng-model="vm.formData.userRole" value="目击者" name="userRole" type="radio"> 目击者</label></div><div class="form-group col-sm-6"><label for="email" class="control-label col-sm-2 fixed-label">发生时间</label><div class="col-sm-4"><span class="input-group"><input ng-model="vm.formData.eventDate" type="text" id="eventDate" name="eventDate" required="" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.eventTimeOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.eventTimeCalender()"><i class="fa fa-calendar"></i></button></span></span></div><div class="col-sm-5"><uib-timepicker template-url="app/common/tpls/timepicker/timepicer.html" ng-model="vm.formData.eventTime" class="time-picker" ng-change="vm.timeChanged()" hour-step="1" minute-step="1" show-meridian="ismeridian"></uib-timepicker></div></div><div class="form-group col-sm-3"><label for="name" class="control-label col-sm-5">住院号</label><div class="col-sm-7"><input class="form-control input-sm" required="" ng-model="vm.formData.patientHospNo" type="text"></div></div><div class="form-group col-sm-3"><label for="email" class="control-label col-sm-5">床号</label><div class="col-sm-7"><input type="text" ng-model="vm.formData.patientBedNo" class="form-control input-sm"></div></div><div class="form-group col-sm-3"><label for="email" class="control-label col-sm-5">姓名</label><div class="col-sm-7"><input type="text" ng-model="vm.formData.patientName" class="form-control input-sm"></div></div><div class="form-group col-sm-3"><label for="email" class="control-label col-sm-5">性别</label><div class="col-sm-7"><select name="gender" ng-model="vm.formData.patientGender" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.gender">{{item.dicName}}</option></select></div></div><div class="form-group col-sm-3"><label for="email" class="control-label col-sm-5">年龄</label><div class="col-sm-7"><input type="text" ng-model="vm.formData.patientAge" class="form-control input-sm" style="width:4em;"></div></div><div class="form-group col-sm-12"><label class="col-sm-1 control-label fixed-label">诊断</label><div class="col-sm-10"><input type="text" ng-model="vm.formData.patientDiagnose" class="form-control input-sm"></div></div><div class="form-group col-sm-12"><label class="col-sm-1 control-label fixed-label">事件类型</label><div class="col-sm-10"><label class="event-type" ng-repeat="eventType in vm.metaData.eventTypeList"><input ng-model="vm.formData.eventType" ng-checked="vm.formData.eventType.eventTypeCode == eventType.eventTypeCode" type="radio" value="{{eventType}}" name="eventTypeCode"> {{eventType.eventTypeName}}</label></div></div><div class="form-group col-sm-12"><label class="col-sm-2 control-label">事件经过描述(5WH1)</label><div class="col-sm-10"><textarea type="text" ng-model="vm.formData.eventDescribe" class="form-control input-sm"></textarea></div></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">上报</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),e.put("app/malCaseUp/call/call.modal.html",'<div class="call-modal-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写上报信息</h5></div><div ng-include="" src="\'app/malCaseUp/call/call.include.html\'"></div></div>'),e.put("app/malCaseUp/call/call.tpl.html",'<div class="col-md-12" ng-if="vm.state.current.name == \'home.call\'"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-list-alt"></i> <span>不良事件列表</span><div class="pull-right"><a ui-sref=".callForm" class="btn btn-sm btn-default"><i class="fa fa-upload"></i> 新建上报</a></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.showList" st-safe-src="vm.list" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">不良事件级别</th><th>类型</th><th>姓名</th><th>科室</th><th>住院号</th><th>性别</th><th>年龄</th><th>主要诊断</th><th>发生时间</th><th>报告人</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.showList"><tr class="row-{{$index}}"><td>{{ row.damageLevelName }}</td><td>{{row.eventTypeName}}</td><td>{{row.patientName}}</td><td>{{row.deptName}}</td><td>{{ row.patientHospNo }}</td><td>{{ row.patientGenderName}}</td><td>{{row.patientAge}}</td><td>{{row.patientDiagnose}}</td><td>{{row.eventTime}}</td><td>{{row.userName}}</td><td><a ng-if="row.permission === \'01\'" ui-sref=".callForm({reportCode:row.reportCode, report: row})">修改</a> <a ng-if="row.permission === \'01\'" ui-sref=".survey({reportCode:row.reportCode, report: row })">填写调查</a> <button ng-if="row.permission === \'01\'" class="btn btn-xs btn-danger" ng-click="vm.openConfirm(row, {type: \'del\'})"><i class="fa fa-times-circle"></i>删除</button><div class="btn-group" uib-dropdown="" ng-if="row.permission === \'01\' || row.permission === \'02\'"><button class="btn btn-xs btn-danger" type="button" uib-dropdown-toggle=""><i class="fa fa-paper-plane"></i>上报至</button><ul class="dropdown-menu" uib-dropdown-menu="" role="menu" aria-labelledby="split-button"><li role="menuitem" ng-if="row.permission === \'01\'"><a href="javascript:;" ng-click="vm.openConfirm(row, {type: \'report\', value: \'submitEventReportToHeadNurse\'})">护士长</a></li><li role="menuitem" ng-if="row.permission === \'01\' || row.permission === \'02\'"><a href="javascript:;" ng-click="vm.openConfirm(row, {type: \'report\', value: \'submitEventReportToNurseDept\'})">护理部</a></li></ul></div><button ng-if="row.permission === \'03\'" class="btn btn-xs btn-primary">通过</button> <button ng-if="row.permission === \'02\' || row.permission === \'03\'" class="btn btn-xs btn-info">打回</button> <button ng-if="row.permission === \'02\' || row.permission === \'03\'" class="btn btn-xs btn-danger">终止</button></td></tr></tbody><tfoot><tr><td colspan="12"><div st-pagination="" st-items-by-page="15" st-displayed-pages="5"></div></td></tr></tfoot></table><none-data-info list="vm.list"></none-data-info></div></div></div><div ui-view=""></div>'),e.put("app/malCaseUp/element/element.tpl.html",'<div ng-controller="MalCaseUpElementController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-indent"></i> <span>不良元素元素管理</span><div class="pull-right"><button class="btn btn-xs btn-primary">新增元素</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'元素编号\'">{{row.elementCode}}</td><td data-title="\'元素名称\'">{{row.elementName}}</td><td data-title="\'显示名称\'">{{row.viewName}}</td><td data-title="\'压疮大小\'">{{row.groupName}}</td><td data-title="\'元素类型\'">{{row.elementType}}</td><td data-title="\'组件宽度\'">{{row.width}}</td><td data-title="\'备注\'">{{row.remark}}</td><td data-title="\'是否必填\'">{{row.required}}</td></tr></table></div></div></div>'),e.put("app/malCaseUp/fix/abstract.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>不良事件处理流程</span></div><div class="panel-body"><div class="col-md-3 flow-wrapper"><ul class="event-flow"><li class="event-flow_item"><a ui-sref=".caseInfo" ui-sref-active="active"><div class="event-flow_number">1</div><div class="event-flow_title">不良事件信息</div></a></li><li class="event-flow_item"><a ui-sref=".surveyInfo" ui-sref-active="active"><div class="event-flow_number">2</div><div class="event-flow_title">调查处理信息</div></a></li><li class="event-flow_item"><a ui-sref=".requirement" ui-sref-active="active"><div class="event-flow_number">3</div><div class="event-flow_title">整改要求</div></a></li><li class="event-flow_item"><a ui-sref=".measures" ui-sref-active="active"><div class="event-flow_number">4</div><div class="event-flow_title">整改措施</div></a></li><li class="event-flow_item"><a ui-sref=".estimate" ui-sref-active="active"><div class="event-flow_number">5</div><div class="event-flow_title">效果评估</div></a></li></ul></div><div class="col-md-9 well" ui-view=""></div></div></div></div>'),e.put("app/malCaseUp/fix/fix.tpl.html",'<div class="col-md-12 handle-wrapper" ng-if="vm.state.current.name == \'home.fix\'"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-list-alt"></i> <span>不良事件列表</span></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">不良事件级别</th><th>类型</th><th>发生时间</th><th>科室</th><th>住院号</th><th>姓名</th><th>性别</th><th>年龄</th><th>主要诊断</th><th>报告人</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td ng-click="vm.loadDetail(row.code)">{{ row.damageLevelName }}</td><td ng-click="vm.loadDetail(row.code)">{{row.eventTypeName}}</td><td ng-click="vm.loadDetail(row.code)">{{row.eventTime}}</td><td ng-click="vm.loadDetail(row.code)">{{row.deptName}}</td><td ng-click="vm.loadDetail(row.code)">{{ row.patientHospNo }}</td><td ng-click="vm.loadDetail(row.code)">{{row.patientName}}</td><td ng-click="vm.loadDetail(row.code)">{{ row.patientGenderName}}</td><td ng-click="vm.loadDetail(row.code)">{{row.patientAge}}</td><td ng-click="vm.loadDetail(row.code)">{{row.patientDiagnose}}</td><td ng-click="vm.loadDetail(row.code)">{{row.userName}}</td><td><a href="javascript:;" ui-sref=".fixCenter.requirement({reportCode: row.reportCode})">要求</a>｜ <a href="javascript:;" ui-sref=".fixCenter.measures({reportCode: row.reportCode})">措施</a> ｜ <a href="javascript:;" ui-sref=".fixCenter.estimate({reportCode: row.reportCode})">效果评估</a></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div><div ui-view=""></div>'),e.put("app/malCaseUp/handle/estimate.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><ul class="list-group"><li ng-click="vm.fillItem(\'measure\', measure)" ng-class="{\'active\': vm.formData.measure.meaCode == measure.meaCode}" class="list-group-item" ng-repeat="measure in vm.formData.measureList track by $index">{{$index + 1}}. {{measure.meaContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{measure.userName}}</span></div><blockquote>{{!measure.resDescribe ? \'暂无评估\' : measure.resDescribe}}</blockquote></li><li class="list-group-item"><div class="form-group"><div class="col-sm-12"><textarea class="form-control input-sm" cols="50" rows="3" ng-disabled="!vm.formData.measure.seqId" ng-model="vm.formData.measure.resDescribe" placeholder="请选择措施">\n                </textarea></div></div><div class="form-group"><div class="col-sm-12"><button ng-click="vm.saveListItem(\'estimate\')" class="btn btn-primary btn-sm" ng-disabled="vm.formData.measure.resDescribe === \'\' || !vm.formData.measure.resDescribe">提交评估</button></div></div></li></ul></div></div></div></form>'),e.put("app/malCaseUp/handle/handle.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写上报信息</h5></div><div class="modal-body"><div class="container-fluid"><div class="text-center handle-nav"><div class="text-center status-buttons"><a ui-sref-active="active" ui-sref=".malCase"><span>1</span> 不良事件信息</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".reportXk"><span>2</span> 调查处理</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".requirement"><span>3</span> 整改要求</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".measures"><span>4</span> 整改措施</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".estimate"><span>5</span> 整改效果评估</a></div></div><div id="form-views" class="well well-sm" ui-view=""></div></div></div></div>'),e.put("app/malCaseUp/handle/handle.tpl.html",'<div class="col-md-12 handle-wrapper"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-list-alt"></i> <span>不良事件列表</span></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">不良事件级别</th><th>类型</th><th>发生时间</th><th>科室</th><th>住院号</th><th>姓名</th><th>性别</th><th>年龄</th><th>主要诊断</th><th>简要（5WH1）</th><th>报告人</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td ng-click="vm.loadDetail(row.code)">{{ row.damageLevelName }}</td><td ng-click="vm.loadDetail(row.code)">{{row.eventTypeName}}</td><td ng-click="vm.loadDetail(row.code)">{{row.eventTime}}</td><td ng-click="vm.loadDetail(row.code)">{{row.deptName}}</td><td ng-click="vm.loadDetail(row.code)">{{ row.patientHospNo }}</td><td ng-click="vm.loadDetail(row.code)">{{row.patientName}}</td><td ng-click="vm.loadDetail(row.code)">{{ row.patientGenderName}}</td><td ng-click="vm.loadDetail(row.code)">{{row.patientAge}}</td><td ng-click="vm.loadDetail(row.code)">{{row.patientDiagnose}}</td><td ng-click="vm.loadDetail(row.code)">{{row.eventDescribe}}</td><td ng-click="vm.loadDetail(row.code)">{{row.userName}}</td><td><a href="javascript:;" ui-sref="home.dispose({reportCode: row.reportCode})">处理</a> ｜ <a href="javascript:;" ng-click="vm.open(row)">整改</a> ｜ <a href="javascript:;" ui-sref="home.dispose({reportCode: row.reportCode})">效果评估</a></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),e.put("app/malCaseUp/handle/malCaseInfo.tpl.html",'<div class="modal-body case-info-wrapper"><div class="container-fluid"><div class="label-group col-md-6"><label class="col-md-4 control-label">事件类型</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.eventTypeName}}</div></div><div class="label-group col-md-6"><label class="col-md-4 control-label">不良事件级别</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.damageLevelName}}</div></div><div class="label-group col-md-6"><label for="name" class="col-md-4 control-label">上报科室</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.deptName}}</div></div><div class="label-group col-md-6"><label class="control-label col-md-4">发生时间</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.eventTime}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">上报人</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.userName}}（{{vm.metaData.malCaseInfo.userRole}}）</div></div><div class="label-group col-md-6"><label for="name" class="col-md-4 control-label">患者住院号</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientHospNo}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者床号</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientBedNo}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者姓名</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientName}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者性别</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientGenderName}}</div></div><div class="label-group col-md-6"><label class="col-md-4 control-label">患者年龄</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientAge}}</div></div><div class="label-group col-md-12"><label class="col-md-2 control-label">患者诊断</label><div class="col-md-10 case-info">：{{vm.metaData.malCaseInfo.patientDiagnose}}</div></div><div class="label-group col-md-12"><label class="col-md-2 control-label">事件经过描述</label><div class="col-md-10 case-info">：{{vm.metaData.malCaseInfo.eventDescribe}}</div></div></div></div>'),e.put("app/malCaseUp/handle/measures.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><ul class="list-group"><li ng-class="{\'active\': vm.formData.measure.meaCode == measure.meaCode}" class="list-group-item" ng-click="vm.fillItem(\'measure\', measure)" ng-repeat="measure in vm.formData.measureList track by $index">{{$index + 1}}. {{measure.meaContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{measure.userName}}</span> <span style="margin-right:1em;">实施负责人：{{(vm.metaData.userList | filter:measure.headUserCode)[0].userName }}</span> <button class="btn btn-xs btn-danger" uib-tooltip="删除" ng-click="vm.removeListItem({index: $index, listName: \'measure\', meaCode: measure.meaCode, reportCode: vm.formData.reportCode})"><span class="fa fa-trash"></span></button></div></li><li class="list-group-item"><div class="form-group"><label for="email" class="col-sm-2 control-label">措施实施负责人：</label><div class="col-sm-10"><input type="hidden" name="headUserCode" ng-model="vm.formData.headUserCode"><select class="form-controll input-sm" name="userName" ng-model="vm.formData.measure.headUserName" ng-change="vm.formData.measure.headUserCode = (vm.metaData.userList | filter:vm.formData.measure.headUserName)[0].userCode"><option ng-repeat="user in vm.metaData.userList" ng-selected="user.userCode == vm.formData.measure.headUserCode" value="{{user.userName}}">{{user.userName}}</option></select></div></div><div class="form-group"><label for="email" class="col-sm-2 control-label">整改措施：</label><div class="col-sm-10"><textarea class="form-control input-sm" cols="50" rows="3" ng-model="vm.formData.measure.meaContent" placeholder="填写整改要求">\n                </textarea></div></div><div class="form-group"><label for="email" class="col-sm-2 control-label"></label><div class="col-sm-10"><button ng-click="vm.resetForm(\'measure\')" class="btn btn-primary btn-sm">清空</button> <button ng-click="vm.saveListItem(\'measure\')" class="btn btn-success btn-sm" ng-disabled="vm.formData.measure.meaContent === \'\' || !vm.formData.measure.meaContent">保存</button></div></div></li></ul></div></div></div></form>'),e.put("app/malCaseUp/handle/report.tpl.html",'<form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><p>患者信息</p><table class="table table-condensed table-bordered table-striped"><tr><th style="width: 5em;"></th><th class="text-center">不良事件发生前</th><th class="text-center">不良事件发生后</th></tr><tr><td>生命体征</td><td><div class="form-group"><label for="email" class="control-label">BP</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.bp_before.value" class="form-control input-sm"> mmHg</div><div class="form-group"><label for="email" class="control-label">P</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.p_before.value" class="form-control input-sm"> 次／分</div><br><div class="form-group"><label for="email" class="control-label">R</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.r_before.value" class="form-control input-sm"> 次／分</div><div class="form-group"><label for="email" class="control-label">T</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.t_before.value" class="form-control input-sm"> ℃</div></td><td><div class="form-group"><label for="email" class="control-label">BP</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.bp_after.value" class="form-control input-sm"> mmHg</div><div class="form-group"><label for="email" class="control-label">P</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.p_after.value" class="form-control input-sm"> 次／分</div><br><div class="form-group"><label for="email" class="control-label">R</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.r_after.value" class="form-control input-sm"> 次／分</div><div class="form-group"><label for="email" class="control-label">T</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.t_after.value" class="form-control input-sm"> ℃</div></td></tr><tr><td>精神状况</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_clear_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_clear_before.value" type="checkbox"> 神志清</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_directive_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_directive_before.value" type="checkbox"> 有定向力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_upset_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" tng-model="vm.formData.reportDetailList.psychosis_upset_before.value" type="checkbox"> 不安</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_undiscerned_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_undiscerned_before.value" type="checkbox"> 无定力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_halfComa_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_halfComa_before.value" type="checkbox"> 半昏迷</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_coma_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_coma_before.value" type="checkbox"> 昏迷</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.psychosis_else_before.value" class="input-sm form-control"></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_clear_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_clear_after.value" type="checkbox"> 神志清</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_directive_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_directive_after.value" type="checkbox"> 有定向力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_upset_after.value = \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" tng-model="vm.formData.reportDetailList.psychosis_upset_after.value" type="checkbox"> 不安</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_undiscerned_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_undiscerned_after.value" type="checkbox"> 无定力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_halfComa_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_halfComa_after.value" type="checkbox"> 半昏迷</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_coma_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_coma_after.value" type="checkbox"> 昏迷</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.psychosis_else_after.value" class="input-sm form-control"></div></div></td></tr><tr><td>运动</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_self_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_self_before.value"> 独立</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_assist_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_assist_before.value"> 辅助支持</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_limit_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_limit_before.value"> 限制在床/轮椅</label></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_self_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_self_after.value" type="checkbox"> 独立</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_assist_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_assist_after.value" type="checkbox"> 辅助支持</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_limit_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_limit_after.value" type="checkbox"> 限制在床/轮椅</label></div></div></td></tr><tr><td>残疾</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_none_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_none_before.value"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_auditionDown_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_auditionDown_before.value"> 听力下降</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_costive_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_costive_before.value"> 行动不便</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_unclearEyed_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_unclearEyed_before.value"> 视力缺损</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.deformity_else_before.value" class="input-sm form-control"></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_none_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_none_after.value" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_auditionDown_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_auditionDown_after.value" type="checkbox"> 听力下降</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_costive_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_costive_after.value" type="checkbox"> 行动不便</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_unclearEyed_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_unclearEyed_after.value" type="checkbox"> 视力缺损</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.deformity_else_after.value" class="input-sm form-control"></div></div></td></tr><tr><td>其他说明</td><td><textarea name="name" ng-model="vm.formData.reportDetailList.elsedeclare_before.value" rows="2" cols="50" class="form-control input-sm"></textarea></td><td><textarea name="name" ng-model="vm.formData.reportDetailList.elsedeclare_after.value" rows="2" cols="50" class="form-control input-sm"></textarea></td></tr></table></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生24小时内用药：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_none.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_none.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_diuretic.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_diuretic.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 利尿剂</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_nicotine.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_nicotine.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 尼古丁／镇静</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_high_handed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_high_handed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 抗高压</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_depressed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_depressed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 抗抑郁</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_24_medicine_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生前采取的特殊预防措施：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_none.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_none.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_accompany.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_accompany.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 陪伴</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_informed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_informed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 已告知</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_guardrail.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_guardrail.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 床边扶栏</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_motionDevice.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_motionDevice.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 动作设备</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_sign.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_sign.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 标识</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_closestool.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_closestool.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 床边便器</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_restlessLimit.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_restlessLimit.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 躁动约束</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_riskWarning.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_riskWarning.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 风险预警</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_before_measures_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生地点：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_ward.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_ward.value"> 病房</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_treatmentRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_treatmentRoom.value"> 治疗室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_changeRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_changeRoom.value"> 换药室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_handleRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_handleRoom.value"> 处置室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_corridor.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_corridor.value"> 走廊</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_washroom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_washroom.value"> 厕所</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_outDepartment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_outDepartment.value"> 病区外</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_happen_addr_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生原因：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_physiological.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_physiological.value"> 病患生理因素</label></div>（<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_old.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_old.value"> 年老体弱</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_longSick.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_longSick.value"> 久病不愈</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_worsen.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_worsen.value"> 病情恶化</label></div>）<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_mentality.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_mentality.value"> 病患心理因素</label></div>（<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_badMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_badMind.value"> 情绪不稳</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_lostMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_lostMind.value"> 精神失常</label></div>）<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_artificia.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_artificia.value"> 人为因素</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value"> 医疗材料故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value"> 仪器故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value"> 设备故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_yard.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_yard.value"> 场地</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_environment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_environment.value"> 环境因素</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_winebowl.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_winebowl.value"> 酒瘾</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_drugster.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_drugster.value"> 毒瘾</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutSystem.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutSystem.value"> 与制度有关</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutFlow.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutFlow.value"> 与流程有关</label></div><div class="checkbox"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control" ng-model="vm.formData.reportDetailList.malcase_reason_else.value"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件目击：</label><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_witness.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生的事实（包括不良事件发生经过，发生后治疗，发生后护理及发生后检查结果等情况，由当事人或发现者填写）：</label> <textarea name="name" ng-model="vm.formData.reportDetailList.malcase_truth.value" rows="3" cols="100" class="form-control input-sm"></textarea></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveReportDetail()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),
e.put("app/malCaseUp/handle/reportXk.tpl.html",'<form class="w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">日期类型</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK01_medicine_none.value"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.dateType">{{item.dicName}}</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">不良事件发生地点</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK03_medicine_none.value"><option value="01">门诊</option><option value="02">急诊</option><option value="03">住院病房</option><option value="04">监护室</option><option value="05">留观察室</option><option value="06">公共服务设施</option><option value="07">卫生间</option><option value="08">转运图中</option><option value="09">手术室</option><option value="10">走廊</option><option value="11">其他</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">发生于何种服务</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK02_medicine_none.value"><option value="01">手术</option><option value="02">分娩</option><option value="03">治疗</option><option value="04">护理</option><option value="05">饮食</option><option value="06">公共服务设施</option><option value="07">卫生间</option><option value="08">清扫</option><option value="09">采集标本</option><option value="10">服务项目不明</option><option value="11">其他</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">事件给患者带来的损害</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK04_medicine_none.value"><option value="01">死亡</option><option value="02">植物人</option><option value="03">严重</option><option value="04">较重</option><option value="05">重</option><option value="06">中</option><option value="07">轻</option><option value="08">无</option><option value="09">抢救中</option><option value="10">不明</option><option value="11">其他</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人身份</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK05_medicine_none.value"><option value="01">注册护士</option><option value="02">返聘护士</option><option value="03">招聘护士</option><option value="04">进修护士</option><option value="05">见习护士</option><option value="06">实习护士</option><option value="07">护工</option><option value="08">其他</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">当事职务</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK06_medicine_none.value"><option value="01">护士长</option><option value="02">负护士长</option><option value="03">组长</option><option value="04">护士</option><option value="05">见习护士</option><option value="06">实习护士</option><option value="07">护工或陪护</option><option value="08">其他</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人年龄</label><div class="col-sm-5"><input class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK07_medicine_none.value"></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人所在科室</label><div class="col-sm-5"><input class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK08_medicine_none.value"></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">医院名称</label><div class="col-sm-5"><input class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK09_medicine_none.value"></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">医院级别</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK10_medicine_none.value"><option value="01">三级特等</option><option value="02">三级甲等</option><option value="03">三级乙等</option><option value="04">三级丙等</option><option value="05">二级级甲等</option><option value="06">二级乙等</option><option value="07">二级丙等</option><option value="08">一级级甲等</option><option value="09">一级乙等</option><option value="10">一级丙等</option><option value="11">未定级</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者角色</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK11_medicine_none.value"><option value="01">事件当事人</option><option value="02">同事</option><option value="03">旁观者</option><option value="04">其他</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者职务</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK12_medicine_none.value"><option value="01">注册护士</option><option value="02">返聘护士</option><option value="03">招聘护士</option><option value="04">进修护士</option><option value="05">见习护士</option><option value="06">实习护士</option><option value="07">护工</option><option value="08">其他</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者职称</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK13_medicine_none.value"><option value="01">主任护师</option><option value="02">副主任护师</option><option value="03">主管护师</option><option value="04">护师</option><option value="05">护士</option><option value="06">见习护士</option><option value="07">实习护士</option><option value="08">其他</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">联系电话</label><div class="col-sm-5"><input class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK14_medicine_none.value"></div></div></div><div class="row"><div class="col-md-12"><label class="control-label col-md-2">未尽补充事宜</label><div class="col-sm-9"><textarea class="form-control" type="text" ng-model="vm.formData.reportDetailList.malcase_XK16_medicine_none.value">\n          </textarea></div></div></div><p class="xk-title">与当事人可能相关的因素:</p><div class="row"><div class="form-group"><label class="control-label col-sm-1">确认</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_qr_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_qr_01.value"> 确认不认真</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_qr_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_qr_02.value"> 确认错误</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_qr_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_qr_03.value"> 没有执行确认程序</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_qr_04.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">观察</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_gc_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_gc_01.value"> 观察不仔细</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_gc_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_gc_02.value"> 没有进行观察</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_gc_03.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">判断</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_PJ_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_PJ_01.value"> 经验不足</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_PJ_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_PJ_02.value"> 判断有误</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_PJ_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_PJ_03.value"> 未执行诊疗常规</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_PJ_04.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">诊断</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_zj_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_zj_01.value"> 知识储备不足</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_zj_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_zj_02.value"> 应用知识有误</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_zj_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_zj_03.value"> 应急经验不足</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_zj_04.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">技能</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_jn_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_jn_01.value"> 不成熟技术</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_jn_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_jn_02.value"> 技术应用有误</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_jn_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_jn_03.value"> 未经卫生行政部门核准的技术</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_jn_04.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-2">不良事件发生原因</label><div class="col-sm-10"><div class="col-sm-7"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_physiological.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_physiological.value"> 病患生理因素</label>（ <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_old.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_old.value"> 年老体弱</label> <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_longSick.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_longSick.value"> 久病不愈</label> <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_worsen.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_worsen.value"> 病情恶化</label>）</div><div class="col-sm-5"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_mentality.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_mentality.value"> 病患心理因素</label>（ <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_badMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_badMind.value"> 情绪不稳</label> <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_lostMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_lostMind.value"> 精神失常</label>）</div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_artificia.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_artificia.value"> 人为因素</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value"> 医疗材料故障</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value"> 仪器故障</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value"> 设备故障</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_yard.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_yard.value"> 场地</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_environment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_environment.value"> 环境因素</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_winebowl.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_winebowl.value"> 酒瘾</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_drugster.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_drugster.value"> 毒瘾</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutSystem.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutSystem.value"> 与制度有关</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutFlow.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutFlow.value"> 与流程有关</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.malcase_reason_else.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label">不良事件发生的事实（包括不良事件发生经过，发生后治疗，发生后护理及发生后检查结果等情况，由当事人或发现者填写）：</label> <textarea name="name" ng-model="vm.formData.reportDetailList.malcase_truth.value" rows="3" cols="100" class="form-control input-sm"></textarea></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveReportDetail()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),e.put("app/malCaseUp/handle/requirement.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><ul class="list-group"><li class="list-group-item" ng-class="{\'active\': vm.formData.requirement.reqCode == requirement.reqCode}" ng-click="vm.fillItem(\'requirement\', requirement)" ng-repeat="requirement in vm.formData.requirementList track by $index">{{$index + 1}}. {{requirement.reqContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{requirement.userName}}</span> <button class="btn btn-xs btn-danger" uib-tooltip="删除" ng-click="vm.removeListItem({index: $index, listName: \'requirement\', seqId: requirement.seqId})"><span class="fa fa-trash"></span></button></div></li><li class="list-group-item"><div class="form-group"><div class="col-sm-12"><textarea class="form-control input-sm" cols="50" rows="3" ng-model="vm.formData.requirement.reqContent" placeholder="填写整改要求">\n                </textarea></div></div><div class="form-group"><div class="col-sm-12"><button ng-click="vm.resetForm(\'requirement\')" class="btn btn-primary btn-sm">清空</button> <button ng-click="vm.saveListItem(\'requirement\')" class="btn btn-success btn-sm" ng-disabled="vm.formData.requirement.reqContent === \'\' || !vm.formData.requirement.reqContent">保存</button></div></div></li></ul></div></div></div></form>'),e.put("app/malCaseUp/level/addLevel.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写分级标准信息</h5></div><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">等级</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.damageLevelName" name="damageLevelName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" name="remark" ng-model="vm.formData.remark"></textarea></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">流程：</label><div class="col-sm-9"><div class="flow-list"><div ng-repeat="flowItem in vm.formData.flowList track by $index"><i class="fa fa-level-down fa-flip-horizontal" ng-if="!$last"></i> <span>{{flowItem}}</span> <a ng-click="vm.removeFlow($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></div></div><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="填写流程"> <span class="input-group-btn"><button ng-click="vm.addFlow($event)" class="btn btn-primary btn-sm" ng-disabled="vm.flowText === \'\' || !vm.flowText">添加流程</button></span></div></div></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/malCaseUp/level/level.tpl.html",'<div class="col-md-8"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>填写不良事件上报表</span></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">等级</th><th>等级描述</th><th>处理流程</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td data-title="\'等级\'" ng-click="vm.edit(row)">{{row.damageLevelName}}</td><td data-title="\'等级描述\'" ng-click="vm.edit(row)">{{row.remark}}</td><td data-title="\'处理流程\'" ng-click="vm.edit(row)">{{ row.flow }}</td><td data-title="\'操作\'"><button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div><div class="col-md-4"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>填写分级标准信息</span> <button class="btn btn-sm btn-success" type="button" ng-click="vm.save()" ng-disabled="addLevelForm.damageLevelName.$invalid || addLevelForm.remark.$invalid">保存</button></div><div class="panel-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="container-fluid"><div class="col-md-12"><div class="form-group"><label for="name" class="col-sm-3 control-label">等级</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.damageLevelName" name="damageLevelName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">描述</label><div class="col-sm-9"><textarea class="form-control input-sm" name="remark" ng-model="vm.formData.remark" required=""></textarea></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">流程</label><div class="col-sm-9"><div class="flow-list"><div ng-repeat="flowItem in vm.formData.flowList track by $index"><div class="btn-group btn-group-xs" role="group"><button type="button" class="btn btn-default btn-xs" name="button" ng-click="main.runApi(api)">{{flowItem}}</button> <a class="btn btn-danger btn-xs" ng-click="vm.removeFlow($index)"><i class="fa fa-times"></i></a></div><i class="fa fa-long-arrow-right" ng-if="!$last"></i></div></div><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="填写流程"> <span class="input-group-btn"><button ng-click="vm.addFlow()" class="btn btn-primary btn-sm" ng-disabled="vm.flowText === \'\' || !vm.flowText"><span class="fa fa-plus"></span></button></span></div></div></div></div></div></form></div></div></div>'),e.put("app/malCaseUp/statistics/statistics.tpl.html",'<div ng-controller="MalCaseUpStatisticsController as vm"><button ng-click="tableParams.sorting({})" class="btn btn-default pull-left">新增</button> <button ng-click="tableParams.sorting({})" class="btn btn-danger pull-left">修改</button><table ng-table="tableParams" class="table table-striped table-bordered"><thead><tr><td>事件名称</td><td>事件类型</td><td>伤害级别</td><td>事件描述</td></tr></thead><tbody style="background-color: white"><tr ng-repeat="ls in vm.lst"><td>{{ls.groupNo}}</td><td>{{ls.groupName}}</td><td>{{ls.bedNo}}</td><td>{{ls.remark}}</td></tr></tbody></table></div>'),e.put("app/malCaseUp/type/type.tpl.html",'<div class="col-md-12" ng-controller="MalCaseUpTypeController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-send"></i> <span>上报类型列表</span> <button class="btn btn-sm btn-default">增加类型</button></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">上报类型编号</th><th>上报类型名称</th><th>最后更新人</th><th>最后更新时间</th><th>操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td><em>{{row.eventTypeCode}}</em></td><td>{{row.eventTypeName}}</td><td>{{ row.updatePerson }}</td><td>{{row.lastUpdateTime}}</td><td><a href="javascript:;" ng-click="vm.open(row)">配置调查模板</a> ｜ <button class="btn btn-danger btn-xs">删除</button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),e.put("app/manual/item/item.model.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5>填写科研管理</h5></div><div class="modal-body"><div class="static-form-item container-fluid"><div class="form-group"><div class="col-sm-3"><label class="control-label">课题名称：</label></div><div class="col-sm-9"><input ng-model="vm.formData.subjectName"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">上报</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div>'),e.put("app/manual/item/item.tpl.html",'<div class="col-md-7"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>工作项目表</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst" ng-class="{\'info\': vm.selectedItem.seqId == row.seqId}"><td data-title="\'工作项目\'" class="text-center" ng-click="vm.edit(row)">{{ row.itemName }}</td><td data-title="\'使用病区\'" class="text-center" ng-click="vm.edit(row)">{{ row.deptName }}</td><td data-title="\'频次\'" class="text-center" ng-click="vm.edit(row)">{{ row.frequencyName }} / {{ row.frequency }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.deleteItem(row.itemCode)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div><div class="col-md-5"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>项目信息</span><div class="pull-right"><button ng-click="vm.add()" class="btn btn-primary btn-xs">添加项目</button></div></div><div class="panel-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="workItemForm" form="workItemForm"><div class="container-fluid"><div class="col-md-12"><div class="form-group"><label for="itemName" class="col-sm-3 control-label">项目名称：</label><div class="col-sm-9"><input class="form-control input-sm" autocomplete="off" ng-model="vm.formData.itemName" name="itemName" type="text" id="itemName"></div></div><div class="form-group"><label class="col-sm-3 control-label">科室／病区：</label><div class="col-sm-9"><select class="form-controll input-sm" ng-model="vm.formData.dept" ng-options="dept as dept.deptName for dept in vm.deptList track by dept.deptCode" name="dept"></select></div></div><div class="form-group"><label for="frequencyName" class="col-sm-3 control-label">频次：</label><div class="col-sm-9"><input class="form-control input-sm" name="frequencyName" required="" autocomplete="off" ng-model="vm.formData.frequencyName" type="text" id="frequencyName"></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.save()" ng-disabled="workItemForm.groupName.$invalid || workItemForm.groupCode.$invalid">保存</button></div></div></div></div></form></div></div></div>'),e.put("app/manual/workManual/workManual.tpl.html",'<div class="col-md-7"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>床位分组管理</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'组号\'" class="text-center" ng-click="vm.edit(row)">{{ row.groupCode }}</td><td data-title="\'组名\'" class="text-center" ng-click="vm.edit(row)">{{ row.groupName }}</td><td data-title="\'床位\'" class="text-center" ng-click="vm.edit(row)">{{ row.beds }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.deleteGroup(row.seqId)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div><div class="col-md-5"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>新增分组</span></div><div class="panel-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addbedForm" form="addbedForm"><div class="container-fluid"><div class="col-md-12"><div class="form-group"><label for="groupCode" class="col-sm-3 control-label">组号：</label><div class="col-sm-9"><input class="form-control input-sm" autocomplete="off" ng-model="vm.formData.groupCode" name="groupCode" type="text" id="groupCode"></div></div><div class="form-group"><label for="groupName" class="col-sm-3 control-label">组名：</label><div class="col-sm-9"><input class="form-control input-sm" name="groupName" required="" autocomplete="off" ng-model="vm.formData.groupName" type="text" id="groupName"></div></div><div class="form-group"><label for="bedCode" class="col-sm-3 control-label">床位：</label><div class="col-sm-9"><ul class="flow-list"><li ng-repeat="flowItem in vm.formData.bedList track by $index"><span>{{ flowItem }}</span> <a ng-click="vm.removeFlow($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></li></ul><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="新增床位" autocomplete="off" name="bedCode" id="bedCode"> <span class="input-group-btn"><button ng-click="vm.addFlow()" class="btn btn-primary btn-sm" ng-disabled="addbedForm.bedCode.$invalid || addbedForm.bedCode.$pristine">新增</button></span></div></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveGroup()" ng-disabled="addbedForm.groupName.$invalid || addbedForm.groupCode.$invalid">保存</button></div></div></div></div></form></div></div></div>{{ vm.lst }}'),e.put("app/nursingWorkers/add/add.detail.html",'<div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-users"></i> <span>员工列表</span></div><div class="panel-body no-padding" loading-wrapper="" loading-type="content" loading-options="vm.load"><table st-table="vm.displayList" st-safe-src="vm.userDataList" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">编号</th><th>姓名</th><th>性别</th><th>职务</th><th>职称</th><th>临床层级</th><th>学历</th><th>电话</th><th print-remove="">操作</th></tr></thead><tbody><tr ng-repeat="row in vm.displayList" class="row-{{$index}}"><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td>{{row.gender && (row.gender == 1 ? \'男\' : \'女\')}}</td><td>{{row.duty && (dicInfo.position | filter:row.duty)[0].dicName}}</td><td>{{row.technicalPost && (dicInfo.technicalPost | filter:row.technicalPost)[0].dicName }}</td><td>{{ row.clinical && (dicInfo.clinical | filter:row.clinical)[0].dicName}}</td><td>{{row.education}}</td><td>{{row.phone}}</td><td class="print-remove" data-title="\'操作\'"><i class="fa fa-female" ng-if="row.isDeptNurseHeader == \'1\'" uib-tooltip="护士长"></i> <button type="button" class="btn btn-default btn-xs" ng-click="vm.openConfirm(row)" ng-if="row.isDeptNurseHeader != \'1\'">设为科护长</button></td></tr><tr grid-expand="" tpl-src="app/nursingWorkers/files/files.detail.html" ng-show="vm.expanedIndex == $index && vm.expanded"></tr></tbody><tfoot><tr><td colspan="9"><div st-pagination="" st-items-by-page="15" st-displayed-pages="5"></div></td></tr></tfoot></table><none-data-info list="vm.userDataList"></none-data-info></div></div>'),
e.put("app/nursingWorkers/add/add.tpl.html",'<div class="baseinfo-wrapper"><div class="page-left-menu" print-remove=""><div class="panel pull-left dept-wrapper panel-default" full-height=""><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body dept-list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText" placeholder="输入姓名关键字搜索"></div><div class="list-content"><treecontrol class="tree-light" tree-model="vm.treeData" on-selection="vm.select(node)" filter-expression="vm.filterText" expanded-nodes="vm.expandedNodes" selected-node="vm.selectedNode" options="vm.treeOption">{{node.deptName}}</treecontrol><loading type="tree"></loading></div></div></div></div><div class="page-right-content"><div ui-view=""></div></div></div>'),e.put("app/nursingWorkers/alt/alt.detail.html",'<div class="hr-wrapper alt-wrapper"><loading type="content"></loading><uib-tabset active="active"><uib-tab index="0" heading="职称变更" active="tab.active"><form class="form-horizontal comUserPosition-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="comUserPositionForm"><div class="panel panel-default"><div class="panel-body"><div class="form-group"><label class="col-sm-1 control-label">职称：</label><div class="col-sm-2"><select id="technicalPost" name="technicalPost" required="" ng-model="vm.detail.comUser.technicalPost" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.technicalPost">{{item.dicName}}</option></select></div><label class="col-sm-1 control-label">审批单位：</label><div class="col-sm-2"><input type="text" class="form-control input-sm" required="" name="reviewUnit" ng-model="vm.detail.comUser.reviewUnit"></div><label class="col-sm-1 control-label">开始时间：</label><div class="col-sm-2"><span class="input-group"><input type="text" id="positionStartDate" name="positionStartDate" uib-datepicker-popup="" required="" datepicker-options="vm.dateOptions" is-open="vm.positionStartDateIsOpen" ng-model="vm.detail.comUser.positionStartDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'positionStartDateIsOpen\')"><i class="fa fa-calendar"></i></button></span></span></div><div class="col-md-3"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.save(\'comUserPosition\', \'technicalPost\')">保存</button></div></div></div></div><div class="table-wrap"><table st-table="vm.displayPosition" st-safe-src="vm.detail.comUserPosition" class="table table-striped table-hover table-condensed"><thead><tr><th>职称</th><th>审批单位</th><th st-sort="startDate" st-sort-default="reverse">获取日期</th></tr></thead><tbody><tr ng-repeat="row in vm.displayPosition track by $index"><td>{{ row.technicalPost && (dicInfo.technicalPost | filter:row.technicalPost)[0].dicName || \'无\'}}</td><td>{{row.reviewUnit || \'无\'}}</td><td>{{row.startDate || \'无\'}}</td></tr><tr ng-show="vm.detail.comUserPosition.length === 0 || !vm.detail.comUserPosition"><td colspan="3"><i class="fa fa-info-circle text-success"></i> 暂无记录</td></tr></tbody><tfoot><tr><td colspan="3"><div st-pagination="" st-items-by-page="15" st-displayed-pages="5"></div></td></tr></tfoot></table></div></form></uib-tab><uib-tab index="1" heading="职务变更"><form class="form-horizontal comUserNursing-form" w5c-form-validate="vm.user.validationOption" name="comUserNursingForm"><div class="table-wrap"><div class="panel panel-default"><div class="panel-body"><div class="form-group"><label class="col-sm-1 control-label">职务：</label><div class="col-sm-2"><select id="duty" name="duty" required="" ng-model="vm.detail.comUser.duty" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.position">{{item.dicName}}</option></select></div><label class="col-sm-1 control-label">开始时间：</label><div class="col-sm-2"><span class="input-group"><input type="text" id="dutyStartDate" name="dutyStartDate" uib-datepicker-popup="" required="" datepicker-options="vm.dateOptions" is-open="vm.dutyStartDateIsOpen" ng-model="vm.detail.comUser.dutyStartDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'dutyStartDateIsOpen\')"><i class="fa fa-calendar"></i></button></span></span></div><div class="col-md-2"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.save(\'comUserNursing\', \'duty\')">保存</button></div></div></div></div><table st-table="vm.displayNursing" st-safe-src="vm.detail.comUserNursing" class="table table-striped table-hover table-condensed"><thead><tr><th>职务</th><th>开始日期</th></tr></thead><tbody><tr ng-repeat="row in vm.displayNursing"><td>{{row.duty && (dicInfo.position | filter:row.duty)[0].dicName || \'无\'}}</td><td>{{row.startDate || \'无\'}}</td></tr><tr ng-show="vm.detail.comUserNursing.length === 0 || !vm.detail.comUserNursing"><td colspan="3"><i class="fa fa-info-circle text-success"></i> 暂无记录</td></tr></tbody><tfoot><tr><td colspan="2"><div st-pagination="" st-items-by-page="15" st-displayed-pages="5"></div></td></tr></tfoot></table></div></form></uib-tab><uib-tab index="2" heading="带教历史" active="tab.active"><form class="form-horizontal comUserPosition-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="comUserPositionForm"><div class="table-wrap"><div class="panel panel-default"><div class="panel-body"><div class="form-group"><label class="col-sm-1 control-label">带教：</label><div class="col-sm-2"><select id="teaching" name="teaching" ng-model="vm.detail.comUser.teachLevel" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.teaching">{{item.dicName}}</option></select></div><div class="col-md-2"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveChange(2)">保存</button></div></div></div></div><table class="table table-striped table-hover table-condensed"><thead><tr><th>变更前</th><th>变更后</th><th>变更日期</th></tr></thead><tbody><tr ng-repeat="row in vm.teachingList"><td>{{row.foreName || \'无\'}}</td><td>{{row.rearName || \'无\'}}</td><td>{{row.changeTime || \'无\'}}</td></tr><tr ng-show="vm.teachingList.length === 0 || !vm.teachingList"><td colspan="3"><i class="fa fa-info-circle text-success"></i> 暂无记录</td></tr></tbody></table></div></form></uib-tab><uib-tab index="3" heading="临床层级\b变更" active="tab.active"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="comUserClinicalForm"><div class="table-wrap"><div class="panel panel-default"><div class="panel-body"><div class="form-group"><label class="col-sm-1 control-label">临床层级：</label><div class="col-sm-2"><select id="clinical" name="clinical" ng-model="vm.detail.comUser.clinical" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.clinical">{{item.dicName}}</option></select></div><div class="col-md-2"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveChange(1)">保存</button></div></div></div></div><table class="table table-striped table-hover table-condensed"><thead><tr><th>变更前</th><th>变更后</th><th>变更日期</th></tr></thead><tbody><tr ng-repeat="row in vm.clinicalList"><td>{{row.foreName || \'无\'}}</td><td>{{row.rearName || \'无\'}}</td><td>{{row.changeTime || \'无\'}}</td></tr><tr ng-show="vm.clinicalList.length === 0 || !vm.clinicalList"><td colspan="3"><i class="fa fa-info-circle text-success"></i> 暂无记录</td></tr></tbody></table></div></form></uib-tab><uib-tab index="4" heading="\b\b\b分科" active="tab.active"><form class="form-horizontal comUserPosition-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="comUserTeachingForm"><div class="table-wrap"><div class="panel panel-default"><div class="panel-body"><div class="form-group"><div class="col-sm-1 control-label">原来科室:</div><div class="col-sm-1"><span class="label editable-label label-primary">{{vm.originalDetail.comUser.deptName}}</span></div><label class="col-sm-1 control-label">科室：</label><div class="col-sm-2"><select id="deptCode" name="deptCode" ng-model="vm.detail.comUser.deptCode" class="form-control input-sm"><option value="{{item.deptCode}}" ng-repeat="item in vm.deptList">{{item.deptName}}</option></select></div><div class="col-md-2"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveUserDept()">保存</button></div></div></div></div><table class="table table-striped table-hover table-condensed"><thead><tr><th>变更前</th><th>变更后</th><th>变更时间</th></tr></thead><tbody><tr ng-repeat="row in vm.splitedDeptList"><td>{{row.foreName || \'无\'}}</td><td>{{row.rearName || \'无\'}}</td><td>{{row.changeTime || \'无\'}}</td></tr><tr ng-show="vm.splitedDeptList.length === 0 || !vm.splitedDeptList"><td colspan="3"><i class="fa fa-info-circle text-success"></i> 暂无记录</td></tr></tbody></table></div></form></uib-tab></uib-tabset></div>'),e.put("app/nursingWorkers/alt/alt.tpl.html",'<div class="baseinfo-wrapper"><div class="page-left-menu" print-remove=""><div class="panel pull-left dept-wrapper panel-default" full-height=""><div class="panel-heading"><i class="fa fa-bars"></i><span>科室人员列表</span></div><div class="panel-body dept-list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText" placeholder="输入姓名关键字搜索"></div><div class="list-content"><treecontrol class="tree-light" tree-model="vm.treeData" on-selection="vm.select(node)" filter-expression="vm.filterText" expanded-nodes="vm.expandedNodes" selected-node="vm.selectedNode" options="vm.treeOption">{{node.deptName || node.userName}}</treecontrol><loading type="tree"></loading></div></div></div></div><div class="page-right-content"><div ui-view=""></div></div></div>'),e.put("app/nursingWorkers/baseInfo/add.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">编辑{{vm.metaData.title}}信息</h5></div><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="modal-body"><div class="form-group"><label for="hisCode" class="col-sm-4 control-label">员工编号：</label><div class="col-sm-8"><input class="form-control input-sm editable-input" ng-model="vm.formData.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group"><label for="userName" class="col-sm-4 control-label">姓名：</label><div class="col-sm-8"><input class="form-control input-sm editable-input" required="" ng-model="vm.formData.userName" id="userName" name="userName" type="text"></div></div><div class="form-group"><label for="userName" class="col-sm-4 control-label">类型：</label><div class="col-sm-8"><label class="radio-inline" ng-repeat="item in dicInfo.nature"><input type="radio" name="nature" ng-checked="item.dicCode == \'03\'" ng-model="vm.formData.userType" value="{{item.dicCode}}"> {{item.dicName}}</label></div></div><div class="form-group"><label for="male" class="col-sm-4 control-label">性别：</label><div class="col-sm-8"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.formData.gender" checked="" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.formData.gender" id="female" value="0"> 女</label></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/nursingWorkers/baseInfo/base.tpl.html",'<div class="baseinfo-wrapper"><div class="page-left-menu" print-remove=""><div class="panel pull-left dept-wrapper panel-default" full-height=""><div class="panel-heading"><i class="fa fa-bars"></i><span>科室人员列表</span></div><div class="panel-body dept-list"><div class="tool-wrapper hr-tool" ng-if="vm.isTopDept == 1"><div class="col-md-4 no-padding"><button class="btn btn-default btn-sm" href="" ng-click="vm.openAdd()"><i class="fa fa-user-plus"></i> 新增</button></div><div class="col-md-4 no-padding"><button class="btn btn-default btn-sm" ng-click="vm.openUpload()"><i class="fa fa-upload"></i> 导入</button></div><div class="col-md-4 no-padding"><export-excel exsl-src="\'/asdads\'" class-list="\'btn-sm btn-default\'"></export-excel></div></div><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText" placeholder="输入关键字搜索"></div><div class="list-content"><treecontrol ng-show="vm.isIncumbency" selected-node="vm.selectedNode" class="tree-light" tree-model="vm.treeData" on-selection="vm.select(node)" filter-expression="vm.filterText" expanded-nodes="vm.expandedNodes" options="vm.treeOption">{{node.deptName || node.userName}}</treecontrol><treecontrol ng-show="!vm.isIncumbency" class="tree-light" tree-model="vm.dimissionData" on-selection="vm.select(node)" filter-expression="vm.filterText" expanded-nodes="vm.expandedNodes">{{node.userName || node.userCode}}</treecontrol><loading type="tree"></loading></div><div class="tool-wrapper hr-tool file-type-switch"><div class="col-md-6 no-padding"><button ng-class="{\'btn-info\': vm.isIncumbency}" class="btn btn-default btn-sm" href="" ng-click="vm.switchType()">在职</button></div><div class="col-md-6 no-padding"><button ng-class="{\'btn-info\': !vm.isIncumbency}" class="btn btn-default btn-sm" ng-click="vm.switchType()">离职</button></div></div></div></div></div><div class="page-right-content"><div ui-view=""></div></div></div>'),e.put("app/nursingWorkers/baseInfo/detail.tpl.html",'<div class="hr-wrapper baseinfo-detail-wrapper" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper"><div class="row"><div class="pull-left"><i class="fa fa-user"></i> {{vm.detail.comUser.userName}}</div><div class="pull-right" ng-if="vm.isTopDept == 1"><div class="btn-group" role="group" aria-label="..."><button class="btn btn-danger btn-sm" ng-if="vm.detail.comUser.userType !== \'06\'" ng-click="vm.openConfirm(6)"><i class="fa fa-smile-o"></i> 退休</button> <button class="btn btn-danger btn-sm" ng-if="vm.detail.comUser.userType !== \'04\'" ng-click="vm.openConfirm(4)"><i class="fa fa-user-times"></i> 离职</button></div></div></div></div><div class="tool-wrapper info-time-wrapper"><div class="row"><div class="col-md-3 info-time_item">职务：<span class="editable-label">{{vm.detail.comUser.duty && (dicInfo.position | filter:vm.detail.comUser.duty)[0].dicName || \'暂无\'}}</span> <a ng-click="vm.openInfo(\'duty\', \'职务\', \'comUserNursing\')" class="open-info-time" ng-if="vm.isTopDept == 1"><i class="fa fa-edit"></i></a></div><div class="col-md-3 info-time_item">职称：<span class="editable-label">{{vm.detail.comUser.technicalPost && (dicInfo.technicalPost | filter:vm.detail.comUser.technicalPost)[0].dicName || \'暂无\'}}</span> <a ng-click="vm.openInfo(\'technicalPost\', \'职称\', \'comUserPosition\')" class="open-info-time" ng-if="vm.isTopDept == 1"><i class="fa fa-edit"></i></a></div><div class="col-md-3 info-time_item">带教：<span class="editable-label">{{vm.detail.comUser.teachLevel && (dicInfo.teaching | filter:vm.detail.comUser.teachLevel)[0].dicName || \'暂无\'}}</span> <a ng-click="vm.openInfo(\'teachLevel\', \'带教\')" class="open-info-time" ng-if="vm.isTopDept == 1"><i class="fa fa-edit"></i></a></div><div class="col-md-3 info-time_item">临床层级：<span class="editable-label">{{vm.detail.comUser.clinical && (dicInfo.clinical | filter:vm.detail.comUser.clinical)[0].dicName || \'暂无\'}}</span> <a ng-click="vm.openInfo(\'clinical\', \'临床层级\')" class="open-info-time" ng-if="vm.isTopDept == 1"><i class="fa fa-edit"></i></a></div></div></div><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><form editable-form="vm" form-name="\'userForm\'" class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="tool-wrapper container-fluid" ng-if="vm.isTopDept == 1"><div class="pull-right"><button editable-start="" class="btn btn-default btn-sm btn-edit" ng-click="userForm.showEdit()">编辑</button> <button editable-end="" w5c-form-submit="vm.save(\'comUser\');userForm.endEdit()" class="btn btn-primary btn-sm">保存</button> <button editable-end="" class="btn btn-default btn-sm btn-edit" ng-click="userForm.endEdit()">取消</button></div></div><div class="baseinfo-form container-fluid"><div class="form-group col-md-4"><label for="userName" class="col-sm-4 control-label">姓名：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.userName}}</span><div class="col-sm-8"><input editable-input="" class="form-control input-sm editable-input" required="" ng-model="vm.detail.comUser.userName" id="userName" name="userName" type="text"></div></div><div class="form-group col-md-4"><label for="hisCode" class="col-sm-4 control-label">科室：</label> <span class="editable-label">{{vm.detail.comUser.deptName || vm.stateParam.deptN}}</span></div><div class="form-group col-md-4"><label for="hisCode" class="col-sm-4 control-label">员工编号：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.hisCode}}</span><div class="col-sm-8"><input editable-input="" class="form-control input-sm" required="" ng-model="vm.detail.comUser.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group col-md-4"><label for="male" class="col-sm-4 control-label">性别：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.gender && (vm.detail.comUser.gender == 1 ? \'男\' : \'女\')}}</span><div editable-input="" class="col-sm-8"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.comUser.gender" checked="" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.comUser.gender" id="female" value="0"> 女</label></div></div><div class="form-group col-md-4"><label for="birthday" class="col-sm-4 control-label">出生年月：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.birthday}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" id="birthday" name="birthday" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.birthdayOpen" ng-model="vm.detail.comUser.birthday" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'birthdayOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">政治面貌：</label> <span editable-label="" class="editable-label">{{dicInfo.politacalStatus[vm.detail.comUser.politacalStatus - 1].dicName}}</span><div editable-input="" class="col-sm-8"><select id="politacalStatus" name="politacalStatus" ng-model="vm.detail.comUser.politacalStatus" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.politacalStatus">{{item.dicName}}</option></select></div></div><div class="form-group col-md-4"><label for="country" class="col-sm-4 control-label">国籍：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.country}}</span><div editable-input="" class="col-sm-8"><input type="text" id="country" name="country" ng-model="vm.detail.comUser.country" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="nativePlace" class="col-sm-4 control-label">籍贯：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.nativePlace}}</span><div editable-input="" class="col-sm-8"><input type="text" id="nativePlace" name="nativePlace" ng-model="vm.detail.comUser.nativePlace" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="nation" class="col-sm-4 control-label">民族：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.nation}}</span><div editable-input="" class="col-sm-8"><input type="text" id="nation" name="nation" ng-model="vm.detail.comUser.nation" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">婚姻状态：</label> <span editable-label="" class="editable-label">{{(vm.marrige | filter: vm.detail.comUser.marriage)[0].name}}</span><div editable-input="" class="col-sm-8"><select ng-model="vm.detail.comUser.marriage" class="form-control input-sm"><option value="{{item.code}}" ng-repeat="item in vm.marrige">{{item.name}}</option></select></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">生育状态：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.birth}}</span><div editable-input="" class="col-sm-8"><input ng-model="vm.detail.comUser.birth" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="email" class="col-sm-4 control-label">邮箱：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.email}}</span><div editable-input="" class="col-sm-8"><input id="email" class="form-control input-sm" name="email" ng-model="vm.detail.comUser.email" type="email"></div></div><div class="form-group col-md-4"><label for="phone" class="col-sm-4 control-label">联系电话：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.phone}}</span><div editable-input="" class="col-sm-8"><input id="phone" class="form-control input-sm" name="phone" ng-model="vm.detail.comUser.phone" type="tel"></div></div><div class="form-group col-md-4"><label for="papersType" class="col-sm-4 control-label">证件类型：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.papersType && (dicInfo.papersType | filter: vm.detail.comUser.papersType)[0].dicName}}</span><div editable-input="" class="col-sm-8"><select id="papersType" name="papersType" ng-model="vm.detail.comUser.papersType" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.papersType">{{item.dicName}}</option></select></div></div><div class="form-group col-md-4"><label for="papersNo" class="col-sm-4 control-label">证件号码：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.papersNo}}</span><div editable-input="" class="col-sm-8"><input type="text" id="papersNo" name="papersNo" ng-model="vm.detail.comUser.papersNo" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="practiceNo" class="col-sm-4 control-label">执业证书：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.practiceNo}}</span><div editable-input="" class="col-sm-8"><input type="text" id="practiceNo" name="practiceNo" ng-model="vm.detail.comUser.practiceNo" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="practiceApproveDate" class="col-sm-4 control-label">注册时间：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.practiceApproveDate}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" id="practiceApproveDate" name="practiceApproveDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.practiceApproveDateIsOpen" ng-model="vm.detail.comUser.practiceApproveDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'practiceApproveDateIsOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">注册机构：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.institution}}</span><div editable-input="" class="col-sm-8"><input ng-model="vm.detail.comUser.institution" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="education" class="col-sm-4 control-label">原始学历：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.education && (dicInfo.education | filter: vm.detail.comUser.education)[0].dicName}}</span><div editable-input="" class="col-sm-8"><select id="education" name="education" ng-model="vm.detail.comUser.education" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.education">{{item.dicName}}</option></select></div></div><div class="form-group col-md-4"><label for="graduationDate" class="col-sm-4 control-label">取得时间：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.graduationDate}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" id="graduationDate" name="graduationDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.graduationDateOpen" ng-model="vm.detail.comUser.graduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'graduationDateOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="graduationSchool" class="col-sm-4 control-label">学校：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.graduationSchool}}</span><div editable-input="" class="col-sm-8"><input type="text" id="graduationSchool" name="nativePlace" ng-model="vm.detail.comUser.graduationSchool" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label" for="hEducation">最高学历：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.hEducation && (dicInfo.education | filter: vm.detail.comUser.hEducation)[0].dicName}}</span><div editable-input="" class="col-sm-8"><select id="hEducation" name="hEducation" ng-model="vm.detail.comUser.hEducation" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.education">{{item.dicName}}</option></select></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">取得时间：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.hGraduationDate}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.hGraduationDateOpen" ng-model="vm.detail.comUser.hGraduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'hGraduationDateOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">学校：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.hGraduationSchool}}</span><div editable-input="" class="col-sm-8"><input type="text" name="nativePlace" ng-model="vm.detail.comUser.hGraduationSchool" class="form-control input-sm"></div></div></div></form></uib-tab><uib-tab index="1" heading="家属"><form class="form-horizontal comUserFamily-form" editable-form="" w5c-form-validate="vm.user.validationOption" name="comUserFamilyForm"><div class="tool-wrapper container-fluid" ng-if="vm.isTopDept == 1"><div class="pull-right"><button editable-start="" class="btn btn-default btn-sm btn-edit" ng-disabled="vm.detail.comUserFamily.length === 0" ng-click="comUserFamilyForm.showEdit();">编辑</button> <button editable-end="" w5c-form-submit="vm.save(\'comUserFamily\');comUserFamilyForm.endEdit()" class="btn btn-primary btn-sm">保存</button> <button editable-start="" ng-click="vm.addItem(\'comUserFamily\');comUserFamilyForm.showEdit()" class="btn btn-primary btn-sm">添加成员</button> <button editable-end="" class="btn btn-default btn-sm btn-edit" ng-click="comUserFamilyForm.endEdit();vm.cancelEdit(\'comUserFamily\')">取消</button></div></div><div class="baseinfo-form container-fluid"><div class="detail-list-item" ng-repeat="item in vm.detail.comUserFamily"><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">姓名：</label> <span editable-label="" class="editable-label">{{item.name}}</span><div editable-input="" class="col-sm-8"><input type="text" required="" class="form-control input-sm" ng-model="item.name"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">亲属关系：</label> <span editable-label="" class="editable-label">{{item.relation}}</span><div editable-input="" class="col-sm-8"><input type="hidden" ng-model="item.userCode" ng-value="vm.comUser.userCode"> <input required="" class="form-control input-sm" ng-model="item.relation" type="text"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">联系电话：</label> <span editable-label="" class="editable-label">{{item.phone}}</span><div editable-input="" class="col-sm-8"><input required="" type="text" class="form-control input-sm" ng-model="item.phone"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">电子邮箱：</label> <span editable-label="" class="editable-label">{{item.email}}</span><div editable-input="" class="col-sm-8"><input type="text" class="form-control input-sm" ng-model="item.email"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">备注：</label> <span editable-label="" class="editable-label">{{item.remark}}</span><div editable-input="" class="col-sm-8"><textarea name="remark" class="form-control input-sm" rows="2" ng-model="item.remark"></textarea></div></div><div class="detail-list-item_del"><button class="btn btn-sm btn-danger" ng-click="vm.removeItem(\'comUserFamily\', $index)">删除</button></div></div></div></form></uib-tab><uib-tab index="4" heading="学历信息"><form class="form-horizontal form-inline comUserLearning-form" editable-form="" w5c-form-validate="vm.user.validationOption" name="comUserLearningForm"><div class="tool-wrapper container-fluid" ng-if="vm.isTopDept == 1"><div class="pull-right"><button editable-start="" class="btn btn-default btn-sm btn-edit" ng-click="comUserLearningForm.showEdit();">编辑</button> <button editable-end="" w5c-form-submit="vm.save(\'comUserLearning\');comUserLearningForm.endEdit()" class="btn btn-primary btn-sm">保存</button> <button editable-start="" ng-click="vm.addItem(\'comUserLearning\');comUserLearningForm.showEdit();" class="btn btn-primary btn-sm">添加学历</button> <button editable-end="" class="btn btn-default btn-sm btn-edit" ng-click="comUserLearningForm.endEdit();vm.cancelEdit(\'comUserLearning\')">取消</button></div></div><div class="baseinfo-form container-fluid"><div class="detail-list-item" ng-repeat="item in vm.detail.comUserLearning"><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">学校：</label> <span editable-label="" class="editable-label">{{item.school}}</span><div editable-input="" class="col-sm-8"><input required="" type="text" class="form-control input-sm" ng-model="item.school"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">专业：</label> <span editable-label="" class="editable-label">{{item.professional}}</span><div editable-input="" class="col-sm-8"><input type="hidden" ng-model="item.userCode" ng-value="vm.comUser.userCode"> <input required="" class="form-control input-sm" ng-model="item.professional" type="text"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">学历：</label> <span editable-label="" class="editable-label">{{item.diploma}}</span><div editable-input="" class="col-sm-8"><input required="" type="text" class="form-control input-sm" ng-model="item.diploma"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">学历证书编号：</label> <span editable-label="" class="editable-label">{{item.diplomaNo}}</span><div editable-input="" class="col-sm-8"><input type="text" class="form-control input-sm" ng-model="item.diplomaNo"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">学位：</label> <span editable-label="" class="editable-label">{{item.degree}}</span><div editable-input="" class="col-sm-8"><input required="" type="text" class="form-control input-sm" ng-model="item.degree"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">开始时间：</label> <span editable-label="" class="editable-label">{{item.startDate}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" id="comUserLearning_startDate_{{$index}}" required="" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">结束时间：</label> <span editable-label="" class="editable-label">{{item.endDate}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" id="comUserLearning_endDate_{{$index}}" uib-datepicker-popup="" required="" datepicker-options="item.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">描述：</label> <span editable-label="" class="editable-label">{{item.describe}}</span><div editable-input="" class="col-sm-8"><textarea name="describe" class="form-control input-sm" rows="2" ng-model="item.describe"></textarea></div></div><div class="detail-list-item_del"><button class="btn btn-sm btn-danger" ng-click="vm.removeItem(\'comUserLearning\', $index)">删除</button></div></div></div></form></uib-tab><uib-tab index="5" heading="继续教育"><form class="form-horizontal form-inline comUserTraining-form" editable-form="" w5c-form-validate="vm.user.validationOption" name="comUserTrainingForm"><div class="tool-wrapper container-fluid" ng-if="vm.isTopDept == 1"><div class="pull-right"><button editable-start="" class="btn btn-default btn-sm btn-edit" ng-click="comUserTrainingForm.showEdit();">编辑</button> <button editable-end="" w5c-form-submit="vm.save(\'comUserTraining\');comUserTrainingForm.endEdit()" class="btn btn-primary btn-sm">保存</button> <button editable-start="" ng-click="vm.addItem(\'comUserTraining\');comUserTrainingForm.showEdit();" class="btn btn-primary btn-sm">添加继续教育经历</button> <button editable-end="" class="btn btn-default btn-sm btn-edit" ng-click="comUserTrainingForm.endEdit();vm.cancelEdit(\'comUserTraining\')">取消</button></div></div><div class="baseinfo-form container-fluid"><div class="detail-list-item" ng-repeat="item in vm.detail.comUserTraining"><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">主办单位：</label> <span editable-label="" class="editable-label">{{item.professional}}</span><div editable-input="" class="col-sm-8"><input required="" type="text" class="form-control input-sm" ng-model="item.professional"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">学习内容：</label> <span editable-label="" class="editable-label">{{item.learnContent}}</span><div editable-input="" class="col-sm-8"><input type="hidden" ng-model="item.userCode" ng-value="vm.comUser.userCode"> <input required="" class="form-control input-sm" ng-model="item.learnContent" type="text"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">学时：</label> <span editable-label="" class="editable-label">{{item.diploma}}</span><div editable-input="" class="col-sm-8"><input type="text" class="form-control input-sm" ng-model="item.diploma"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">主讲：</label> <span editable-label="" class="editable-label">{{item.speaker}}</span><div editable-input="" class="col-sm-8"><input type="text" class="form-control input-sm" ng-model="item.speaker"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">学分类型：</label> <span editable-label="" class="editable-label">{{item.creditType}}</span><div editable-input="" class="col-sm-8"><input required="" type="text" class="form-control input-sm" ng-model="item.creditType"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">学分：</label> <span editable-label="" class="editable-label">{{item.credit}}</span><div editable-input="" class="col-sm-8"><input required="" type="text" class="form-control input-sm" ng-model="item.credit"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">经费：</label> <span editable-label="" class="editable-label">{{item.funding}}</span><div editable-input="" class="col-sm-8"><input type="text" class="form-control input-sm" ng-model="item.funding"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">开始时间：</label> <span editable-label="" class="editable-label">{{item.startDate}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" id="comUserTraining_startDate_{{$index}}" required="" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">结束时间：</label> <span editable-label="" class="editable-label">{{item.endDate}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" id="comUserTraining_endDate_{{$index}}" uib-datepicker-popup="" required="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">描述：</label> <span editable-label="" class="editable-label">{{item.describe}}</span><div editable-input="" class="col-sm-8"><textarea name="describe" class="form-control input-sm" rows="2" ng-model="item.describe"></textarea></div></div><div class="detail-list-item_del"><button class="btn btn-sm btn-danger" ng-click="vm.removeItem(\'comUserTraining\', $index)">删除</button></div></div></div></form></uib-tab><uib-tab index="6" heading="教育工作"><form class="form-horizontal form-inline comUserEducation-form" editable-form="" w5c-form-validate="vm.user.validationOption" name="comUserEducationForm"><div class="tool-wrapper container-fluid" ng-if="vm.isTopDept == 1"><div class="pull-right"><button editable-start="" class="btn btn-default btn-sm btn-edit" ng-disabled="vm.detail.comUserEducation.length === 0" ng-click="comUserEducationForm.showEdit();">编辑</button> <button editable-end="" w5c-form-submit="vm.save(\'comUserEducation\');comUserEducationForm.endEdit()" class="btn btn-primary btn-sm">保存</button> <button editable-start="" ng-click="vm.addItem(\'comUserEducation\');comUserEducationForm.showEdit();" class="btn btn-primary btn-sm">添加学历</button> <button editable-end="" class="btn btn-default btn-sm btn-edit" ng-click="comUserEducationForm.endEdit();vm.cancelEdit(\'comUserEducation\')">取消</button></div></div><div class="baseinfo-form container-fluid"><div class="detail-list-item" ng-repeat="item in vm.detail.comUserEducation"><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">代课类型：</label> <span editable-label="" class="editable-label">{{item.educationType}}</span><div editable-input="" class="col-sm-8"><input type="text" class="form-control input-sm" ng-model="item.educationType"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">学时数：</label> <span editable-label="" class="editable-label">{{item.leaningTime}}</span><div editable-input="" class="col-sm-8"><input type="hidden" ng-model="item.userCode" ng-value="vm.comUser.userCode"> <input class="form-control input-sm" required="" name="leaningTime" ng-model="item.leaningTime" type="text"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">课程专题：</label> <span editable-label="" class="editable-label">{{item.courseTopics}}</span><div editable-input="" class="col-sm-8"><input type="text" class="form-control input-sm" required="" ng-model="item.courseTopics"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">课程内容：</label> <span editable-label="" class="editable-label">{{item.courseContent}}</span><div editable-input="" class="col-sm-8"><input type="text" class="form-control input-sm" required="" ng-model="item.courseContent"></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">开始时间：</label> <span editable-label="" class="editable-label">{{item.startDate}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" id="comUserEducation_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" required="" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">结束时间：</label> <span editable-label="" class="editable-label">{{item.endDate}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" id="comUserEducation_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="detail-list-item_del"><button class="btn btn-sm btn-danger" ng-click="vm.removeItem(\'comUserEducation\', $index)">删除</button></div></div></div></form></uib-tab></uib-tabset></div>'),
e.put("app/nursingWorkers/baseInfo/editInfoTime.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">编辑{{vm.metaData.title}}信息</h5></div><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.metaData.validationOption" name="yearForm"><div class="modal-body"><div ng-if="vm.metaData.name === \'duty\'"><div class="well well-sm"><div class="form-group"><label class="col-sm-2 control-label">职务：</label><div class="col-sm-4"><select id="duty" required="" name="duty" ng-model="vm.formData.duty" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.position">{{item.dicName}}</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">开始时间：</label><div class="col-sm-4"><span class="input-group"><input type="text" id="dutyStartDate" name="dutyStartDate" uib-datepicker-popup="" required="" datepicker-options="vm.dateOptions" is-open="vm.dutyStartDateIsOpen" ng-model="vm.formData.dutyStartDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'dutyStartDateIsOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><div class="col-sm-4 col-sm-offset-2"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok(\'comUserNursing\')">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div><div class="panel panel-default"><table class="table table-hover table-condensed table-bordered"><thead><tr><th>职务</th><th>开始时间</th></tr></thead><tbody><tr ng-repeat="row in vm.metaData.list"><td>{{row.duty && (dicInfo.position | filter:row.duty)[0].dicName || \'无\'}}</td><td>{{row.startDate || \'无\'}}</td></tr><tr ng-show="vm.metaData.list.length === 0"><td colspan="3"><i class="fa fa-info-circle text-success"></i> 暂无记录</td></tr></tbody></table></div></div><div ng-if="vm.metaData.name === \'technicalPost\'"><div class="well well-sm"><div class="form-group"><label class="col-sm-2 control-label">职称：</label><div class="col-sm-4"><select id="technicalPost" name="technicalPost" ng-model="vm.formData.technicalPost" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.technicalPost">{{item.dicName}}</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">审批单位：</label><div class="col-sm-4"><input type="text" class="form-control input-sm" required="" name="reviewUnit" ng-model="vm.formData.reviewUnit"></div><label class="col-sm-2 control-label">开始日期：</label><div class="col-sm-4"><span class="input-group"><input type="text" id="positionStartDate" name="positionStartDate" uib-datepicker-popup="" required="" datepicker-options="vm.dateOptions" is-open="vm.positionStartDateIsOpen" ng-model="vm.formData.positionStartDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'positionStartDateIsOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><div class="col-sm-4 col-sm-offset-2"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok(\'comUserPosition\')">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div><div class="panel panel-default"><table class="table table-hover table-condensed table-bordered"><thead><tr><th>职称</th><th>审批单位</th><th>开始日期</th></tr></thead><tbody><tr ng-repeat="row in vm.metaData.list"><td>{{ row.technicalPost && (dicInfo.technicalPost | filter:row.technicalPost)[0].dicName || \'无\'}}</td><td>{{row.reviewUnit || \'无\'}}</td><td>{{row.startDate || \'无\'}}</td></tr><tr ng-show="vm.metaData.list.length === 0"><td colspan="3"><i class="fa fa-info-circle text-success"></i> 暂无记录</td></tr></tbody></table></div></div><div ng-if="vm.metaData.name === \'teachLevel\' || vm.metaData.name === \'clinical\'"><div class="well well-sm"><div class="form-group"><label ng-if="vm.metaData.name === \'teachLevel\'" class="col-sm-2 control-label">带教：</label> <label ng-if="vm.metaData.name === \'clinical\'" class="col-sm-2 control-label">临床层级：</label><div class="col-sm-4"><select ng-if="vm.metaData.name === \'teachLevel\'" id="teaching" name="teaching" ng-model="vm.formData.teachLevel" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.teaching">{{item.dicName}}</option></select><select ng-if="vm.metaData.name === \'clinical\'" id="clinical" name="clinical" ng-model="vm.formData.clinical" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.clinical">{{item.dicName}}</option></select></div></div><div class="form-group"><div class="col-sm-4 col-sm-offset-2"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveChanges(vm.metaData.name === \'clinical\' ? 1 : 2)">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div><div class="panel panel-default"><table class="table table-hover table-condensed table-bordered"><thead><tr><th>变更前</th><th>变更后</th><th>变更时间</th></tr></thead><tbody><tr ng-repeat="row in vm.metaData.list"><td>{{row.foreName}}</td><td>{{row.rearName}}</td><td>{{row.changeTime}}</td></tr><tr ng-show="vm.metaData.list.length === 0"><td colspan="3"><i class="fa fa-info-circle text-success"></i> 暂无记录</td></tr></tbody></table></div></div></div></form></div>'),e.put("app/nursingWorkers/baseInfo/stat.tpl.html",'<div class="panel panel-default"><div class="panel-heading"><i class="fa fa-pie-chart"></i> 科室概况</div><div class="panel-body"><div class="chart-wrapper"><div class="row"><div class="col-md-3 chart_text"><div class="form-group"><span class="col-md-5 control-label">科室总计：</span> <span class="value-label">{{vm.deptTotal}} 人</span></div><div class="form-group"><span class="col-md-5 control-label">在编：</span> <span class="value-label">{{vm.activeCount}}人</span></div><div class="form-group"><span class="col-md-5 control-label">聘用：</span> <span class="value-label">{{vm.activeCount}}人</span></div><div class="form-group"><span class="col-md-5 control-label">床护比：</span> <span class="value-label">23 / 56人</span></div></div><div class="col-md-9 chart-content"><div class="col-md-6 echarts-wrap" echarts="vm.stastics.technicalPost.identity" echarts-dimension="vm.stastics.technicalPost.dimension" config="vm.stastics.technicalPost.config"></div><div class="col-md-6 echarts-wrap" echarts="vm.stastics.clinical.identity" echarts-dimension="vm.stastics.clinical.dimension" config="vm.stastics.clinical.config"></div></div></div></div></div></div><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>科室数据</span></div><div class="panel-body no-padding"><table st-table="vm.displayList" st-safe-src="vm.userDataList" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">员工编号</th><th>姓名</th><th>性别</th><th>年龄</th><th>职务</th><th>职称</th><th>临床层级</th><th>学历</th><th>电话</th></tr></thead><tbody><tr ng-repeat="row in vm.displayList" class="row-{{$index}} user-detail-item" ng-dblclick="vm.goDetail(row)"><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td>{{row.gender && (row.gender == 1 ? \'男\' : \'女\')}}</td><td>{{row.age}}</td><td>{{row.duty && (dicInfo.position | filter:row.duty)[0].dicName}}</td><td>{{row.technicalPost && (dicInfo.technicalPost | filter:row.technicalPost)[0].dicName }}</td><td>{{ row.clinical && (dicInfo.clinical | filter:row.clinical)[0].dicName}}</td><td>{{row.education}}</td><td>{{row.phone}}</td></tr><tr grid-expand="" tpl-src="app/nursingWorkers/files/files.detail.html" ng-show="vm.expanedIndex == $index && vm.expanded"></tr></tbody><tfoot><tr><td colspan="9"><div st-pagination="" st-items-by-page="10" st-displayed-pages="5"></div></td></tr></tfoot></table><none-data-info list="vm.userDataList"></none-data-info></div></div>'),e.put("app/nursingWorkers/baseInfo/uploadFile.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">导入文件</h5></div><div class="modal-body"><input type="file" nv-file-select="" uploader="vm.formData.uploader" multiple=""><br><table class="table table-bordered"><thead><tr><th>文件名</th><th ng-show="vm.formData.uploader.isHTML5">大小</th><th ng-show="vm.formData.uploader.isHTML5">进度</th><th>状态</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.formData.uploader.queue"><td><strong>{{ item.file.name }}</strong></td><td ng-show="vm.formData.uploader.isHTML5" nowrap="">{{ item.file.size/1024/1024|number:2 }} MB</td><td ng-show="vm.formData.uploader.isHTML5"><div class="progress" style="margin-bottom: 0;"><div class="progress-bar progress-bar-striped" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div></div></td><td class="text-center"><i ng-show="item.isSuccess" class="success-text fa fa-check"></i> <i ng-show="item.isCancel" class="fa warning-text fa-ban-circle"></i> <i ng-show="item.isError" class="fa danger-text fa-remove"></i></td><td nowrap=""><button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess"><span class="fa fa-upload"></span> 上传</button> <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading"><span class="fa fa-ban-circle"></span> 取消</button> <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()"><span class="fa fa-trash"></span> 移除</button></td></tr></tbody></table></div></div>'),e.put("app/nursingWorkers/dept/dept.detail.html",'<td colspan="{{tdLen}}"><table class="table table-bordered table-condensed"><thead><tr><th>姓名</th><th>工号</th><th>科室</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.detail"><td>{{item.userName}}</td><td>{{item.userCode}}</td><td><select class="form-control input-sm" name="deptCode" ng-model="item.deptCode"><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></td><td><button class="btn btn-success btn-xs" ng-click="vm.save(item)" uib-tooltip="保存"><span class="fa fa-save"></span></button></td></tr></tbody></table></td>'),e.put("app/nursingWorkers/dept/dept.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">新增科室</h5></div><div class="modal-body"><form class="form-horizontal" role="form" novalidate="" name="form"><div class="container-fluid"><div class="form-group"><label for="deptName" class="control-label">科室号</label> <input type="text" class="form-control input-sm" ng-model="vm.detail.deptCode"></div><div class="form-group"><label for="deptName" class="control-label">科室名</label> <input type="text" class="form-control input-sm" ng-model="vm.detail.deptName"></div><div class="form-group"><label for="fatherDept" class="control-label">父部门</label><select class="form-control" name="fatherDept" id="fatherDept" ng-model="vm.detail.fatherDept"><option value=""></option><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></div></div><div class="form-group text-center"><button class="btn btn-sm btn-success" type="button" ng-click="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div></div>'),e.put("app/nursingWorkers/dept/dept.tpl.html",'<div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>科室管理</span><div class="pull-right"><button class="btn btn-success btn-xs" ng-click="vm.open()">新增科室</button></div></div><div class="panel-body"><table st-table="vm.deptData" st-safe-src="rowCollection" class="table table-condensed table-bordered table-striped"><thead><tr class="header-export"><th></th><th>科室名</th><th>父部门</th><th>操作</th></tr></thead><tbody ng-repeat="row in vm.deptData | filter: {status: \'01\'}"><tr><td grid-expand-trigger="" grid-p="deptCode" grid-expand-method="loadDetail" class="trigger"><i class="fa fa-caret-right"></i></td><td>{{row.deptName}}</td><td>{{vm.getDeptName(row.fatherDept)}}</td><td data-title="\'操作\'"><button class="btn btn-primary btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr><tr grid-expand="" tpl-src="app/nursingWorkers/dept/dept.detail.html" ng-show="vm.expanedIndex == $index"></tr></tbody></table></div></div>'),e.put("app/nursingWorkers/files/files.detail.html",'<td colspan="{{tdLen}}"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><div class="form-group col-md-3"><label class="col-sm-6 control-label">科室：</label> <span class="col-sm-6">{{vm.detail.comUser.deptName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">员工编号：</label> <span class="col-sm-6">{{vm.detail.comUser.hisCode}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">员工姓名：</label> <span class="col-sm-6">{{vm.detail.comUser.userName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">员工性别：</label> <span class="col-sm-6">{{vm.detail.comUser.genderName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">出生日期：</label> <span class="col-sm-6">{{vm.detail.comUser.birthday | date: \'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">电话：</label> <span class="col-sm-6">{{vm.detail.comUser.phone}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">邮箱：</label> <span class="col-sm-6">{{vm.detail.comUser.email}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">到院日期：</label> <span class="col-sm-6">{{vm.detail.comUser.inductionDate | date: \'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">员工性质：</label> <span class="col-sm-6">{{vm.detail.comUser.natureName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">国籍：</label> <span class="col-sm-6">{{vm.detail.comUser.country}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">籍贯：</label> <span class="col-sm-6">{{vm.detail.comUser.nativePlace}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">民族：</label> <span class="col-sm-6">{{vm.detail.comUser.nation}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">证件类型：</label> <span class="col-sm-6">{{vm.detail.comUser.papersTypeName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">证件号码：</label> <span class="col-sm-6">{{vm.detail.comUser.papersNo}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">毕业学校：</label> <span class="col-sm-6">{{vm.detail.comUser.graduationSchool}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">所学专业：</label> <span class="col-sm-6">{{vm.detail.comUser.profession}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">学位：</label> <span class="col-sm-6">{{vm.detail.comUser.degree}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">学位证编号：</label> <span class="col-sm-6">{{vm.detail.comUser.degreeNo}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">学历：</label> <span class="col-sm-6">{{vm.detail.comUser.education}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">学历证编号：</label> <span class="col-sm-6">{{vm.detail.comUser.educationNo}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">毕业时间：</label> <span class="col-sm-6">{{vm.detail.comUser.graduationDate | date:\'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">外语水平：</label> <span class="col-sm-6">{{vm.detail.comUser.language}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">健康状态：</label> <span class="col-sm-6">{{vm.detail.comUser.health}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">批准时间：</label> <span class="col-sm-6">{{vm.detail.comUser.practiceApproveDate | date:\'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">执业类型：</label> <span class="col-sm-6">{{vm.detail.comUser.practiceTypeName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">执业证号：</label> <span class="col-sm-6">{{vm.detail.comUser.practiceType}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">有效期致：</label> <span class="col-sm-6">{{vm.detail.comUser.practiceValidDate | date: \'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">政治面貌：</label> <span class="col-sm-6">{{vm.detail.comUser.politacalStatusName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">职称：</label> <span class="col-sm-6">{{vm.detail.comUser.technicalPost}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">职务：</label> <span class="col-sm-6">{{vm.detail.comUser.duty}}</span></div></uib-tab><uib-tab index="1" heading="职称职务" active="tab.active"><table class="table table-striped table-condensed table-no-border"><tr><th>职务名称</th><th>审批单位</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserPosition"><td class="text-left">{{dtl.positionName}}</td><td class="text-left">{{dtl.reviewUnit}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="2" heading="护理信息"><table class="table table-striped table-condensed table-no-border"><tr><th>工作单位</th><th>工作部门</th><th>职务</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserNursing"><td class="text-left">{{dtl.reviewUnit}}</td><td class="text-left">{{dtl.deptName}}</td><td class="text-left">{{dtl.position}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="3" heading="教育工作"><table class="table table-striped table-condensed table-no-border"><tr><th>代课类型</th><th>学时数</th><th>课程专题</th><th>课程内容</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserEducation"><td class="text-left">{{dtl.educationType}}</td><td class="text-left">{{dtl.leaningTime}}</td><td class="text-left">{{dtl.courseTopics}}</td><td class="text-left">{{dtl.courseContent}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="4" heading="继续教育"><table class="table table-striped table-condensed table-no-border"><tr><th>主办单位</th><th>学习内容</th><th>学时</th><th>主讲</th><th>学分类型</th><th>学分</th><th>经费</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserTraining"><td class="text-left">{{dtl.professional}}</td><td class="text-left">{{dtl.learnContent}}</td><td class="text-left">{{dtl.diploma}}</td><td class="text-left">{{dtl.speaker}}</td><td class="text-left">{{dtl.creditType}}</td><td class="text-left">{{dtl.credit}}</td><td class="text-left">{{dtl.funding}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="5" heading="学历信息"><table class="table table-striped table-condensed table-no-border"><tr><th>学校</th><th>专业</th><th>学历</th><th>学历证书编号</th><th>学位</th><th>学位证书编号</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserLearning"><td class="text-left">{{dtl.school}}</td><td class="text-left">{{dtl.professional}}</td><td class="text-left">{{dtl.diploma}}</td><td class="text-left">{{dtl.diplomaNo}}</td><td class="text-left">{{dtl.degree}}</td><td class="text-left">{{dtl.degreeNo}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="6" heading="家庭成员"><table class="table table-striped table-condensed table-no-border"><tr><th>亲属关系</th><th>姓名</th><th>联系电话</th><th>邮件</th></tr><tr ng-repeat="dtl in vm.detail.comUserFamily"><td class="text-left">{{dtl.relation}}</td><td class="text-left">{{dtl.name}}</td><td class="text-left">{{dtl.phone}}</td><td class="text-left">{{dtl.email}}</td></tr></table></uib-tab></uib-tabset></td>'),e.put("app/nursingWorkers/files/files.tpl.html",'<div class="col-md-2" print-remove=""><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode,vm.deptData.deptName)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter: vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode,subItem.deptName)" class="sublist__item">{{subItem.deptName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>人员数据</span><div class="pull-right"><button class="btn btn-default btn-xs" ng-click="vm.openUpload()"><i class="fa fa-upload"></i> 导入数据</button> <button print-btn="" class="btn btn-default btn-xs"><i class="fa fa-print"></i> 打印</button> <button ng-click="vm.open()" ng-disabled="!vm.selectedDept" class="btn btn-default btn-xs"><i class="fa fa-user-plus"></i> 添加员工</button></div></div><div class="panel-body"><table class="print-header table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th><grid-check-all all="vm.userDataList"></grid-check-all></th><th print-remove=""></th><th>编号</th><th>姓名</th><th>邮箱</th><th>电话</th><th print-remove="">操作</th></tr></thead></table><table print-table="vm.userDataList" st-table="vm.userDataList" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th><grid-check-all all="vm.userDataList"></grid-check-all></th><th print-remove=""></th><th st-sort="hisCode">编号</th><th>姓名</th><th>邮箱</th><th>电话</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.userDataList"><tr class="row-{{$index}}"><td grid-checkbox="row"></td><td grid-expand-trigger="" grid-p="userCode" grid-expand-method="loadDetail" class="trigger"><i class="fa fa-caret-right"></i></td><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td>{{row.email}}</td><td>{{row.phone}}</td><td class="print-remove" data-title="\'操作\'"><button class="btn btn-default btn-xs" ng-click="vm.open(row.userCode)" uib-tooltip="编辑员工信息" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row)" uib-tooltip="删除员工" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr><tr grid-expand="" tpl-src="app/nursingWorkers/files/files.detail.html" ng-show="vm.expanedIndex == $index && vm.expanded"></tr></tbody></table><none-data-info list="vm.userDataList"></none-data-info></div></div></div>'),e.put("app/nursingWorkers/files/modal.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写用户信息</h5></div><div class="modal-body"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="static-form-item container-fluid"><div class="form-group col-md-4"><label for="hisCode" class="col-sm-4 control-label">科室：</label><div class="col-sm-8"><input class="form-control input-sm" disabled="" ng-model="vm.count.comUser.deptName" type="text"></div></div><div class="form-group col-md-4"><label for="hisCode" class="col-sm-4 control-label">员工编号：</label><div class="col-sm-8"><input class="form-control input-sm" required="" ng-model="vm.count.comUser.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group col-md-4"><label for="userName" class="col-sm-4 control-label">姓名：</label><div class="col-sm-8"><input class="form-control input-sm" required="" ng-model="vm.count.comUser.userName" id="userName" name="userName" type="text"></div></div><div class="form-group col-md-4"><label for="male" class="col-sm-4 control-label">性别：</label><div class="col-sm-8"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.count.comUser.gender" checked="" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.count.comUser.gender" id="female" value="0"> 女</label></div></div><div class="form-group col-md-4"><label for="birthday" class="col-sm-4 control-label">出生年月：</label><div class="col-sm-8"><span class="input-group"><input type="text" id="birthday" name="birthday" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.birthdayOpen" ng-model="vm.count.comUser.birthday" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'birthdayOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">政治面貌：</label><div class="col-sm-8"><select id="politacalStatus" name="politacalStatus" ng-model="vm.count.comUser.politacalStatus" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.politacalStatus">{{item.dicName}}</option></select></div></div><div class="form-group col-md-4"><label for="country" class="col-sm-4 control-label">国籍：</label><div class="col-sm-8"><input type="text" id="country" name="country" ng-model="vm.count.comUser.country" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="nativePlace" class="col-sm-4 control-label">籍贯：</label><div class="col-sm-8"><input type="text" id="nativePlace" name="nativePlace" ng-model="vm.count.comUser.nativePlace" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="nation" class="col-sm-4 control-label">民族：</label><div class="col-sm-8"><input type="text" id="nation" name="nation" ng-model="vm.count.comUser.nation" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">婚姻状态：</label><div class="col-sm-8"><select ng-model="vm.count.comUser.marriage" class="form-control input-sm"><option value="01" label="已婚"></option><option value="02" label="未婚"></option><option value="03" label="离异"></option><option value="04" label="丧偶"></option></select></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">生育状态：</label><div class="col-sm-8"><input ng-model="vm.count.comUser.birth" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="email" class="col-sm-4 control-label">邮箱：</label><div class="col-sm-8"><input id="email" class="form-control input-sm" name="email" ng-model="vm.count.comUser.email" type="email"></div></div><div class="form-group col-md-4"><label for="phone" class="col-sm-4 control-label">联系电话：</label><div class="col-sm-8"><input id="phone" class="form-control input-sm" name="phone" ng-model="vm.count.comUser.phone" type="tel"></div></div><div class="form-group col-md-4"><label for="papersType" class="col-sm-4 control-label">身份证件类型：</label><div class="col-sm-8"><select id="papersType" name="papersType" ng-model="vm.count.comUser.papersType" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.papersType">{{item.dicName}}</option></select></div></div><div class="form-group col-md-4"><label for="papersNo" class="col-sm-4 control-label">身份证件号码：</label><div class="col-sm-8"><input type="text" id="papersNo" name="papersNo" ng-model="vm.count.comUser.papersNo" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="practiceNo" class="col-sm-4 control-label">执业证书编号：</label><div class="col-sm-8"><input type="text" id="practiceNo" name="practiceNo" ng-model="vm.count.comUser.practiceNo" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="practiceApproveDate" class="col-sm-4 control-label">首次注册时间：</label><div class="col-sm-8"><span class="input-group"><input type="text" id="practiceApproveDate" name="practiceApproveDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.practiceApproveDateIsOpen" ng-model="vm.count.comUser.practiceApproveDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'practiceApproveDateIsOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">注册机构：</label><div class="col-sm-8"><input ng-model="vm.count.comUser.duty" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="education" class="col-sm-4 control-label">原始学历：</label><div class="col-sm-8"><input type="text" id="education" name="education" ng-model="vm.count.comUser.education" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="graduationDate" class="col-sm-4 control-label">取得时间：</label><div class="col-sm-8"><span class="input-group"><input type="text" id="graduationDate" name="graduationDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.graduationDateOpen" ng-model="vm.count.comUser.graduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'graduationDateOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="graduationSchool" class="col-sm-4 control-label">学校：</label><div class="col-sm-8"><input type="text" id="graduationSchool" name="nativePlace" ng-model="vm.count.comUser.graduationSchool" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">最高学历：</label><div class="col-sm-8"><input type="text" ng-model="vm.count.comUser.hEducation" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">取得时间：</label><div class="col-sm-8"><span class="input-group"><input type="text" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.hGraduationDateOpen" ng-model="vm.count.comUser.hGraduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'hGraduationDateOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">学校：</label><div class="col-sm-8"><input type="text" name="nativePlace" ng-model="vm.count.comUser.hGraduationSchool" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="duty" class="col-sm-4 control-label">职务：</label><div class="col-sm-8"><input id="duty" name="duty" ng-model="vm.count.comUser.duty" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="technicalPost" class="col-sm-4 control-label">职称：</label><div class="col-sm-8"><input type="text" id="technicalPost" name="technicalPost" ng-model="vm.count.comUser.technicalPost" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">临床层级：</label><div class="col-sm-8"><input type="text" ng-model="vm.count.comUser.clinical" class="form-control input-sm"></div></div></div><div class="container-fluid"><div class="form-group col-md-2 pull-right"><button data-type="comUser" w5c-form-submit="vm.save(\'comUser\', $event)" class="btn btn-success btn-sm">保存</button></div></div></form></uib-tab><uib-tab index="1" heading="家属" disable="!vm.accessible"><form class="form-horizontal comUserFamily-form" w5c-form-validate="vm.user.validationOption" name="comUserFamilyForm"><table class="table table-striped table-condensed table-no-border"><tr><th>姓名</th><th>亲属关系</th><th>联系电话</th><th>邮件</th><th>备注</th><th></th></tr><tr ng-repeat="item in vm.count.comUserFamily"><td><input type="text" class="form-control input-sm" ng-model="item.name"></td><td><input type="hidden" ng-model="item.userCode" ng-value="vm.comUser.userCode"> <input class="form-control input-sm" ng-model="item.relation" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.phone"></td><td><input type="text" class="form-control input-sm" ng-model="item.email"></td><td><input type="text" class="form-control input-sm" ng-model="item.remark"></td><td><button ng-click="vm.removeItem(\'comUserFamily\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table><div class="container-fluid"><button ng-click="vm.addItem(\'comUserFamily\')" class="btn btn-primary btn-sm">添加成员</button> <button data-type="comUserFamily" ng-click="vm.save(\'comUserFamily\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="2" heading="职称变更" disable="!vm.accessible" active="tab.active"><form class="form-horizontal form-inline comUserPosition-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="comUserPositionForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>职称</th><th>审批单位</th><th>开始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserPosition track by $index"><td><input class="form-control input-sm" required="" name="positionName" ng-model="item.positionName" placeholder="在职职称" type="text"></td><td><input type="text" name="reviewUnit" required="" class="form-control input-sm" ng-model="item.reviewUnit"></td><td><span class="input-group"><input type="text" id="comUserPosition_startDate_{{$index}}" required="" name="comUserPositionStartDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" on-open-focus="true" id="comUserPosition_endDate_{{$index}}" required="" name="comUserPositionEndDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserPosition\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserPosition\')" class="btn btn-primary btn-sm">添加职称</button> <button data-type="comUserPosition" w5c-form-submit="vm.save(\'comUserPosition\', $event)" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="3" heading="职务变更" disable="!vm.accessible"><form class="form-horizontal form-inline comUserNursing-form" w5c-form-validate="vm.user.validationOption" name="comUserNursingForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>工作单位</th><th>单位级别</th><th>所属部门</th><th>职务</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserNursing"><td><input class="form-control input-sm" ng-model="item.reviewUnit" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.unitLevel"></td><td><input type="text" class="form-control input-sm" ng-model="item.deptName"></td><td><input type="text" class="form-control input-sm" ng-model="item.position"></td><td><span class="input-group"><input type="text" id="comUserNursing_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserNursing_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserNursing\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserNursing\')" class="btn btn-primary btn-sm">添加教育信息</button> <button data-type="comUserNursing" w5c-form-submit="vm.save(\'comUserNursing\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="4" heading="学历信息" disable="!vm.accessible"><form class="form-horizontal form-inline comUserLearning-form" w5c-form-validate="vm.user.validationOption" name="comUserLearningForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>学校</th><th>专业</th><th>学历</th><th>学历证书编号</th><th>学位</th><th>学位证书编号</th><th>描述</th><th>开始时间</th><th>结束时间</th><th></th></tr><tr ng-repeat="item in vm.count.comUserLearning"><td><input class="form-control input-sm" ng-model="item.school" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.professional"></td><td><input type="text" class="form-control input-sm" ng-model="item.diploma"></td><td><input type="text" class="form-control input-sm" ng-model="item.diplomaNo"></td><td><input type="text" class="form-control input-sm" ng-model="item.degree"></td><td><input type="text" class="form-control input-sm" ng-model="item.degreeNo"></td><td><input type="text" class="form-control input-sm" ng-model="item.describe"></td><td><span class="input-group"><input type="text" id="comUserLearning_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserLearning_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserLearning\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserLearning\')" class="btn btn-primary btn-sm">添加学历</button> <button data-type="comUserLearning" ng-click="vm.save(\'comUserLearning\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="5" heading="继续教育" disable="!vm.accessible"><form class="form-horizontal form-inline comUserTraining-form" w5c-form-validate="vm.user.validationOption" name="comUserTrainingForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>学习内容</th><th>主办单位</th><th>学时</th><th>主讲</th><th>学分类型</th><th>学分</th><th>经费</th><th>描述</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserTraining"><td><input class="form-control input-sm" ng-model="item.learnContent" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.professional"></td><td><input type="text" class="form-control input-sm" style="width: 3em;" ng-model="item.diploma"></td><td><input type="text" class="form-control input-sm" ng-model="item.speaker"></td><td><input type="text" class="form-control input-sm" ng-model="item.creditType"></td><td><input type="text" class="form-control input-sm" style="width: 4em;" ng-model="item.credit"></td><td><input type="text" class="form-control input-sm" style="width: 4em;" ng-model="item.funding"></td><td><input type="text" class="form-control input-sm" ng-model="item.describe"></td><td><span class="input-group"><input type="text" id="comUserTraining_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserTraining_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserTraining\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserTraining\')" class="btn btn-primary btn-sm">添加继续教育</button> <button data-type="comUserTraining" ng-click="vm.save(\'comUserTraining\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="6" heading="教育工作" disable="!vm.accessible"><form class="form-horizontal form-inline comUserEducation-form" w5c-form-validate="vm.user.validationOption" name="comUserEducationForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>代课类型</th><th>学时数</th><th>课程专题</th><th>课程内容</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserEducation"><td><input class="form-control input-sm" ng-model="item.educationType" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.leaningTime"></td><td><input type="text" class="form-control input-sm" ng-model="item.courseTopics"></td><td><input type="text" class="form-control input-sm" ng-model="item.courseContent"></td><td><span class="input-group"><input type="text" id="comUserEducation_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserEducation_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserEducation\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserEducation\')" class="btn btn-primary btn-sm">添加教育信息</button> <button data-type="comUserEducation" ng-click="vm.save(\'comUserEducation\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab></uib-tabset></div></div>'),
e.put("app/nursingWorkers/files/uploadFile.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">导入文件</h5></div><div class="modal-body"><input type="file" nv-file-select="" uploader="vm.formData.uploader" multiple=""><br><table class="table table-bordered"><thead><tr><th>文件名</th><th ng-show="vm.formData.uploader.isHTML5">大小</th><th ng-show="vm.formData.uploader.isHTML5">进度</th><th>状态</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.formData.uploader.queue"><td><strong>{{ item.file.name }}</strong></td><td ng-show="vm.formData.uploader.isHTML5" nowrap="">{{ item.file.size/1024/1024|number:2 }} MB</td><td ng-show="vm.formData.uploader.isHTML5"><div class="progress" style="margin-bottom: 0;"><div class="progress-bar progress-bar-striped" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div></div></td><td class="text-center"><i ng-show="item.isSuccess" class="success-text fa fa-check"></i> <i ng-show="item.isCancel" class="fa warning-text fa-ban-circle"></i> <i ng-show="item.isError" class="fa danger-text fa-remove"></i></td><td nowrap=""><button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess"><span class="fa fa-upload"></span> 上传</button> <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading"><span class="fa fa-ban-circle"></span> 取消</button> <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()"><span class="fa fa-trash"></span> 移除</button></td></tr></tbody></table></div></div>'),e.put("app/nursingWorkers/qrcode/qrcode.tpl.html",'<div class="hr-wrapper hr-add-wrapper"><uib-tabset active="active"><uib-tab index="0" heading="二维码打印"><form class="form-horizontal" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="tool-wrapper container-fluid"><span class="col-sm-2"><input type="text" class="form-control input-sm" placeholder="姓名" ng-model="vm.params.userName"></span> <span class="col-sm-2"><input type="text" class="form-control input-sm" placeholder="编号" ng-model="vm.params.userCode"></span> <span class="col-sm-2"><select class="form-control input-sm" ng-model="vm.params.deptCode"><option value=""></option><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></span> <span class="col-sm-1 text-left"><button ng-click="vm.search()" class="btn btn-success btn-sm">查询</button></span></div></form><table st-table="vm.userData" st-safe-src="rowCollection" class="table table-condensed table-bordered table-striped"><thead><tr class="header-export"><th><grid-check-all all="vm.userData"></grid-check-all></th><th>用户名</th><th>工号</th><th>性别</th><th>用户类型</th><th>目前所在科室</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.userData"><td grid-checkbox="item"></td><td>{{item.userName}}</td><td>{{item.userCode}}</td><td>{{getDicName(\'gender\', item.gender)}}</td><td>{{getDicName(\'nature\', item.userType)}}</td><td></td><td></td></tr></tbody></table></uib-tab></uib-tabset></div>'),e.put("app/nursingWorkers/quit/quit.tpl.html",'<div class="hr-wrapper hr-add-wrapper"><uib-tabset active="active"><uib-tab index="0" heading="员工离职"><form class="form-horizontal" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="tool-wrapper container-fluid"><span class="col-sm-2"><input type="text" class="form-control input-sm" placeholder="姓名" ng-model="vm.params.userName"></span> <span class="col-sm-2"><input type="text" class="form-control input-sm" placeholder="编号" ng-model="vm.params.userCode"></span> <span class="col-sm-2"><select class="form-control input-sm" ng-model="vm.params.deptCode"><option value="">所有科室</option><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></span> <span class="col-sm-1 text-left"><button ng-click="vm.search()" class="btn btn-success btn-sm">查询</button></span></div></form><table st-table="vm.userData" st-safe-src="rowCollection" class="table table-condensed table-bordered table-striped"><thead><tr class="header-export"><th>用户名</th><th>工号</th><th>性别</th><th>用户类型</th><th>目前所在科室</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.userData"><td>{{item.userName}}</td><td>{{item.userCode}}</td><td>{{getDicName(\'gender\', item.gender)}}</td><td>{{getDicName(\'nature\', item.userType)}}</td><td>{{vm.getDeptName(item.deptCode)}}</td><td><button ng-click="vm.quit(item.userCode)" class="btn btn-sm btn-danger" uib-tooltip="离职"><span class="fa fa-close"></span></button></td></tr></tbody></table></uib-tab></uib-tabset></div>'),e.put("app/nursingWorkers/search/search.tpl.html",'<div class="hr-wrapper hr-add-wrapper"><uib-tabset active="active"><uib-tab index="0" heading="员工查询"><form class="form-horizontal" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="tool-wrapper container-fluid"><span class="col-sm-2"><input type="text" class="form-control input-sm" placeholder="姓名" ng-model="vm.params.userName"></span> <span class="col-sm-2"><input type="text" class="form-control input-sm" placeholder="编号" ng-model="vm.params.userCode"></span> <span class="col-sm-2"><select class="form-control input-sm" ng-model="vm.params.deptCode"><option value="">所有科室</option><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></span> <span class="col-sm-1 text-left"><button ng-click="vm.search()" class="btn btn-success btn-sm">查询</button></span></div></form><table st-table="vm.userData" st-safe-src="rowCollection" class="table table-condensed table-bordered table-striped"><thead><tr class="header-export"><th>用户名</th><th>工号</th><th>性别</th><th>用户类型</th><th>目前所在科室</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.userData"><td>{{item.userName}}</td><td>{{item.userCode}}</td><td>{{getDicName(\'gender\', item.gender)}}</td><td>{{getDicName(\'nature\', item.userType)}}</td><td>{{vm.getDeptName(item.deptCode)}}</td><td><a ui-sref="home.baseInfo.detail({id: item.userCode, dept: item.deptCode})" class="btn btn-sm btn-primary"><span class="fa fa-edit"></span></a></td></tr></tbody></table></uib-tab></uib-tabset></div>'),e.put("app/quality/check/check.tpl.html",'<div class="wrapper quality-check-wrapper padding-content"><uib-tabset active="active"><uib-tab index="0" heading="质量检查"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid form-inline"><div class="filter-item"><label for="type">类型：</label><select class="input-sm" id="type" ng-model="vm.queryParams.type"><option value="">全部</option></select></div><div class="filter-item"><label>月份：</label> <span class="input-group"><input ng-model="vm.queryParams.month" type="text" id="month" name="month" required="" uib-datepicker-popup="" datepicker-options="vm.options.month" on-open-focus="true" is-open="vm.monthOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month" readonly=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.monthOpen = true"><i class="fa fa-calendar"></i></button></span></span></div><div class="filter-item"><label for="area">科室：</label><select class="input-sm" id="area" ng-model="vm.queryParams.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="filter-item"><button class="btn btn-sm btn-primary" ng-click="vm.load.func()">查询</button></div><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.add()">新增检查</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>检查日期</th><th>检查病区</th><th>检查类型</th><th>检查表</th><th>得分</th><th>状态</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td data-title="\'检查日期\'" class="text-center">{{ row.taskDate }}</td><td data-title="\'检查病区\'" class="text-center">{{ row.deptCode }}</td><td data-title="\'检查类型\'" class="text-center">{{ row.formType }}</td><td data-title="\'检查表\'" class="text-center">{{ row.formName }}</td><td data-title="\'得分\'" class="text-center">{{ row.count }}</td><td data-title="\'状态\'" class="text-center">{{ row.status }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.edit(row)" uib-tooltip="修改"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></uib-tab></uib-tabset></div>'),e.put("app/quality/check/editCheck.tpl.html",'<div class="mod-pop-dateForm clearfix editCheck"><form class="form-inlne form-horizontal w5c-form" name="addCheckForm" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" form="addCheckForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">质控检查</h5></div><div class="modal-body clearfix"><div class="row"><div class="form-group col-xs-4"><label for="date" class="control-label col-xs-3 partial-label">表单：</label><div class="col-xs-9"><select class="form-control input-sm" name="formName" id="formName" ng-model="vm.formData.formName"></select></div></div><div class="form-group col-xs-4"><label for="date" class="control-label col-xs-3 partial-label">日期：</label><div class="col-xs-9"><span class="input-group"><input ng-model="vm.formData.taskDate" type="text" id="taskDate" name="taskDate" required="" uib-datepicker-popup="" on-open-focus="true" is-open="vm.dateOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" readonly=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.dateOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-xs-4"><label for="dept" class="control-label col-xs-3 partial-label">病区：</label><div class="col-xs-9"><select class="input-sm" id="dept" ng-model="vm.formData.deptCode"><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></div></div></div><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.formData.qualityResultDetailList"><td data-title="\'序号\'" class="text-center"></td><td data-title="\'检查内容及要求\'" class="text-center">{{ row.item }}</td><td data-title="\'分值\'" class="text-center">{{ row.points }}</td><td data-title="\'得分\'" class="col-xs-2 partial-td"><input type="number" class="form-control input-sm text-center" ng-model="row.count" placeholder="点击填写"></td><td data-title="\'扣分原因\'" class="text-center col-xs-4 partial-td"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="row.cause">\r\n                </textarea></td></tr></table></div><div class="modal-footer clearfix"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/quality/deal/addDeal.tpl.html",'<div class="mod-pop-dateForm addDeal"><form class="form-inline w5c-form" name="addDealForm" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" form="addDealForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">质量检查问题处理</h5></div><div class="modal-body clearfix"><div class="form-group"><label for="code" class="control-label">检查日期：</label> <input type="text" class="form-control input-sm" uib-datepicker-popup="yyyy-MM-dd" is-open="popup1" id="date" name="date" placeholder="年-月-日" clear-text="清除" close-text="关闭" current-text="今天" ng-click="popup1 = true" ng-model="vm.formData.checkDetail.taskDate" required="" readonly=""></div><div class="form-group"><label for="form_name" class="control-label">病区：</label> <input type="text" value="" class="form-control input-sm" id="form_name" name="form_name" ng-model="vm.formData.checkDetail.deptCode" required="" autocomplete="off"></div><div class="form-group"><label for="form_type" class="control-label">检查表单：</label><select class="form-control input-sm" id="select_form" name="select_form" required="" ng-model="vm.formData.checkDetail.selectForm" ng-options="x.formName for x in vm.metaData.qualityFormList"></select></div><div class="form-group"><button class="btn btn-xs btn-primary" ng-click="vm.checkDetail()">查看检查情况</button></div><div class="table-box"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped partial-table"><tr><td data-title="\'存在问题\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.issueContent"></textarea></td><td data-title="\'原因分析\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.reasonAnalysis"></textarea></td><td data-title="\'整改要求\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.resDescribe"></textarea></td><td data-title="\'整改措施\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.resPlan"></textarea></td><td data-title="\'效果评估\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.evaluation"></textarea></td></tr></table></div></div><div class="modal-footer clearfix"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/quality/deal/checkDetail.tpl.html",'<form role="form" form="addDealForm"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.metaData.checkDetailList[0].qualityResultDetailList"><td data-title="\'序号\'" class="text-center">{{ $index }}</td><td data-title="\'检查内容及要求\'" class="text-center">{{ row.item }}</td><td data-title="\'分值\'" class="text-center">{{ row.points }}</td><td data-title="\'得分\'" class="text-center">{{ row.count }}</td><td data-title="\'扣分原因\'" class="text-center">{{ row.cause }}</td></tr></table><div class="text-center"><button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">关闭</button></div></form>'),e.put("app/quality/deal/deal.tpl.html",'<div class="wrapper quality-check-wrapper padding-content"><uib-tabset active="active"><uib-tab index="0" heading="问题处理"><div class="panel panel-layout panel-default"><div class="tool-wrapper container-fluid form-inline"><div class="filter-item"><label for="type">类型：</label><select class="input-sm" id="type" ng-model="vm.queryParams.type"><option value="">全部</option></select></div><div class="filter-item"><label>月份：</label> <span class="input-group"><input ng-model="vm.queryParams.month" type="text" id="month" name="month" required="" uib-datepicker-popup="" datepicker-options="vm.options.month" on-open-focus="true" is-open="vm.monthOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month" readonly=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.monthOpen = true"><i class="fa fa-calendar"></i></button></span></span></div><div class="filter-item"><label for="area">科室：</label><select class="input-sm" id="area" ng-model="vm.queryParams.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="filter-item"><button class="btn btn-sm btn-primary" ng-click="vm.load.func()">查询</button></div><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.add()">新增问题</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>检查日期</th><th>检查病区</th><th>存在问题</th><th>问题分析</th><th>整改要求</th><th>整改措施</th><th>整改效果评估</th><th>检查类型</th><th>检查表</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td>{{ row.taskTime }}</td><td>{{ row.deptName }}</td><td>{{ row.issueContent }}</td><td>{{ row.reasonAnalysis }}</td><td>{{ row.resDescribe }}</td><td>{{ row.resPlan }}</td><td>{{ row.evaluation }}</td><td>{{ row.type }}</td><td>{{ row.formName }}</td><td><button class="btn btn-default btn-xs" ng-click="vm.edit(row)" uib-tooltip="修改"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></uib-tab></uib-tabset></div>'),e.put("app/quality/task/add.modal.html",'<div class="quality-add-form-modal-wrapper"><form class="form-inlne form-horizontal w5c-form" name="addQualityForm" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" form="addQualityForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">计划任务</h5></div><div class="modal-body clearfix"><div class="form-group col-xs-6"><label for="cate" class="control-label col-xs-4 partial-label">时间：</label><div class="col-xs-8"><span class="input-group"><input ng-model="vm.formData.time" type="text" id="time" name="time" required="" uib-datepicker-popup="" on-open-focus="true" is-open="vm.timeOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" readonly=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.timeOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-xs-6"><label for="subcate" class="control-label col-xs-4 partial-label">调查人：</label><div class="col-xs-8"><select class="form-control input-sm" ng-model="vm.formData.people"><option value="{{item.userCode}}" ng-repeat="item in vm.userList">{{item.userName}}</option></select></div></div><div class="form-group"><label class="control-label col-xs-2 partial-label">病区：</label><div class="col-xs-9"><select class="form-control2" ng-model="vm.formData.depts" ui-select2="" multiple="multiple"><option value="{{item.deptCode}}" ng-repeat="item in vm.depts">{{item.deptName}}</option></select></div></div><div class="form-group"><label class="control-label col-xs-2 partial-label">备注：</label><div class="col-xs-9"><textarea class="form-control" ng-model="vm.formData.remark"></textarea></div></div></div><div class="modal-footer clearfix"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/quality/task/add.tpl.html",'<div class="wrapper quality-add-form-wrapper padding-content"><uib-tabset active="active"><uib-tab index="0" heading="质量计划编辑"><div class="panel panel-layout panel-default"><div class="tool-wrapper container-fluid form-inline"><div class="filter-item"><span class="filter-text">检查任务：{{vm.lst.length || 0}}个</span></div><div class="filter-item"><span class="filter-text">组长：{{vm.helper.user.getUserName(vm.currentTeam.teamLeader)}}</span></div><div class="filter-item"><span class="filter-text">组员：<span ng-repeat="item in vm.currentTeam.userList">{{vm.helper.user.getUserName(item)}}</span></span></div><div class="pull-right"><button class="btn btn-primary btn-sm" ng-click="vm.open()">新增任务</button></div></div><div class="panel-body"><table class="table table-condensed table-bordered no-border"><thead><tr class="header-export"><th>时间</th><th>调查人</th><th>备注</th><th>调查病区</th><th>病区数</th><th print-remove="">操作</th></tr></thead><tbody><tr class="row-{{$index}}" ng-repeat="row in vm.lst"><td class="text-center">{{ row.time | date }}</td><td class="text-center">{{ vm.getUserName(row.people) }}</td><td class="text-center">{{ row.remark }}</td><td class="text-center"><span ng-repeat="item in row.depts">{{vm.getDeptName(item)}}<br></span></td><td class="text-center">{{ row.depts.length }}</td><td class="text-center"><button class="btn btn-default btn-xs" ng-click="vm.open(row)"><span class="fa fa-pencil"></span>编辑</button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span>删除</button></td></tr></tbody></table></div></div></uib-tab></uib-tabset></div>'),e.put("app/quality/task/task.modal.html",'<div class="quality-add-plan-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">新增质控组</h5></div><div class="modal-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="form"><div class="form-wrapper"><div class="text-input clearfix"><div class="form-group"><label for="teamName" class="control-label col-xs-4">护理质量组：</label><div class="col-xs-8"><select class="input-sm form-control" id="teamName" ng-model="vm.formData.teamName" ng-change="vm.teamChange()"><option value="{{item.teamName}}" ng-repeat="item in vm.groups">{{item.teamName}}</option></select></div></div><div class="form-group"><label for="area" class="control-label col-xs-4">调查模板：</label><div class="col-xs-8"><select class="input-sm form-control" id="modelName" ng-model="vm.formData.modelName"><option value="{{item.modelName}}" ng-repeat="item in vm.models">{{item.modelName}}</option></select></div></div><div class="form-group"><label for="area" class="control-label col-xs-4">开始时间：</label><div class="col-xs-8"><span class="input-group"><input ng-model="vm.formData.startDate" type="text" id="startDate" name="startDate" required="" uib-datepicker-popup="" on-open-focus="true" is-open="vm.startOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string="" readonly=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.startOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><label for="area" class="control-label col-xs-4">结束时间：</label><div class="col-xs-8"><span class="input-group"><input ng-model="vm.formData.endDate" type="text" id="endDate" name="endDate" required="" uib-datepicker-popup="" on-open-focus="true" is-open="vm.endOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string="" readonly=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.endOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div></div><div class="text-center"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></form></div></div>'),e.put("app/quality/task/task.tpl.html",'<div class="wrapper quality-task-wrapper padding-content"><ul class="page-nav clearfix"><li class="active"><a ui-sref="home.qualityForm">质控计划</a></li></ul><div class="panel panel-layout panel-default"><div class="tool-wrapper container-fluid form-inline"><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.open()">新增计划</button></div></div><div class="panel-body" loading-wrapper="" loading-type="content" loading-options="vm.load"><table print-table="vm.lst" class="table table-hover table-condensed table-bordered no-border"><thead><tr class="header-export"><th>护理质量组</th><th>计划时间</th><th>调查模板</th><th>任务</th><th print-remove="">操作</th></tr></thead><tbody><tr class="row-{{$index}}" ng-repeat="row in vm.lst"><td class="text-center">{{ row.name }}</td><td class="text-center">{{ row.startTime | date: \'yyyy-MM-dd\' }} ~ {{ row.endTime | date: \'yyyy-MM-dd\' }}</td><td class="text-center">{{ row.template }}</td><td class="text-center">{{ row.tasks.length }}</td><td data-title="\'操作\'" class="text-center"><a class="btn btn-primary btn-xs" ui-sref="home.qualityTaskAdd" ng-if="!row.isEditing"><span class="fa fa-edit"></span>编辑</a> <button class="btn btn-danger btn-xs" ng-click="vm.deleteTask(row.seqId)"><span class="fa fa-trash"></span>删除</button></td></tr></tbody></table><none-data-info list="vm.lst"></none-data-info></div></div></div>'),e.put("app/research/item/item.model.html",'<div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写科研管理</h5></div><form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="static-form-item container-fluid"><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">课题名称：</label></div><div class="col-sm-8"><input ng-model="vm.formData.subjectName"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">项目来源：</label></div><div class="col-sm-8"><input ng-model="vm.formData.itemSource"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">起始日期：</label></div><div class="col-sm-8"><input ng-model="vm.formData.startDate"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">结束日期：</label></div><div class="col-sm-8"><input ng-model="vm.formData.endDate"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">经费：</label></div><div class="col-sm-8"><input ng-model="vm.formData.cost"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">负责人：</label></div><div class="col-sm-8"><input ng-model="vm.formData.subjectHead"></div></div><div class="form-group col-md-12"><div class="col-sm-2"><label class="control-label">参与人：</label></div><div class="col-sm-10"><input ng-model="vm.formData.subjectParticipant"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),e.put("app/research/item/item.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-balance-scale"></i> <span>科研项目管理</span><div class="pull-right"><button class="btn btn-default btn-xs" ng-click="vm.open()">新增</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>课题名称</th><th>项目来源</th><th>起始日期</th><th>结束日期</th><th>经费</th><th>课题负责人</th><th>课题参与人</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td class="text-center">{{ row.subjectName }}</td><td class="text-center">{{ row.itemSource }}</td><td class="text-center">{{ row.startDate }}</td><td class="text-center">{{ row.endDate }}</td><td class="text-center">{{ row.cost }}</td><td class="text-center">{{ row.subjectHead }}</td><td class="text-center">{{ row.subjectParticipant }}</td><td class="text-center"><button class="btn btn-default btn-xs" ng-click="vm.edit(row)" uib-tooltip="编辑" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.deleteGroup(row.seqId)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),e.put("app/research/papers/papers.model.html",'<div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写科研论文</h5></div><form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="static-form-item container-fluid"><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">论文名称：</label></div><div class="col-sm-8"><input ng-model="vm.formData.paperName"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">作者：</label></div><div class="col-sm-8"><input ng-model="vm.formData.author"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">刊物名称：</label></div><div class="col-sm-8"><input ng-model="vm.formData.publictionName"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">刊号：</label></div><div class="col-sm-8"><input ng-model="vm.formData.publictionNo"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">字数：</label></div><div class="col-sm-8"><input ng-model="vm.formData.wordsNumber"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">核心刊物：</label></div><div class="col-sm-8"><input ng-model="vm.formData.corePubliction"></div></div><div class="form-group col-md-12"><div class="col-sm-2"><label class="control-label">发表日期：</label></div><div class="col-sm-10"><input ng-model="vm.formData.publishDate"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),e.put("app/research/papers/papers.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-balance-scale"></i> <span>科研论文管理</span><div class="pull-right"><button class="btn btn-primary btn-xs" ng-click="vm.add()">新增</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>论文名称</th><th>作者</th><th>刊物名称</th><th>刊号</th><th>字数</th><th>核心刊物</th><th>发表日期</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td class="text-center">{{ row.paperName }}</td><td class="text-center">{{ row.author }}</td><td class="text-center">{{ row.publictionName }}</td><td class="text-center">{{ row.publictionNo }}</td><td class="text-center">{{ row.wordsNumber }}</td><td class="text-center">{{ row.corePubliction }}</td><td class="text-center">{{ row.publishDate }}</td><td class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.edit(row)" uib-tooltip="编辑"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.deletePapers(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),e.put("app/sat/nurse/result.modal.html",'<div class="sat-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">护士满意度调查</h5></div><div class="modal-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="form"><div class="container-fluid"><div class=""><div class="form-group"><label for="formCode" class="col-sm-1 control-label">日期</label><div class="input-group col-sm-3 pull-left"><input type="text" id="surverDate" name="surverDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.surverDateOpen" ng-model="vm.detail.surverDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.surverDateOpen = true"><i class="fa fa-calendar"></i></button></span></div><label for="formName" class="col-sm-1 control-label">调查表</label><div class="col-sm-6"><select class="form-control" name="formCode" id="formCode" ng-model="vm.tmpCode" ng-show="vm.isNew" ng-change="vm.reload()"><option ng-repeat="item in vm.tmps" value="{{item.formCode}}">{{item.formName}}</option></select><input class="form-control input-sm" type="text" ng-model="vm.detail.resultName" ng-hide="vm.isNew" disabled=""></div></div><div class="form-group"><label for="deptCode" class="col-sm-1 control-label">病区</label><div class="col-sm-3"><select class="form-control" name="deptCode" id="deptCode" ng-model="vm.detail.deptCode"><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><label for="userCode" class="col-sm-1 control-label">护士</label><div class="col-sm-3"><input type="text" class="form-control input-sm" ng-model="vm.detail.userCode"></div><label for="name" class="col-sm-1 control-label">姓名</label><div class="col-sm-3"><input type="text" class="form-control input-sm" ng-model="vm.detail.name"></div></div><div><table class="sat-table"><thead><tr><th>序号</th><th>调查问题</th><th>调查选项1</th><th>调查选项2</th><th>调查选项3</th></tr></thead><tbody><tr ng-repeat="item in vm.detail.satResultDetailList"><td>{{$index + 1}}</td><td>{{item.content}}</td><td ng-repeat="option in item.satOptionList"><div class="radio"><label><input type="radio" name="satOption{{item.seqId}}" value="{{option.optionCode}}" ng-model="item.optionCode"> {{option.optionContent}}</label></div></td></tr></tbody></table></div><div class="form-group text-center"><button class="btn btn-sm btn-success" type="button" ng-click="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></form></div></div>'),
e.put("app/sat/nurse/result.tpl.html",'<div class="sat-wrapper"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>护士满意度调查</span><div class="result-filter row clearfix"><span class="text">日期：从</span> <span class="input-group col-md-2"><input type="text" id="beginTime" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.beginTimeOpen" ng-model="vm.params.beginTime" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.beginTimeOpen = true"><i class="fa fa-calendar"></i></button></span></span> <span class="text">到</span> <span class="input-group col-md-2"><input type="text" id="endTime" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.endTimeOpen" ng-model="vm.params.endTime" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.endTimeOpen = true"><i class="fa fa-calendar"></i></button></span></span> <span class="text">类型</span> <span class="col-md-2"><select class="form-control" name="formType" id="formType" ng-model="vm.params.formType"><option value="">全部</option><option ng-repeat="item in nurseSatTypes" value="{{item}}">{{item}}</option></select></span> <span class="text">病区</span> <span class="col-md-2"><select class="form-control" name="deptCode" id="deptCode" ng-model="vm.params.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></span> <span class="btn btn-info" ng-click="vm.load()">查询</span> <span class="btn btn-success" ng-click="vm.open()">新增</span></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'调查日期\'">{{row.surverDate}}</td><td data-title="\'类型\'">{{ row.formType }}</td><td data-title="\'表单名称\'">{{ row.resultName }}</td><td data-title="\'病区\'">{{ vm.getDeptName(row.deptCode)}}</td><td data-title="\'护士编号\'">{{ row.userCode }}</td><td data-title="\'护士姓名\'">{{ row.name }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.open(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/sat/nurse/temp.modal.html",'<div class="sat-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">护士满意度模板</h5></div><div class="modal-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="form"><div class="container-fluid"><div class=""><div class="form-group"><label for="formCode" class="col-sm-1 control-label">编号：</label><div class="col-sm-3"><input class="form-control input-sm" name="" id="formCode" type="text" value="{{vm.formData.deptName}}" ng-model="vm.formData.formCode" disabled=""></div><label for="formName" class="col-sm-1 control-label">名称：</label><div class="col-sm-3"><input class="form-control input-sm" ng-model="vm.formData.formName" id="formName" name="" autocomplete="off" type="text"></div><label for="formType" class="col-sm-1 control-label">类型：</label><div class="col-sm-3"><select class="form-control" name="formType" id="formType" ng-model="vm.formData.formType"><option ng-repeat="item in nurseSatTypes" value="{{item}}">{{item}}</option></select></div></div><div><button class="btn btn-sm btn-success" ng-click="vm.add()">添加调查项</button><table class="sat-table"><thead><tr><th>序号</th><th>调查问题</th><th>调查选项1</th><th>调查选项2</th><th>调查选项3</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.formData.satTempDetailList"><td>{{$index + 1}}</td><td><input class="form-control" type="text" ng-model="item.content"></td><td ng-repeat="item in item.satOptionList"><input class="col-md-2" type="radio" disabled="disabled"><div class="col-md-10"><input class="form-control" type="text" ng-model="item.optionContent"></div></td><td><button class="btn btn-sm btn-danger" ng-click="vm.del($index)">删除</button></td></tr></tbody></table></div><div class="form-group text-center"><button class="btn btn-sm btn-success" type="button" ng-click="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></form></div></div>'),e.put("app/sat/nurse/temp.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>护士满意度调查模板</span><div class="pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.open()">新增</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'编号\'">{{row.formCode}}</td><td data-title="\'类型\'">{{ row.formType }}</td><td data-title="\'表单名称\'">{{ row.formName }}</td><td data-title="\'创建时间\'">{{ row.createTime }}</td><td data-title="\'状态\'">{{ row.status === \'01\' ? \'在用\': \'废弃\' }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.open(row)"><span class="fa fa-edit"></span></button> <button ng-show="row.status === \'01\'" class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/sat/patient/result.modal.html",'<div class="sat-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">患者满意度调查</h5></div><div class="modal-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="form"><div class="container-fluid"><div class=""><div class="form-group"><label for="formCode" class="col-sm-1 control-label">日期</label><div class="input-group col-sm-3 pull-left"><input type="text" id="surverDate" name="surverDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.surverDateOpen" ng-model="vm.detail.surverDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.surverDateOpen = true"><i class="fa fa-calendar"></i></button></span></div><label for="formName" class="col-sm-1 control-label">调查表</label><div class="col-sm-6"><select class="form-control" name="formCode" id="formCode" ng-model="vm.tmpCode" ng-show="vm.isNew" ng-change="vm.reload()"><option ng-repeat="item in vm.tmps" value="{{item.formCode}}">{{item.formName}}</option></select><input class="form-control input-sm" type="text" ng-model="vm.detail.resultName" ng-hide="vm.isNew" disabled=""></div></div><div class="form-group"><label for="deptCode" class="col-sm-1 control-label">病区</label><div class="col-sm-3"><select class="form-control" name="deptCode" id="deptCode" ng-model="vm.detail.deptCode"><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><label for="bedCode" class="col-sm-1 control-label">床号</label><div class="col-sm-1"><input type="text" class="form-control input-sm" ng-model="vm.detail.bedCode"></div><label for="name" class="col-sm-1 control-label">姓名</label><div class="col-sm-2"><input type="text" class="form-control input-sm" ng-model="vm.detail.name"></div><label for="inHospNo" class="col-sm-1 control-label">住院号</label><div class="col-sm-2"><input type="text" class="form-control input-sm" ng-model="vm.detail.inHospNo"></div></div><div><table class="sat-table"><thead><tr><th>序号</th><th>调查问题</th><th>调查选项1</th><th>调查选项2</th><th>调查选项3</th></tr></thead><tbody><tr ng-repeat="item in vm.detail.satResultDetailList"><td>{{$index + 1}}</td><td>{{item.content}}</td><td ng-repeat="option in item.satOptionList"><div class="radio"><label><input type="radio" name="satOption{{item.seqId}}" value="{{option.optionCode}}" ng-model="item.optionCode"> {{option.optionContent}}</label></div></td></tr></tbody></table></div><div class="form-group text-center"><button class="btn btn-sm btn-success" type="button" ng-click="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></form></div></div>'),e.put("app/sat/patient/result.tpl.html",'<div class="sat-wrapper"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>患者满意度调查</span><div class="result-filter row clearfix"><span class="text">日期：从</span> <span class="input-group col-md-2"><input type="text" id="beginTime" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.beginTimeOpen" ng-model="vm.params.beginTime" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.beginTimeOpen = true"><i class="fa fa-calendar"></i></button></span></span> <span class="text">到</span> <span class="input-group col-md-2"><input type="text" id="endTime" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.endTimeOpen" ng-model="vm.params.endTime" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.endTimeOpen = true"><i class="fa fa-calendar"></i></button></span></span> <span class="text">类型</span> <span class="col-md-2"><select class="form-control" name="formType" id="formType" ng-model="vm.params.formType"><option value="">全部</option><option ng-repeat="item in patientSatTypes" value="{{item}}">{{item}}</option></select></span> <span class="text">患者</span> <span class="col-md-2"><input type="text" class="form-control input-sm" name="patientName" id="patientName" ng-model="vm.params.patientName"></span> <span class="btn btn-info" ng-click="vm.load()">查询</span> <span class="btn btn-success" ng-click="vm.open()">新增</span></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'调查日期\'">{{row.surverDate}}</td><td data-title="\'类型\'">{{ row.formType }}</td><td data-title="\'表单名称\'">{{ row.resultName }}</td><td data-title="\'病区\'">{{ vm.getDeptName(row.deptCode)}}</td><td data-title="\'床号\'">{{ row.bedCode }}</td><td data-title="\'姓名\'">{{ row.name }}</td><td data-title="\'住院号\'">{{ row.inHospNo }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.open(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/sat/patient/temp.modal.html",'<div class="sat-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">患者满意度模板</h5></div><div class="modal-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="form"><div class="container-fluid"><div class=""><div class="form-group"><label for="formCode" class="col-sm-1 control-label">编号：</label><div class="col-sm-3"><input class="form-control input-sm" name="" id="formCode" type="text" value="{{vm.formData.deptName}}" ng-model="vm.formData.formCode" disabled=""></div><label for="formName" class="col-sm-1 control-label">名称：</label><div class="col-sm-3"><input class="form-control input-sm" ng-model="vm.formData.formName" id="formName" name="" autocomplete="off" type="text"></div><label for="formType" class="col-sm-1 control-label">类型：</label><div class="col-sm-3"><select class="form-control" name="formType" id="formType" ng-model="vm.formData.formType"><option ng-repeat="item in patientSatTypes" value="{{item}}">{{item}}</option></select></div></div><div><button class="btn btn-sm btn-success" ng-click="vm.add()">添加调查项</button><table class="sat-table"><thead><tr><th>序号</th><th>调查问题</th><th>调查选项1</th><th>调查选项2</th><th>调查选项3</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.formData.satTempDetailList"><td>{{$index + 1}}</td><td><input class="form-control" type="text" ng-model="item.content"></td><td ng-repeat="item in item.satOptionList"><input class="col-md-2" type="radio" disabled="disabled"><div class="col-md-10"><input class="form-control" type="text" ng-model="item.optionContent"></div></td><td><button class="btn btn-sm btn-danger" ng-click="vm.del($index)">删除</button></td></tr></tbody></table></div><div class="form-group text-center"><button class="btn btn-sm btn-success" type="button" ng-click="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></form></div></div>'),e.put("app/sat/patient/temp.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>患者满意度调查模板</span><div class="pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.open()">新增</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'编号\'">{{row.formCode}}</td><td data-title="\'类型\'">{{ row.formType }}</td><td data-title="\'表单名称\'">{{ row.formName }}</td><td data-title="\'创建时间\'">{{ row.createTime }}</td><td data-title="\'状态\'">{{ row.status === \'01\' ? \'在用\': \'废弃\' }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.open(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/statistics/bedNursing/doc.tpl.html",'<div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row data-panel"><span class="col-md-3"></span> <span class="col-md-3">总遗漏率：{{vm.baseData.miss}}</span> <span class="col-md-3">整体合格率：{{vm.baseData.qualified}}</span> <span class="col-md-3"></span></div><div class="row"><div class="col-md-4 echarts-wrap" ng-repeat="item in vm.charts" echarts="item.identity" echarts-dimension="item.dimension" config="item.config"></div></div></div>'),e.put("app/statistics/bedNursing/doctor.tpl.html",'<div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="echarts-wrap" echarts="vm.chart.identity" echarts-dimension="vm.chart.dimension" config="vm.chart.config"></div></div></div>'),e.put("app/statistics/bedNursing/liqDis.tpl.html",'<div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="echarts-wrap" echarts="vm.chart.identity" echarts-dimension="vm.chart.dimension" config="vm.chart.config"></div></div></div>'),e.put("app/statistics/bedNursing/patrol.tpl.html",'<div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="col-md-12 echarts-wrap" echarts="vm.chart.identity" echarts-dimension="vm.chart.dimension" config="vm.chart.config"></div><div class="col-md-6 echarts-wrap" ng-repeat="item in vm.charts" echarts="item.identity" echarts-dimension="item.dimension" config="item.config"></div></div></div>'),e.put("app/statistics/bedNursing/sign.tpl.html",'<div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="echarts-wrap" echarts="vm.sign.identity" echarts-dimension="vm.sign.dimension" config="vm.sign.config"></div></div></div>'),e.put("app/statistics/bedNursing/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="link-wrapper"><a class="stat-header" ui-sref="home.bedNursing.liqDis" ui-sref-active="active">配液统计</a> <a class="stat-header" ui-sref="home.bedNursing.doctor" ui-sref-active="active">医嘱统计</a> <a class="stat-header" ui-sref="home.bedNursing.sign" ui-sref-active="active">生命体征</a> <a class="stat-header" ui-sref="home.bedNursing.doc" ui-sref-active="active">护理文书</a> <a class="stat-header" ui-sref="home.bedNursing.patrol" ui-sref-active="active">巡视统计</a></div><div ui-view=""></div></div>'),e.put("app/statistics/duty/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row data-panel"><span class="col-md-3">护士总数：{{vm.baseData.total}}</span> <span class="col-md-3">请假人次：{{vm.baseData.leave}}</span> <span class="col-md-3">调班人次：{{vm.baseData.shift}}</span> <span class="col-md-3">拒绝调班：{{vm.baseData.refuse}}</span></div><div class="echarts-wrap" echarts="vm.duty.identity" echarts-dimension="vm.duty.dimension" config="vm.duty.config"></div></div></div>'),e.put("app/statistics/exam/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4"><select class="form-control" ng-model="vm.filter.type"><option value="">全部</option><option value="0">入职考试</option><option value="1">年中考试</option><option value="2">年终考试</option><option value="3">护理质量培训</option></select></div><div class="col-md-4"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="col-md-6"><div class="echarts-wrap" echarts="vm.exam.identity" echarts-dimension="vm.exam.dimension" config="vm.exam.config"></div></div><div class="col-md-6"><div class="echarts-wrap" echarts="vm.train.identity" echarts-dimension="vm.train.dimension" config="vm.train.config"></div></div></div></div></div>'),e.put("app/statistics/malCase/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics"><span class="fa fa-table"></span></a><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="echarts-wrap" echarts="vm.mal.identity" echarts-dimension="vm.mal.dimension" config="vm.mal.config"></div></div></div></div>'),e.put("app/statistics/nurseManager/form.tpl.html",'<div class="chart-wrapper"><div class="row"><div class="col-md-6 echarts-wrap" echarts="vm.level.identity" echarts-dimension="vm.level.dimension" config="vm.level.config"></div><div class="col-md-6 echarts-wrap" echarts="vm.edu.identity" echarts-dimension="vm.edu.dimension" config="vm.edu.config"></div></div><div class="row"><div class="col-md-6 echarts-wrap" echarts="vm.age.identity" echarts-dimension="vm.age.dimension" config="vm.age.config"></div><div class="col-md-6 echarts-wrap" echarts="vm.gender.identity" echarts-dimension="vm.gender.dimension" config="vm.gender.config"></div></div><div class="row"><div class="col-md-6 echarts-wrap" echarts="vm.political.identity" echarts-dimension="vm.political.dimension" config="vm.political.config"></div></div></div>'),e.put("app/statistics/nurseManager/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="link-wrapper"><a ui-sref="home.nurseManagerStat.form" ui-sref-active="active">人员组成统计</a> <a ui-sref="home.nurseManagerStat.transfer" ui-sref-active="active">人事调动统计</a></div><div ui-view=""></div></div>'),e.put("app/statistics/nurseManager/transfer.tpl.html",'<div class="chart-wrapper"><div class="row filter"><span class="input-group center col-md-2"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></span></div><div class="row data-panel"><span class="col-md-3">护士总数：{{vm.baseData.total}}</span> <span class="col-md-3">调动人次：{{vm.baseData.transfer}}</span> <span class="col-md-3">新增人数：{{vm.baseData.increase}}</span> <span class="col-md-3">离开人数：{{vm.baseData.leave}}</span></div><div class="echarts-wrap" echarts="vm.transfer.identity" echarts-dimension="vm.transfer.dimension" config="vm.transfer.config"></div></div>'),e.put("app/statistics/quality/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="echarts-wrap" echarts="vm.quality.identity" echarts-dimension="vm.quality.dimension" config="vm.quality.config"></div></div></div></div>'),e.put("app/statistics/sat/nurse.tpl.html",'<div class="statistics-wrapper"><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4"><select class="form-control" ng-model="vm.filter.type"><option value="">全部</option><option value="0">工作环境调查表</option><option value="1">工作氛围调查表</option></select></div><div class="col-md-4"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="col-md-7"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'项目\'">{{row.key}}</td><td data-title="\'分值\'">{{row.value}}</td></tr></table></div><div class="col-md-5"><div class="echarts-wrap" echarts="vm.sat.identity" echarts-dimension="vm.sat.dimension" config="vm.sat.config"></div></div></div></div></div>'),e.put("app/statistics/sat/patient.tpl.html",'<div class="statistics-wrapper"><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4"><select class="form-control" ng-model="vm.filter.type"><option value="">全部</option><option value="0">门诊调查表</option><option value="1">住院调查表</option></select></div><div class="col-md-4"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="col-md-7"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'项目\'">{{row.key}}</td><td data-title="\'分值\'">{{ row.value }}</td></tr></table></div><div class="col-md-5"><div class="echarts-wrap" echarts="vm.sat.identity" echarts-dimension="vm.sat.dimension" config="vm.sat.config"></div></div></div></div></div>'),e.put("app/statistics/sat/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="link-wrapper"><a class="stat-header" ui-sref="home.satStat.patient" ui-sref-active="active">患者满意度统计</a> <a class="stat-header" ui-sref="home.satStat.nurse" ui-sref-active="active">护士满意度统计</a></div><div ui-view=""></div></div>'),e.put("app/statistics/research/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="col-md-6"><p class="text-center">科研项目统计：{{vm.baseData.proj}}</p><div class="echarts-wrap" echarts="vm.proj.identity" echarts-dimension="vm.proj.dimension" config="vm.proj.config"></div></div><div class="col-md-6"><p class="text-center">科研论文统计：{{vm.baseData.paper}}</p><div class="echarts-wrap" echarts="vm.paper.identity" echarts-dimension="vm.paper.dimension" config="vm.paper.config"></div></div></div></div></div>'),
e.put("app/system/calendar/calendar.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>系统日历</span><div class="pull-right"><button ng-click="vm.open()" class="btn btn-default btn-xs">新建日历</button></div></div><div class="panel-body"><div class="calendar-wrapper calendar"><div class="calendar-header"><div class="calendar_ctrl"><button class="btn btn-default btn-xs" ng-click="vm.previousMonth()"><i class="fa fa-angle-left"></i></button> <span class="calendar_current">{{vm.loadParams.year}}年 {{vm.loadParams.month}}月</span> <button class="btn btn-default btn-xs" ng-click="vm.nextMonth()"><i class="fa fa-angle-right"></i></button> <button class="btn btn-default btn-xs" ng-click="vm.resetCalendar()">今天</button></div><div class="calendar_weeks"><div class="weeks-item" ng-repeat="weekItem in vm.weeks">{{weekItem[1]}}</div></div></div><div class="calendar-body"><div class="calendar_empty" ng-if="vm.isEmpty">暂无日历～</div><div class="calendar_grid" ng-if="!vm.isEmpty"><div class="calendar-row" ng-repeat="weekRow in vm.dataList"><div class="calendar_week-count">{{weekRow[0].weeks}}<br>周</div><div class="calendar_day calendar_diable-day" ng-repeat="num in vm.placeholderArr track by $index" ng-if="$parent.$index == 0"></div><div class="calendar_day" ng-repeat="day in weekRow"><div class="day-container"><div class="calendar_day-text" ng-class="{\'current-day\': day.date == vm.currentDate}">{{day.day}}</div><div class="calendar-setting"><a href="" ng-click="vm.openSetting(day)"><i class="fa fa-pencil-square-o"></i></a></div><span class="label label-holiday label-success" ng-if="day.isHoliday">假</span> <span class="label label-weekend label-default" ng-if="day.isWeekend">周末</span></div></div></div></div></div></div></div></div></div>'),e.put("app/system/calendar/calendarCreate.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写日历年份</h5></div><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.metaData.validationOption" name="yearForm"><div class="modal-body"><div class="row"><div class="col-sm-12"><input class="form-control input-sm" maxlength="4" required="" ng-model="vm.formData.year" id="calendarYear" name="calendarYear" type="text" placeholder="填写年份，如：2016"></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/system/calendar/calendarSetting.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">编辑日历信息</h5></div><form class="calendar-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.metaData.validationOption" name="yearForm"><div class="modal-body"><div class="calendar-form_date-info row"><div class="col-md-4">{{vm.formData.date}}</div><div class="col-md-4">{{vm.formData.weekText}}</div><div class="col-md-4">第{{vm.formData.weeks}}周</div></div><div class="form-group"><input type="checkbox" ng-true-value="1" ng-false-value="0" id="isWeekend" ng-model="vm.formData.isWeekend" ng-checked="vm.formData.isWeekend == 1"> <label for="isWeekend">是否周末</label></div><div class="form-group"><input type="checkbox" ng-true-value="1" ng-false-value="0" id="isHoliday" ng-model="vm.formData.isHoliday" ng-checked="vm.formData.isHoliday == 1"> <label for="isHoliday">是否节假日</label></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/system/roles/addRole.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写角色信息</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="userForm"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">角色名称：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.roleName" id="roleName" name="roleName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" name="remark" ng-model="vm.formData.remark"></textarea></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),e.put("app/system/roles/roles.tpl.html",'<div class="col-md-2"><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>角色列表</span></div><div class="panel-body list"><ul class="sublist"><li ng-repeat="item in vm.roleData" class="accordion-item" ng-class="{\'active\': item.roleCode === vm.roleDetail.roleCode}"><a ng-click="vm.load(item)" data-role-code="{{item.roleCode}}" class="sublist__item">{{item.roleName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>角色信息</span><div class="pull-right"><button ng-click="vm.open()" class="btn btn-default btn-xs">添加角色</button></div></div><div class="panel-body"><form data-role-id="{{vm.roleDetail.seqId}}" class="form form-horizontal w5c-form role-edit-form change-user-form" novalidate="" w5c-form-validate="vm.validationOption" name="roleEditForm"><div class="container-fluid"><div class="col-md-6"><div class="form-group"><label for="roleCode" class="col-sm-3 control-label">角色编号：</label><div class="col-sm-9"><input class="form-control input-sm" ng-model="vm.roleDetail.roleCode" id="roleCode" name="roleCode" type="text"></div></div><div class="form-group"><label for="roleName" class="col-sm-3 control-label">角色名称：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.roleDetail.roleName" id="roleName" name="roleName" type="text"></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" ng-disabled="" w5c-form-submit="vm.edit()">保存</button> <button class="btn btn-sm btn-danger" type="button" ng-disabled="" ng-click="vm.del()">删除</button></div></div></div><div class="col-md-6"><div class="form-group"><label for="remark" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" id="remark" name="remark" ng-model="vm.roleDetail.remark"></textarea></div></div></div></div><div class="navgation-edition container-fluid" ng-if="vm.roleDetail"><div class="col-md-5"><div class="panel panel-danger"><div class="panel-heading"><i class="fa fa-bars"></i> <span>未添加的功能</span></div><uib-accordion class="list-accordion" close-others="false"><uib-accordion-group ng-repeat="item in vm.notHaveList" panel-class="list__title" is-open="item.isOpen"><uib-accordion-heading><span class="dept-list__text">{{item.funName}}</span> <i class="pull-right fa" ng-class="{\'fa-angle-down\': item.isOpen, \'fa-angle-right\': !item.isOpen}"></i></uib-accordion-heading><ul class="dept-sublist"><li ng-repeat="subItem in item.child"><a ng-click="vm.navExchange(item, subItem, $parent.$index, $index, \'add\')" class="sublist__item">{{subItem.funName}}</a></li></ul></uib-accordion-group></uib-accordion></div></div><div class="col-md-2 exchange-icon"><div class="text-center"><i class="fa fa-exchange"></i></div></div><div class="col-md-5"><div class="panel panel-success"><div class="panel-heading"><i class="fa fa-bars"></i> <span>已添加的功能</span></div><uib-accordion class="list-accordion" close-others="false"><uib-accordion-group ng-repeat="item in vm.hadList" panel-class="list__title" is-open="item.isOpen"><uib-accordion-heading><span class="dept-list__text">{{item.funName}}</span> <i class="pull-right fa" ng-class="{\'fa-angle-down\': item.isOpen, \'fa-angle-right\': !item.isOpen}"></i></uib-accordion-heading><ul class="dept-sublist"><li ng-repeat="subItem in item.child"><a ng-click="vm.navExchange(item, subItem, $parent.$index, $index, \'remove\')" class="sublist__item">{{subItem.funName}}</a></li></ul></uib-accordion-group></uib-accordion></div></div></div></form></div></div></div>'),e.put("app/system/users/addExistRole.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">编辑用户角色信息</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="userForm"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">角色名称：</label><div class="col-sm-9"><select class="form-controll input-sm" ng-options="role.roleName for role in vm.metaData.roleList track by role.roleCode" name="userName" ng-model="vm.formData.role"></select></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">所属科室：</label><div class="col-sm-9"><select class="form-controll input-sm" ng-options="dept.deptName for dept in vm.metaData.deptList track by dept.deptCode" name="dept" ng-model="vm.formData.dept"></select></div></div></div></div></form></div><div class="modal-footer"><button class="btn btn-sm btn-success {{vm.roleBtnStatus.state}}" type="button" ng-click="vm.formData = {data: [{roleCode:vm.formData.role.roleCode,deptCode: vm.formData.dept.deptCode, userId: vm.metaData.currentUser.seqId}]}; vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div>'),e.put("app/system/users/addUser.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写角色信息</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="userForm"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">所属部门：</label><div class="col-sm-9"><input type="hidden" name="deptCode" ng-model="vm.formData.deptCode"> <input class="form-control input-sm" required="" ng-model="vm.formData.deptName" readonly="" id="deptCode" type="text"></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label">用户姓名：</label><div class="col-sm-9"><select class="form-controll input-sm" name="userName" ng-model="vm.formData.userName" ng-change="vm.formData.userCode = (vm.metaData.userList | filter:vm.formData.userName)[0].userCode"><option ng-repeat="user in vm.metaData.userList" value="{{user.userName}}">{{user.userName}}</option></select></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label">用户编号：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.userCode" id="userCode" readonly="" name="userCode" type="text"></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label">登录名：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.loginName" id="loginName" name="loginName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">密码：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.password" id="password" name="password" type="text"></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),e.put("app/system/users/users.detail.html",'<td colspan="{{tdLen}}"><table st-table="vm.userRoleList" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>角色编号</th><th>所属部门</th><th>角色名称</th><th>操作</th></tr></thead><tbody><tr class="row-{{$index}}" ng-repeat="row in vm.userRoleList"><td>{{row.roleCode}}</td><td>{{row.deptName}}</td><td>{{row.roleName}}</td><td><button class="btn btn-danger btn-xs" uib-tooltip="删除角色" ng-click="vm.delUserRole(row.seqId)" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.userRoleList"></none-data-info></td>'),e.put("app/system/users/users.tpl.html",'<div class="col-md-2"><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list" full-height=""><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><uib-accordion class="list-accordion"><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode, vm.deptData.deptName)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter:vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode, subItem.deptName)" class="sublist__item">{{subItem.deptName}}</a></li></ul></uib-accordion></div></div></div><div class="col-md-10"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>用户信息</span><div class="pull-right"><button ng-click="vm.open()" class="btn btn-default btn-xs" ng-disabled="!vm.selectedDept">添加用户</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th></th><th>员工编号</th><th>用户姓名</th><th>登录名</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}" ng-class="{\'info\': row.userCode === vm.selectedUser.userCode}"><td grid-expand-trigger="" grid-p="seqId" grid-expand-method="showRole" class="trigger"><i class="fa fa-caret-right"></i></td><td>{{row.userCode}}</td><td>{{row.userName}}</td><td>{{row.loginName}}</td><td><a href="javascript:;" ng-click="vm.open(row)" ng-if="!row.isEditing">编辑</a> ｜ <span ng-if="vm.expanedIndex == $index"><a href="javascript:;" ng-click="vm.openRole(row)">添加角色</a> ｜</span> <a href="javascript:;" class="danger-text" ng-click="vm.del(row.seqId)" ng-if="!row.isEditing">删除</a></td></tr><tr grid-expand="" tpl-src="app/system/users/users.detail.html" ng-show="vm.expanedIndex == $index && vm.expanded"></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),e.put("app/techFiles/jci/jci.detail.html",'<td colspan="{{tdLen}}"><uib-tabset active="active"><uib-tab index="0" heading="岗位职责"><table class="table table-striped table-condensed table-no-border"><tr><th>岗位名称</th><th>工作概要</th><th>上下关系</th><th>工作职责</th><th>工作标准</th><th>其他要求</th><th>开始时间</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.posStatement"><td>{{item.positionName}}</td><td>{{item.jobSummary}}</td><td>{{item.leaderMemberRelation}}</td><td>{{item.responsibilities}}</td><td>{{item.jobStandard}}</td><td>{{item.otherRequirements}}</td><td>{{item.beginTime}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="1" heading="岗前培训"><table class="table table-striped table-condensed table-no-border"><tr><th>级别</th><th>培训名称</th><th>开始时间</th><th>结束时间</th><th>考核情况</th><th>合格证书</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.preJobTrain"><td>{{item.rank}}</td><td>{{item.trainName}}</td><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.assessmentCondition}}</td><td>{{item.certificateQualification}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="2" heading="评估考核"><table class="table table-striped table-condensed table-no-border"><tr><th>考核内容</th><th>考核时间</th><th>考核结果</th><th>审核人</th></tr><tr ng-repeat="item in vm.detail.assessment"><td>{{item.assessmentContent}}</td><td>{{item.assessmentTime}}</td><td>{{item.assessmentResult}}</td><td>{{item.auditor}}</td></tr></table></uib-tab><uib-tab index="3" heading="继续教育"><table class="table table-striped table-condensed table-no-border"><tr><th>级别</th><th>教育名称</th><th>开始时间</th><th>结束时间</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.conEducation"><td>{{item.rank}}</td><td>{{item.educationName}}</td><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="4" heading="CPR/ACLS证书"><table class="table table-striped table-condensed table-no-border"><tr><th>培训时间</th><th>培训名称</th><th>考核情况</th><th>合格证书</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.cprAcls"><td>{{item.trainTime}}</td><td>{{item.trainName}}</td><td>{{item.assessmentContent}}</td><td>{{item.certificateQualification}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="5" heading="教育记录与考核"><table class="table table-striped table-condensed table-no-border"><tr><th>开始时间</th><th>结束时间</th><th>级别</th><th>培训名称</th><th>考核结果</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.eduRecord"><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.rank}}</td><td>{{item.trainName}}</td><td>{{item.assessmentResult}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab></uib-tabset></td>'),e.put("app/techFiles/jci/jci.tpl.html",'<div class="col-md-2" print-remove=""><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter: vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode)" class="sublist__item">{{subItem.deptName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>人员数据</span><div class="pull-right"><button print-btn="" class="btn btn-primary btn-xs">打印</button></div></div><div class="panel-body"><table st-table="vm.data" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th></th><th st-sort="hisCode">工号</th><th>姓名</th><th>病区</th><th>出生时间</th><th>性别</th><th>毕业时间</th><th>毕业院校</th><th>获得学位</th><th>操作</th></tr></thead><tbody ng-repeat="row in vm.data"><tr><td grid-expand-trigger="" grid-p="userCode" grid-expand-method="loadDetail" class="trigger"><i class="fa fa-caret-right"></i></td><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td>{{vm.getDeptName(row.deptCode)}}</td><td>{{row.birthday}}</td><td>{{vm.genders[row.gender]}}</td><td>{{row.graduationDate}}</td><td>{{row.graduationSchool}}</td><td>{{row.education}}</td><td data-title="\'操作\'"><button class="btn btn-default btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑员工信息"><span class="fa fa-pencil"></span></button></td></tr><tr grid-expand="" tpl-src="app/techFiles/jci/jci.detail.html" ng-show="vm.expanedIndex == $index"></tr></tbody></table></div></div></div>'),e.put("app/techFiles/jci/modal.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写护士信息</h5></div><div class="modal-body"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="static-form-item container-fluid"><div class="col-md-6"><div class="form-group"><label for="hisCode" class="col-sm-3 control-label">工号：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.detail.info.hisCode" id="hisCode" name="hisCode" type="text" readonly=""></div></div><div class="form-group"><label for="userName" class="col-sm-3 control-label">姓名：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.detail.info.userName" id="userName" name="userName" type="text" readonly=""></div></div><div class="form-group"><label for="male" class="col-sm-3 control-label">性别：</label><div class="col-sm-9"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.info.gender" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.info.gender" id="female" value="0"> 女</label></div></div><div class="form-group"><label for="birthday" class="col-sm-3 control-label">出生日期：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="birthday" name="birthday" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.birthdayOpen" ng-model="vm.detail.info.birthday" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.birthdayOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div></div><div class="col-md-6"><div class="form-group"><label for="graduationSchool" class="col-sm-3 control-label">毕业学校：</label><div class="col-sm-9"><input type="text" id="graduationSchool" name="nativePlace" ng-model="vm.detail.info.graduationSchool" class="form-control input-sm"></div></div><div class="form-group"><label for="graduationDate" class="col-sm-3 control-label">毕业时间：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="graduationDate" name="graduationDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.graduationDateOpen" ng-model="vm.detail.info.graduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.graduationDateOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><label for="education" class="col-sm-3 control-label">学历：</label><div class="col-sm-9"><input type="text" id="education" name="education" ng-model="vm.detail.info.education" class="form-control input-sm"></div></div></div></div><div class="container-fluid"><div class="col-md-6"><div class="form-group"><label class="col-sm-3 control-label"></label> <button w5c-form-submit="vm.save()" class="btn btn-success btn-sm">保存</button></div></div></div></form></uib-tab><uib-tab index="1" heading="岗位职责"><form class="form-horizontal form-inline posStatement-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="posStatementForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>岗位名称</th><th>工作概要</th><th>上下关系</th><th>工作职责</th><th>工作标准</th><th>其他要求</th><th>开始时间</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.posStatement track by $index"><td><input class="form-control input-sm input-tiny" name="positionName" type="text" required="" ng-model="item.positionName"></td><td><input class="form-control input-sm input-tiny" name="jobSummary" type="text" required="" ng-model="item.jobSummary"></td><td><input class="form-control input-sm input-tiny" name="leaderMemberRelation" type="text" required="" ng-model="item.leaderMemberRelation"></td><td><input class="form-control input-sm input-tiny" name="responsibilities" type="text" required="" ng-model="item.responsibilities"></td><td><input class="form-control input-sm input-tiny" name="jobStandard" type="text" required="" ng-model="item.jobStandard"></td><td><input class="form-control input-sm input-tiny" name="otherRequirements" type="text" required="" ng-model="item.otherRequirements"></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" ng-model="item.beginTime" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'posStatement\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'posStatement\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'posStatement\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="2" heading="岗前培训" active="tab.active"><form class="form-horizontal form-inline preJobTrain-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="preJobTrainForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>级别</th><th>培训名称</th><th>开始时间</th><th>结束时间</th><th>状态</th><th>合格证书</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.preJobTrain track by $index"><td><select class="form-control input-sm" name="rank" ng-model="item.rank"><option value="{{rank}}" ng-repeat="rank in vm.rankArray">{{rank}}</option></select></td><td><input class="form-control input-sm input-tiny" name="trainName" type="text" required="" ng-model="item.trainName"></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><select class="form-control input-sm" name="assessmentCondition" ng-model="item.assessmentCondition"><option value="{{result}}" ng-repeat="result in vm.resultArray">{{result}}</option></select></td><td><input class="form-control input-sm input-tiny" name="certificateQualification" type="text" required="" ng-model="item.certificateQualification"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'preJobTrain\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'preJobTrain\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'preJobTrain\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="3" heading="评估考核" active="tab.active"><form class="form-horizontal form-inline assessment-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="assessmentForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>考核内容</th><th>考核时间</th><th>考核结果</th><th>审核人</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.assessment track by $index"><td><input class="form-control input-sm" name="assessmentContent" type="text" required="" ng-model="item.assessmentContent"></td><td><span class="input-group"><input type="text" name="assessmentTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.assDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.assessmentTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.assDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm" name="assessmentResult" type="text" required="" ng-model="item.assessmentResult"></td><td><input class="form-control input-sm" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><button ng-click="vm.saveItem(\'assessment\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'assessment\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'assessment\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="4" heading="继续教育" active="tab.active"><form class="form-horizontal form-inline conEducation-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="conEducationForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>级别</th><th>教育名称</th><th>开始时间</th><th>结束时间</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.conEducation track by $index"><td><select class="form-control input-sm" name="rank" ng-model="item.rank"><option value="{{rank}}" ng-repeat="rank in vm.rankArray">{{rank}}</option></select></td><td><input class="form-control input-sm input-tiny" name="educationName" type="text" required="" ng-model="item.educationName"></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.beginTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.beginTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'conEducation\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'conEducation\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'conEducation\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="5" heading="CPR/ACLS证书" active="tab.active"><form class="form-horizontal form-inline cprAcls-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="cprAclsForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>培训时间</th><th>培训名称</th><th>考核情况</th><th>合格证书</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.cprAcls track by $index"><td><span class="input-group"><input type="text" name="trainTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.trainTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.trainTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.trainTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="trainName" type="text" required="" ng-model="item.trainName"></td><td><select class="form-control input-sm" name="assessmentContent" ng-model="item.assessmentContent"><option value="{{result}}" ng-repeat="result in vm.resultArray">{{result}}</option></select></td><td><input class="form-control input-sm input-tiny" name="certificateQualification" type="text" required="" ng-model="item.certificateQualification"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'cprAcls\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'cprAcls\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'cprAcls\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="6" heading="教育记录与考核" active="tab.active"><form class="form-horizontal form-inline eduRecord-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="eduRecordForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>开始时间</th><th>结束时间</th><th>级别</th><th>培训名称</th><th>考核结果</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.eduRecord track by $index"><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><select class="form-control input-sm" name="rank" ng-model="item.rank"><option value="{{rank}}" ng-repeat="rank in vm.rankArray">{{rank}}</option></select></td><td><input class="form-control input-sm input-tiny" name="trainName" type="text" required="" ng-model="item.trainName"></td><td><select class="form-control input-sm" name="assessmentResult" ng-model="item.assessmentResult"><option value="{{result}}" ng-repeat="result in vm.resultArray">{{result}}</option></select></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'eduRecord\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'eduRecord\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'eduRecord\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab></uib-tabset></div></div>'),
e.put("app/techFiles/techFiles/modal.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写护士信息</h5></div><div class="modal-body"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="static-form-item container-fluid"><div class="col-md-6"><div class="form-group"><label for="hisCode" class="col-sm-3 control-label">工号：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.detail.info.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group"><label for="userName" class="col-sm-3 control-label">姓名：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.detail.info.userName" id="userName" name="userName" type="text"></div></div><div class="form-group"><label for="male" class="col-sm-3 control-label">性别：</label><div class="col-sm-9"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.info.gender" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.info.gender" id="female" value="0"> 女</label></div></div><div class="form-group"><label for="birthday" class="col-sm-3 control-label">出生日期：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="birthday" name="birthday" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.birthdayOpen" ng-model="vm.detail.info.birthday" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.birthdayOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div></div><div class="col-md-6"><div class="form-group"><label for="graduationSchool" class="col-sm-3 control-label">毕业学校：</label><div class="col-sm-9"><input type="text" id="graduationSchool" name="nativePlace" ng-model="vm.detail.info.graduationSchool" class="form-control input-sm"></div></div><div class="form-group"><label for="graduationDate" class="col-sm-3 control-label">毕业时间：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="graduationDate" name="graduationDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.graduationDateOpen" ng-model="vm.detail.info.graduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.graduationDateOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><label for="education" class="col-sm-3 control-label">学历：</label><div class="col-sm-9"><input type="text" id="education" name="education" ng-model="vm.detail.info.education" class="form-control input-sm"></div></div></div></div><div class="container-fluid"><div class="col-md-6"><div class="form-group"><label class="col-sm-3 control-label"></label> <button w5c-form-submit="vm.save()" class="btn btn-success btn-sm">保存</button></div></div></div></form></uib-tab><uib-tab index="1" heading="护士分层分级登记" active="tab.active"><form class="form-horizontal form-inline nurseHirReg-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="nurseHirRegForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>开始时间</th><th>结束时间</th><th>层级</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.nurseHirReg track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="hierarchy" type="text" required="" ng-model="item.hierarchy"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'nurseHirReg\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'nurseHirReg\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'nurseHirReg\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="2" heading="专科护士经历" active="tab.active"><form class="form-horizontal form-inline nurseExp-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="nurseExpForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>开始时间</th><th>结束时间</th><th>级别</th><th>所属专科</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.nurseExp track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><select class="form-control input-sm" name="rank" ng-model="item.rank"><option value="{{rank}}" ng-repeat="rank in vm.rankArray">{{rank}}</option></select></td><td><input class="form-control input-sm input-tiny" name="juniorCollege" type="text" required="" ng-model="item.juniorCollege"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'nurseExp\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'nurseExp\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'nurseExp\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="3" heading="学术会议、学习班" active="tab.active"><form class="form-horizontal form-inline academic-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="academicForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>会议名称</th><th>会议时间</th><th>会议地点</th><th>主办单位</th><th>学分</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.academic track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><input class="form-control input-sm input-tiny" name="meetingName" type="text" required="" ng-model="item.meetingName"></td><td><span class="input-group"><input type="text" name="meetingDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.meetingDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.meetingDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.meetingDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="meetingSite" type="text" required="" ng-model="item.meetingSite"></td><td><input class="form-control input-sm input-tiny" name="hostUnit" type="text" required="" ng-model="item.hostUnit"></td><td><input class="form-control input-sm input-tiny" name="credit" type="text" required="" ng-model="item.credit"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'academic\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'academic\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'academic\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="4" heading="奖励情况" active="tab.active"><form class="form-horizontal form-inline award-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="awardForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>奖励时间</th><th>奖励原因</th><th>奖励措施</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.award track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="apTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.apTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.apTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.apTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="reason" type="text" required="" ng-model="item.reason"></td><td><input class="form-control input-sm input-tiny" name="measure" type="text" required="" ng-model="item.measure"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'awardPunish\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'awardPunish\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'award\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="5" heading="惩罚情况" active="tab.active"><form class="form-horizontal form-inline punish-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="punishForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>惩罚时间</th><th>惩罚原因</th><th>惩罚措施</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.punish track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="apTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.apTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.apTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.apTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="reason" type="text" required="" ng-model="item.reason"></td><td><input class="form-control input-sm input-tiny" name="measure" type="text" required="" ng-model="item.measure"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'awardPunish\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'awardPunish\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'punish\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="6" heading="个人考核结果" active="tab.active"><form class="form-horizontal form-inline perAssessment-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="perAssessmentForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>考核时间</th><th>考核项目</th><th>考核结果</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.perAssessment track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="assessmentTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.assessmentTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.assessmentTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.assessmentTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="assessmentItem" type="text" required="" ng-model="item.assessmentItem"></td><td><input class="form-control input-sm input-tiny" name="assessmentResult" type="text" required="" ng-model="item.assessmentResult"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'perAssessment\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'perAssessment\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'perAssessment\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab></uib-tabset></div></div>'),e.put("app/techFiles/techFiles/techFiles.detail.html",'<td colspan="{{tdLen}}"><uib-tabset active="active"><uib-tab index="0" heading="护士分层分级登记"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>开始时间</th><th>结束时间</th><th>层级</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.nurseHirReg"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.hierarchy}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="1" heading="专科护士经历"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>开始时间</th><th>结束时间</th><th>级别</th><th>所属专科</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.nurseExp"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.rank}}</td><td>{{item.juniorCollege}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="2" heading="学术会议、学习班"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>会议名称</th><th>会议时间</th><th>会议地点</th><th>主办单位</th><th>学分</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.academic"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.meetingName}}</td><td>{{item.meetingDate}}</td><td>{{item.meetingSite}}</td><td>{{item.hostUnit}}</td><td>{{item.credit}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="3" heading="奖励情况"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>奖励时间</th><th>奖励原因</th><th>奖励措施</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.awardPunish | filter: {apType: 1}"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.apTime}}</td><td>{{item.reason}}</td><td>{{item.measure}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="4" heading="惩罚情况"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>惩罚时间</th><th>惩罚原因</th><th>惩罚措施</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.awardPunish | filter: {apType: 2}"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.apTime}}</td><td>{{item.reason}}</td><td>{{item.measure}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="5" heading="个人考核结果"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>考核时间</th><th>考核项目</th><th>考核结果</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.perAssessment"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.assessmentTime}}</td><td>{{item.assessmentItem}}</td><td>{{item.assessmentResult}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab></uib-tabset></td>'),e.put("app/techFiles/techFiles/techFiles.tpl.html",'<div class="col-md-2" print-remove=""><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter: vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode)" class="sublist__item">{{subItem.deptName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>人员数据</span><div class="pull-right"><button print-btn="" class="btn btn-primary btn-xs">打印</button></div></div><div class="panel-body"><table st-table="vm.data" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th></th><th st-sort="hisCode">工号</th><th>姓名</th><th>病区</th><th>出生时间</th><th>性别</th><th>毕业时间</th><th>毕业院校</th><th>获得学位</th><th>操作</th></tr></thead><tbody ng-repeat="row in vm.data"><tr><td grid-expand-trigger="" grid-p="userCode" grid-expand-method="loadDetail" class="trigger"><i class="fa fa-caret-right"></i></td><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td>{{vm.getDeptName(row.deptCode)}}</td><td>{{row.birthday}}</td><td>{{vm.genders[row.gender]}}</td><td>{{row.graduationDate}}</td><td>{{row.graduationSchool}}</td><td>{{row.education}}</td><td data-title="\'操作\'"><button class="btn btn-default btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑员工信息"><span class="fa fa-pencil"></span></button></td></tr><tr grid-expand="" tpl-src="app/techFiles/techFiles/techFiles.detail.html" ng-show="vm.expanedIndex == $index"></tr></tbody></table></div></div></div>'),e.put("app/common/tpls/timepicker/timepicer.html",'<div class="uib-timepicker"><div class="form-input"><div class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}"><input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()"><div class="time-spinner" ng-show="::showSpinners"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link time-spinner_btn" ng-disabled="noIncrementHours()" tabindex="-1"><span class="fa fa-chevron-up"></span></a> <a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link time-spinner_btn" ng-disabled="noDecrementHours()" tabindex="-1"><span class="fa fa-chevron-down"></span></a></div></div><div class="uib-separator" ng-show="showMinutes">:</div><div class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}" ng-show="showMinutes"><input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()"><div class="time-spinner" ng-show="::showSpinners"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link time-spinner_btn" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="fa fa-chevron-up"></span></a> <a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link time-spinner_btn" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="fa fa-chevron-down"></span></a></div></div><div class="uib-separator" ng-show="showSeconds">:</div><div class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds"><input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()"><div class="time-spinner" ng-show="::showSpinners"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link time-spinner_btn" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="fa fa-chevron-up"></span></a> <a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link time-spinner_btn" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="fa fa-chevron-down"></span></a></div></div><div ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></div></div></div>'),e.put("app/duty/leave/attemper/attemper.model.html",'<div class="attemper-modal-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写调班信息</h5></div><form class="w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="form-group col-sm-4"><label class="control-label col-sm-5">申请原因</label><div class="col-sm-7"><input class="form-control input-sm" ng-model="vm.formData.changeCause"></div></div><div class="form-group col-sm-4"><label class="control-label col-sm-5">调班人</label><div class="col-sm-7"><select class="form-control input-sm" ng-model="vm.formData.changeUserCode" ng-change="vm.changeUser()"><option ng-repeat="c in vm.users track by $index" value="{{c.userCode}}">{{c.userName}}</option></select></div></div></div><div class="row"><label class="col-sm-2 control-label">申请人班次</label><div class="col-sm-10"><div><button class="btn btn-sm btn-default" ng-click="vm.prevWeek(\'apply\')">上一周</button> <span>第{{vm.apply.params.weeks}}周</span> <button class="btn btn-sm btn-default" ng-click="vm.nextWeek(\'apply\')">下一周</button></div><table class="table table-condensed table-bordered table-striped"><thead><tr><th>{{vm.apply.data.week1}}</th><th>{{vm.apply.data.week2}}</th><th>{{vm.apply.data.week3}}</th><th>{{vm.apply.data.week4}}</th><th>{{vm.apply.data.week5}}</th><th>{{vm.apply.data.week6}}</th><th>{{vm.apply.data.week7}}</th></tr></thead><tbody><tr ng-repeat="row in vm.apply.list | filter: {userCode: vm.formData.applyUserCode}"><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week1" ng-click="vm.chooseClass(item, \'apply\')" ng-class="{\'active\': vm.activeCell(item, \'apply\')}">{{vm.getClassName(item.classCode)}}</div></div></td><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week2" ng-click="vm.chooseClass(item, \'apply\')" ng-class="{\'active\': vm.activeCell(item, \'apply\')}">{{vm.getClassName(item.classCode)}}</div></div></td><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week3" ng-click="vm.chooseClass(item, \'apply\')" ng-class="{\'active\': vm.activeCell(item, \'apply\')}">{{vm.getClassName(item.classCode)}}</div></div></td><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week4" ng-click="vm.chooseClass(item, \'apply\')" ng-class="{\'active\': vm.activeCell(item, \'apply\')}">{{vm.getClassName(item.classCode)}}</div></div></td><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week5" ng-click="vm.chooseClass(item, \'apply\')" ng-class="{\'active\': vm.activeCell(item, \'apply\')}">{{vm.getClassName(item.classCode)}}</div></div></td><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week6" ng-click="vm.chooseClass(item, \'apply\')" ng-class="{\'active\': vm.activeCell(item, \'apply\')}">{{vm.getClassName(item.classCode)}}</div></div></td><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week7" ng-click="vm.chooseClass(item, \'apply\')" ng-class="{\'active\': vm.activeCell(item, \'apply\')}">{{vm.getClassName(item.classCode)}}</div></div></td></tr></tbody></table></div></div><div class="row" ng-show="vm.formData.changeUserCode"><label class="col-sm-2 control-label">调班人班次</label><div class="col-sm-10"><div><button class="btn btn-sm btn-default" ng-click="vm.prevWeek(\'change\')">上一周</button> <span>第{{vm.change.params.weeks}}周</span> <button class="btn btn-sm btn-default" ng-click="vm.nextWeek(\'change\')">下一周</button></div><table class="table table-condensed table-bordered table-striped"><thead><tr><th>{{vm.change.data.week1}}</th><th>{{vm.change.data.week2}}</th><th>{{vm.change.data.week3}}</th><th>{{vm.change.data.week4}}</th><th>{{vm.change.data.week5}}</th><th>{{vm.change.data.week6}}</th><th>{{vm.change.data.week7}}</th></tr></thead><tbody><tr ng-repeat="row in vm.change.list | filter: {userCode: vm.formData.changeUserCode}"><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week1" ng-click="vm.chooseClass(item, \'change\')" ng-class="{\'active\': vm.activeCell(item, \'change\')}">{{vm.getClassName(item.classCode)}}</div></div></td><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week2" ng-click="vm.chooseClass(item, \'change\')" ng-class="{\'active\': vm.activeCell(item, \'change\')}">{{vm.getClassName(item.classCode)}}</div></div></td><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week3" ng-click="vm.chooseClass(item, \'change\')" ng-class="{\'active\': vm.activeCell(item, \'change\')}">{{vm.getClassName(item.classCode)}}</div></div></td><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week4" ng-click="vm.chooseClass(item, \'change\')" ng-class="{\'active\': vm.activeCell(item, \'change\')}">{{vm.getClassName(item.classCode)}}</div></div></td><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week5" ng-click="vm.chooseClass(item, \'change\')" ng-class="{\'active\': vm.activeCell(item, \'change\')}">{{vm.getClassName(item.classCode)}}</div></div></td><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week6" ng-click="vm.chooseClass(item, \'change\')" ng-class="{\'active\': vm.activeCell(item, \'change\')}">{{vm.getClassName(item.classCode)}}</div></div></td><td><div class="class-text-wrapper"><div class="class-text" ng-repeat="item in row.week7" ng-click="vm.chooseClass(item, \'change\')" ng-class="{\'active\': vm.activeCell(item, \'change\')}">{{vm.getClassName(item.classCode)}}</div></div></td></tr></tbody></table></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/duty/leave/attemper/review.tpl.html",'<div class="attemper-handler-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">处理调班申请</h5></div><form class="w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="form-group row"><label class="control-label col-sm-4">处理方式</label><div class="col-sm-8"><div class="radio"><label class="col-sm-6"><input type="radio" name="status" ng-model="vm.formData.status" value="02">拒绝</label> <label class="col-sm-6"><input type="radio" name="status" ng-model="vm.formData.status" value="03">通过</label></div></div></div><div class="form-group row"><label class="control-label col-sm-4">备注</label><div class="col-sm-8"><input class="form-control input-sm" ng-model="vm.formData.refuseCause"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">确定</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),
e.put("app/duty/setting/class/class.modal.html",'<div class="mod-pop-dateForm addClass-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">新增班次</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addClassesForm"><div class="container-fluid"><div class=""><div class="form-group"><label for="dept" class="col-sm-4 control-label">科室</label><div class="col-sm-8"><input class="form-control input-sm input-none" readonly="" name="" id="dept" type="text" value="{{vm.formData.deptName}}"></div></div><div class="form-group"><label for="turn" class="col-sm-4 control-label">班次</label><div class="col-sm-8"><input class="form-control input-sm" required="" ng-model="vm.formData.className" id="turn" name="" autocomplete="off" type="text"></div></div><div class="form-group partial-form-group"><label for="" class="col-sm-4 control-label">开始时间</label><div class="col-sm-8"><uib-timepicker class="timepick" ng-model="vm.formData.startTime" hour-step="1" minute-step="1" template-url="app/common/tpls/timepicker/timepicer.html" show-meridian="false" show-minutes="true"></uib-timepicker></div></div><div class="form-group partial-form-group"><label for="" class="col-sm-4 control-label">结束时间</label><div class="col-sm-8"><uib-timepicker class="timepick" ng-model="vm.formData.endTime" hour-step="1" minute-step="1" template-url="app/common/tpls/timepicker/timepicer.html" show-meridian="false" show-minutes="true"></uib-timepicker></div></div><div class="form-group partial-form-group"><label for="" class="col-sm-4 control-label">颜色区分</label><div class="col-sm-8"><color-picker ng-model="vm.formData.color" handle="true"></color-picker></div></div><div class="text-center"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></form></div></div>'),e.put("app/duty/leave/leave/leave.modal.html",'<div class="mod-pop-dateForm addLeave"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">请假</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addleaveForm"><div class="container-fluid"><div class="form-wrapper"><div class="form-group"><label for="txt" class="col-sm-2 control-label">请假类型</label><div class="col-sm-10"><select class="form-control input-sm" ng-model="vm.formData.leaveType"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.leaveType">{{item.dicName}}</option></select></div></div><div class="form-group"><label for="txt" class="col-sm-2 control-label">请假原因</label><div class="col-sm-10"><textarea class="form-control input-sm partial-textarea" id="txt" ng-model="vm.formData.leaveWhy"></textarea></div></div><div class="form-group partial-form-group"><label class="col-sm-2 control-label">请假时间</label><div class="col-sm-10 leave-time"><input type="text" class="form-control input-sm partial-input partial-input-sm date-pick" uib-datepicker-popup="yyyy-MM-dd" ng-model="vm.formData.startDate" ng-change="vm.startChange()" datepicker-options="vm.startOptions" is-open="popup1" ng-click="popup1 = true" placeholder="年-月-日" required="" readonly=""><span class="leave-time-text">到</span> <input type="text" class="form-control input-sm partial-input partial-input-sm date-pick" uib-datepicker-popup="yyyy-MM-dd" ng-model="vm.formData.endDate" ng-change="vm.endChange()" datepicker-options="vm.endOptions" is-open="popup2" ng-click="popup2 = true" placeholder="年-月-日" readonly=""> <span class="leave-time-text" ng-show="vm.formData.days">{{vm.formData.days}}天</span></div></div><div class="form-group clearfix"><div class="pull-right"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),e.put("app/duty/leave/leave/review.tpl.html",'<div class="mod-pop-dateForm addLeave"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">请假</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="reviewForm"><div class="container-fluid"><div class=""><div class="form-group"><label class="col-sm-3 control-label">姓名：</label><div class="col-sm-9 input-sm">{{ vm.formData.userName }}</div></div><div class="form-group"><label for="txt" class="col-sm-3 control-label">请假原因：</label><div class="col-sm-9 input-sm">{{ vm.formData.leaveWhy }}</div></div><div class="form-group partial-form-group"><label class="col-sm-3 control-label">开始时间：</label><div class="col-sm-9 input-sm">{{ vm.formData.startTime }}</div></div><div class="form-group partial-form-group"><label class="col-sm-3 control-label">结束时间：</label><div class="col-sm-9 input-sm">{{ vm.formData.endTime }}</div></div><div class="form-group partial-form-group"><label class="col-sm-3 control-label">审核：</label><div class="col-sm-9"><div class="radio"><label><input type="radio" name="select1" value="02" aria-label="批准" required="" ng-model="vm.formData.approveStatus" ng-click="reviewForm.approveStatus = false"> <span class="select">批准</span></label> <label><input type="radio" name="select1" value="03" aria-label="拒绝" required="" ng-model="vm.formData.approveStatus" ng-click="reviewForm.approveStatus = true"> <span class="select">拒绝</span></label></div></div></div><div class="form-group"><label for="txt" class="col-sm-3 control-label">审核备注：</label><div class="col-sm-7"><textarea class="form-control input-sm partial-textarea" id="txt" ng-model="vm.formData.approveRemark"></textarea></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),e.put("app/duty/setting/group/group.modal.html",'<div class="mod-pop-dateForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">新增分组</h5></div><div class="modal-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addbedForm" form="addbedForm"><div class="form-wrapper"><div class="form-group"><label for="groupName" class="control-label col-xs-3">组名</label><div class="col-xs-9"><input class="form-control input-sm" name="groupName" required="" autocomplete="off" ng-model="vm.formData.groupName" type="text" id="groupName"></div></div><div class="form-group"><label for="bedCode" class="control-label col-xs-3">床位</label><div class="col-xs-9"><ul class="flow-list"><li ng-repeat="flowItem in vm.formData.bedList track by $index"><span>{{ flowItem }}</span> <a ng-click="vm.removeFlow($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></li></ul><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="新增床位" autocomplete="off" name="bedCode" id="bedCode"> <span class="input-group-btn"><button ng-click="vm.addFlow()" class="btn btn-primary btn-sm" ng-disabled="addbedForm.bedCode.$invalid || addbedForm.bedCode.$pristine"><span class="fa fa-plus"></span></button></span></div></div></div><div class="text-center"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></form></div></div>'),e.put("app/malCaseUp/call/callForm/callForm.tpl.html",'<div class="col-md-12"><div class="panel panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><form class="w5c-form form form-horizontal" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="panel-heading"><i class="fa fa-list-alt"></i> <span>填写上报信息</span><div class="pull-right"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.save()">保存</button></div></div><div class="panel-body"><div class="container-fluid"><div class="row"><div class="form-group col-sm-4"><label for="name" class="control-label col-sm-4">事件等级：</label><div class="col-sm-7"><input type="hidden" ng-model="vm.formData.damageLevel"><select ng-change="vm.formData.damageLevel = (vm.metaData.levelList | filter:vm.formData.level.damageLevelName)[0].damageLevel" data="" class="form-controll input-sm" ng-options="level.damageLevelName for level in vm.metaData.levelList track by level.damageLevel" ng-model="vm.selectedLevel"></select></div></div><div class="form-group col-sm-4"><label for="name" class="control-label col-sm-4">上报科室：</label><div class="col-sm-7"><input type="hidden" ng-model="vm.formData.deptCode"><select ng-change="vm.formData.deptCode = (vm.metaData.deptList | filter:vm.formData.dept.deptName)[0].deptCode" data="" class="form-controll input-sm" ng-options="dept.deptName for dept in vm.metaData.deptList track by dept.deptCode" ng-model="vm.selectedDept"></select></div></div><div class="form-group col-sm-4"><label for="email" class="control-label col-sm-4">上报人：</label><div class="col-sm-7"><input type="hidden" ng-model="vm.formData.userCode"> <input readonly="" type="text" ng-model="vm.formData.userName" class="form-control input-sm"><div class="call-person_type"><label class="inline-radio"><input ng-model="vm.formData.userRole" value="当事人" name="userRole" type="radio"> 当事人</label> <label class="inline-radio"><input ng-model="vm.formData.userRole" value="目击者" name="userRole" type="radio"> 目击者</label></div></div></div><div class="form-group col-sm-12"><label for="email" class="control-label col-sm-1 fixed-label">发生时间：</label><div class="col-sm-2"><span class="input-group"><input ng-model="vm.formData.eventDate" type="text" id="eventDate" name="eventDate" required="" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.eventTimeOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openPicker()"><i class="fa fa-calendar"></i></button></span></span></div><div class="col-sm-4"><uib-timepicker template-url="app/common/tpls/timepicker/timepicer.html" ng-model="vm.formData.eventTime" class="time-picker" ng-change="vm.timeChanged()" hour-step="1" minute-step="1" show-meridian="ismeridian"></uib-timepicker></div></div><div class="form-group col-sm-4"><label for="name" class="control-label col-sm-4">住院号：</label><div class="col-sm-7"><input class="form-control input-sm" required="" ng-model="vm.formData.patientHospNo" type="text"></div></div><div class="form-group col-sm-4"><label for="email" class="control-label col-sm-4">床号：</label><div class="col-sm-7"><input type="text" ng-model="vm.formData.patientBedNo" class="form-control input-sm"></div></div><div class="form-group col-sm-4"><label for="email" class="control-label col-sm-4">姓名：</label><div class="col-sm-7"><input type="text" ng-model="vm.formData.patientName" class="form-control input-sm"></div></div><div class="form-group col-sm-4"><label for="email" class="control-label col-sm-4">性别：</label><div class="col-sm-7"><label class="radio-inline" ng-repeat="item in dicInfo.gender"><input type="radio" ng-model="vm.formData.patientGender" value="{{item.dicCode}}" name="gender"> {{item.dicName}}</label></div></div><div class="form-group col-sm-4"><label for="email" class="control-label col-sm-4">年龄：</label><div class="col-sm-7"><input type="text" ng-model="vm.formData.patientAge" class="form-control input-sm" style="width:4em;"></div></div><div class="form-group col-sm-12"><label class="col-sm-1 control-label fixed-label">诊断：</label><div class="col-sm-10"><input type="text" ng-model="vm.formData.patientDiagnose" class="form-control input-sm"></div></div><div class="form-group col-sm-12"><label class="col-sm-1 control-label fixed-label">事件类型：</label><div class="col-sm-10"><label class="event-type radio-inline" ng-repeat="eventType in vm.metaData.eventTypeList"><input ng-model="vm.formData.eventTypeCode" ng-checked="vm.formData.eventTypeCode == eventType.code" type="radio" value="{{eventType.code}}" name="eventTypeCode"> {{eventType.name}}</label></div></div><div class="form-group col-sm-12"><label class="col-sm-2 control-label">事件经过描述(5WH1)：</label><div class="col-sm-10"><textarea type="text" ng-model="vm.formData.eventDescribe" class="form-control input-sm"></textarea></div></div></div></div></div></form></div></div>'),e.put("app/malCaseUp/call/survey/survey.tpl.html",'<div class="col-md-12"><div class="panel panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><form class="w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="panel-heading"><i class="fa fa-list-alt"></i> <span>填写调查表</span><div class="pull-right"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveReportDetail()">保存</button> <button class="btn btn-sm btn-danger" type="button" w5c-form-submit="vm.saveReportDetail()">上报</button></div></div><div class="panel-body"><div class="container-fluid"><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">日期类型</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK01_medicine_none.value"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.dateType">{{item.dicName}}</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">不良事件发生地点</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK03_medicine_none.value"><option value="01">门诊</option><option value="02">急诊</option><option value="03">住院病房</option><option value="04">监护室</option><option value="05">留观察室</option><option value="06">公共服务设施</option><option value="07">卫生间</option><option value="08">转运图中</option><option value="09">手术室</option><option value="10">走廊</option><option value="11">其他</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">发生于何种服务</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK02_medicine_none.value"><option value="01">手术</option><option value="02">分娩</option><option value="03">治疗</option><option value="04">护理</option><option value="05">饮食</option><option value="06">公共服务设施</option><option value="07">卫生间</option><option value="08">清扫</option><option value="09">采集标本</option><option value="10">服务项目不明</option><option value="11">其他</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">事件给患者带来的损害</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK04_medicine_none.value"><option value="01">死亡</option><option value="02">植物人</option><option value="03">严重</option><option value="04">较重</option><option value="05">重</option><option value="06">中</option><option value="07">轻</option><option value="08">无</option><option value="09">抢救中</option><option value="10">不明</option><option value="11">其他</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人身份</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK05_medicine_none.value"><option value="01">注册护士</option><option value="02">返聘护士</option><option value="03">招聘护士</option><option value="04">进修护士</option><option value="05">见习护士</option><option value="06">实习护士</option><option value="07">护工</option><option value="08">其他</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">当事职务</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK06_medicine_none.value"><option value="01">护士长</option><option value="02">负护士长</option><option value="03">组长</option><option value="04">护士</option><option value="05">见习护士</option><option value="06">实习护士</option><option value="07">护工或陪护</option><option value="08">其他</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人年龄</label><div class="col-sm-5"><input class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK07_medicine_none.value"></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人所在科室</label><div class="col-sm-5"><input class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK08_medicine_none.value"></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">医院名称</label><div class="col-sm-5"><input class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK09_medicine_none.value"></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">医院级别</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK10_medicine_none.value"><option value="01">三级特等</option><option value="02">三级甲等</option><option value="03">三级乙等</option><option value="04">三级丙等</option><option value="05">二级级甲等</option><option value="06">二级乙等</option><option value="07">二级丙等</option><option value="08">一级级甲等</option><option value="09">一级乙等</option><option value="10">一级丙等</option><option value="11">未定级</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者角色</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK11_medicine_none.value"><option value="01">事件当事人</option><option value="02">同事</option><option value="03">旁观者</option><option value="04">其他</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者职务</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK12_medicine_none.value"><option value="01">注册护士</option><option value="02">返聘护士</option><option value="03">招聘护士</option><option value="04">进修护士</option><option value="05">见习护士</option><option value="06">实习护士</option><option value="07">护工</option><option value="08">其他</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者职称</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK13_medicine_none.value"><option value="01">主任护师</option><option value="02">副主任护师</option><option value="03">主管护师</option><option value="04">护师</option><option value="05">护士</option><option value="06">见习护士</option><option value="07">实习护士</option><option value="08">其他</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">联系电话</label><div class="col-sm-5"><input class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK14_medicine_none.value"></div></div></div><div class="row"><div class="col-md-12"><label class="control-label col-md-2">未尽补充事宜</label><div class="col-sm-9"><textarea class="form-control" type="text" ng-model="vm.formData.reportDetailList.malcase_XK16_medicine_none.value">\n              </textarea></div></div></div><p class="xk-title">与当事人可能相关的因素:</p><div class="row"><div class="form-group"><label class="control-label col-sm-1">确认</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_qr_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_qr_01.value"> 确认不认真</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_qr_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_qr_02.value"> 确认错误</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_qr_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_qr_03.value"> 没有执行确认程序</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_qr_04.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">观察</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_gc_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_gc_01.value"> 观察不仔细</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_gc_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_gc_02.value"> 没有进行观察</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_gc_03.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">判断</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_PJ_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_PJ_01.value"> 经验不足</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_PJ_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_PJ_02.value"> 判断有误</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_PJ_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_PJ_03.value"> 未执行诊疗常规</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_PJ_04.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">诊断</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_zj_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_zj_01.value"> 知识储备不足</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_zj_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_zj_02.value"> 应用知识有误</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_zj_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_zj_03.value"> 应急经验不足</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_zj_04.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">技能</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_jn_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_jn_01.value"> 不成熟技术</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_jn_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_jn_02.value"> 技术应用有误</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_jn_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_jn_03.value"> 未经卫生行政部门核准的技术</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_jn_04.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-2">不良事件发生原因</label><div class="col-sm-10"><div class="col-sm-7"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_physiological.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_physiological.value"> 病患生理因素</label>（ <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_old.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_old.value"> 年老体弱</label> <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_longSick.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_longSick.value"> 久病不愈</label> <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_worsen.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_worsen.value"> 病情恶化</label>）</div><div class="col-sm-5"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_mentality.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_mentality.value"> 病患心理因素</label>（ <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_badMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_badMind.value"> 情绪不稳</label> <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_lostMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_lostMind.value"> 精神失常</label>）</div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_artificia.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_artificia.value"> 人为因素</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value"> 医疗材料故障</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value"> 仪器故障</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value"> 设备故障</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_yard.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_yard.value"> 场地</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_environment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_environment.value"> 环境因素</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_winebowl.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_winebowl.value"> 酒瘾</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_drugster.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_drugster.value"> 毒瘾</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutSystem.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutSystem.value"> 与制度有关</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutFlow.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutFlow.value"> 与流程有关</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.malcase_reason_else.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label">不良事件发生的事实（包括不良事件发生经过，发生后治疗，发生后护理及发生后检查结果等情况，由当事人或发现者填写）：</label> <textarea name="name" ng-model="vm.formData.reportDetailList.malcase_truth.value" rows="3" cols="100" class="form-control input-sm"></textarea></div></div></div></div></form></div></div>'),e.put("app/malCaseUp/fix/caseInfo/caseInfo.tpl.html",'<div><div class="modal-body case-info-wrapper"><div class="container-fluid"><div class="label-group col-md-6"><label class="col-md-4 control-label">事件类型</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.eventTypeName}}</div></div><div class="label-group col-md-6"><label class="col-md-4 control-label">不良事件级别</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.damageLevelName}}</div></div><div class="label-group col-md-6"><label for="name" class="col-md-4 control-label">上报科室</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.deptName}}</div></div><div class="label-group col-md-6"><label class="control-label col-md-4">发生时间</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.eventTime}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">上报人</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.userName}}（{{vm.metaData.malCaseInfo.userRole}}）</div></div><div class="label-group col-md-6"><label for="name" class="col-md-4 control-label">患者住院号</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientHospNo}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者床号</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientBedNo}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者姓名</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientName}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者性别</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientGenderName}}</div></div><div class="label-group col-md-6"><label class="col-md-4 control-label">患者年龄</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientAge}}</div></div><div class="label-group col-md-12"><label class="col-md-2 control-label">患者诊断</label><div class="col-md-10 case-info">：{{vm.metaData.malCaseInfo.patientDiagnose}}</div></div><div class="label-group col-md-12"><label class="col-md-2 control-label">事件经过描述</label><div class="col-md-10 case-info">：{{vm.metaData.malCaseInfo.eventDescribe}}</div></div></div></div></div>'),
e.put("app/malCaseUp/fix/estimate/estimate.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="container-fluid"><div class="row"><ul class="list-group"><li ng-click="vm.fillItem(\'measure\', measure)" ng-class="{\'active\': vm.measure.meaCode == measure.meaCode}" class="list-group-item" ng-repeat="measure in vm.measureList track by $index">{{$index + 1}}. {{measure.meaContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{measure.userName}}</span></div><blockquote>{{!measure.resDescribe ? \'暂无评估\' : measure.resDescribe}}</blockquote></li><li class="list-group-item"><div class="form-group"><div class="col-sm-12"><textarea class="form-control input-sm" cols="50" rows="3" ng-disabled="!vm.measure.seqId" ng-model="vm.measure.resDescribe" placeholder="请选择措施">\n              </textarea></div></div><div class="form-group"><div class="col-sm-12"><button ng-click="vm.save()" class="btn btn-primary btn-sm" ng-disabled="vm.measure.resDescribe === \'\' || !vm.measure.resDescribe">提交评估</button></div></div></li></ul></div></div></form>'),e.put("app/malCaseUp/fix/measures/measures.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="container-fluid"><div class="row"><ul class="list-group"><li ng-class="{\'active\': vm.measure.meaCode == measure.meaCode}" class="list-group-item" ng-click="vm.fillItem(\'measure\', measure)" ng-repeat="measure in vm.measureList track by $index">{{$index + 1}}. {{measure.meaContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{measure.userName}}</span> <span style="margin-right:1em;">实施负责人：{{(vm.userList | filter:measure.headUserCode)[0].userName }}</span> <button class="btn btn-xs btn-danger" uib-tooltip="删除" ng-click="vm.removeListItem({index: $index, listName: \'measure\', meaCode: measure.meaCode, reportCode: vm.reportCode})"><span class="fa fa-trash"></span></button></div></li><li class="list-group-item"><div class="form-group"><label for="email" class="col-sm-2 control-label">措施实施负责人：</label><div class="col-sm-10"><input type="hidden" name="headUserCode" ng-model="vm.formData.headUserCode"><select class="form-controll input-sm" name="userName" ng-model="vm.formData.measure.headUserName" ng-change="vm.formData.measure.headUserCode = (vm.userList | filter:vm.formData.measure.headUserName)[0].userCode"><option ng-repeat="user in vm.userList" ng-selected="user.userCode == vm.formData.measure.headUserCode" value="{{user.userName}}">{{user.userName}}</option></select></div></div><div class="form-group"><label for="email" class="col-sm-2 control-label">整改措施：</label><div class="col-sm-10"><textarea class="form-control input-sm" cols="50" rows="3" ng-model="vm.formData.meaContent" placeholder="填写措施内容">\n              </textarea></div></div><div class="form-group"><label for="email" class="col-sm-2 control-label"></label><div class="col-sm-10"><button ng-click="vm.resetForm()" class="btn btn-primary btn-sm">清空</button> <button ng-click="vm.save()" class="btn btn-success btn-sm" ng-disabled="vm.formData.meaContent === \'\' || !vm.formData.meaContent">保存</button></div></div></li></ul></div></div></form>'),e.put("app/malCaseUp/fix/requirement/requirement.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="container-fluid"><div class="row"><ul class="list-group"><li class="list-group-item" ng-class="{\'active\': vm.requirement.reqCode == requirement.reqCode}" ng-click="vm.fillItem(\'requirement\', requirement)" ng-repeat="requirement in vm.requirementList track by $index">{{$index + 1}}. {{requirement.reqContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{requirement.userName}}</span> <button class="btn btn-xs btn-danger" uib-tooltip="删除" ng-click="vm.del({index: $index, listName: \'requirement\', seqId: requirement.seqId})"><span class="fa fa-trash"></span></button></div></li><li class="list-group-item"><div class="form-group"><div class="col-sm-12"><textarea class="form-control input-sm" cols="50" rows="3" ng-model="vm.formData.reqContent" placeholder="填写整改要求">\n              </textarea></div></div><div class="form-group">{{vm.formData}}<div class="col-sm-12"><button ng-click="vm.resetForm()" class="btn btn-primary btn-sm">清空</button> <button ng-click="vm.save()" class="btn btn-success btn-sm" ng-disabled="vm.formData.reqContent === \'\' || !vm.formData.reqContent">保存</button></div></div></li></ul></div></div></form>'),e.put("app/malCaseUp/fix/surveyInfo/surveyInfo.tpl.html",'<div class="container-fluid"><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">日期类型</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK01_medicine_none.value || \'无\'}}</span></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">不良事件发生地点</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK03_medicine_none.value}}</span></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">发生于何种服务</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK02_medicine_none.value}}</span></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">事件给患者带来的损害</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK04_medicine_none.value}}</span></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人身份</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK05_medicine_none.value}}</span></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">当事职务</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK06_medicine_none.value}}</span></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人年龄</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK07_medicine_none.value}}</span></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人所在科室</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK08_medicine_none.value}}</span></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">医院名称</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK09_medicine_none.value}}</span></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">医院级别</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK10_medicine_none.value}}</span></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者角色</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK11_medicine_none.value}}</span></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者职务</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK12_medicine_none.value}}</span></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者职称</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK13_medicine_none.value}}</span></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">联系电话</label><div class="col-sm-5"><span class="editable-label">{{vm.reportDetailList.malcase_XK14_medicine_none.value}}</span></div></div></div><div class="row"><div class="col-md-12"><label class="control-label col-md-2">未尽补充事宜</label><div class="col-sm-9"><span class="editable-label">{{vm.reportDetailList.malcase_XK16_medicine_none.value}}</span></div></div></div><p class="xk-title">与当事人可能相关的因素:</p><div class="row"><div class="form-group"><label class="control-label col-sm-1">确认</label><div class="col-sm-11"><span class="editable-label">{{vm.reportDetailList.dsr_qr_04.value}}</span></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">观察</label><div class="col-sm-11"><span class="editable-label">{{vm.reportDetailList.dsr_gc_01.value}}</span></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">判断</label><div class="col-sm-11"><span class="editable-label">{{vm.reportDetailList.dsr_PJ_04.value}}</span></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">诊断</label><div class="col-sm-11"><span class="editable-label">{{vm.reportDetailList.dsr_zj_04.value}}</span></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">技能</label><div class="col-sm-11"><span class="editable-label">{{vm.reportDetailList.dsr_jn_04.value}}</span></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-2">不良事件发生原因</label><div class="col-sm-10"><span class="editable-label">{{vm.reportDetailList.malcase_reason_else.value}}</span></div></div></div><div class="row"><div class="form-group"><label class="control-label">不良事件发生的事实（包括不良事件发生经过，发生后治疗，发生后护理及发生后检查结果等情况，由当事人或发现者填写）：</label> <span class="editable-label">{{vm.reportDetailList.malcase_truth.value}}</span></div></div></div>'),e.put("app/malCaseUp/handle/dispose/dispose.tpl.html",'<div class="col-md-12 handle-wrapper"><div class="panel panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="panel-heading"><i class="fa fa-list-alt"></i> <span>上报表单</span><div class="pull-right"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveReportDetail()">保存</button></div></div><div class="panel-body"><div class="container-fluid"><div class="row"><table class="table table-condensed table-bordered table-striped"><tr><th style="width: 5em;"></th><th class="text-center">不良事件发生前</th><th class="text-center">不良事件发生后</th></tr><tr><td>生命体征</td><td><div class="form-group"><label for="email" class="control-label">BP</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.bp_before.value" class="form-control input-sm"> mmHg</div><div class="form-group"><label for="email" class="control-label">P</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.p_before.value" class="form-control input-sm"> 次／分</div><br><div class="form-group"><label for="email" class="control-label">R</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.r_before.value" class="form-control input-sm"> 次／分</div><div class="form-group"><label for="email" class="control-label">T</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.t_before.value" class="form-control input-sm"> ℃</div></td><td><div class="form-group"><label for="email" class="control-label">BP</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.bp_after.value" class="form-control input-sm"> mmHg</div><div class="form-group"><label for="email" class="control-label">P</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.p_after.value" class="form-control input-sm"> 次／分</div><br><div class="form-group"><label for="email" class="control-label">R</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.r_after.value" class="form-control input-sm"> 次／分</div><div class="form-group"><label for="email" class="control-label">T</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.t_after.value" class="form-control input-sm"> ℃</div></td></tr><tr><td>精神状况</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_clear_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_clear_before.value" type="checkbox"> 神志清</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_directive_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_directive_before.value" type="checkbox"> 有定向力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_upset_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" tng-model="vm.formData.reportDetailList.psychosis_upset_before.value" type="checkbox"> 不安</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_undiscerned_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_undiscerned_before.value" type="checkbox"> 无定力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_halfComa_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_halfComa_before.value" type="checkbox"> 半昏迷</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_coma_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_coma_before.value" type="checkbox"> 昏迷</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.psychosis_else_before.value" class="input-sm form-control"></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_clear_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_clear_after.value" type="checkbox"> 神志清</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_directive_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_directive_after.value" type="checkbox"> 有定向力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_upset_after.value = \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" tng-model="vm.formData.reportDetailList.psychosis_upset_after.value" type="checkbox"> 不安</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_undiscerned_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_undiscerned_after.value" type="checkbox"> 无定力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_halfComa_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_halfComa_after.value" type="checkbox"> 半昏迷</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_coma_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_coma_after.value" type="checkbox"> 昏迷</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.psychosis_else_after.value" class="input-sm form-control"></div></div></td></tr><tr><td>运动</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_self_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_self_before.value"> 独立</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_assist_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_assist_before.value"> 辅助支持</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_limit_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_limit_before.value"> 限制在床/轮椅</label></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_self_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_self_after.value" type="checkbox"> 独立</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_assist_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_assist_after.value" type="checkbox"> 辅助支持</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_limit_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_limit_after.value" type="checkbox"> 限制在床/轮椅</label></div></div></td></tr><tr><td>残疾</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_none_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_none_before.value"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_auditionDown_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_auditionDown_before.value"> 听力下降</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_costive_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_costive_before.value"> 行动不便</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_unclearEyed_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_unclearEyed_before.value"> 视力缺损</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.deformity_else_before.value" class="input-sm form-control"></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_none_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_none_after.value" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_auditionDown_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_auditionDown_after.value" type="checkbox"> 听力下降</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_costive_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_costive_after.value" type="checkbox"> 行动不便</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_unclearEyed_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_unclearEyed_after.value" type="checkbox"> 视力缺损</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.deformity_else_after.value" class="input-sm form-control"></div></div></td></tr><tr><td>其他说明</td><td><textarea name="name" ng-model="vm.formData.reportDetailList.elsedeclare_before.value" rows="2" cols="50" class="form-control input-sm"></textarea></td><td><textarea name="name" ng-model="vm.formData.reportDetailList.elsedeclare_after.value" rows="2" cols="50" class="form-control input-sm"></textarea></td></tr></table></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生24小时内用药：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_none.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_none.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_diuretic.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_diuretic.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 利尿剂</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_nicotine.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_nicotine.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 尼古丁／镇静</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_high_handed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_high_handed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 抗高压</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_depressed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_depressed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 抗抑郁</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_24_medicine_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生前采取的特殊预防措施：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_none.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_none.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_accompany.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_accompany.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 陪伴</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_informed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_informed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 已告知</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_guardrail.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_guardrail.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 床边扶栏</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_motionDevice.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_motionDevice.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 动作设备</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_sign.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_sign.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 标识</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_closestool.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_closestool.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 床边便器</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_restlessLimit.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_restlessLimit.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 躁动约束</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_riskWarning.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_riskWarning.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 风险预警</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_before_measures_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生地点：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_ward.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_ward.value"> 病房</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_treatmentRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_treatmentRoom.value"> 治疗室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_changeRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_changeRoom.value"> 换药室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_handleRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_handleRoom.value"> 处置室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_corridor.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_corridor.value"> 走廊</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_washroom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_washroom.value"> 厕所</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_outDepartment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_outDepartment.value"> 病区外</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_happen_addr_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生原因：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_physiological.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_physiological.value"> 病患生理因素</label></div>（<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_old.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_old.value"> 年老体弱</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_longSick.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_longSick.value"> 久病不愈</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_worsen.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_worsen.value"> 病情恶化</label></div>）<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_mentality.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_mentality.value"> 病患心理因素</label></div>（<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_badMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_badMind.value"> 情绪不稳</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_lostMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_lostMind.value"> 精神失常</label></div>）<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_artificia.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_artificia.value"> 人为因素</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value"> 医疗材料故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value"> 仪器故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value"> 设备故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_yard.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_yard.value"> 场地</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_environment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_environment.value"> 环境因素</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_winebowl.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_winebowl.value"> 酒瘾</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_drugster.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_drugster.value"> 毒瘾</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutSystem.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutSystem.value"> 与制度有关</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutFlow.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutFlow.value"> 与流程有关</label></div><div class="checkbox"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control" ng-model="vm.formData.reportDetailList.malcase_reason_else.value"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件目击：</label><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_witness.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生的事实（包括不良事件发生经过，发生后治疗，发生后护理及发生后检查结果等情况，由当事人或发现者填写）：</label> <textarea name="name" ng-model="vm.formData.reportDetailList.malcase_truth.value" rows="3" cols="100" class="form-control input-sm"></textarea></div></div></div></div></form></div></div>'),
e.put("app/malCaseUp/handle/dispose/placeholder.html",'<div class="col-md-12"><div class="panel panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>填写不良事件上报表</span></div><div class="panel-body"><div class="row"><div class="col-md-3"><ul class="event-flow"><li class="event-flow_item"><a href=""><div class="event-flow_number">1</div><div>不良事件信息</div></a></li><li class="event-flow_item"><a href=""><div class="event-flow_number">2</div><div>调查处理</div></a></li><li class="event-flow_item"><a href=""><div class="event-flow_number">3</div><div>整改要求</div></a></li><li class="event-flow_item"><a href=""><div class="event-flow_number">4</div><div>整改措施</div></a></li><li class="event-flow_item"><a href=""><div class="event-flow_number">5</div><div>效果评估</div></a></li></ul></div><div class="col-md-9"></div></div></div></div></div>'),e.put("app/malCaseUp/handle/estimate/estimate.tpl.html",""),e.put("app/malCaseUp/handle/rectify/rectify.tpl.html",""),e.put("app/quality/setting/group/group.modal.html",'<div class="quality-add-group-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">新增质控组</h5></div><div class="modal-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addbedForm" form="addbedForm"><div class="form-wrapper"><div class="text-input clearfix"><div class="col-xs-5"><label for="teamName" class="control-label col-xs-2">组名</label><div class="col-xs-10 no-padding"><input class="form-control input-sm" name="teamName" required="" autocomplete="off" ng-model="vm.formData.teamName" type="text" id="teamName"></div></div><div class="col-xs-2"></div><div class="col-xs-5" ng-class="{disappear: !vm.grouped.yes.length}"><label for="area" class="control-label col-xs-2">组长</label><div class="col-xs-10 no-padding"><select class="form-control input-sm" id="area" ng-model="vm.formData.teamLeader"><option ng-repeat="item in vm.grouped.yes" value="{{item.userCode}}">{{item.userName}}</option></select></div></div></div><div class="select-input"><div class="col-xs-5"><div class="panel panel-danger"><div class="panel-heading"><i class="fa fa-bars"></i> <span>未添加的组员</span></div><input class="form-control input-sm user-filter" type="text" ng-model="vm.userFilter"><ul class="user-list unchoosed-user-list"><li ng-repeat="item in vm.grouped.no | filter: {userName: vm.userFilter} | orderBy: \'userCode\'" ng-click="vm.choose(item)">{{item.userName}}</li></ul></div></div><div class="col-md-2 exchange-icon"><div class="text-center"><i class="fa fa-exchange"></i></div></div><div class="col-xs-5"><div class="panel panel-success"><div class="panel-heading"><i class="fa fa-bars"></i> <span>已添加的组员</span></div><ul class="user-list choosed-user-list"><li ng-repeat="item in vm.grouped.yes | orderBy: \'userCode\'" ng-click="vm.remove(item)">{{item.userName}}</li></ul></div></div></div><div class="text-center"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></form></div></div>'),e.put("app/quality/setting/group/group.tpl.html",'<div class="wrapper quality-check-wrapper padding-content"><ul class="page-nav clearfix"><li class="active"><a ui-sref="home.qualityForm">质控组设置</a></li><li><a ui-sref="home.qualityModel">模板设置</a></li></ul><div class="group-teimplate-wrapper" ng-controller="QualityGroupCtrl as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid form-inline"><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.open()">新增质控组</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered no-border"><thead><tr class="header-export"><th>序号</th><th>名称</th><th>组长</th><th>组员</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td class="text-center">{{ $index + 1 }}</td><td class="text-center">{{ row.teamName }}</td><td class="text-center">{{ vm.userHelper.getUserName(row.teamLeader) }}</td><td class="text-center"><span ng-repeat="item in row.userList">{{vm.userHelper.getUserName(item)}}&nbsp;</span></td><td class="text-center"><button class="btn btn-primary btn-xs" ng-click="vm.open(row)" ng-if="!row.isEditing"><span class="fa fa-pencil"></span>编辑</button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span>删除</button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></div>'),e.put("app/quality/setting/template/add.modal.html",'<div class="quality-add-form-modal-wrapper"><form class="form-inlne form-horizontal w5c-form" name="addQualityForm" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" form="addQualityForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">模板项目</h5></div><div class="modal-body clearfix"><div class="form-group"><label for="cate" class="control-label col-xs-2 partial-label">类别：</label><div class="col-xs-10"><input type="text" class="form-control input-sm" ng-model="vm.cateText" ng-change="vm.pChange()" autocomplete="off" list="cateList" id="cate" required=""><datalist id="cateList"><option value="{{item.formName}}" ng-repeat="item in vm.parent"></option></datalist></div></div><div class="form-group"><label for="subcate" class="control-label col-xs-2 partial-label">子类别：</label><div class="col-xs-10"><input type="text" class="form-control input-sm" ng-model="vm.subCateText" ng-change="vm.sChange()" autocomplete="off" id="subcate" list="subcateList" required=""><datalist id="subcateList"><option value="{{item.formName}}" ng-repeat="item in vm.son"></option></datalist></div></div><div class="form-group"><div class="col-xs-8 no-padding"><label class="control-label col-xs-3 partial-label">项目：</label><div class="col-xs-9"><input type="text" class="input-sm form-control" ng-model="vm.formData.detailName" required=""></div></div><div class="col-xs-4 no-padding"><label class="control-label col-xs-4 partial-label">分值：</label><div class="col-xs-8"><input type="number" class="input-sm form-control" ng-model="vm.formData.points" required=""></div></div></div><div class="form-group"><label class="control-label col-xs-2 partial-label">描述：</label><div class="col-xs-10"><textarea class="form-control" ng-model="vm.formData.descrip" required=""></textarea></div></div><div class="form-group"><label class="control-label col-xs-2 partial-label">考核方法：</label><div class="col-xs-10"><textarea class="form-control" ng-model="vm.formData.stantard" required=""></textarea></div></div></div><div class="modal-footer clearfix"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/quality/setting/template/add.tpl.html",'<div class="wrapper quality-add-form-wrapper padding-content"><uib-tabset active="active"><uib-tab index="0" heading="质量检查模板编辑"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid form-inline"><div class="filter-item"><label for="formName">模板名称：</label> <input class="input-sm form-control" id="formName" ng-model="vm.formData.modelName"></div><div class="filter-item"><label>是否启用</label> <input type="checkbox" ng-model="vm.formData.isUsed" ng-true-value="\'1\'" ng-false-value="\'0\'"></div><div class="filter-item">项目累计分值：{{vm.totalScore}}</div><div class="pull-right"><button class="btn btn-success btn-sm" ng-click="vm.save()">保存</button> <button class="btn btn-primary btn-sm" ng-click="vm.open()">新增项目</button></div></div><div class="panel-body"><table class="table table-condensed table-bordered no-border"><thead><tr class="header-export"><th>类别</th><th>子类别</th><th>项目</th><th>描述</th><th>考核办法</th><th>分值</th><th print-remove="">操作</th></tr></thead><tbody><tr class="row-{{$index}}" ng-repeat="row in vm.lst"><td class="grey-td" ng-if="vm.tableLayout(row.item, row.cate)" ng-attr-rowspan="{{vm.tableLayout(row.item, row.cate)}}">{{row.cate}}</td><td class="grey-td" ng-if="vm.tableLayout(row.item, row.cate, row.subcate)" ng-attr-rowspan="{{vm.tableLayout(row.item, row.cate, row.subcate)}}">{{row.subcate}}</td><td class="text-center">{{ row.item }}</td><td class="text-center">{{ row.descrip }}</td><td class="text-center">{{ row.stantard }}</td><td class="text-center">{{ row.points }}</td><td class="text-center"><button class="btn btn-default btn-xs" ng-click="vm.open(row, $index + 1)" ng-if="!row.isEditing"><span class="fa fa-pencil"></span>编辑</button> <button class="btn btn-danger btn-xs" ng-click="vm.del($index)"><span class="fa fa-trash"></span>删除</button></td></tr></tbody></table></div></div></uib-tab></uib-tabset></div>'),e.put("app/quality/setting/template/template.tpl.html",'<div class="wrapper quality-check-wrapper padding-content"><ul class="page-nav clearfix"><li><a ui-sref="home.qualityForm">质控组设置</a></li><li class="active"><a ui-sref="home.qualityModel">模板设置</a></li></ul><div class="quality-template-wrapper" ng-controller="QualityFormController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid form-inline"><div class="pull-right"><a class="btn btn-sm btn-primary" ui-sref="home.qualityFormAdd">新增模板</a></div></div><div class="panel-body"><table print-table="vm.list" class="table table-hover table-condensed table-bordered no-border"><thead><tr class="header-export"><th>名称</th><th>创建人</th><th>创建时间</th><th>是否启用</th><th>总分</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td class="text-center">{{ row.name }}</td><td class="text-center">{{ row.creator }}</td><td class="text-center">{{ row.createTime }}</td><td class="text-center">{{ row.flag }}</td><td class="text-center">{{ row.score }}</td><td class="text-center"><a class="btn btn-default btn-xs" ui-sref="home.qualityFormAdd" ng-if="!row.isEditing"><span class="fa fa-pencil"></span>编辑</a> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span>删除</button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></div>')}]);