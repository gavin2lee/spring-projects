!function(){"use strict";angular.module("nqms",["ngLocale","ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","toastr","w5c.validator","ngTable","AngularPrint","ui.grid","smart-table","echarts-ng","treeControl","angularFileUpload"])}(),function(){"use strict";function t(){return{restrict:"A",templateUrl:function(t,e){return e.tplSrc||""},link:function(t,e){e.addClass("tr-expand")}}}function e(){return{restrict:"A",template:"<i class=\"fa\" ng-class=\"{'fa-caret-right': vm.expanedIndex !== $index, 'fa-caret-down': vm.expanedIndex == $index}\">",link:function(t,e,a){var s=e.parent()[0],n=a.gridExpandMethod,l=t.$parent.vm;l.expanded=!1,e.addClass("td-expand print-remove"),e.unbind().bind("click",function(){var e=s.querySelectorAll("td").length;l.expanded&&l.expanedIndex===t.$index||!n||""===n?(l.expanedIndex=null,l.expanded=!1):(l[n](t.row[a.gridP]),l.expanedIndex=t.$index,l.expanded=!0),t.tdLen=e})}}}angular.module("nqms").directive("gridExpand",t).directive("gridExpandTrigger",e)}(),function(){"use strict";function t(){return{require:"^stTable",template:'<input type="checkbox"/>',scope:{row:"=gridCheckbox"},link:function(t,e,a,s){e.addClass("print-remove"),e.bind("change",function(){t.$apply(function(){s.select(t.row,"multiple")})}),t.$watch("row.isSelected",function(t){var a,s=document.querySelector("#printWindow");s&&(a=s.contentWindow);var n,l="."+Array.prototype.find.call(e.parent()[0].classList,function(t){return t.indexOf("row")>=0});""!==l&&l&&a&&(n=a.document.querySelector(l)),t===!0?(e.parent().addClass("active print-remove"),n&&angular.element(n).addClass("print-remove")):(e.parent().removeClass("active print-remove"),n&&angular.element(n).removeClass("print-remove")),e[0].querySelector("input").checked="undefined"!=typeof t||t?t:!1})}}}angular.module("nqms").directive("gridCheckbox",t)}(),function(){"use strict";function t(){return{restrict:"E",template:'<input type="checkbox" ng-model="isAllSelected" />',scope:{all:"="},link:function(t,e){e.parent().addClass("checkbox-td print-remove"),t.$watch("isAllSelected",function(){"undefined"!=typeof t.all&&t.all.forEach(function(e){e.isSelected=t.isAllSelected})}),t.$watch("all",function(e,a){a&&a.forEach(function(t){t.isSelected=!1}),t.isAllSelected=!1})}}}angular.module("nqms").directive("gridCheckAll",t)}(),function(){"use strict";function t(t){function e(e,a,s){a.css("position")&&"static"!==a.css("position")||a.css("position","relative");var n=e.options,l=e.options.func;n.func=function(){t(function(){e.$broadcast("loading",e.type)}),l().then(function(){t(function(){e.$broadcast("loaded",e.type)})})},n.init&&n.func(n.params)}return{restrict:"A",template:'<div ng-transclude></div><loading type="{{type}}"></loading>',scope:{type:"@loadingType",options:"=loadingOptions",init:"@loadingInit"},link:e,transclude:!0}}t.$inject=["$timeout"],angular.module("nqms").directive("loadingWrapper",t)}(),function(){"use strict";function t(t){function e(t,e,a){t.$on("loading",function(t,s){s===a.type&&e.show()}),t.$on("loaded",function(t,s){s===a.type&&e.hide()})}return{restrict:"E",template:'<div class="loading-wrapper"> <div class="spinner"> <div class="spinner-container container1"> <div class="circle1"></div> <div class="circle2"></div> <div class="circle3"></div> <div class="circle4"></div> </div> <div class="spinner-container container2"> <div class="circle1"></div> <div class="circle2"></div> <div class="circle3"></div> <div class="circle4"></div> </div> <div class="spinner-container container3"> <div class="circle1"></div> <div class="circle2"></div> <div class="circle3"></div> <div class="circle4"></div> </div> </div> </div> ',link:e,scope:!0,replace:!0}}t.$inject=["$http"],angular.module("nqms").directive("loading",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(){return h}function r(t){h=t}function d(){h=null}function c(){return angular.fromJson(a.sessionStorage.getItem("userinfo"))}function m(t){a.sessionStorage.setItem("userinfo",angular.toJson(t))}function p(){a.sessionStorage.removeItem("userinfo")}function u(e){return t.post(o.system.login,e)}function v(e){return t.get(o.system.getRoleList,{params:e})}function b(e){return t.get(o.system.getNavigation,{params:{roleCode:e.roleCode,userRoleId:e.seqId}})}function f(t,e){h.tab[t]=e,m(h)}function g(t){delete h.tab[t],m(h)}var h,y={getUserinfo:i,setUserinfo:r,clearUserinfo:d,getCacheUser:c,setCacheUser:m,clearCacheUser:p,login:u,getUserRoleList:v,getNavigation:b,addToBreadcrumb:f,removeFromBreadcrumb:g,minMode:!1};return y}t.$inject=["$http","$log","$window","$location","$timeout","$state","apiHost"],angular.module("nqms").factory("security",t)}(),function(){"use strict";function t(t,e,a){return{request:function(t){return t||a.when(t)},requestError:function(s){return e.info("请求失败："+s.statusText,s),t.$broadcast("toast",{type:"error",content:"请检查网络连接或联系服务器管理员！",title:"请求错误"}),a.reject(s)},response:function(e){return-2==e.data.code&&t.$broadcast("logout"),-1==e.data.code&&t.$broadcast("toast",{type:"error",content:e.data.msg}),e.data.code&&0!=e.data.code?a.reject("code error"):e||a.when(e)},responseError:function(s){return e.info("响应失败："+s.statusText,s),t.$broadcast("toast",{type:"error",content:"错误码："+s.status+"<br> URL："+(s.config&&s.config.url||"")+"\n "+(s.message||"")+"<br> 请检查网络连接或联系服务器管理员！",title:"没有响应"}),a.reject(s)}}}t.$inject=["$rootScope","$log","$q"],angular.module("nqms").factory("myHttpInterceptor",t)}(),function(){"use strict";function t(t,e){function a(a){var s=e.system.getDic;return t[s.method](s.url,[{dicType:a}])}var s={getSysDic:a};return s}t.$inject=["$http","apiHost"],angular.module("nqms").factory("dicService",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(t){function n(t){return"0"===t.data.code?(l.getUserinfo().role.deptCode||(i.deptList=t.data.data),t.data.data):void s.error("获取科室数据失败！\n"+t.data.msg)}function o(t){s.error("获取科室数据失败！\n"+angular.toJson(t.data,!0))}return e.get(a.user.getDept,{params:{deptCode:t||l.getUserinfo().role.deptCode}}).then(n)["catch"](o)}var i={apiHost:a,getDeptData:o,deptList:[]};return i}t.$inject=["$window","$http","apiHost","$log","toastr","security"],angular.module("nqms").factory("deptService",t)}(),function(){"use strict";function t(t){return{restrict:"E",scope:{list:"="},replace:!0,templateUrl:"app/common/noneDataInfo/noneDataInfo.tpl.html",link:function(e,a){e.isLoading=function(){return t.pendingRequests.length>0},e.$watch(e.isLoading,function(t){t||e.list&&0!==e.list.length?a[0].setAttribute("style","display: none"):a[0].setAttribute("style","display: block")})}}}t.$inject=["$http"],angular.module("nqms").directive("noneDataInfo",t)}(),function(){"use strict";function t(t,e){return{open:function(e){t.open({templateUrl:e.templateUrl,size:e.size,backdrop:"static",appendTo:e.appendTo,animation:e.animation||!0,controller:"ModalController",controllerAs:"vm",resolve:{initFn:function(){return e.initFn},ok:function(){return e.ok},data:function(){return e.data?e.data:void 0},methodsObj:function(){return e.methodsObj?e.methodsObj:void 0}}})},close:function(t){e.dismissAll(t)}}}t.$inject=["$uibModal","$uibModalStack"],angular.module("nqms").factory("modalService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){var i=this;if(i.rootScope=t,i.scope=e,i.formData=n&&n.formData,i.metaData=n&&n.metaData,angular.isObject(l))for(var r in l)"function"==typeof l[r]&&(i[r]=l[r]);else l&&$log.error("methodsObj必须是对象!");o&&o(i),i.ok=function(){s(i.formData)},i.cancel=function(){a.dismiss("cancel")}}t.$inject=["$rootScope","$scope","$uibModalInstance","ok","data","methodsObj","initFn"],angular.module("nqms").controller("ModalController",t)}(),function(){"use strict";function t(t,e,a,s,n){function l(e,a){return t({url:e,method:"POST",data:a}).then(o)}function o(t){return"0"===t.data.code?t:void 0}var i={downloadExcel:l};return i}t.$inject=["$http","$log","$q","toastr","security"],angular.module("nqms").factory("exportExcelService",t)}(),function(){"use strict";function t(t){return{restrict:"E",scope:{},controller:"ExportExcelController",controllerAs:"vm",replace:!0,bindToController:{exslSrc:"=",classList:"="},templateUrl:"app/common/exportExcel/exportExcel.tpl.html"}}t.$inject=["$http"],angular.module("nqms").directive("exportExcel",t)}(),function(){"use strict";function t(t,e,a){function s(){var t,e,a=document.querySelectorAll(".table[st-table] .header-export th"),s=document.querySelectorAll(".table[st-table] tbody td");return t=[].map.call(a,function(t){return t.textContent}),e=[].map.call(s,function(t){return t.textContent}),{header:t,body:e}}function n(e){var n=s();a.downloadExcel(e,n).then(function(e){e&&t.$broadcast("toast",{type:"success",content:"导出成功！"})})}var l=this;l.doExport=n}t.$inject=["$rootScope","$http","exportExcelService"],angular.module("nqms").controller("ExportExcelController",t)}(),function(){"use strict";angular.module("nqms").filter("capitalize",function(){return function(t){return t?t[0].toUpperCase()+t.slice(1):void 0}})}(),function(){"use strict";function t(){return{restrict:"C",link:function(t,e,a){e.click(function(){e.find(".edit-text-dir").hide(),e.find(".edit-input-dir").show()})}}}function e(){return{restrict:"C",link:function(t,e,a){}}}function a(){return{restrict:"C",link:function(t,e,a){}}}angular.module("nqms").directive("editCellDir",t).directive("editTextDir",e).directive("editInputDir",a)}(),function(){"use strict";function t(){return{restrict:"A",scope:{},controller:"EditableController",controllerAs:"vm",bindToController:{mainCtrl:"=editableForm",name:"=formName"},link:function(t,e,a){t.$parent.editableForm=a.name,t.$parent[a.name].showEdit=function(){t.$parent.isEditing=!0,e.addClass("form-editing")},t.$parent[a.name].endEdit=function(){t.$parent.isEditing=!1,e.removeClass("form-editing")}}}}function e(){return{restrict:"A",scope:!1,require:"?^editableForm",link:function(t,e,a,s){s&&t.$watch("isEditing",function(t){t?e.css("display","inline-block"):e.css("display","none")})}}}function a(){return{restrict:"A",scope:!1,require:"?^editableForm",link:function(t,e,a,s){s&&t.$watch("isEditing",function(t){t?e.css("display","none"):e.css("display","block")})}}}function s(){return{restrict:"A",scope:!1,require:"?^editableForm",link:function(t,e,a,s){s&&t.$watch("isEditing",function(t){t?e.css("display","none"):e.css("display","inline-block")})}}}function n(){return{restrict:"A",scope:!1,require:"?^editableForm",link:function(t,e,a,s){s&&t.$watch("isEditing",function(t){t?e.css("display","inline-block"):e.css("display","none")})}}}angular.module("nqms").directive("editableForm",t).directive("editableInput",e).directive("editableStart",a).directive("editableLabel",s).directive("editableEnd",n)}(),function(){"use strict";function t(t,e){var a=this;a.isEditing=!1,e.$parent.editableForm=a.name}t.$inject=["$rootScope","$scope"],angular.module("nqms").controller("EditableController",t)}(),function(){"use strict";function t(t){var e={restrict:"A",require:"ngModel",link:function(t,e,a,s){s.$formatters.shift(),s.$formatters.shift(),s.$parsers.shift()}};return e}t.$inject=["$filter"],angular.module("nqms").directive("timestampToString",t)}(),function(){"use strict";function t(){var t={restrict:"A",link:function(t,e,a){var s=e.find(".list-content");e.css({height:innerHeight-e.offset().top-10}),s.length>0&&e.find(".list-content").css({height:innerHeight-e.offset().top-e.find(".list-content").position().top-36})}};return t}angular.module("nqms").directive("fullHeight",t)}(),function(){"use strict";function t(t){var e=t("date"),a={restrict:"A",require:"ngModel",link:function(t,a,s,n){n.$formatters.shift(),n.$formatters.shift(),n.$formatters.unshift(function(t){var a;return a="month"==s.commonPicker?e(t,"yyyy-MM"):e(t,"yyyy")}),n.$parsers.push(function(t){var n;return n="month"==s.commonPicker?e(t,"yyyy-MM"):e(t,"yyyy"),a.val(n),t})}};return a}t.$inject=["$filter"],angular.module("nqms").directive("commonPicker",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i){function r(){y.getPosStatement(),y.getPreJobTrain(),y.getAssessment(),y.getConEducation(),y.getCprAcls(),y.getEduRecord()}function d(){var e=_.pick(b.detail.info,"seqId","deptCode","hisCode","userName","birthday","gender","graduationDate","graduationSchool","education");o.updateNurseInfo(e).then(function(){t.$broadcast("toast",{type:"success",content:"保存成功"})})}function c(){a.dismiss()}function m(t){b.detail[t].push(angular.copy(D[t]))}function p(e,a){var s=o["save"+h(e)],n=y["get"+h(e)],a=angular.extend({},a);v(a),s(a).then(function(){t.$broadcast("toast",{type:"success",content:"保存成功"}),n()})}function u(e,a,s){if(a){var n=o["delete"+h(e)],l=y["get"+h(e)];n(a).then(function(){t.$broadcast("toast",{type:"success",content:"删除成功"}),l()})}else b.detail[e].splice(s,1)}function v(t){for(var e in t)e.indexOf("IsOpen")>-1&&delete t[e];return t.userCode=f.userCode,t.userName=f.userName,t}var b=this,f=i,g=f.userCode,h=s("capitalize"),y={getPosStatement:function(){o.getPosStatement(g).then(function(t){b.detail.posStatement=t.data.data})},getPreJobTrain:function(){o.getPreJobTrain(g).then(function(t){b.detail.preJobTrain=t.data.data})},getAssessment:function(){o.getAssessment(g).then(function(t){b.detail.assessment=t.data.data})},getConEducation:function(){o.getConEducation(g).then(function(t){b.detail.conEducation=t.data.data})},getCprAcls:function(){o.getCprAcls(g).then(function(t){b.detail.cprAcls=t.data.data})},getEduRecord:function(){o.getEduRecord(g).then(function(t){b.detail.eduRecord=t.data.data})}},D={posStatement:{},preJobTrain:{rank:"全院",assessmentCondition:"合格"},assessment:{},conEducation:{rank:"全院"},cprAcls:{assessmentContent:"合格"},eduRecord:{rank:"全院",assessmentResult:"合格"}};b.detail={info:f},b.rankArray=["全院","护理部","科室"],b.resultArray=["合格","不合格"],b.save=d,b.cancel=c,b.addItem=m,b.saveItem=p,b.removeItem=u,r()}t.$inject=["$rootScope","$scope","$uibModalInstance","$filter","NgTableParams","deptService","techFilesJCIService","id"],angular.module("nqms").controller("JCIModalController",t)}(),function(){"use strict";function t(t,e,a){function s(t){var a=r.getNurseList;return e[a.method](a.url,{params:{deptCode:t}})}function n(t){var a=r.updateNurseInfo;return e[a.method](a.url,{comUser:t,dataType:"comUser"})}function l(t){return function(a){var s=r[t].getter;return e[s.method](s.url,{userCode:a})}}function o(t){return function(a){var s=r[t].setter;return e[s.method](s.url,a)}}function i(t){return function(a){var s=r[t].deleter;return e[s.method](s.url,{params:{seqId:a}})}}var r=a.techFiles,d={getNurseList:s,updateNurseInfo:n,getPosStatement:l("posStatement"),savePosStatement:o("posStatement"),deletePosStatement:i("posStatement"),getPreJobTrain:l("preJobTrain"),savePreJobTrain:o("preJobTrain"),deletePreJobTrain:i("preJobTrain"),getAssessment:l("assessment"),saveAssessment:o("assessment"),deleteAssessment:i("assessment"),getConEducation:l("conEducation"),saveConEducation:o("conEducation"),deleteConEducation:i("conEducation"),getCprAcls:l("cprAcls"),saveCprAcls:o("cprAcls"),deleteCprAcls:i("cprAcls"),getEduRecord:l("eduRecord"),saveEduRecord:o("eduRecord"),deleteEduRecord:i("eduRecord")};return d}t.$inject=["$window","$http","apiHost"],angular.module("nqms").factory("techFilesJCIService",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(e){l.delNurseJCI(e).then(function(e){t.$broadcast("toast",{type:"success",content:"删除成功"}),r()})}function i(t){var e=a.open({templateUrl:"app/techFiles/jci/modal.tpl.html",controller:"JCIModalController",controllerAs:"vm",backdrop:"static",animation:!0,size:"xlg",resolve:{id:function(){return angular.extend({deptCode:c.selectedDept},t)}}});e.result["finally"](function(){r()})}function r(t){c.expanedIndex=null,c.expanded=!1,t?c.selectedDept=t:t=c.selectedDept,l.getNurseList(t).then(function(t){c.data=t.data.data.lst})}function d(t){l.getPosStatement(t).then(function(t){c.detail.posStatement=t.data.data}),l.getPreJobTrain(t).then(function(t){c.detail.preJobTrain=t.data.data}),l.getAssessment(t).then(function(t){c.detail.assessment=t.data.data}),l.getConEducation(t).then(function(t){c.detail.conEducation=t.data.data}),l.getCprAcls(t).then(function(t){c.detail.cprAcls=t.data.data}),l.getEduRecord(t).then(function(t){c.detail.eduRecord=t.data.data})}var c=this;c.rootScope=t,c.scope=e,c.del=o,c.open=i,c.load=r,c.loadDetail=d,c.detail={},c.genders=["女","男"],s.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a})})}t.$inject=["$rootScope","$scope","$uibModal","deptService","NgTableParams","techFilesJCIService"],angular.module("nqms").controller("TechFileJCIController",t)}(),function(){"use strict";function t(t,e,a){function s(t){var a=r.getNurseList;return e[a.method](a.url,{params:{deptCode:t}})}function n(t){var a=r.updateNurseInfo;return e[a.method](a.url,{comUser:t,dataType:"comUser"})}function l(t){return function(a){var s=r[t].getter;return e[s.method](s.url,{userCode:a})}}function o(t){return function(a){var s=r[t].setter;return e[s.method](s.url,a)}}function i(t){return function(a){var s=r[t].deleter;return e[s.method](s.url,{params:{seqId:a}})}}var r=a.techFiles,d={getNurseList:s,updateNurseInfo:n,getNurseHirReg:l("nurseHirReg"),saveNurseHirReg:o("nurseHirReg"),deleteNurseHirReg:i("nurseHirReg"),getNurseExp:l("nurseExp"),saveNurseExp:o("nurseExp"),deleteNurseExp:i("nurseExp"),getAcademic:l("academic"),saveAcademic:o("academic"),deleteAcademic:i("academic"),getAwardPunish:l("awardPunish"),saveAwardPunish:o("awardPunish"),deleteAwardPunish:i("awardPunish"),getPerAssessment:l("perAssessment"),savePerAssessment:o("perAssessment"),deletePerAssessment:i("perAssessment")};return d}t.$inject=["$window","$http","apiHost"],angular.module("nqms").factory("techFilesService",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(e){l.delNurseJCI(e).then(function(e){t.$broadcast("toast",{type:"success",content:"删除成功"}),r()})}function i(t){var e=a.open({templateUrl:"app/techFiles/techFiles/modal.tpl.html",controller:"TechModalController",backdrop:"static",controllerAs:"vm",animation:!0,size:"xlg",resolve:{id:function(){return angular.extend({deptCode:c.selectedDept},t)}}});e.result["finally"](function(){r()})}function r(t){c.expanedIndex=null,c.expanded=!1,t?c.selectedDept=t:t=c.selectedDept,l.getNurseList(t).then(function(t){c.data=t.data.data.lst})}function d(t){l.getNurseHirReg(t).then(function(t){c.detail.nurseHirReg=t.data.data}),l.getNurseExp(t).then(function(t){c.detail.nurseExp=t.data.data}),l.getAcademic(t).then(function(t){c.detail.academic=t.data.data}),l.getAwardPunish(t).then(function(t){c.detail.awardPunish=t.data.data}),l.getPerAssessment(t).then(function(t){c.detail.perAssessment=t.data.data})}var c=this;c.rootScope=t,c.scope=e,c.del=o,c.open=i,c.load=r,c.loadDetail=d,c.detail={},c.genders=["女","男"],s.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a})})}t.$inject=["$rootScope","$scope","$uibModal","deptService","NgTableParams","techFilesService"],angular.module("nqms").controller("TechFileController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i){function r(){D.getNurseHirReg(),D.getNurseExp(),D.getAcademic(),D.getAwardPunish(),D.getPerAssessment()}function d(){var e=_.pick(b.detail.info,"deptCode","hisCode","userName","birthday","gender","graduationDate","graduationSchool","education");o.updateNurseInfo(e).then(function(){t.$broadcast("toast",{type:"success",content:"保存成功"})})}function c(){a.dismiss()}function m(t){b.detail[t].push(angular.copy(x[t]))}function p(e,a){var s=o["save"+h(e)],n=D["get"+h(e)],a=angular.extend({},a);v(a),s(a).then(function(){t.$broadcast("toast",{type:"success",content:"保存成功"}),n()})}function u(e,a,s){if(a){var n=o["delete"+h(e)],l=D["get"+h(e)];n(a).then(function(){t.$broadcast("toast",{type:"success",content:"删除成功"}),l()})}else b.detail[e].splice(s,1)}function v(t){for(var e in t)e.indexOf("IsOpen")>-1&&delete t[e];return t.userCode=f.userCode,t.userName=f.userName,t}var b=this,f=i,g=f.userCode,h=s("capitalize"),y=s("filter"),D={getNurseHirReg:function(){o.getNurseHirReg(g).then(function(t){b.detail.nurseHirReg=t.data.data})},getNurseExp:function(){o.getNurseExp(g).then(function(t){b.detail.nurseExp=t.data.data})},getAcademic:function(){o.getAcademic(g).then(function(t){b.detail.academic=t.data.data})},getAwardPunish:function(){o.getAwardPunish(g).then(function(t){b.detail.award=y(t.data.data,{apType:1}),b.detail.punish=y(t.data.data,{apType:2})})},getPerAssessment:function(){o.getPerAssessment(g).then(function(t){b.detail.perAssessment=t.data.data})}},x={nurseHirReg:{},nurseExp:{rank:"一般专科护士"},academic:{},award:{apType:1},punish:{apType:2},perAssessment:{}};l.getDeptData().then(function(t){b.deptData=t.belongedDepts}),b.detail={info:f},b.rankArray=["一般专科护士","高级专科护士","临床护理专家"],b.save=d,b.cancel=c,b.addItem=m,b.saveItem=p,b.removeItem=u,r()}t.$inject=["$rootScope","$scope","$uibModalInstance","$filter","NgTableParams","deptService","techFilesService","id"],angular.module("nqms").controller("TechModalController",t)}(),function(){"use strict";function t(t,e,a){function s(t){return function(e){var s=o[t].getter;return a[s.method](s.url,{params:e})}}function n(){return function(t){var e=o.calendar.setter;return a.get(e.url,{params:t})}}function l(t,e){return function(s){var n=o[t][e]||o[t].setter;return a[n.method](n.url,s)}}var o=e.system,i={getDate:s("calendar"),updateDate:l("calendar","update"),createDate:n()};return i}t.$inject=["$window","apiHost","$http"],angular.module("nqms").factory("calendarService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i){function r(){l.getDate(h.loadParams).then(function(e){if(e&&"0"===e.data.code){var s=0;if(0===e.data.data.length)return h.isEmpty=!0,void t.$broadcast("toast",{type:"warning",content:"系统没有"+h.loadParams.year+"年的日历，如需使用请创建。"});h.isEmpty=!1,h.dataList=p(e.data.data);for(var n in h.dataList)if(h.dataList.hasOwnProperty(n)){if(0===s){s=h.dataList[n].length;break}++s}h.placeholderArr=new Array(7-s),a.info(h.dataList)}})}function d(){h.loadParams={year:(new Date).getFullYear(),month:(new Date).getMonth()+1},r()}function c(){h.loadParams.month++,h.loadParams.month>12&&(h.loadParams.month=1,h.loadParams.year++),r()}function m(){h.loadParams.month--,h.loadParams.month<1&&(h.loadParams.month=12,h.loadParams.year--),r()}function p(t){var e,a,s={},n=[["monday","星期一"],["tuesday","星期二"],["wednesday","星期三"],["thursday","星期四"],["friday","星期五"],["saturday","星期六"],["sunday","星期天"]],l=0;if(h.weeks=n,t&&Array.isArray(t)){for(e=0;e<t.length;e+=1)l=Number(t[e].weekDay)-1,a=u(t[e],{weekText:n[l][1],day:new Date(t[e].date).getUTCDate(),isHoliday:t[e].isHoliday?parseInt(t[e].isHoliday):0,isWeekend:t[e].isWeekend?parseInt(t[e].isWeekend):0}),s["week_"+a.weeks]||(s["week_"+a.weeks]=[]),s["week_"+a.weeks].push(a);return s}}function u(t,e){return angular.merge({},t,e)}function v(t){o.open({templateUrl:"app/system/calendar/calendarSetting.modal.html",size:"sm",ok:g,data:{formData:angular.extend({},t)}})}function b(){o.open({templateUrl:"app/system/calendar/calendarCreate.modal.html",size:"sm",ok:f})}function f(e){a.info(e),l.createDate(e).then(function(e){"0"===e.data.code&&(t.$broadcast("toast",{type:"success",content:"创建成功"}),o.close("success"))})}function g(e){delete e.day,delete e.weekText,e.createTime=i(e.createTime).format("YYYY-MM-DD hh:mm:ss"),l.updateDate(e).then(function(e){"0"===e.data.code&&(t.$broadcast("toast",{type:"success",content:"修改成功"}),r(),o.close("success"))})}var h=this;h.open=b,h.openSetting=v,h.loadParams={year:(new Date).getFullYear(),month:(new Date).getMonth()+1},h.nextMonth=c,h.previousMonth=m,h.resetCalendar=d,h.isEmpty=!1,h.currentDate=i().format("YYYY-MM-DD"),r()}t.$inject=["$rootScope","$scope","$log","$q","$uibModal","calendarService","modalService","moment"],angular.module("nqms").controller("CalendarController",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(t){function n(t){s.error("获取用户数据失败！\n"+angular.toJson(t.data,!0))}return a.get(e.users.getUserList,{params:{deptCode:t}}).then(m)["catch"](n)}function i(t){return a.post(e.users.deleteUser,{seqId:t}).then(m)}function r(t){return a.post(e.users.saveUser,t).then(m)}function d(t){return a.post(e.users.saveUserRole,t).then(m)}function c(t){return a.post(e.users.deleteUserRole,t).then(m)}function m(t){return"0"===t.data.code?t:void 0}var p={getUserList:o,deleteUser:i,save:r,saveUserRole:d,deleteUserRole:c};return p}t.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("usersService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i,r){function d(t,a){g.selectedDept=t,g.selectedUser=!1,h.formData={deptCode:t,deptName:a},l.getUserList(t).then(function(t){"0"===t.data.code&&(g.list=t.data.data)}),o.getUserList(t).then(function(t){t&&(h.metaData.userList=t,e.info(t))})}function c(t){if(t)h.formData=angular.extend({},h.formData,t);else for(var e in h.formData)h.formData.hasOwnProperty(e)&&"deptCode"!==e&&"deptName"!==e&&delete h.formData[e];i.open({templateUrl:"app/system/users/addUser.tpl.html",ok:u,size:"md",data:h})}function m(t){var e="app/system/roles/addRole.tpl.html";t?(y.formData=angular.extend({},y.formData,t),i.open({templateUrl:e,ok:u,size:"md",data:y})):(e="app/system/users/addExistRole.tpl.html",r.getUserRoleList({userId:r.getCacheUser().user.seqId}).then(function(t){y.metaData.roleList=t.data.data,y.metaData.currentUser=g.selectedUser,y.metaData.deptList=angular.extend([],g.deptData.belongedDepts),y.metaData.deptList.unshift({deptCode:g.deptData.deptCode,deptName:g.deptData.deptName}),y.metaData.deptList=angular.extend({},[h.formData]),y.metaData.hadRoleList=g.userRoleList.map(function(t){return t.roleCode}),i.open({templateUrl:e,ok:v,size:"md",data:y})}))}function p(t){l.deleteUser(t).then(function(t){t&&"0"===t.data.code&&(n.success("删除成功！","提示"),d(h.formData.deptCode,h.formData.deptName),i.close("success"))})}function u(t){l.save(t).then(function(t){t&&"0"===t.data.code&&(n.success("已保存！","提示"),d(h.formData.deptCode,h.formData.deptName),i.close("success"))})}function v(t){l.saveUserRole(t).then(function(t){t&&"0"===t.data.code&&(n.success("添加成功！","提示"),b(g.selectedUser),i.close("success"))})}function b(t){r.getUserRoleList({userId:t}).then(function(t){g.userRoleList=t.data.data})}function f(t){l.deleteUserRole(t).then(function(t){t&&"0"===t.data.code&&(n.success("删除成功！","提示"),b(g.selectedUser),i.close("success"))})}var g=this,h={formData:{},metaData:{}},y={formData:{},metaData:{}};s.getDeptData().then(function(t){g.deptData=t}),g.del=p,g.open=c,g.delUserRole=f,g.openRole=m,g.showRole=b,g.selectedDept=null,g.load=d}t.$inject=["$scope","$log","$uibModal","deptService","toastr","usersService","filesService","modalService","security"],angular.module("nqms").controller("UsersController",t)}(),function(){"use strict";function t(t,e,a,s,n){function l(){a.save(i.role).then(function(a){a&&"0"===a.data.code?(n.success("添加成功！","提示"),t.dismiss("cancel"),s.getUserRoleList(),e.$apply()):n.error("保存失败","警告")})}function o(){t.dismiss("cancel")}var i=this;i.cancel=o,i.save=l}t.$inject=["$uibModalInstance","$rootScope","rolesService","security","toastr"],angular.module("nqms").controller("RolesModalController",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(t){function n(t){return"0"===t.data.code?t:void s.error("获取用户数据失败！\n"+t.data.msg)}function l(t){s.error("获取用户数据失败！\n"+angular.toJson(t.data,!0))}return a.get(e.roles.getHaveFunction,{params:{roleCode:t}}).then(n)["catch"](l)}function i(t){function n(t){return"0"===t.data.code?t:void s.error("获取用户数据失败！\n"+t.data.msg)}function l(t){s.error("获取用户数据失败！\n"+angular.toJson(t.data,!0))}return a.get(e.roles.getNotHaveFunction,{params:{roleCode:t}}).then(n)["catch"](l)}function r(t){return a.post(e.roles.updateRole,t).then(function(t){return"0"===t.data.code?t:null})}function d(t){return a.post(e.roles.saveRole,t).then(function(t){return"0"===t.data.code?t:null})["catch"](function(t){})}function c(t){return a.post(e.roles.deleteRole,t).then(function(t){return"0"===t.data.code?t:null})}var m={getHaveFunction:o,getNotHaveFunction:i,save:d,edit:r,del:c};return m}t.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("rolesService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i,r,d){function c(t){var s=n.getNotHaveFunction(t.roleCode),l=n.getHaveFunction(t.roleCode);g.roleDetail=t,a.all([s,l]).then(function(t){e.info(t),g.notHaveList=t[0]&&"0"===t[0].data.code?t[0].data.data:[],g.hadList=t[1]&&"0"===t[1].data.code?t[1].data.data:[]})}function m(){i.open({templateUrl:"app/system/roles/addRole.tpl.html",size:"md",ok:v})}function p(){var t={seqId:g.roleDetail.seqId,roleCode:g.roleDetail.roleCode};n.del(t).then(function(t){t&&(l.success("该角色已删除","提示"),g.roleDetail=null,f())})}function u(){var t=angular.copy(g.roleDetail),a=[];t.funs=angular.copy(g.hadList),t.funs.forEach(function(t,e){a=a.concat(t.child),t.child=[]}),t.funs=t.funs.concat(a),delete t.updateTime,delete t.createTime,e.info(t),n.edit(t).then(function(t){e.info(t),t&&"0"===t.data.code?(l.success("保存成功！","提示"),e.info(g.hadList)):l.error(t.data.msg,"警告")})}function v(t){n.save(t).then(function(t){t&&"0"===t.data.code?(l.success("添加成功！","提示"),i.close("success"),f()):l.error("保存失败","警告")})}function b(t,e,a,s,n){var l,o="add"===n?g.hadList:g.notHaveList,i="add"===n?g.notHaveList:g.hadList;o.some(function(a,s){return a.funCode===t.funCode?(a.child.push(e),!0):void(s===o.length-1&&(l=angular.copy(t),l.child=[e],o.push(l)))}),0===o.length&&(l=angular.copy(t),l.child=[e],o.push(l)),t.child.splice(s,1),0===t.child.length&&i.splice(a,1)}function f(){r.getUserRoleList().then(function(t){g.roleData=t.data.data})}var g=this;r.getUserRoleList().then(function(t){g.roleData=t.data.data});g.del=p,g.edit=u,g.open=m,g.navExchange=b,g.load=c}t.$inject=["$scope","$log","$q","$uibModal","rolesService","toastr","NgTableParams","modalService","security","$injector"],angular.module("nqms").controller("RolesController",t)}(),function(){"use strict";angular.module("nqms").controller("PatientSatStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){i()}function i(){var t=r("sat"),e=c.sat.config;e.legend.data=_.pluck(t,"name"),e.series[0].data=t,s.updateEchartsInstance(c.sat.identity,e)}function r(t){c.lst.forEach(function(t){t.value=_.random(5,10)});var e=[];return e.push({name:"满意",value:_.random(2e3,3e3)}),e.push({name:"良好",value:_.random(1e3,2e3)}),e.push({name:"不满意",value:_.random(0,1e3)}),e}function d(){return l.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.filter={date:new Date},c.lst=[{key:"就诊环境"},{key:"床旁护理"},{key:"住院环境"},{key:"检查水平"},{key:"医护专业水准"}],d(),t.$watch("vm.filter.date",function(t){o()}),t.$watch("vm.filter.type",function(t){o()}),t.$watch("vm.filter.deptCode",function(t){o()}),c.dateOptions={datepickerMode:"month",minMode:"month"},c.sat={identity:s.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("患者满意度")}}])}(),function(){"use strict";angular.module("nqms").controller("NurseSatStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){i()}function i(){var t=r("sat"),e=c.sat.config;e.legend.data=_.pluck(t,"name"),e.series[0].data=t,s.updateEchartsInstance(c.sat.identity,e)}function r(t){c.lst.forEach(function(t){t.value=_.random(5,10)});var e=[];return e.push({name:"满意",value:_.random(2e3,3e3)}),e.push({name:"良好",value:_.random(1e3,2e3)}),e.push({name:"不满意",value:_.random(0,1e3)}),e}function d(){return l.getDeptData().then(function(t){
c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.filter={date:new Date},c.lst=[{key:"工作环境"},{key:"工作氛围"},{key:"个人发展"},{key:"工资水平"}],d(),t.$watch("vm.filter.date",function(t){o()}),t.$watch("vm.filter.type",function(t){o()}),t.$watch("vm.filter.deptCode",function(t){o()}),c.dateOptions={datepickerMode:"month",minMode:"month"},c.sat={identity:s.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("护士满意度")}}])}(),function(){"use strict";angular.module("nqms").controller("ResearchStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){i()}function i(){var t=r("proj"),e=r("paper"),a=c.proj.config;a.legend.data=_.pluck(t.data,"name"),a.series[0].data=t.data;var n=c.paper.config;n.legend.data=_.pluck(e.data,"name"),n.series[0].data=e.data,c.baseData={proj:t.total,paper:e.total},s.updateEchartsInstance(c.proj.identity,a),s.updateEchartsInstance(c.paper.identity,n)}function r(t){var e,a=[];return"proj"===t?(e=_.random(2,20),a.push({name:"成功",value:_.random(0,e)}),a.push({name:"失败",value:e-a[0].value})):(e=_.random(5,50),a.push({name:"国家级",value:_.random(0,e)}),a.push({name:"省级发表",value:e-a[0].value})),{total:e,data:a}}function d(){return l.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.filter={date:new Date},d(),t.$watch("vm.filter.date",function(t){o()}),t.$watch("vm.filter.deptCode",function(t){o()}),c.dateOptions={datepickerMode:"year",minMode:"year"},c.proj={identity:s.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("科研项目")},c.paper={identity:s.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("科研论文")}}])}(),function(){"use strict";angular.module("nqms").controller("QualityStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){i()}function i(){var t=r(),e=c.quality.config;m.forEach(function(a,s){p.forEach(function(a,n){var l=_.pluck(_.values(t[s]),n);e.series[s].data[n]={value:l,name:a}})}),console.log(e),s.updateEchartsInstance(c.quality.identity,e)}function r(){var t=[];return m.forEach(function(e){var a={};e.categories.forEach(function(t){a[t]=[_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100),_.random(0,100)]}),t.push(a)}),t}function d(){return l.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.filter={date:new Date},d(),t.$watch("vm.filter.date",function(t){o()}),t.$watch("vm.filter.type",function(t){o()}),t.$watch("vm.filter.deptCode",function(t){o()}),c.dateOptions={datepickerMode:"year",minMode:"year"};var m=[{name:"临床护理表",categories:["书写标准","签名正规","人数相符","运用医学术语","特殊用药"]},{name:"危重护理表",categories:["按时检查","及时反馈","上报情况","特殊情况"]}],p=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],u=n.radarInit("护理质控",p);u.tooltip.formatter=function(t){var e=u.series[t.seriesIndex].radarIndex||0,a=u.radar[e].indicator,s=t.seriesName+" "+t.name;return a.forEach(function(e,a){s+="<br>"+e.text+" : "+t.value[a]}),s},m.forEach(function(t,e){var a=[];t.categories.forEach(function(t){a.push({text:t,max:100})}),u.radar.push({indicator:a,center:[25+50*e+"%","50%"],radius:100}),u.series.push(_.extend({radarIndex:e,name:t.name},angular.copy(u.serie)))}),c.quality={identity:s.generateInstanceIdentity(),dimension:"16:9",config:u}}])}(),function(){"use strict";angular.module("nqms").controller("NurseManagerStatTransferCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){c.deptData?i():d().then(i)}function i(){var t=c.transfer.config,e=r();t.yAxis[0].data=_.keys(e),t.series[0].data=_.pluck(_.values(e),0),t.series[1].data=_.pluck(_.values(e),1),s.updateEchartsInstance(c.transfer.identity,t)}function r(){c.baseData={total:_.random(400,500),transfer:_.random(20,100),increase:_.random(5,30),leave:_.random(5,30)};var t=_.pluck(c.deptData.belongedDepts,"deptName"),e={};return t.forEach(function(t){e[t]=[_.random(0,10),_.random(0,10)]}),e}function d(){return l.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.date=new Date,t.$watch("vm.date",function(t){o()}),c.dateOptions={datepickerMode:"month",minMode:"month"};var m=n.horBarInit(["转入","转出"]);c.transfer={identity:s.generateInstanceIdentity(),dimension:"9:16",config:m}}])}(),function(){"use strict";angular.module("nqms").controller("NurseManagerStatFormCtrl",["$scope","$interval","$timeout","$echarts","chartsService",function(t,e,a,s,n){function l(){var t=o.level.config;t.legend.data=_.pluck(i,"name"),t.series[0].data=i;var e=o.edu.config;e.legend.data=_.pluck(r,"name"),e.series[0].data=r;var a=o.age.config;a.legend.data=_.pluck(d,"name"),a.series[0].data=d;var s=o.gender.config;s.legend.data=_.pluck(c,"name"),s.series[0].data=c;var n=o.political.config;n.legend.data=_.pluck(m,"name"),n.series[0].data=m}var o=this,i=[{value:12,name:"专科护士"},{value:116,name:"高级责任护士"},{value:213,name:"责任护士"},{value:198,name:"助理护士"}],r=[{value:167,name:"专科"},{value:207,name:"本科"},{value:129,name:"硕士"},{value:3,name:"博士"}],d=[{value:279,name:"21~30"},{value:207,name:"31~40"},{value:79,name:"41~50"},{value:23,name:"其他"}],c=[{value:478,name:"女"},{value:13,name:"男"}],m=[{value:367,name:"群众"},{value:163,name:"党员"}];o.level={identity:s.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("人员层级")},o.edu={identity:s.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("学历")},o.age={identity:s.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("年龄")},o.gender={identity:s.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("性别")},o.political={identity:s.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("政治面貌")},l()}])}(),function(){"use strict";angular.module("nqms").controller("MalCaseStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){i()}function i(){var t=r();u=t[1];var e=c.mal.config;e.xAxis[0].data=_.keys(t[0]),m.forEach(function(a,s){e.series[s].data=_.pluck(_.values(t[0]),s)}),s.updateEchartsInstance(c.mal.identity,e)}function r(t){var e=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],a={},s={};return e.forEach(function(t){a[t]=[_.random(10,30),_.random(10,30),_.random(10,30),_.random(10,30)]}),e.forEach(function(t){s[t]=[_.random(10,30),_.random(10,30),_.random(10,30),_.random(10,30)]}),[a,s]}function d(){return l.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.filter={date:new Date},d(),t.$watch("vm.filter.date",function(t){o()}),t.$watch("vm.filter.deptCode",function(t){o()}),c.dateOptions={datepickerMode:"year",minMode:"year"};var m=["跌倒","压疮","误床","坠床"],p=n.lineInit("不良事件",m),u=null;p.tooltip.trigger="item",p.tooltip.formatter=function(t){console.log(t);var e="",a="";return e=c.filter.date.getFullYear()+" : "+t.data,a=c.filter.date.getFullYear()-1+" : "+u[t.name][m.indexOf(t.seriesName)],t.seriesName+" - "+t.name+"<br>"+e+"<br>"+a},c.mal={identity:s.generateInstanceIdentity(),dimension:"16:9",config:p}}])}(),function(){"use strict";angular.module("nqms").controller("ExamStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){i()}function i(){var t=r("exam"),e=r("train"),a=c.exam.config;a.legend.data=_.pluck(t,"name"),a.series[0].data=t;var n=c.train.config;n.legend.data=_.pluck(e,"name"),n.series[0].data=e,s.updateEchartsInstance(c.exam.identity,a),s.updateEchartsInstance(c.train.identity,n)}function r(t){var e=[];return"exam"===t?(e.push({name:"优秀",value:_.random(100,200)}),e.push({name:"良好",value:_.random(200,300)}),e.push({name:"及格",value:_.random(100,200)}),e.push({name:"不及格",value:_.random(0,100)})):(e.push({name:"签到",value:_.random(400,500)}),e.push({name:"缺勤",value:_.random(0,100)})),e}function d(){return l.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.filter={date:new Date},d(),t.$watch("vm.filter.date",function(t){o()}),t.$watch("vm.filter.type",function(t){o()}),t.$watch("vm.filter.deptCode",function(t){o()}),c.dateOptions={datepickerMode:"month",minMode:"month"},c.exam={identity:s.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("考试")},c.train={identity:s.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("培训")}}])}(),function(){"use strict";angular.module("nqms").controller("DutyStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){i()}function i(){var t=c.duty.config,e=r();t.yAxis[0].data=_.keys(e),t.series[0].data=_.pluck(_.values(e),0),t.series[1].data=_.pluck(_.values(e),1),t.series[2].data=_.pluck(_.values(e),2),s.updateEchartsInstance(c.duty.identity,t)}function r(){c.baseData={total:_.random(400,500),leave:_.random(20,100),shift:_.random(5,30),refuse:_.random(5,30)};var t=["何诗华","刘铭杨","李向宾","徐一帆","赵圳","夏琼","周荔"],e={};return t.forEach(function(t){e[t]=[_.random(100,200),_.random(0,60),_.random(0,100)]}),e}function d(){return l.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.filter={date:new Date},d(),t.$watch("vm.filter.date",function(t){o()}),t.$watch("vm.filter.deptCode",function(t){o()}),c.dateOptions={datepickerMode:"month",minMode:"month"};var m=n.horBarInit(["工作时间","请假时间","夜班时间"]);c.duty={identity:s.generateInstanceIdentity(),dimension:"16:9",config:m}}])}(),function(){"use strict";angular.module("nqms").controller("BedNursingSignStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){i()}function i(){var t=r(),e=c.sign.config;e.xAxis[0].data=_.keys(t),e.series[0].data=_.pluck(_.values(t),0),s.updateEchartsInstance(c.sign.identity,e)}function r(){var t=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],e={};return t.forEach(function(t){e[t]=[_.random(500,2e3)]}),e}function d(){return l.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.filter={date:new Date},d(),t.$watch("vm.filter.date",function(t){o()}),t.$watch("vm.filter.deptCode",function(t){o()}),c.dateOptions={datepickerMode:"year",minMode:"year"};var m=n.lineInit("生命体征",["体征采集总量"]);c.sign={identity:s.generateInstanceIdentity(),dimension:"16:9",config:m}}])}(),function(){"use strict";angular.module("nqms").controller("BedNursingPatrolStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){i()}function i(){c.charts.forEach(function(t){var e=r("pie"),a=t.config;a.legend.data=_.pluck(e,"name"),a.series[0].data=e,a.title.text=a.title.text.slice(0,5)+" "+_.random(50,100)+"%",s.updateEchartsInstance(t.identity,a)});var t=r("line"),e=c.chart.config;e.xAxis[0].data=_.keys(t),e.series=[{type:"line",data:_.pluck(_.values(t),0)},{type:"line",data:_.pluck(_.values(t),1)}],s.updateEchartsInstance(c.chart.identity,e)}function r(t){var e=[];return"pie"===t?(e.push({name:"体征巡视",value:_.random(0,500)}),e.push({name:"输液巡视",value:_.random(0,500)}),e.push({name:"病房巡视",value:_.random(0,500)}),e.push({name:"护理治疗巡视",value:_.random(0,500)}),e.push({name:"遗漏巡视",value:_.random(0,500)})):m.forEach(function(t){e[t]=[_.random(0,100)/100,_.random(0,100)/100]}),e}function d(){return l.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.filter={date:new Date};var m=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],p=["特级","一级","二级","三级"];c.charts=[],d(),t.$watch("vm.filter.date",function(t){o()}),t.$watch("vm.filter.deptCode",function(t){o()}),c.dateOptions={datepickerMode:"year",minMode:"year"},p.forEach(function(t){c.charts.push({identity:s.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit(t+"合格率")})});var u=n.lineInit("年合格率一览");u.tooltip.formatter=function(t){var e='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+t[0].color+'"></span>'+c.filter.date.getFullYear()+" : "+t[0].data,a='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+t[1].color+'"></span>'+(c.filter.date.getFullYear()-1)+" : "+t[1].data;return t[0].name+"<br>"+e+"<br>"+a},c.chart={identity:s.generateInstanceIdentity(),dimension:"16:9",config:u}}])}(),function(){"use strict";angular.module("nqms").controller("BedNursingLiqDisStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){i()}function i(){var t=r(),e=c.chart.config;e.series[0].data=_.pluck(_.values(t),0),e.series[1].data=_.pluck(_.values(t),1),e.series[2].data=_.pluck(_.values(t),2),e.series[3].data=_.pluck(_.values(t),3),s.updateEchartsInstance(c.chart.identity,e)}function r(){var t=c.chart.config.xAxis[0].data,e={};return t.forEach(function(t){e[t]=[_.random(500,2e3),_.random(500,2e3),_.random(500,2e3)],e[t][3]=e[t][0]+e[t][1]+e[t][2]}),e}function d(){return l.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.filter={date:new Date},d(),t.$watch("vm.filter.date",function(t){o()}),t.$watch("vm.filter.deptCode",function(t){o()}),c.dateOptions={datepickerMode:"year",minMode:"year"},c.chart={identity:s.generateInstanceIdentity(),dimension:"16:9",config:{title:{x:"center",text:"配液统计"},tooltip:{trigger:"axis"},legend:{top:"30",data:["备药","审核","配液","配液总量"]},xAxis:[{type:"category",data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}],yAxis:[{type:"value"}],series:[{name:"备药",type:"bar",data:[]},{name:"审核",type:"bar",data:[]},{name:"配液",type:"bar",data:[]},{name:"配液总量",type:"line",data:[]}]}}}])}(),function(){"use strict";angular.module("nqms").controller("BedNursingDoctorStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){i()}function i(){var t=r(),e=c.chart.config;e.series[0].data=_.pluck(_.values(t),0),e.series[1].data=_.pluck(_.values(t),1),e.series[2].data=_.pluck(_.values(t),2),s.updateEchartsInstance(c.chart.identity,e)}function r(){var t=c.chart.config.xAxis[0].data,e={};return t.forEach(function(t){e[t]=[_.random(500,2e3),_.random(0,500)],e[t][2]=e[t][0]+e[t][1]}),e}function d(){return l.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.filter={date:new Date},d(),t.$watch("vm.filter.date",function(t){o()}),t.$watch("vm.filter.deptCode",function(t){o()}),c.dateOptions={datepickerMode:"year",minMode:"year"},c.chart={identity:s.generateInstanceIdentity(),dimension:"16:9",config:{title:{x:"center",text:"医嘱统计"},tooltip:{trigger:"axis"},legend:{top:"30",data:["成功核对","近似出错","执行总量"]},xAxis:[{type:"category",data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}],yAxis:[{type:"value"}],series:[{name:"成功核对",type:"bar",data:[]},{name:"近似出错",type:"bar",data:[]},{name:"执行总量",type:"line",data:[]}]}}}])}(),function(){"use strict";angular.module("nqms").controller("BedNursingDocStatCtrl",["$scope","$interval","$timeout","$echarts","chartsService","deptService",function(t,e,a,s,n,l){function o(){i()}function i(){c.charts.forEach(function(t,e){var a=r(),n=t.config;n.series[0].data=a,n.title.text=n.title.text.slice(0,m[e].length+3)+" "+_.random(50,100)+"%",s.updateEchartsInstance(t.identity,n)})}function r(){c.baseData={miss:_.random(3,12)+"%",qualified:_.random(70,98)+"%"};var t=[];return t.push({name:"遗漏",value:_.random(0,500)}),t.push({name:"修改",value:_.random(0,500)}),t.push({name:"新增",value:_.random(2e3,3e3)}),t}function d(){return l.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})})}var c=this;c.filter={date:new Date};var m=["体温单","护理记录单","压疮报告单","跌倒评估单","疼痛评估单","自理能力评估单"];c.charts=[],d(),t.$watch("vm.filter.date",function(t){o()}),t.$watch("vm.filter.deptCode",function(t){o()}),c.dateOptions={datepickerMode:"month",minMode:"month"},m.forEach(function(t){c.charts.push({identity:s.generateInstanceIdentity(),dimension:"4:3",config:n.pieInit(t+"合格率")})})}])}(),function(){"use strict";function t(t,e,a,s,n,l){function o(e){l.deleteSatTemp(e).then(function(e){t.$broadcast("toast",{type:"success",content:"删除成功"}),r()})}function i(t){var e=a.open({templateUrl:"app/sat/patient/temp.modal.html",controller:"SatPatientTempModalController",controllerAs:"vm",backdrop:"static",animation:!0,size:"lg",resolve:{id:function(){return t}}});e.result["finally"](function(){r()})}function r(){l.getSatTemp().then(function(t){d.lst=t.data.data,d.lst.forEach(function(t){t.createTime=s("date")(t.createTime,"yyyy-MM-dd HH:mm:ss"),t.updateTime=s("date")(t.updateTime,"yyyy-MM-dd HH:mm:ss"),t.satTempDetailList.forEach(function(t){t.createTime=s("date")(t.createTime,"yyyy-MM-dd HH:mm:ss"),t.updateTime=s("date")(t.updateTime,"yyyy-MM-dd HH:mm:ss"),t.satOptionList.forEach(function(t){t.createTime=s("date")(t.createTime,"yyyy-MM-dd HH:mm:ss"),t.updateTime=s("date")(t.updateTime,"yyyy-MM-dd HH:mm:ss")})})})})}var d=this;d.rootScope=t,d.scope=e,d.del=o,d.open=i,d.load=r,r()}t.$inject=["$rootScope","$scope","$uibModal","$filter","NgTableParams","satPatientService"],angular.module("nqms").controller("SatPatientTempController",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(t){m.formData.satTempDetailList.splice(t,1)}function i(){m.formData.satTempDetailList.push({satOptionList:[{optionContent:"满意"},{optionContent:"基本满意"},{optionContent:"不满意"}]})}function r(){c(m.formData).then(function(){t.$broadcast("toast",{type:"success",content:"保存成功"}),a.close()})}function d(){a.dismiss()}var c,m=this;l?(m.formData=l,c=n.updateSatTemp):(m.formData={satTempDetailList:[],userType:"2"},c=n.saveSatTemp),m.rootScope=t,m.scope=e,m.del=o,m.add=i,m.ok=r,m.cancel=d}t.$inject=["$rootScope","$scope","$uibModalInstance","NgTableParams","satPatientService","id"],angular.module("nqms").controller("SatPatientTempModalController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(e){l.deleteSatResult(e).then(function(e){t.$broadcast("toast",{type:"success",content:"删除成功"}),d()})}function r(t){var e=a.open({templateUrl:"app/sat/patient/result.modal.html",controller:"SatPatientResultModalController",controllerAs:"vm",backdrop:"static",animation:!0,size:"lg",resolve:{id:function(){return t}}});e.result["finally"](function(){d()})}function d(){l.getSatResult(c.params).then(function(t){c.lst=t.data.data,c.lst.forEach(function(t){t.createTime=s("date")(t.createTime,"yyyy-MM-dd HH:mm:ss"),t.updateTime=s("date")(t.updateTime,"yyyy-MM-dd HH:mm:ss"),t.satResultDetailList.forEach(function(t){t.createTime=s("date")(t.createTime,"yyyy-MM-dd HH:mm:ss"),t.updateTime=s("date")(t.updateTime,"yyyy-MM-dd HH:mm:ss"),t.satOptionList.forEach(function(t){t.createTime=s("date")(t.createTime,"yyyy-MM-dd HH:mm:ss"),t.updateTime=s("date")(t.updateTime,"yyyy-MM-dd HH:mm:ss")})})})})}var c=this;o.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a})}),c.rootScope=t,c.scope=e,c.del=i,c.open=r,c.load=d,d()}t.$inject=["$rootScope","$scope","$uibModal","$filter","NgTableParams","satPatientService","deptService"],angular.module("nqms").controller("SatPatientResultController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(){c(m.detail).then(function(){t.$broadcast("toast",{type:"success",content:"保存成功"}),a.close()})}function r(){a.dismiss()}function d(){m.tmpCode?(m.detail.resultName=m.getTmpName(m.tmpCode),m.detail.formType=m.getTmpType(m.tmpCode),l.getSatTempByCode(m.tmpCode).then(function(t){m.detail.satResultDetailList=[],t.data.data.satTempDetailList.forEach(function(t,e){var a=_.pick(t,"content","formCode","detailCode"),s=[];t.satOptionList.forEach(function(t,e){var a=_.pick(t,"detailCode","optionCode","optionContent","seqId");s.push(a)}),a.satOptionList=s,m.detail.satResultDetailList.push(a)})})):(m.detail.resultName="",m.detail.formType="",m.detail.satResultDetailList=[])}var c,m=this;l.getSatTemp().then(function(t){m.tmps=t.data.data,m.getTmpName=_.memoize(function(t){var e;return _.some(m.tmps,function(a){return a.formCode==t?(e=a.formName,!0):void 0}),e}),m.getTmpType=_.memoize(function(t){var e;return _.some(m.tmps,function(a){return a.formCode==t?(e=a.formType,!0):void 0}),e})}),n.getDeptData().then(function(t){m.deptData=t}),o?(m.detail=o,c=l.updateSatResult):(m.detail={satResultDetailList:[],userType:"2"},m.detail.satResultDetailList=m.detail.satTempDetailList,c=l.saveSatResult,m.isNew=!0),m.ok=i,m.cancel=r,m.reload=d}t.$inject=["$rootScope","$scope","$uibModalInstance","NgTableParams","deptService","satPatientService","id"],angular.module("nqms").controller("SatPatientResultModalController",t)}(),function(){"use strict";function t(t,e,a){function s(t){return function(a){var s=r[t].getter;return e[s.method](s.url,{params:_.extend({userType:2},a)})}}function n(t){return function(a){var s=r[t].setter;return e[s.method](s.url,a)}}function l(t){return function(a){var s=r[t].deleter;return e[s.method](s.url,{seqId:a})}}function o(t){return function(a){var s=r[t].updater;return e[s.method](s.url,a)}}function i(t){var a=r.satTemp.single;return e[a.method](a.url,{params:{formCode:t}})}var r=a.satisfaction,d={getSatTemp:s("satTemp"),saveSatTemp:n("satTemp"),updateSatTemp:o("satTemp"),deleteSatTemp:l("satTemp"),getSatResult:s("satResult"),saveSatResult:n("satResult"),updateSatResult:o("satResult"),deleteSatResult:l("satResult"),getSatTempByCode:i};return d}t.$inject=["$window","$http","apiHost"],angular.module("nqms").factory("satPatientService",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(e){l.deleteSatTemp(e).then(function(e){t.$broadcast("toast",{type:"success",content:"删除成功"}),r()})}function i(t){var e=a.open({templateUrl:"app/sat/nurse/temp.modal.html",controller:"SatNurseTempModalController",controllerAs:"vm",backdrop:"static",animation:!0,size:"lg",resolve:{id:function(){return t}}});e.result["finally"](function(){r()})}function r(){l.getSatTemp().then(function(t){d.lst=t.data.data,d.lst.forEach(function(t){t.createTime=s("date")(t.createTime,"yyyy-MM-dd HH:mm:ss"),t.updateTime=s("date")(t.updateTime,"yyyy-MM-dd HH:mm:ss"),t.satTempDetailList.forEach(function(t){t.createTime=s("date")(t.createTime,"yyyy-MM-dd HH:mm:ss"),t.updateTime=s("date")(t.updateTime,"yyyy-MM-dd HH:mm:ss"),t.satOptionList.forEach(function(t){t.createTime=s("date")(t.createTime,"yyyy-MM-dd HH:mm:ss"),t.updateTime=s("date")(t.updateTime,"yyyy-MM-dd HH:mm:ss")})})})})}var d=this;d.rootScope=t,d.scope=e,d.del=o,d.open=i,d.load=r,r()}t.$inject=["$rootScope","$scope","$uibModal","$filter","NgTableParams","satNurseService"],angular.module("nqms").controller("SatNurseTempController",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(t){m.formData.satTempDetailList.splice(t,1)}function i(){m.formData.satTempDetailList.push({satOptionList:[{optionContent:"满意"},{optionContent:"基本满意"},{optionContent:"不满意"}]})}function r(){c(m.formData).then(function(){t.$broadcast("toast",{type:"success",content:"保存成功"}),a.close()})}function d(){a.dismiss()}var c,m=this;l?(m.formData=l,c=n.updateSatTemp):(m.formData={satTempDetailList:[],userType:"1"},c=n.saveSatTemp),m.rootScope=t,m.scope=e,m.del=o,m.add=i,m.ok=r,m.cancel=d}t.$inject=["$rootScope","$scope","$uibModalInstance","NgTableParams","satNurseService","id"],angular.module("nqms").controller("SatNurseTempModalController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(e){l.deleteSatResult(e).then(function(e){t.$broadcast("toast",{type:"success",content:"删除成功"}),d()})}function r(t){var e=a.open({templateUrl:"app/sat/nurse/result.modal.html",controller:"SatNurseResultModalController",controllerAs:"vm",backdrop:"static",animation:!0,size:"lg",resolve:{id:function(){return t}}});e.result["finally"](function(){d()})}function d(){l.getSatResult(c.params).then(function(t){c.lst=t.data.data,c.lst.forEach(function(t){t.createTime=s("date")(t.createTime,"yyyy-MM-dd HH:mm:ss"),t.updateTime=s("date")(t.updateTime,"yyyy-MM-dd HH:mm:ss"),t.satResultDetailList.forEach(function(t){t.createTime=s("date")(t.createTime,"yyyy-MM-dd HH:mm:ss"),t.updateTime=s("date")(t.updateTime,"yyyy-MM-dd HH:mm:ss"),t.satOptionList.forEach(function(t){t.createTime=s("date")(t.createTime,"yyyy-MM-dd HH:mm:ss"),t.updateTime=s("date")(t.updateTime,"yyyy-MM-dd HH:mm:ss")})})})})}var c=this;o.getDeptData().then(function(t){c.deptData=t,c.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a})}),c.rootScope=t,c.scope=e,c.del=i,c.open=r,c.load=d,d()}t.$inject=["$rootScope","$scope","$uibModal","$filter","NgTableParams","satNurseService","deptService"],angular.module("nqms").controller("SatNurseResultController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(){c(m.detail).then(function(){t.$broadcast("toast",{type:"success",content:"保存成功"}),a.close()})}function r(){a.dismiss()}function d(){m.tmpCode?(m.detail.resultName=m.getTmpName(m.tmpCode),m.detail.formType=m.getTmpType(m.tmpCode),l.getSatTempByCode(m.tmpCode).then(function(t){m.detail.satResultDetailList=[],t.data.data.satTempDetailList.forEach(function(t,e){var a=_.pick(t,"content","formCode","detailCode"),s=[];t.satOptionList.forEach(function(t,e){var a=_.pick(t,"detailCode","optionCode","optionContent","seqId");s.push(a)}),a.satOptionList=s,m.detail.satResultDetailList.push(a)})})):(m.detail.resultName="",m.detail.formType="",m.detail.satResultDetailList=[])}var c,m=this;l.getSatTemp().then(function(t){m.tmps=t.data.data,m.getTmpName=_.memoize(function(t){var e;return _.some(m.tmps,function(a){return a.formCode==t?(e=a.formName,!0):void 0}),e}),m.getTmpType=_.memoize(function(t){var e;return _.some(m.tmps,function(a){return a.formCode==t?(e=a.formType,!0):void 0}),e})}),n.getDeptData().then(function(t){m.deptData=t}),o?(m.detail=o,c=l.updateSatResult):(m.detail={satResultDetailList:[],userType:"1"},m.detail.satResultDetailList=m.detail.satTempDetailList,c=l.saveSatResult,m.isNew=!0),m.ok=i,m.cancel=r,m.reload=d}t.$inject=["$rootScope","$scope","$uibModalInstance","NgTableParams","deptService","satNurseService","id"],angular.module("nqms").controller("SatNurseResultModalController",t)}(),function(){"use strict";function t(t,e,a){function s(t){return function(a){var s=r[t].getter;return e[s.method](s.url,{params:_.extend({userType:1},a)})}}function n(t){return function(a){var s=r[t].setter;return e[s.method](s.url,a)}}function l(t){return function(a){var s=r[t].deleter;return e[s.method](s.url,{seqId:a})}}function o(t){return function(a){var s=r[t].updater;return e[s.method](s.url,a)}}function i(t){var a=r.satTemp.single;return e[a.method](a.url,{params:{formCode:t}})}var r=a.satisfaction,d={getSatTemp:s("satTemp"),saveSatTemp:n("satTemp"),updateSatTemp:o("satTemp"),deleteSatTemp:l("satTemp"),getSatResult:s("satResult"),saveSatResult:n("satResult"),updateSatResult:o("satResult"),deleteSatResult:l("satResult"),getSatTempByCode:i};return d}t.$inject=["$window","$http","apiHost"],angular.module("nqms").factory("satNurseService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){return a.post(e.research.deleteResearchPaper,{seqId:t}).then(c)}function r(t){return a.post(e.research.saveResearchPaper,t).then(c)}function d(){var t={};return t.deptCode=o.getUserinfo().role.deptCode,a.get(e.research.getResearchPapers,{params:t}).then(c)}function c(t){return"0"===t.data.code?t:void 0}var m={getResearchPapers:d,saveResearchPaper:r,deleteResearchPaper:i};return m}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("paperService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(){s.getResearchPapers().then(function(t){t&&(u.list=t.data.data.lst)})}function r(t){u.formData=t,p()}function d(){u.formData={},p()}function c(){s.saveResearchPaper(u.formData).then(function(t){t&&"0"===t.data.code&&(l.success("保存成功！","提示"),i(),n.close("success"))})}function m(t){s.deleteResearchPaper(t).then(function(t){t&&"0"===t.data.code&&(l.success("已删除！","提示"),i(),n.close("success"))})}function p(){u.formData.deptCode=u.deptCode,n.open({templateUrl:"app/research/papers/papers.model.html",size:"md",ok:c,data:{formData:u.formData}})}var u=this;u.savePaper=c,u.edit=r,u.deletePapers=m,u.formData={},u.add=d,u.deptCode=o.getUserinfo().role.deptCode,i()}t.$inject=["$scope","$log","$filter","paperService","modalService","toastr","security"],angular.module("nqms").controller("ResearchPapersController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){return a.post(e.research.deleteResearchItem,{seqId:t}).then(c)}function r(t){return a.post(e.research.saveResearchItem,t).then(c)}function d(){var t={};return t.deptCode=o.getUserinfo().role.deptCode,a.get(e.research.getResearchItems,{params:t}).then(c)}function c(t){return"0"===t.data.code?t:void 0}var m={getResearchItems:d,saveResearchItem:r,deleteResearchItem:i};return m}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("researchItemService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(){s.getResearchItems().then(function(t){t&&(u.list=t.data.data.lst,u.tableParams=new a({},{dataset:u.lst}))})}function r(t){v=t,p()}function d(){v={},p()}function c(){s.saveResearchItem(v).then(function(t){t&&"0"===t.data.code&&(l.success("保存成功！","提示"),i(),n.close("success"))})}function m(t){s.deleteResearchItem(t).then(function(t){t&&"0"===t.data.code&&(l.success("已删除！","提示"),i(),n.close("success"))})}function p(){v.deptCode=u.deptCode,n.open({templateUrl:"app/research/item/item.model.html",size:"md",ok:c,data:{formData:v}})}var u=this,v={};u.saveGroup=c,u.edit=r,u.deleteGroup=m,u.add=d,u.deptCode=o.getUserinfo().role.deptCode,u.open=p,i()}t.$inject=["$scope","$log","NgTableParams","researchItemService","modalService","toastr","security"],angular.module("nqms").controller("ResearchItemController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){var s={};return s.seqId=t,a.get(e.qualityManager.deleteQualityTask,{params:s}).then(p)}function r(t){return a.post(e.qualityManager.editQualityTask,t).then(p)}function d(t){return a.post(e.qualityManager.saveQualityTask,t).then(p)}function c(t,s,n){var l={};return s?l.deptCode=s:"",
n?l.type=n:"",t?l.date=t:"",a.get(e.qualityManager.getQualityTaskList,{params:l}).then(p)}function m(){return a.get(e.qualityManager.getAllQualityForm,{}).then(p)}function p(t){return"0"===t.data.code?t:void 0}var u={getTaskList:c,saveTask:d,deleteTask:i,editTask:r,getAllQualityForm:m};return u}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("taskService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i){function r(){s.getTaskList(w,x,k).then(function(t){t&&(y.list=t.data.data)})}function d(){s.getAllQualityForm().then(function(t){t&&(y.formList=t.data.data,D.metaData.qualityFormList=angular.extend({},y.formList))})}function c(){D={formData:{},metaData:{}},n.open({templateUrl:"app/quality/task/addTask.tpl.html",size:"md",ok:g,data:D,methodsObj:{addDept:p,addMember:v,removeDept:u,removeMember:b,qualityFormList:d}})}function m(t){D.formData=angular.extend({},t),y.selectedLevel=t,t&&(t.deptCode?D.formData.deptList=t.deptCode.split(","):"",t.joinUserName?D.formData.memberList=t.joinUserName.split(","):""),n.open({templateUrl:"app/quality/task/addTask.tpl.html",size:"md",ok:f,data:D,methodsObj:{addDept:p,addMember:v,removeDept:u,removeMember:b,qualityFormList:d}})}function p(){var t=this;""!==t.deptText&&(t.formData.deptList=t.formData.deptList||[],t.formData.deptList.push(t.deptText),t.deptText="")}function u(t){var e=this;e.formData.deptList.splice(t,1)}function v(){var t=this;""!==t.memberText&&(t.formData.memberList=t.formData.memberList||[],t.formData.memberList.push(t.memberText),t.memberText="")}function b(t){var e=this;e.formData.memberList.splice(t,1)}function f(){var t,e,a;t=angular.extend({},D.formData),a=t.taskDate,t.deptCode=t.deptList?t.deptList.join(","):"",t.joinUserName=t.memberList?t.memberList.join(","):"",t.formCode=t.formCode.formCode,t.taskDate=i(a).format("YYYY-MM-DD"),e=t.createTime,t.createTime=i(parrent_create_Time).format("YYYY-MM-DD hh:mm:ss"),s.editTask(t).then(function(t){t&&"0"===t.data.code&&(l.success("保存成功！","提示"),r(),y.formData={},n.close("success"))})}function g(){var t=angular.extend({},D.formData),e=t.taskDate;t.deptCode=t.deptList?t.deptList.join(","):"",t.joinUserName=t.memberList?t.memberList.join(","):"",t.formCode=t.formCode.formCode,t.taskDate=i(e).format("YYYY-MM-DD"),s.saveTask(t).then(function(t){t&&"0"===t.data.code&&(l.success("保存成功！","提示"),r(),y.formData={},n.close("success"))})}function h(t){s.deleteTask(t).then(function(t){t&&"0"===t.data.code&&(l.success("已删除！","提示"),r(),y.formData={},n.close("success"))})}var y=this,D={formData:{},metaData:{}},x="",k="",w="2016-04";y.addTask=c,y.saveEditTask=f,y.saveTask=g,y.editTask=m,y.deleteTask=h,y.addDept=p,y.addMember=v,y.removeDept=u,y.removeMember=b,y.qualityFormList=d,y.deptCode=o.getUserinfo().role.deptCode,r(),d()}t.$inject=["$scope","$log","$filter","taskService","modalService","toastr","security","moment"],angular.module("nqms").controller("QualityTaskController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){var s={};return s.seqId=t,a.get(e.qualityManager.deleteQualityForm,{params:s}).then(m)}function r(t){return a.post(e.qualityManager.editQualityForm,t).then(m)}function d(t){return a.post(e.qualityManager.saveQualityForm,t).then(m)}function c(t,s){var n={};return t?n.deptCode=t:"",s?n.type=s:"",a.get(e.qualityManager.getQualityFormList,{params:n}).then(m)}function m(t){return"0"===t.data.code?t:void 0}var p={getFormList:c,saveForm:d,deleteForm:i,editForm:r};return p}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("formService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i,r,d,c){function m(){t.getFormList(w,C).then(function(t){t&&(x.list=t.data.data)})}function p(){k={formData:{},metaData:{}},o.open({templateUrl:"app/quality/form/addForm.tpl.html",size:"lg",ok:g,data:{formData:k.formData},methodsObj:{addDept:u,removeDept:v,addDetailList:b,removeDetailList:f}})}function u(){var t=this;""!==t.deptText&&(t.formData.deptList=t.formData.deptList||[],t.formData.deptList.push(t.deptText),t.deptText="")}function v(t){var e=this;e.formData.deptList.splice(t,1)}function b(t){var e=this;e.detailList&&(e.detailList.detailCode||e.detailList.item||e.detailList.points||e.detailList.stantard)&&(e.detailList.item&&(e.formData.qualityFormDetailList||(e.formData.qualityFormDetailList=[])),e.formData.qualityFormDetailList.push(t),e.detailList={})}function f(t){var e=this;e.formData.qualityFormDetailList.splice(t,1)}function g(){var e=angular.extend({},k.formData);e.deptCode=e.deptList?e.deptList.join(","):"",t.saveForm(e).then(function(t){t&&"0"===t.data.code&&(l.success("保存成功！","提示"),m(),x.formData={},o.close("success"))})}function h(t){k.formData=angular.extend({},t),t&&t.deptCode&&(k.formData.deptList=t.deptCode.split(",")),o.open({templateUrl:"app/quality/form/addForm.tpl.html",size:"lg",ok:y,data:{formData:k.formData},methodsObj:{addDept:u,removeDept:v,addDetailList:b,removeDetailList:f}})}function y(){var e,a,s,n;if(e=angular.extend({},k.formData),e.deptCode=e.deptList?e.deptList.join(","):"",s=e.createTime,e.createTime=moment(s).format("YYYY-MM-DD hh:mm:ss"),e.qualityFormDetailList){a=e.qualityFormDetailList.length;for(var i=0;a>i;i++)n=e.qualityFormDetailList[i].createTime,e.qualityFormDetailList[i].createTime=moment(n).format("YYYY-MM-DD hh:mm:ss")}t.editForm(e).then(function(t){t&&"0"===t.data.code&&(l.success("保存成功！","提示"),m(),x.formData={},o.close("success"))})}function D(e){t.deleteForm(e).then(function(t){t&&"0"===t.data.code&&(l.success("已删除！","提示"),m(),e==x.formData.seqId&&(x.formData={}),o.close("success"))})}var x=this,k={formData:{},metaData:{}},w="",C="";x.saveEditForm=y,x.saveForm=g,x.edit=h,x.del=D,x.addForm=p,x.addDept=u,x.removeDept=v,x.addDetailList=b,x.removeDetailList=f,x.deptCode=i.getUserinfo().role.deptCode,x.filter_type=[{type:"全部"},{type:"1"}],x.filter_area=[{type:"全部"},{type:"1"}],x.filter_type.selected=x.filter_type[0],x.filter_area.selected=x.filter_area[0],m()}t.$inject=["formService","$scope","$log","$q","$uibModal","toastr","modalService","security","$injector","$state","$location"],angular.module("nqms").controller("QualityFormController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){var s={};return s.seqId=t,a.get(e.qualityManager.deleteQualityDeal,{params:s}).then(u)}function r(t){return a.post(e.qualityManager.saveQualityDeal,t).then(u)}function d(t){var s={};return t?s.resultCode=t:"",a.get(e.qualityManager.getQualityDealList,{params:s}).then(u)}function c(t,s,n){var l={};return t?l.date=t:"",s?l.deptCode=s:"",n?l.type=n:"",a.get(e.qualityManager.getQualityResultCode,{params:l}).then(u)}function m(t,s,n){var l={};return t?l.date=t:"",s?l.deptCode=s:"",n?l.formName=n:"",a.get(e.qualityManager.getQualityCheckDetail,{params:l}).then(u)}function p(){var t={};return a.get(e.qualityManager.getAllQualityForm,{params:t}).then(u)}function u(t){return"0"===t.data.code?t:void 0}var v={getDealList:d,saveDeal:r,deleteDeal:i,getChekcDetail:m,getAllQualityForm:p,getResultCode:c};return v}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("dealService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i){function r(){return n.getResultCode(x,k,w).then(function(t){return t?(h.list=t.data.data,h.list[0].resultCode):void 0})}function d(t){n.getDealList(t).then(function(t){t&&(h.lst=t.data.data,h.tableParams=new a({},{dataset:h.lst}))})}function c(){n.getAllQualityForm().then(function(t){t&&(h.formList=t.data.data,h.tableParams=new a({},{dataset:h.formList}),y.metaData.qualityFormList=angular.extend({},h.formList))})}function m(){y={formData:{},metaData:{}},c(),l.open({templateUrl:"app/quality/deal/addDeal.tpl.html",size:"lg",ok:b,data:y,methodsObj:{qualityFormList:c,checkDetail:p}})}function p(){var t,e,s,o,i=this;y.metaData={},i.formData.checkDetail&&i.formData.checkDetail.taskDate&&i.formData.checkDetail.deptCode&&i.formData.checkDetail.selectForm.formName&&(o=i.formData.checkDetail.taskDate,t=moment(o).format("YYYY-MM-DD"),e=i.formData.checkDetail.deptCode,s=i.formData.checkDetail.selectForm.formName,n.getChekcDetail(t,e,s).then(function(t){t&&(h.get_lst=t.data.data,h.tableParams=new a({},{dataset:h.get_lst}),y.metaData.checkDetailList=angular.extend({},h.get_lst),g=y.metaData.checkDetailList[0].resultCode)}),l.open({templateUrl:"app/quality/deal/checkDetail.tpl.html",size:"md",data:y,methodsObj:{qualityFormList:c,checkDetail:p}}))}function u(t){y.formData=angular.extend({},t),h.selectedLevel=t,t&&(t.deptCode?y.formData.deptList=t.deptCode.split(","):"",t.joinUserName?y.formData.memberList=t.joinUserName.split(","):""),l.open({templateUrl:"app/quality/deal/addDeal.tpl.html",size:"lg",ok:v,data:y,methodsObj:{qualityFormList:c,checkDetail:p}})}function v(){var t=angular.extend({},y.formData),e=t.taskDate;t.deptCode=t.deptList?t.deptList.join(","):"",t.joinUserName=t.memberList?t.memberList.join(","):"",t.formCode=t.formCode.formCode,t.taskDate=moment(e).format("YYYY-MM-DD"),n.saveDeal(t).then(function(t){t&&"0"===t.data.code&&(o.success("保存成功！","提示"),d(),h.formData={},l.close("success"))})}function b(){var t=angular.extend({},y.formData);(t.issueContent||t.reasonAnalysis||t.resDescribe||t.resPlan||t.evaluation)&&(t.formName=t.checkDetail.selectForm.formName,t.resultCode=g,t.issueTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),t.reasonTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),t.resDTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),t.resPTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),t.evaluationTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),t.issueUserCode=D,t.reasonUserCode=D,t.resDUserCode=D,t.resPUserCode=D,t.evaluationUserCode=D,n.saveDeal(t).then(function(t){t&&"0"===t.data.code&&(o.success("保存成功！","提示"),d(),h.formData={},l.close("success"))}))}function f(t){n.deleteDeal(t).then(function(e){e&&"0"===e.data.code&&(o.success("已删除！","提示"),d(),t==h.formData.seqId&&(h.dataForDealModal.formData={}),l.close("success"))})}var g,h=this,y={formData:{},metaData:{}},D=i.getUserinfo().user.userCode,x="2016-04",k="",w="";h.add=m,h.saveEdit=v,h.save=b,h.edit=u,h.del=f,h.qualityFormList=c,h.deptCode=i.getUserinfo().role.deptCode,h.checkDetail=p,r().then(d)}t.$inject=["$scope","$log","NgTableParams","$filter","dealService","modalService","toastr","security"],angular.module("nqms").controller("QualityDealController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){var s={};return s.seqId=t,a.get(e.qualityManager.deleteQualityCheck,{params:s}).then(c)}function r(t){return a.post(e.qualityManager.editQualityCheck,t).then(c)}function d(t,s,n){var l={};return t?l.date=t:"",s?l.deptCode=s:"",n?l.formCode=n:"",a.get(e.qualityManager.getQualityCheckList,{params:l}).then(c)}function c(t){return"0"===t.data.code?t:void 0}var m={getCheckList:d,saveEditCheck:r,deleteCheck:i};return m}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("checkService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(){s.getCheckList(u,v,b).then(function(t){t&&(m.list=t.data.data)})}function r(t){p.formData=angular.extend({},t),n.open({templateUrl:"app/quality/check/editCheck.tpl.html",size:"md",ok:d,data:p})}function d(){var t,e,a,o,r,d,c=0;t=angular.extend({},p.formData),r=t.qualityResultDetailList.length;for(var u=0;r>u;u++)d=t.qualityResultDetailList[u].count,c+=Number(d);if(t.count=c,a=t.createTime,t.createTime=moment(a).format("YYYY-MM-DD hh:mm:ss"),a=t.updateTime,t.updateTime=moment(a).format("YYYY-MM-DD hh:mm:ss"),t.qualityResultDetailList){e=t.qualityResultDetailList.length;for(var u=0;e>u;u++)o=t.qualityResultDetailList[u].createTime,t.qualityResultDetailList[u].createTime=moment(o).format("YYYY-MM-DD hh:mm:ss"),t.qualityResultDetailList[u].updateTime=moment(o).format("YYYY-MM-DD hh:mm:ss")}s.saveEditCheck(t).then(function(t){t&&"0"===t.data.code&&(l.success("保存成功！","提示"),i(),m.dataForCheckModal={},n.close("success"))})}function c(t){s.deleteCheck(t).then(function(t){t&&"0"===t.data.code&&(l.success("已删除！","提示"),i(),n.close("success"))})}var m=this,p={formData:{},metaData:{}},u="2016-04",v="",b="";m.save=d,m.edit=r,m.del=c,m.deptCode=o.getUserinfo().role.deptCode,i()}t.$inject=["$scope","$log","$filter","checkService","modalService","toastr","security"],angular.module("nqms").controller("QualityCheckController",t)}(),function(){"use strict";function t(t,e){function a(e){return t.get(n.getUserList,{params:e})}var s={},n=e.files;return s.getUserList=a,s}t.$inject=["$http","apiHost"],angular.module("nqms").factory("hrSearchService",t)}(),function(){"use strict";function t(t,e,a){function s(){e.getUserList(l.params).then(function(t){l.userData=t.data.data.lst})}function n(t){var e=[];return e=e.concat([_.pick(t,"deptCode","deptName")]),_.each(t.belongedDepts,function(t){e=e.concat(n(t))}),e}var l=this;l.search=s,a.getDeptData().then(function(t){l.deptData=n(t),l.getDeptName=_.memoize(function(t){var e;return _.some(l.deptData,function(a){return a.deptCode==t?(e=a.deptName,!0):void 0}),e})})}t.$inject=["$rootScope","hrSearchService","deptService"],angular.module("nqms").controller("HrSearchController",t)}(),function(){"use strict";function t(t,e,a){function s(e){return t.get(o.getUserList,{params:e})}function n(s){var n=a.user.quit;return t[n.method](n.url,{userType:e.getDicCode("nature","离职"),userCode:s})}var l={},o=a.files;return l.getUserList=s,l.quit=n,l}t.$inject=["$http","$rootScope","apiHost"],angular.module("nqms").factory("hrQuitService",t)}(),function(){"use strict";function t(t,e,a){function s(){return e.getUserList(o.params).then(function(t){o.userData=t.data.data.lst})}function n(t){var e=[];return e=e.concat([_.pick(t,"deptCode","deptName")]),_.each(t.belongedDepts,function(t){e=e.concat(n(t))}),e}function l(a){e.quit(a).then(function(e){t.$broadcast("toast",{type:"success",content:"成功登记离职"})})}var o=this;o.search=s,o.quit=l,a.getDeptData().then(function(t){o.deptData=n(t),o.getDeptName=_.memoize(function(t){var e;return _.some(o.deptData,function(a){return a.deptCode==t?(e=a.deptName,!0):void 0}),e})})}t.$inject=["$rootScope","hrQuitService","deptService"],angular.module("nqms").controller("HrQuitController",t)}(),function(){"use strict";function t(t,e){function a(e){return t.get(n.getUserList,{params:e})}var s={},n=e.files;return s.getUserList=a,s}t.$inject=["$http","apiHost"],angular.module("nqms").factory("hrQrcodeService",t)}(),function(){"use strict";function t(t,e,a){function s(){e.getUserList(l.params).then(function(t){l.userData=t.data.data.lst,console.log(l.userData)})}function n(t){var e=[];return e=e.concat([_.pick(t,"deptCode","deptName")]),_.each(t.belongedDepts,function(t){e=e.concat(n(t))}),e}var l=this;l.search=s,a.getDeptData().then(function(t){l.deptData=n(t)})}t.$inject=["$rootScope","hrQrcodeService","deptService"],angular.module("nqms").controller("HrQrcodeController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i,r){function d(t){var e={};e[t]=m.count[t],"comUser"==t?(e[t].birthday&&(e[t].birthday=l(e[t].birthday).format("YYYY-MM-DD")),e[t].practiceApproveDate&&(e[t].practiceApproveDate=l(e[t].practiceApproveDate).format("YYYY-MM-DD")),e[t].inductionDate&&(e[t].inductionDate=l(e[t].inductionDate).format("YYYY-MM-DD")),e[t].graduationDate&&(e[t].graduationDate=l(e[t].graduationDate).format("YYYY-MM-DD")),e[t].practiceValidDate&&(e[t].practiceValidDate=l(e[t].practiceValidDate).format("YYYY-MM-DD")),m.count[t].deptCode=s.selectedDeptCode):("comUserFamily"!==t&&(e[t].startDate=l(e[t].startDate).format("YYYY-MM-DD"),e[t].endDate=l(e[t].endDate).format("YYYY-MM-DD")),e[t].map(function(t,e){return t.userCode=s.selectedUser.comUser.userCode,t})),e.dataType=t,s.add(e).then(function(t){t&&(o.success("保存成功！","提示"),s.getUserInfo(m.count.comUser.userCode,m.count.comUser.hisCode).then(function(t){m.accessible=!0,m.rootScope.$broadcast("refreshUserList",s.selectedDeptCode),m.rootScope.$broadcast("refreshUserDetail",t)}))})}function c(){a.dismiss("cancel")}var m=this;m.rootScope=t,m.scope=e,m.deptName=s.selectedDeptName,m.cancel=c,m.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:l(),startingDay:1},m.validationOption={blurTrig:!0},m.accessible=!s.isNew,m.save=d,m.count=s.isNew?{}:angular.extend({},s.selectedUser);var p={comUserPosition:{positionName:"",reviewUnit:"",startDate:"",endDate:""},comUserNursing:{reviewUnit:"",unitLevel:"",deptName:"",position:"",startDate:"",endDate:""},comUserEducation:{educationType:"",leaningTime:"",courseTopics:"",courseContent:"",startDate:"",endDate:""},comUserTraining:{learnContent:"",professional:"",diploma:"",speaker:"",creditType:"",credit:"",funding:"",describe:"",startDate:"",endDate:""},comUserLearning:{school:"",professional:"",diploma:"",diplomaNo:"",degree:"",degreeNo:"",describe:"",startDate:"",endDate:""},comUserFamily:{relation:"",name:"",phone:"",email:"",remark:""}};m.addItem=function(t){m.count[t].push(angular.extend({},p[t]))},m.removeItem=function(t,e,a){a?s.deleteUser(t,a).then(function(a){a&&m.count[t].splice(e,1)}):m.count[t].splice(e,1)},m.openCalender=function(t,e){e?e[t]=!0:m[t]=!0},m.scope.$on("resetCount",function(t,e){m.count=e})}t.$inject=["$rootScope","$scope","$uibModalInstance","filesService","$log","moment","toastr","$window","$controller"],angular.module("nqms").config(["w5cValidatorProvider",function(t){t.config({showError:!1,removeError:!0}),t.setRules({userCode:{number:"必须输入数字"},userName:{required:"姓名不能为空"},duty:{required:"职务不能为空"},email:{required:"邮箱不能为空"},phone:{required:"电话不能为空"},positionName:{required:"必填"},reviewUnit:{required:"必填"}})}]).controller("fileModalController",t)}(),function(){"use strict";function t(t,e,a,s){function n(t,s){return a.get(e.files.getUserDetailInfo,{params:{userCode:t,hisCode:s}}).then(d)}function l(t){function n(t){return"0"===t.data.code?(c.userList=t.data.data.lst,t.data.data.lst):void s.error("获取用户数据失败！\n"+t.data.msg)}return a.get(e.files.getUserList,{params:{deptCode:t}}).then(n)}function o(t){return c.selectedUser=t,t}function i(t){return a.post(e.files.save,t).then(d)}function r(t,s){return a.post(e.files["delete"],{dataType:t,delSeqId:s}).then(d)}function d(t){return"0"===t.data.code?t:void 0}var c={selectedUser:{},isNew:!0,selectedDeptCode:"",userList:[],getUserInfo:n,getUserList:l,setSelectUser:o,add:i,deleteUser:r};return c}t.$inject=["$window","apiHost","$http","$log"],angular.module("nqms").config(["toastrConfig",function(t){t.tapToDismiss=!0,t.timeOut=0}]).factory("filesService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i,r,d){function c(t,e){f.selectedDept=t,f.selectedUserCode=!1,f.expanded=!1,f.expanedIndex=null,o.selectedDeptCode=t,o.selectedDeptName=e,o.getUserList(t).then(function(t){a.info("用户数据",t),f.userDataList=t})}function m(t){function e(){s.open({templateUrl:"app/nursingWorkers/files/modal.tpl.html",controller:"fileModalController",backdrop:"static",controllerAs:"vm",animation:!0,size:"xlg"})}o.isNew=!t,t?v(t,e):e()}function p(){r.open({templateUrl:"app/nursingWorkers/files/uploadFile.modal.html",size:"md",data:{formData:{uploader:new d({url:"mnisqm/system/importSysUserExcel"})}}})}function u(t){o.deleteUser("comUser",t.seqId).then(function(t){t&&(i.success("删除成功","提示"),f.scope.$emit("refreshUserList",f.selectedDept))})}function v(t,e){f.selectedUserCode=t,o.getUserInfo(t,"").then(function(t){b(t.data.data,e)})}function b(t,e){f.detail=angular.extend({},t);var a,s=t;for(a in s)s.hasOwnProperty(a)&&h.forEach(function(t){s[a][t]&&(s[a][t]=new Date(s[a][t])),s[a].length>0&&s[a].map(function(e){return e[t]&&(e[t]=new Date(e[t])),e})});o.selectedUser=s,f.rootScope.$broadcast("resetCount",o.selectedUser),e&&e()}var f=this,g=0,h=["birthday","inductionDate","practiceApproveDate","practiceValidDate","graduationDate","startDate","endDate"];f.rootScope=t,f.scope=e,f.uploader=new d,f.isOpen=!0,n.getDeptData().then(function(t){a.info("科室数据",t),f.deptData=t}),a.info(g),f.del=u,f.open=m,f.load=c,f.loadDetail=v,f.openUpload=p,f.scope.$on("refreshUserList",function(t,e){c(e)}),f.scope.$on("refreshUserDetail",function(t,e){f.selectedUserCode=e.comUser.userCode,b(e)})}t.$inject=["$rootScope","$scope","$log","$uibModal","deptService","NgTableParams","filesService","toastr","modalService","FileUploader"],angular.module("nqms").controller("NursingWorkersFileController",t)}(),function(){"use strict";function t(t,e){function a(){var e=d.dept.getter;return t[e.method](e.url)}function s(e){var a=d.dept.setter;return t[a.method](a.url,e)}function n(e){var a=d.dept.deleter;return t[a.method](a.url,{params:{seqId:e}})}function l(e){var a=d.userDept.setter;return t[a.method](a.url,e)}function o(e){var a=d.userDept.deleter;return t[a.method](a.url,{params:{seqId:e}})}function i(a){return t.get(e.user.getDept,{params:{deptCode:a}})}function r(a){function s(t){return"0"===t.data.code?(c.userList=t.data.data.lst,t.data.data.lst):void $log.error("获取用户数据失败！\n"+t.data.msg)}return t.get(e.files.getUserList,{params:{deptCode:a}}).then(s)}var d=e.deptManager,c={getAllDept:a,saveDept:s,deleteDept:n,saveUserDept:l,deleteUserDept:o,getUserDept:i,getUserList:r};return c}t.$inject=["$http","apiHost"],angular.module("nqms").factory("deptMgtService",t)}(),function(){"use strict";function t(t,e,a){function s(){a.getAllDept().then(function(t){i.deptData=t.data.data,i.getDeptName=_.memoize(function(t){var e;return _.some(i.deptData,function(a){return a.deptCode==t?(e=a.deptName,!0):void 0}),e})})}function n(t){i.detail=[],o=t,a.getUserList(t).then(function(t){i.detail=t})}function l(t){a.saveUserDept(_.pick(t,"userCode","deptCode")).then(function(t){n(o)})}var o,i=this;s(),i.loadDetail=n,i.open=function(t){var a=e.open({templateUrl:"app/nursingWorkers/dept/dept.modal.html",controller:"DeptModalController",backdrop:"static",controllerAs:"vm",animation:!0,size:"sm",resolve:{id:function(){return angular.copy(t)}}});a.result.then(function(){s()})},i.del=function(e){a.deleteDept(e).then(function(){t.$broadcast("toast",{type:"success",content:"操作成功"}),s()})},i.save=l}t.$inject=["$rootScope","$uibModal","deptMgtService"],angular.module("nqms").controller("DeptController",t)}(),function(){"use strict";function t(t,e,a,s){function n(){e.dismiss()}function l(){var s=_.pick(o.detail,"deptCode","deptName","fatherDept","seqId");a.saveDept(s).then(function(a){t.$broadcast("toast",{type:"success",content:"操作成功"}),e.close()})}var o=this;o.cancel=n,o.ok=l,o.detail=s?s:{},a.getAllDept().then(function(t){o.deptData=t.data.data})}t.$inject=["$rootScope","$uibModalInstance","deptMgtService","id"],angular.module("nqms").controller("DeptModalController",t)}(),function(){"use strict";function t(t,e,a,s,n){function l(t){return s.post(f.save,{comUser:t,dataType:"comUser"})}function o(t,e){return s.get(a.files.getUserDetailInfo,{params:{userCode:t,hisCode:e}}).then(v)}function i(t){return s.get(a.files.getDimissionUserList,{params:{deptCode:t}}).then(v)}function r(t){function e(t){return"0"===t.data.code?(b.userList=t.data.data.lst,t.data.data.lst):void n.error("获取用户数据失败！\n"+t.data.msg)}return s.get(a.files.getUserList,{params:{deptCode:t}}).then(e)}function d(t){return b.selectedUser=t,t}function c(t){return s.post(a.files.save,t).then(v)}function m(e){var n=a.user.quit;return s[n.method](n.url,{userType:t.getDicCode("nature","离职"),userCode:e})}function p(t){return s[a.user.getComUserChange.method](a.user.getComUserChange.url,{params:{userCode:t}}).then(v)}function u(t,e){return s.post(a.files["delete"],{dataType:t,delSeqId:e}).then(v)}function v(t){return"0"===t.data.code?t:void 0}var b={selectedUser:{},isNew:!0,selectedDeptCode:"",userList:[],getUserInfo:o,getUserList:r,getComUserChange:p,getDimission:i,setSelectUser:d,add:c,deleteUser:u,saveUser:l,quit:m},f=a.files;return b}t.$inject=["$rootScope","$window","apiHost","$http","$log"],angular.module("nqms").config(["toastrConfig",function(t){t.tapToDismiss=!0,t.timeOut=0}]).factory("baseInfoService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i,r){function d(t){s.getDeptData().then(function(e){g.deptData=e,g.treeData=[m(e)],g.expandedNodes=[g.treeData[0]],g.scope.$watch("vm.filterText",function(t){t?g.expandedNodes=[].concat(g.treeData[0]).concat(g.treeData[0].children):g.expandedNodes=[g.treeData[0]]}),t?a.go("home.baseInfo.detail",{hisCode:t.hisCode,deptN:"",deptCode:""}):"BaseInfoDetailCtrl"!==a.current.controller&&a.go("home.baseInfo.stat",{id:i.getUserinfo().role.deptCode})}),n.getDimission(i.getUserinfo().role.deptCode).then(function(t){g.dimissionData=[m(t.data.data.lst)]})}function c(e){f!==e&&(f=e,t.$broadcast("loading","tree"),e.deptName?a.go("home.baseInfo.stat",{id:e.deptCode}):a.go("home.baseInfo.detail",{id:e.userCode,hisCode:e.hisCode,dept:e.deptCode,deptN:e.deptN}))}function m(t){var e={};return e.deptCode=t.deptCode,e.deptName=t.deptName,_.each(t.belongedDepts,function(e,a){t.belongedDepts[a]=m(e)}),Array.isArray(t.user)&&t.user.forEach(function(e){e.deptCode=t.deptCode,e.deptN=t.deptName}),e.children=_.compact([].concat(t.user,t.belongedDepts)),e}function p(){l.open({templateUrl:"app/nursingWorkers/baseInfo/uploadFile.modal.html",size:"md",data:{formData:{uploader:new o({url:"mnisqm/system/importSysUserExcel"})}}})}function u(){l.open({templateUrl:"app/nursingWorkers/baseInfo/add.modal.html",size:"md",data:{formData:{}},ok:function(t){v(t)}})}function v(e){var a={};a.dataType="comUser",a.comUser=e,n.add(a).then(function(e){e&&(t.$broadcast("toast",{type:"success",content:"保存成功！"}),l.close("success"),d(a.comUser))})}function b(){g.isIncumbency=!g.isIncumbency}var f,g=this;g.scope=e,g.openUpload=p,g.openAdd=u,g.switchType=b,g.stateParam=r,g.isIncumbency=!0,d(),g.select=c,e.$on("refreshTree",d)}t.$inject=["$rootScope","$scope","$state","deptService","baseInfoService","modalService","FileUploader","security","$stateParams"],angular.module("nqms").controller("BaseInfoCtrl",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(){var t=i.level.config;t.legend.data=_.pluck(r,"name"),t.series[0].data=r;var e=i.rank.config;e.legend.data=_.pluck(d,"name"),e.series[0].data=d;var a=i.transfer.config;a.legend.data=_.pluck(c,"name"),a.series[0].data=c;var s=i.duty.config;s.legend.data=_.pluck(m,"name"),s.series[0].data=m}t.$broadcast("loaded","tree");var i=this,r=[{value:_.random(5),name:"专科护士"},{value:_.random(10),name:"高级责任护士"},{value:_.random(20),name:"责任护士"},{value:_.random(15),name:"助理护士"}],d=[{value:_.random(10),name:"未定级"},{value:_.random(10),name:"护士"},{value:_.random(10),name:"护师"},{value:_.random(10),name:"主管护师"},{value:_.random(5),name:"副主任护师"},{value:_.random(5),name:"主任护师"}],c=[{value:_.random(20),name:"转入"},{value:_.random(20),name:"转出"}],m=[{value:_.random(2e3),name:"白班时间"},{value:_.random(500),name:"夜班时间"},{value:_.random(300),name:"请假时间"}];i.level={identity:a.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("人员层级")},i.rank={identity:a.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("人员职称")},i.transfer={identity:a.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("转入转出")},i.duty={identity:a.generateInstanceIdentity(),dimension:"16:9",config:n.pieInit("排班情况")},o(),l.getUserList(s.id).then(function(t){i.userDataList=t})}t.$inject=["$rootScope","$scope","$echarts","$stateParams","chartsService","baseInfoService"],angular.module("nqms").controller("BaseInfoStatCtrl",t)}(),function(){"use strict";function t(t,e,a,s,n){function l(){var t=a.id,e=a.hisCode;return e&&(t=""),s.getUserInfo(t,e).then(function(t){c.detail=t.data.data})}function o(t,e,l){n.open({templateUrl:"app/nursingWorkers/baseInfo/editInfoTime.modal.html",size:"md",data:{metaData:{title:e,name:t,list:c.detail[l]},formData:c.detail.comUser},initFn:function(t){["technicalPost","duty"].indexOf(t.metaData.name)<0&&s.getComUserChange(a.id).then(function(e){"clinical"===t.metaData.name?t.metaData.list=e.data.data.filter(function(t){return 1===parseInt(t.changeType)}):t.metaData.list=e.data.data.filter(function(t){return 2===parseInt(t.changeType)})})},ok:r,methodsObj:{openCalender:function(t,e){e?e[t]=!0:this[t]=!0}}})}function i(e){s.quit(e).then(function(e){t.$broadcast("toast",{type:"success",content:"成功登记离职"}),d()})}function r(e,l){var o={};o.dataType=l||e,o[e]=c.detail[e],"comUser"==e?o[e].deptCode=a.dept:"string"==typeof e&&o[e].forEach(function(t,e){t.userCode=c.detail.comUser.userCode}),"object"==typeof e&&(e.deptCode=a.dept,o={},o.dataType="comUser",o.comUser=l||e),s.add(o).then(function(e){e&&(t.$broadcast("toast",{type:"success",content:"保存成功！"}),n.close("success"),c.load.func())})}function d(){t.$broadcast("refreshTree")}t.$broadcast("loaded","tree");var c=this;c.scope=e,c.openInfo=o,c.stateParam=a,c.quit=i,c.marrige=[{code:"01",name:"已婚"},{code:"02",name:"未婚"},{code:"03",name:"离异"},{code:"04",name:"丧偶"}];var m={comUserPosition:{positionName:"",reviewUnit:"",startDate:"",endDate:""},comUserNursing:{reviewUnit:"",unitLevel:"",deptName:"",position:"",startDate:"",endDate:""},comUserEducation:{educationType:"",leaningTime:"",courseTopics:"",courseContent:"",startDate:"",endDate:""},comUserTraining:{learnContent:"",professional:"",diploma:"",speaker:"",creditType:"",credit:"",funding:"",describe:"",startDate:"",endDate:""},comUserLearning:{school:"",professional:"",diploma:"",diplomaNo:"",degree:"",degreeNo:"",describe:"",startDate:"",endDate:""},comUserFamily:{relation:"",name:"",phone:"",email:"",remark:""}};c.openCalender=function(t,e){e?e[t]=!0:c[t]=!0},c.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:moment(),startingDay:1},c.addItem=function(t){c.detail[t].push(angular.extend({},m[t]))},c.removeItem=function(t,e){c.detail[t].splice(e,1)},c.save=r,c.load={func:l,init:!0},e.$on("save",r)}t.$inject=["$rootScope","$scope","$stateParams","baseInfoService","modalService"],angular.module("nqms").controller("BaseInfoDetailCtrl",t)}(),function(){"use strict";function t(t,e,a,s){function n(t,s){return a.get(e.files.getUserDetailInfo,{params:{userCode:t,hisCode:s}}).then(d)}function l(t){function n(t){return"0"===t.data.code?(c.userList=t.data.data.lst,t.data.data.lst):void s.error("获取用户数据失败！\n"+t.data.msg)}return a.get(e.files.getUserList,{params:{deptCode:t}}).then(n)}function o(t){return c.selectedUser=t,t}function i(t){return a.post(e.files.save,t).then(d)}function r(t,s){return a.post(e.files["delete"],{dataType:t,delSeqId:s}).then(d)}function d(t){return"0"===t.data.code?t:void 0}var c={selectedUser:{},isNew:!0,selectedDeptCode:"",userList:[],getUserInfo:n,getUserList:l,setSelectUser:o,add:i,deleteUser:r};return c}t.$inject=["$window","apiHost","$http","$log"],angular.module("nqms").config(["toastrConfig",function(t){t.tapToDismiss=!0,t.timeOut=0}]).factory("altService",t)}(),function(){"use strict";function t(t,e,a,s,n){function l(e){d!==e&&(d=e,t.$broadcast("loading","content"),m.id=e.userCode,m.dept=e.deptCode,i())}function o(t){var e={};return e.deptCode=t.deptCode,e.deptName=t.deptName,_.each(t.belongedDepts,function(e,a){t.belongedDepts[a]=o(e)}),e.children=_.compact([].concat(t.user,t.belongedDepts)),e}function i(){return n.getUserInfo(m.id,"").then(function(e){c.detail=e.data.data,t.$broadcast("loaded","content")})}function r(e){var a={};a[e]=c.detail[e],"comUser"==e?a[e].deptCode=m.dept:a[e].forEach(function(t,e){t.userCode=c.detail.comUser.userCode}),a.dataType=e,n.add(a).then(function(e){e&&(t.$broadcast("toast",{type:"success",content:"保存成功！"}),c.load.func())})}var d,c=this,m={};c.scope=e,s.getDeptData().then(function(t){c.deptData=t,c.treeData=[o(t)],c.expandedNodes=[c.treeData[0]],c.scope.$watch("vm.filterText",function(t){t?c.expandedNodes=[].concat(c.treeData[0]).concat(c.treeData[0].children):c.expandedNodes=[c.treeData[0]]})}),c.select=l;var p={comUserPosition:{positionName:"",reviewUnit:"",
startDate:"",endDate:""},comUserNursing:{reviewUnit:"",unitLevel:"",deptName:"",position:"",startDate:"",endDate:""},comUserEducation:{educationType:"",leaningTime:"",courseTopics:"",courseContent:"",startDate:"",endDate:""},comUserTraining:{learnContent:"",professional:"",diploma:"",speaker:"",creditType:"",credit:"",funding:"",describe:"",startDate:"",endDate:""},comUserLearning:{school:"",professional:"",diploma:"",diplomaNo:"",degree:"",degreeNo:"",describe:"",startDate:"",endDate:""},comUserFamily:{relation:"",name:"",phone:"",email:"",remark:""}};c.openCalender=function(t,e){e?e[t]=!0:c[t]=!0},c.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:moment(),startingDay:1},c.addItem=function(t){c.detail[t].push(angular.extend({},p[t]))},c.removeItem=function(t,e){c.detail[t].splice(e,1)},c.save=r,c.load={func:i,init:!0}}t.$inject=["$rootScope","$scope","$state","deptService","baseInfoService"],angular.module("nqms").controller("AltCtrl",t)}(),function(){"use strict";function t(t,e){function a(e){return t.post(n.save,{comUser:e,dataType:"comUser"})}var s={},n=e.files;return s.saveUser=a,s}t.$inject=["$http","apiHost"],angular.module("nqms").factory("hrAddService",t)}(),function(){"use strict";function t(t,e){function a(){e.saveUser(s.detail).then(function(){t.$broadcast("toast",{type:"success",content:"添加成功"})})}var s=this;s.save=a}t.$inject=["$rootScope","hrAddService"],angular.module("nqms").controller("HrAddController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){return a.post(e.manual.workManual["delete"],{seqId:t}).then(c)}function r(t){return a.post(e.manual.workManual.save,t).then(c)}function d(){var t={};return t.deptCode=o.getUserinfo().role.deptCode,a.get(e.manual.workManual.get,{params:t}).then(c)}function c(t){return"0"===t.data.code?t:void 0}var m={get:d,save:r,"delete":i};return m}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("workManualService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i){function r(){n.getGroupList().then(function(t){t&&(b.lst=t.data.data.lst,b.tableParams=new a({},{dataset:b.lst}))})}function d(t){b.formData=angular.extend({},t),b.selectedLevel=t,t&&t.beds&&(b.formData.bedList=t.beds.split(";"))}function c(){b.formData={}}function m(){""!==b.flowText&&(b.formData.bedList=b.formData.bedList||[],b.formData.bedList.push(b.flowText),b.flowText="")}function p(t){b.formData.bedList.splice(t,1)}function u(){var t=angular.extend({},b.formData);t.beds=t.bedList?t.bedList.join(";"):"",t.deptCode=b.deptCode,n.saveGroup(t).then(function(t){t&&"0"===t.data.code&&(o.success("保存成功！","提示"),r(),b.formData={},l.close("success"))})}function v(t){n.deleteGroup(t).then(function(e){e&&"0"===e.data.code&&(o.success("已删除！","提示"),r(),t==b.formData.seqId&&(b.formData={}),l.close("success"))})}var b=this;b.saveGroup=u,b.edit=d,b.deleteGroup=v,b.formData={},b.add=c,b.deptCode=i.getUserinfo().role.deptCode,r(),b.removeFlow=p,b.addFlow=m}t.$inject=["$scope","$log","NgTableParams","$filter","bedService","modalService","toastr","security"],angular.module("nqms").controller("ManualWorkController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){return a.post(e.manual.item["delete"],{itemCode:t}).then(c)}function r(t){return a.post(e.manual.item.save,t).then(c)}function d(t){var s={};return s.deptCode=t||o.getUserinfo().role.deptCode,a.get(e.manual.item.get,{params:s}).then(c)}function c(t){return"0"===t.data.code?t:void 0}var m={getItems:d,saveItem:r,deleteItem:i};return m}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("manualItemService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i){function r(){n.getItems().then(function(t){t&&(u.lst=t.data.data,u.tableParams=new a({},{dataset:u.lst}))})}function d(t){u.formData=angular.extend({},t),u.selectedItem=t,u.formData.dept={deptCode:u.formData.deptCode,deptName:u.formData.deptName}}function c(){u.formData={}}function m(){var t=angular.extend({},u.formData);t.deptCode=t.dept.deptCode,t.deptName=t.dept.deptName,delete t.dept,n.saveItem(t).then(function(t){t&&"0"===t.data.code&&(l.success("保存成功！","提示"),r(),u.formData={})})}function p(t){n.deleteItem(t).then(function(e){e&&"0"===e.data.code&&(l.success("已删除！","提示"),r(),t==u.formData.seqId&&(u.formData={}))})}var u=this;u.save=m,u.edit=d,u.deleteItem=p,u.formData={},u.add=c,u.deptCode=o.getUserinfo().role.deptCode,u.deptList=i.deptList,0===u.deptList.length&&i.getDeptData().then(function(t){u.deptList=t.belongedDepts,u.deptList.unshift({deptCode:t.deptCode,deptName:t.deptName})}),r()}t.$inject=["$scope","$log","NgTableParams","$filter","manualItemService","toastr","security","deptService"],angular.module("nqms").controller("ManualItemController",t)}(),function(){"use strict";function t(t,e){function a(){return e.get(t.events.getEventTypeList).then(s)}function s(t){return"0"===t.data.code?t:void 0}var n={apiHost:t,getEventType:a};return n}t.$inject=["apiHost","$http"],angular.module("nqms").config(["toastrConfig",function(t){t.tapToDismiss=!0,t.timeOut=0}]).factory("typeService",t)}(),function(){"use strict";function t(t,e,a,s){function n(){return s.getEventType().then(function(t){t&&(l.list=t.data.data.lst)})}var l=this;l.load={func:n,init:!0}}t.$inject=["$scope","$log","$filter","typeService"],angular.module("nqms").controller("MalCaseUpTypeController",t)}(),function(){"use strict";function t(t,e,a,s){var n=this;n.lst=[{groupNo:"跌倒",groupName:"不良治疗",bedNo:"Ⅱ级",remark:"跌倒"},{groupNo:"坠床",groupName:"不良治疗",bedNo:"Ⅱ级",remark:"坠床"},{groupNo:"走失",groupName:"不良治疗",bedNo:"Ⅰ级",remark:"走失"},{groupNo:"烫伤",groupName:"不良治疗",bedNo:"Ⅲ级",remark:"烫伤"},{groupNo:"医患争吵",groupName:"医患沟通",bedNo:"Ⅰ级",remark:"医患争吵"},{groupNo:"身体攻击",groupName:"医患沟通",bedNo:"Ⅳ级",remark:"身体攻击"},{groupNo:"咽入异物",groupName:"饮食类",bedNo:"Ⅱ级",remark:"咽入异物"},{groupNo:"食物中毒",groupName:"饮食类",bedNo:"Ⅳ级",remark:"食物中毒"},{groupNo:"仪器故障",groupName:"医疗设备",bedNo:"0级",remark:"仪器故障"},{groupNo:"院内压疮",groupName:"皮肤类",bedNo:"Ⅲ级",remark:"院内压疮"}],e.debug(n.lst),n.tableParams=new a({page:1,count:10},{total:n.lst.length,getData:function(e,a){var l=a.sorting()?s("orderBy")(n.lst,a.orderBy()):n.lst;l=a.filter()?s("filter")(l,a.filter()):l,a.total(l.length),e.resolve(t.users=l.slice((a.page()-1)*a.count(),a.page()*a.count()))}})}t.$inject=["$scope","$log","NgTableParams","$filter"],angular.module("nqms").controller("MalCaseUpStatisticsController",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(t){return a.post(e.events.deleteEventLevel,{seqId:t}).then(d)}function i(t){return a.post(e.events.saveEventLevel,t).then(d)}function r(t){return a.get(e.events.getEventLevels,{params:t}).then(d)}function d(t){return"0"===t.data.code?t:void 0}var c={save:i,get:r,del:o};return c}t.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("levelService",t)}(),function(){"use strict";function t(t,e,a,s,n){function l(){return a.get().then(function(t){t&&(p.list=t.data.data.lst)})}function o(t){p.formData=angular.extend({},t),p.selectedLevel=t,t&&t.flow&&(p.formData.flowList=t.flow.split("|"))}function i(){p.formData={}}function r(){""!==p.flowText&&(p.formData.flowList=p.formData.flowList||[],p.formData.flowList.push(p.flowText),p.flowText="")}function d(t){p.formData.flowList.splice(t,1)}function c(){var t=angular.extend({},p.formData);t.flow=t.flowList?t.flowList.join("|"):"",a.save(t).then(function(t){t&&"0"===t.data.code&&(n.success("保存成功！","提示"),p.load.func(),p.formData={},s.close("success"))})}function m(t){a.del(t).then(function(e){e&&"0"===e.data.code&&(n.success("已删除！","提示"),p.load.func(),t==p.formData.seqId&&(p.formData={}),s.close("success"))})}var p=this;p.save=c,p.edit=o,p.del=m,p.formData={},p.add=i,p.load={func:l,init:!0},p.removeFlow=d,p.addFlow=r}t.$inject=["$scope","$log","levelService","modalService","toastr"],angular.module("nqms").controller("MalCaseUpLevelController",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(t,s){return a.post(e.events.deleteEventReport,{seqId:t,reportCode:s}).then(v)}function i(t){return a.get(e.events.getReportDetail,{params:t}).then(v)}function r(t){return a.get(e.events.getEventMeasures,{params:t}).then(v)}function d(t){return a.get(e.events.getEventRequirement,{params:t}).then(v)}function c(t){return a.post(e.events.saveReportDetail,t).then(v)}function m(t){return a.post(e.events.saveEventMeasures,t).then(v)}function p(t){return a.post(e.events.saveEventRequirement,t).then(v)}function u(t){return a.post(e.events.saveReportDetail,t).then(v)}function v(t){return"0"===t.data.code?t:void 0}function b(t){return a.post(e.events.deleteEventRequirement,t).then(v)}function f(t){return a.post(e.events.deleteEventMeasures,t).then(v)}function g(t){return a.post(e.events.deleteEventReport,t).then(v)}var h={saveReportDetail:c,saveMeasure:m,saveRequirement:p,saveEstimate:u,deleteMeasure:f,deleteRequirement:b,deleteEstimate:g,getReportDetail:i,getEventMeasures:r,getEventRequirement:d,del:o};return h}t.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("handleService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i,r,d,c,m){function p(){return r.getEventList().then(function(t){t&&(x.list=t.data.data.lst)})}function u(t){x.selectedEvent=t,b(t).then(v)}function v(){o.open({templateUrl:"app/malCaseUp/handle/handle.modal.html",size:"lg",appendTo:angular.element(".handle-wrapper"),data:{formData:k,metaData:w},methodsObj:{saveReportDetail:f,saveListItem:function(t,e){var a=this,s=a.upFirstLetter(t),l={};switch(s="Estimate"===s?"Measure":s,l.userCode=n.getUserinfo().user.userCode,t){case"requirement":angular.extend(l,{reportCode:a.formData.reportCode,seqId:a.formData[t].seqId||null,reqCode:a.formData[t]&&a.formData[t].reqCode||null,reqContent:a.formData[t].reqContent,remark:""});break;case"measure":a.formData[t].meaTime||(l.meaTime=moment().format("YYYY-MM-DD HH:mm:ss")),angular.extend(l,{seqId:a.formData[t].seqId||null,reportCode:a.formData.reportCode,meaCode:a.formData[t]&&a.formData[t].meaCode||null,meaContent:a.formData[t].meaContent,headUserCode:a.formData[t].headUserCode});break;case"estimate":angular.extend(l,{seqId:a.formData.measure.seqId||null,reportCode:a.formData.reportCode,meaCode:a.formData.measure&&a.formData.measure.meaCode||null,headUserCode:a.formData.measure.headUserCode,meaContent:a.formData.measure.meaContent,resStatus:"",resDescribe:a.formData.measure.resDescribe})}a.formData[t+"List"]||(a.formData[t+"List"]=[]),c["save"+s](l).then(function(e){e&&(i.success("保存成功","提示"),a.rootScope.$broadcast("refresh"+s,a.formData.reportCode,a),a.formData[t]={})})},removeListItem:function(t){var e,a=this,s=a.upFirstLetter(t.listName);switch(a.formData[t.listName+"List"].splice(t.index,1),t.listName){case"measure":e={reportCode:a.reportCode,meaCode:t.meaCode};break;case"requirement":e={seqId:t.seqId};break;case"estimate":return}c["delete"+s](e).then(function(t){t&&i.success("已删除","提示")})},fillItem:function(t,e){var a=this;a.formData[t]=angular.extend({},e)},resetForm:function(t){this.formData[t]={}},upFirstLetter:function(t){return t.replace(/^\w{1}/,function(t){return t.toUpperCase()})}}})}function b(t){var e=t.reportCode,a=n.getUserinfo().role.deptCode;k.reportCode=e;var l=m.getUserList(a),o=c.getEventRequirement({reportCode:e}),i=c.getEventMeasures({reportCode:e}),r=c.getReportDetail({reportCode:e}),d=s.all([o,i,r,l]).then(function(e){var a=e[0].data.data.lst,s=e[1].data.data.lst,n={},l=e[3];e[2].data.data.lst.forEach(function(t){n[t.itemCode]={value:t.itemValue,seqId:t.seqId}}),w.malCaseInfo=t,w.userList=l,k.requirementList=a,k.measureList=s,k.reportDetailList=n});return d}function f(){var t,e=this,a=angular.extend({},e.formData.reportDetailList),s=[];for(t in a)a.hasOwnProperty(t)&&s.push({reportCode:e.formData.reportCode,itemCode:t,seqId:a[t].seqId||null,itemValue:a[t].value});c.saveReportDetail(s).then(function(t){t&&"0"===t.data.code&&(i.success("保存成功！","提示"),x.scope.$broadcast("resfreshReportDetail",e.formData.reportCode,e),o.close("success"))})}function g(t,e){l.del(t,e).then(function(t){t&&"0"===t.data.code&&(i.success("已删除！","提示"),x.load.func(),o.close("success"))})}function h(t,e,a){c.getEventRequirement({reportCode:e}).then(function(t){t&&(a.formData.requirementList=t.data.data.lst)})}function y(t,e,a){c.getEventMeasures({reportCode:e}).then(function(t){t&&(a.formData.measureList=t.data.data.lst)})}function D(t,e,a){c.getReportDetail({reportCode:e}).then(function(t){t&&(a.formData.reportDetailList=t.data.data.lst)})}var x=this,k={},w={};x.rootScope=t,x.scope=e,x.open=u,x.del=g,x.load={func:p,init:!0},x.scope.$on("refreshMeasure",y),x.scope.$on("refreshRequirement",h),x.scope.$on("refreshReportDetail",D)}t.$inject=["$rootScope","$scope","$log","$q","security","levelService","modalService","toastr","fixService","deptService","handleService","filesService"],angular.module("nqms").controller("MalCaseUpHandleController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){return a.post(e.events.deleteEventLevel,{seqId:t}).then(c)}function r(t){return a.post(e.events.saveEventLevel,t).then(c)}function d(t){var s=t||{};return s.userCode=o.getUserinfo().user.userCode,s.deptCode=o.getUserinfo().role.deptCode,a.get(e.events.getEventList,{params:s}).then(c)}function c(t){return"0"===t.data.code?t:void 0}var m={save:r,getEventList:d,del:i};return m}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("fixService",t)}(),function(){"use strict";angular.module("nqms").controller("MalCaseUpElementController",["$uibModal","$log",function(t,e){var a=this;a.lst=[{elementCode:"1",elementName:"压疮大小",viewName:"压疮大小",groupName:"压疮信息",elementType:"文本框",width:"3/12",remark:"备注",required:"是"},{elementCode:"2",elementName:"发生时间",viewName:"发生时间",groupName:"压疮信息",elementType:"文本框",width:"3/12",remark:"备注",required:"是"},{elementCode:"3",elementName:"性别",viewName:"性别",groupName:"患者信息",elementType:"单选框",width:"3/12",remark:"备注",required:"是"},{elementCode:"4",elementName:"医疗类型",viewName:"医疗类型",groupName:"患者信息",elementType:"下拉框",width:"3/12",remark:"备注",required:"是"},{elementCode:"5",elementName:"年龄",viewName:"年龄",groupName:"患者信息",elementType:"文本框",width:"3/12",remark:"备注",required:"是"}]}])}(),function(){"use strict";function t(t,e,a,s,n,l){function o(t,s){return a.post(e.events.deleteEventReport,{seqId:t,reportCode:s}).then(r)}function i(t){return a.post(e.events.saveEventReport,t).then(r)}function r(t){return"0"===t.data.code?t:void 0}var d={save:i,del:o};return d}t.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("callService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i,r,d,c,m){function p(){var t=r.getEventList().then(function(t){t&&(D.list=t.data.data.lst)}),a=m.getEventType().then(function(t){t&&(k.eventTypeList=t.data.data.lst)});return e.all([t,a])}function u(t){function e(){o.open({templateUrl:"app/malCaseUp/call/call.modal.html",size:"lg",ok:h,data:{formData:x,metaData:k},methodsObj:{eventTimeCalender:function(){var t=this;t.eventTimeOpen=!0},setUser:function(t){var e=this;e.formData.flowList.splice(t,1)}}})}x=angular.extend({},t),D.selectedLevel=t,k.deptList=c.deptList&&c.deptList.belongedDepts,v().then(function(){k.deptList?e():c.getDeptData().then(function(t){var a=t;a&&(k.deptList=a.belongedDepts,0===k.deptList.length&&(delete a.belongedDepts,k.deptList=[a]),e())})}),t&&(x.eventDate=new Date(t.eventTime),x.eventTime=new Date(t.eventTime),x.level={damageLevel:t.damageLevel},x.dept={deptCode:t.deptCode,deptName:t.deptName},x.eventType={eventTypeCode:t.eventTypeCode,eventTypeName:t.eventTypeName}),x.userCode=s.getUserinfo().user.userCode,x.userCode=s.getUserinfo().user.userName}function v(){return l.get().then(function(t){t&&(k.levelList=t.data.data.lst)})}function b(){D.formData={}}function f(){""!==D.flowText&&(D.formData.flowList=D.formData.flowList||[],D.formData.flowList.push(D.flowText),D.flowText="")}function g(t){D.formData.flowList.splice(t,1)}function h(t){var e,a,s=angular.extend({},t);s.deptName=s.dept.deptName,e=n(s.eventDate).format("YYYY-MM-DD"),a=n(s.eventTime).format("HH:mm:ss"),delete s.eventDate,delete s.dept,s.eventTypeCode=angular.fromJson(s.eventType).eventTypeCode,s.eventTypeName=angular.fromJson(s.eventType).eventTypeName,delete s.eventType,delete s.level,s.eventTime=n(e+" "+a).format("YYYY-MM-DD HH:mm:ss"),d.save(s).then(function(t){t&&"0"===t.data.code&&(i.success("保存成功！","提示"),D.load.func(),D.formData={},o.close("success"))})}function y(t,e){d.del(t,e).then(function(t){t&&"0"===t.data.code&&(i.success("已删除！","提示"),D.load.func(),o.close("success"))})}var D=this,x={},k={};D.save=h,D.open=u,D.del=y,D.add=b,D.load={func:p,init:!0},k.eventTypeList=[{code:1,name:"运送中病情变化"},{code:2,name:"误吸"},{code:3,name:"院内压疮"},{code:4,name:"坠床"},{code:5,name:"跌倒"}],D.removeFlow=g,D.addFlow=f}t.$inject=["$scope","$q","NgTableParams","security","moment","levelService","modalService","toastr","fixService","callService","deptService","typeService"],angular.module("nqms").controller("MalCaseUpCallController",t)}(),function(){"use strict";function t(t,e,a,s){function n(){return t.getRuleList().then(function(t){t&&(c.list=t.data.data.lst)})}function l(t){m=t,i()}function o(){m={},i()}function i(){e.open({templateUrl:"app/departmentManager/turnsRule/turnsRule.model.html",size:"middle",ok:r,data:{formData:m,metaData:p}})}function r(){t.saveRule(m).then(function(t){t&&"0"==t.data.code&&(a.success("保存成功！","提示"),n(),e.close("success"))})}function d(e){t.deleteRule(e).then(function(t){t&&"0"==t.data.code&&(a.success("已删除！","提示"),n())})}var c=this,m={},p={};c.save=r,c.add=o,c.del=d,c.edit=l,c.load={func:n,init:!0},s.getClassList().then(function(t){t&&(c.classList=t.data.data.lst,p.classList=c.classList)})}t.$inject=["turnsRuleService","modalService","toastr","classesService"],angular.module("nqms").controller("DepartmentManagerTurnsRuleController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){return a.post(e.schedule.deleteRule,{seqId:t}).then(c)}function r(t){return t.deptCode=o.getUserinfo().role.deptCode,a.post(e.schedule.saveRule,t).then(c)}function d(){var t={};return t.deptCode=o.getUserinfo().role.deptCode,a.get(e.schedule.getRuleList,{params:t}).then(c)}function c(t){return"0"===t.data.code?t:void 0}var m={getRuleList:d,saveRule:r,deleteRule:i};return m}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("turnsRuleService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){return a.get(e.schedule.getSchedule,{params:t}).then(m)}function r(t){return t.deptCode=o.getUserinfo().role.deptCode,t.deptName=o.getUserinfo().role.deptName,a.post(e.schedule.saveSchedule,t).then(m)}function d(t){var s={};return s.deptCode=o.getUserinfo().role.deptCode,s.week=t,a.get(e.schedule.newSchedule,{params:s}).then(m)}function c(t){var s={};return s.deptCode=t.deptCode,s.outWeek=t.weeks,s.srcWeek=t.weeks-1,a.get(e.schedule.copySchedule,{params:s}).then(m)}function m(t){return"0"===t.data.code?t:void 0}var p={saveSchedule:r,newSchedule:d,getSchedule:i,copySchedule:c};return p}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("turnsService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(){var t=_.find(g.treeData,function(t){return t.year==h.getFullYear()}),e=t.children[h.getMonth()],a=_.find(e.children,function(t){return t.start<h&&t.end>h});g.expandedNodes=[t,e],g.selectedNode=a}function r(t){t.index&&(g.params.year=t.year,g.params.weeks=t.index,g.load.func())}function d(){var a=e.getClassList({deptCode:g.params.deptCode}).then(function(t){t&&(g.classList=t.data.data.lst,g.getClassName=_.memoize(function(t){var e;return _.some(g.classList,function(a){return a.classCode==t?(e=a.className,!0):void 0}),e}),g.getClassColor=_.memoize(function(t){var e;return _.some(g.classList,function(a){return a.classCode==t?(e=a.color,!0):void 0}),e}))}),n=t.getSchedule(g.params).then(function(t){t&&(g.data=t.data.data,g.lst=g.data.dtls,g.weeks=g.data.weeks)});return s.all([a,n])}function c(){g.data.dtls=g.lst,t.saveSchedule(g.data).then(function(t){t&&0==t.data.code&&(n.success("保存成功！","提示"),g.load.func(g.data.weeks))})}function m(){g.params.weeks=g.params.weeks+1,h.setDate(h.getDate()+7),i(),g.load.func()}function p(){g.params.weeks=g.params.weeks-1,h.setDate(h.getDate()-7),i(),g.load.func()}function u(){t.newSchedule(g.data.weeks).then(function(t){t&&0==t.data.code&&(g.data=t.data.data,g.lst=g.data.dtls)})}function v(){t.copySchedule(g.params).then(function(t){t&&0==t.data.code&&(n.success("复制成功！","提示"),g.data=t.data.data,g.lst=g.data.dtls)})}function b(t){function e(){var e=new Date(a.getFullYear(),a.getMonth(),a.getDate()-a.getDay()+1),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()+6);return n++,{start:e,end:s,text:"第"+n+"周（"+e.getDate()+"~"+s.getDate()+"）",index:n,year:t}}var a=new Date(t,0,1),s={},n=0;for(s.text=t+"年",s.year=t,s.children=[];a.getFullYear()<=t;){var l=e(),a=l.end,o=l.start.getFullYear()<t?l.end.getMonth():l.start.getMonth();s.children[o]||(s.children[o]={children:[],text:o+1+"月",year:t}),s.children[o].children.push(l)}return s}function f(t){var e=[];return e=e.concat([_.pick(t,"deptCode","deptName")]),_.each(t.belongedDepts,function(t){e=e.concat(f(t))}),e}var g=this,h=new Date;h.setDate(h.getDate()-h.getDay()+1),g.saveTurns=c,g.nextWeek=m,g.backWeek=p,g.newTurns=u,g.copyWeek=v,g.load={func:d,init:!0},g.treeData=[],o.getDeptData().then(function(t){g.deptData=f(t)}),g.select=r,function(){g.treeData.push(b(h.getFullYear()-1)),g.treeData.push(b(h.getFullYear())),g.treeData.push(b(h.getFullYear()+1)),i()}(),g.params={year:g.selectedNode.year,weeks:g.selectedNode.index,deptCode:l.getUserinfo().role.deptCode}}t.$inject=["turnsService","classesService","$log","$q","toastr","security","deptService"],angular.module("nqms").controller("DepartmentManagerTurnsController",t)}(),function(){"use strict";function t(t,e){function a(a){return e.get(t.schedule.statistics.getByLeave,{params:a}).then(l)}function s(a){return e.get(t.schedule.statistics.getByClass,{params:a}).then(l)}function n(a){return e.get(t.schedule.statistics.getByDays,{params:a}).then(l)}function l(t){return"0"===t.data.code?t:void 0}var o={getByLeave:a,getByClass:s,getByDays:n};return o}t.$inject=["apiHost","$http"],angular.module("nqms").config(["toastrConfig",function(t){t.tapToDismiss=!0,t.timeOut=0}]).factory("deptStatisticsService",t)}(),function(){"use strict";function t(t,e,a,s){function n(){i.queryParams={type:"leave",month:new Date,dept:i.deptList[0],startDate:new Date,endDate:new Date},i.options.startDate={maxDate:i.queryParams.endDate},i.options.endDate={minDate:i.queryParams.startDate},o()}function l(t){i.picker[t+"Open"]=!i.picker[t+"Open"]}function o(t){var n=""!==t&&t?t.replace(/(\w{1})/g,function(t){return t.toUpperCase()}):"Leave",l=angular.extend({},i.queryParams);switch(s.getClassList({deptCode:l.dept.deptCode}).then(function(t){t&&(i.classesList=t.data.data.lst)}),l.deptCode=l.dept.deptCode,l.month=a(l.month).format("YYYY-MM"),delete l.dept,n){case"Leave":delete l.type,delete l.month,l.startDate=a(l.startDate).format("YYYY-MM-DD"),l.endDate=a(l.endDate).format("YYYY-MM-DD");break;case"Days":delete l.type;break;default:delete l.type}e["getBy"+n](l).then(function(t){t&&(i.statisticsData=t.data.data.lst)})}var i=this;i.deptList=t.deptList,i.picker={monthOpen:!1,startDateOpen:!1,endDateOpen:!1},i.options={month:{datepickerMode:"month",minMode:"month"}},i.openPicker=l,i.getStatistics=o,0===i.deptList.length&&t.getDeptData().then(function(t){i.deptList=t.belongedDepts,i.deptList.unshift({deptCode:t.deptCode,deptName:t.deptName})}).then(n)}t.$inject=["deptService","deptStatisticsService","moment","classesService"],angular.module("nqms").controller("DepartmentManagerStatisticsController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){return a.post(e.schedule.apprvScheduleLeave,t).then(m)}function r(t){return a.post(e.schedule.deleteScheduleLeave,{seqId:t}).then(m)}function d(t){return a.post(e.schedule.saveScheduleLeave,t).then(m)}function c(t){return a.get(e.schedule.getLeaveList,{params:t}).then(m)}function m(t){return"0"===t.data.code?t:void 0}var p={getLeaveList:c,saveScheduleLeave:d,deleteScheduleLeave:r,apprvScheduleLeave:i};return p}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("leaveService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i,r){function d(){return t.getLeaveList({deptCode:h}).then(function(t){if(t){g.list=t.data.data.lst;for(var e=0;e<g.list.length;e++)g.list[e].startTime=n(new Date(g.list[e].startTime)).format("YYYY-MM-DD HH")+":00:00",g.list[e].endTime=n(new Date(g.list[e].endTime)).format("YYYY-MM-DD HH")+":00:00"}})}function c(){o.open({templateUrl:"app/departmentManager/leave/addLeave.tpl.html",size:"md",ok:f,data:{formData:y}})}function m(){y.startDate=new Date(y.startTime),y.endDate=new Date(y.endTime)}function p(t){y=angular.extend({},t),m(),c()}function u(e){t.deleteScheduleLeave(e).then(function(t){t&&"0"===t.data.code&&(l.success("已删除！","提示"),g.load.func(),o.close("success"))})}function v(t){y=angular.extend({},t),m(),o.open({templateUrl:"app/departmentManager/leave/review.tpl.html",size:"md",ok:b,data:{formData:y}})}function b(){t.apprvScheduleLeave(y).then(function(t){t&&"0"===t.data.code&&(l.success("保存成功！","提示"),g.load.func(),y={},o.close("success"))})}function f(){function e(t,e){var a,s,l;return a=n(t).format("YYYY-MM-DD"),s=n(e).format("HH:mm:ss"),l=n(a+" "+s).format("YYYY-MM-DD HH:mm:ss")}var a=y.startDate,s=y.startTime,r=y.endDate,d=y.endTime;y.startTime=e(a,s),y.endTime=e(r,d),y.deptCode=i.getUserinfo().role.deptCode,y.deptNme=i.getUserinfo().role.deptNme,t.saveScheduleLeave(y).then(function(t){t&&"0"===t.data.code&&(l.success("保存成功！","提示"),g.load.func(),y={},o.close("success"))})}var g=this,h=i.getUserinfo().role.deptCode,y={};g.addLeave=c,g.saveLeave=f,g.edit=p,g.del=u,g.review=v,g.load={func:d,init:!0},e.$on("deptchange",function(t,e){h=e,g.load.func()}),y.deptCode=i.getUserinfo().role.deptCode,y.deptName=i.getUserinfo().role.deptName,y.userCode=i.getUserinfo().user.userCode}t.$inject=["leaveService","$scope","$log","$q","moment","toastr","modalService","security","$injector"],angular.module("nqms").controller("DepartmentManagerLeaveController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){return a.post(e.schedule.batchSaveUserNurse,t).then(d)}function r(t){return a.get(e.schedule.getUserNurses,{params:t}).then(d)}function d(t){return"0"===t.data.code?t:void 0}var c={getUserNurses:r,batchSaveUserNurse:i};return c}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("areaService",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(){var t=a.getUserNurses({deptCode:d}).then(function(t){t&&(r.list=t.data.data.lst)}),s=n.getGroupList({deptCode:d}).then(function(t){t&&0==t.data.code&&(r.groupLst=t.data.data.lst)});return e.all([t,s])}function i(){a.batchSaveUserNurse(r.list).then(function(t){t&&0==t.data.code&&(s.success("保存成功！","提示"),r.load.func())})}var r=this,d=l.getUserinfo().role.deptCode;r.saveArea=i,r.load={func:o,init:!0},t.$on("groupreload",function(){r.load.func()}),t.$on("deptchange",function(t,e){d=e,r.load.func()})}t.$inject=["$scope","$q","areaService","toastr","bedService","security"],angular.module("nqms").controller("DepartmentManagerEndemicAreaController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){return a.post(e.schedule.deleteClass,{seqId:t}).then(c)}function r(t){return a.post(e.schedule.saveClass,t).then(c)}function d(t){return a.get(e.schedule.getClassList,{params:t}).then(c)}function c(t){return"0"===t.data.code?t:void 0}var m={getClassList:d,saveclass:r,deleteClass:i};return m}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("classesService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i,r,d,c){function m(){return t.getClassList({deptCode:g.deptCode}).then(function(t){t&&(g.list=t.data.data.lst)})}function p(){h.formData.deptCode=g.deptCode,h.formData.deptName=g.deptName,i.open({templateUrl:"app/departmentManager/classes/addClasses.tpl.html",size:"md",ok:b,data:h})}function u(t){function e(t){var e,a,s;return e="2099-01-01 "+t,a=new Date(e),s=c(a).format("YYYY HH:mm")}h.formData=angular.extend({},t),h.formData.startTime=e(t.startTime),h.formData.endTime=e(t.endTime),p()}function v(e){t.deleteClass(e).then(function(t){t&&"0"===t.data.code&&(o.success("已删除！","提示"),g.load.func(),i.close("success"))})}function b(){var e,a,s=h.formData.startTime,n=h.formData.endTime;e=c(s).format("HH:mm"),a=c(n).format("HH:mm"),h.formData.startTime=e,h.formData.endTime=a,t.saveclass(h.formData).then(function(t){t&&"0"===t.data.code&&(o.success("保存成功！","提示"),g.load.func(),h.formData={},i.close("success"))})}function f(t){var e={};return e.deptCode=t.deptCode,e.deptName=t.deptName,_.each(t.belongedDepts,function(e,a){t.belongedDepts[a]=f(e)}),Array.isArray(t.user)&&t.user.forEach(function(e){e.deptCode=t.deptCode,e.deptName=t.deptName}),e.children=_.compact([].concat(t.belongedDepts)),e}var g=this,h={formData:{},metaData:{}};g.saveclass=b,g.addClasses=p,g.edit=u,g.del=v,g.load={func:m,init:!0},g.deptCode=r.getUserinfo().role.deptCode,g.deptName=r.getUserinfo().role.deptName,h.formData.deptCode=g.deptCode,h.formData.deptName=g.deptName,e.getDeptData().then(function(t){g.deptData=t,g.treeData=[f(t)],g.expandedNodes=[g.treeData[0]],g.selectedNode=g.treeData[0]}),a.$on("deptchange",function(t,e){g.deptCode=e,g.load.func()})}t.$inject=["classesService","deptService","$scope","$log","$q","$uibModal","toastr","modalService","security","$injector","moment"],angular.module("nqms").controller("DepartmentManagerClassesController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){return a.post(e.schedule.deleteGroup,{seqId:t}).then(c)}function r(t){return a.post(e.schedule.saveGroup,t).then(c)}function d(t){return a.get(e.schedule.getGroupList,{params:t}).then(c)}function c(t){return"0"===t.data.code?t:void 0}var m={getGroupList:d,saveGroup:r,deleteGroup:i};return m}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("bedService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(){return s.getGroupList({deptCode:f}).then(function(e){e&&(b.list=e.data.data.lst,t.$broadcast("groupreload"))})}function r(t){b.formData=angular.extend({},t),b.selectedLevel=t,t&&t.beds&&(b.formData.bedList=t.beds.split(";"))}function d(){b.formData={}}function c(t){var e=a.open({templateUrl:"app/departmentManager/bed/addBed.tpl.html",controller:"AddClassCtrl",controllerAs:"vm",backdrop:"static",animation:!0,size:"sm",resolve:{id:function(){return{data:angular.copy(t),dept:f}}}});e.result["finally"](function(){b.load.func()})}function m(){""!==b.flowText&&(b.formData.bedList=b.formData.bedList||[],b.formData.bedList.push(b.flowText),b.flowText="")}function p(t){b.formData.bedList.splice(t,1)}function u(){var t=angular.extend({},b.formData);t.beds=t.bedList?t.bedList.join(";"):"",t.deptCode=b.deptCode,s.saveGroup(t).then(function(t){t&&"0"===t.data.code&&(l.success("保存成功！","提示"),b.load.func(),b.formData={},n.close("success"))})}function v(t){s.deleteGroup(t).then(function(e){e&&"0"===e.data.code&&(l.success("已删除！","提示"),b.load.func(),t==b.formData.seqId&&(b.formData={}),n.close("success"))})}var b=this,f=o.getUserinfo().role.deptCode;b.list=[],b.saveGroup=u,b.edit=r,b.deleteGroup=v,b.formData={},b.add=d,b.deptCode=o.getUserinfo().role.deptCode,b.open=c,e.$on("deptchange",function(t,e){
f=e,b.load.func()}),b.removeFlow=p,b.addFlow=m,b.load={func:i,init:!0}}t.$inject=["$rootScope","$scope","$uibModal","bedService","modalService","toastr","security"],angular.module("nqms").controller("DepartmentManagerBedController",t)}(),function(){"use strict";function t(t,e,a,s,n,l){function o(){""!==c.flowText&&(c.formData.bedList=c.formData.bedList||[],c.formData.bedList.push(c.flowText),c.flowText="")}function i(){a.dismiss()}function r(){var e=angular.extend({},c.formData);e.beds=e.bedList?e.bedList.join(";"):"",e.deptCode=m,s.saveGroup(e).then(function(e){e&&"0"===e.data.code&&(t.$broadcast("toast",{type:"success",content:"保存成功"}),a.close("success"))})}function d(t){c.formData.bedList.splice(t,1)}var c=this,m=l.dept,p=l.data;p&&p.beds&&(p.bedList=p.beds.split(";")),c.formData=p||{},c.addFlow=o,c.removeFlow=d,c.cancel=i,c.ok=r}t.$inject=["$rootScope","$scope","$uibModalInstance","bedService","security","id"],angular.module("nqms").controller("AddClassCtrl",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(t){return a.post(e.schedule.deleteChangeClass,{seqId:t}).then(m)}function r(t){return a.post(e.schedule.saveChangeClass,t).then(m)}function d(t){return a.post(e.schedule.apprvChangeClass,t).then(m)}function c(t){return a.get(e.schedule.getChangeClass,{params:t}).then(m)}function m(t){return"0"===t.data.code?t:void 0}var p={getChangeClass:c,saveChangeClass:r,deleteChangeClass:i,apprvChangeClass:d};return p}t.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("attemperService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i){function r(){var t=a.getChangeClass({deptCode:h}).then(function(t){t&&(g.list=t.data.data.lst)}),s=l.getClassList({deptCode:h}).then(function(t){t&&(g.classes=t.data.data.lst,g.getClassName=_.memoize(function(t){var e;return _.some(g.classes,function(a){return a.classCode==t?(e=a.className,!0):void 0}),e}))});return e.all([t,s])}function d(t){y=t,m()}function c(){y={},m()}function m(){var t=s.open({templateUrl:"app/departmentManager/attemper/attemper.model.html",controller:"AttemperModalCtrl",controllerAs:"vm",backdrop:"static",animation:!0,size:"lg",resolve:{id:function(){return h}}});t.result["finally"](function(){g.load.func()})}function p(t){var e=s.open({templateUrl:"app/departmentManager/attemper/handler.tpl.html",controller:"AttemperHandlerCtrl",controllerAs:"vm",backdrop:"static",animation:!0,size:"sm",resolve:{id:function(){return angular.copy(t)}}});e.result["finally"](function(){g.load.func()})}function u(){a.saveChangeClass(y).then(function(t){t&&"0"==t.data.code&&(n.success("保存成功！","提示"),g.load.func(),modalService.close("success"))})}function v(t){a.deleteChangeClass(t).then(function(t){t&&"0"==t.data.code&&(n.success("已删除！","提示"),g.load.func())})}function b(t){var e=[];return e=e.concat(t.user),_.each(t.belongedDepts,function(t,a){e=e.concat(b(t))}),e=_.compact(_.flatten(e))}function f(t){return"01"===t.status||"02"===t.status||"03"===t.status}var g=this,h=i.getUserinfo().role.deptCode,y={};g.save=u,g.add=c,g.del=v,g.edit=d,g.load={func:r,init:!0},g.handler=p,g.filter=f,t.$on("deptchange",function(t,e){h=e,g.load.func()}),o.getDeptData().then(function(t){g.users=b(t),g.getUserName=_.memoize(function(t){var e;return _.some(g.users,function(a){return a.userCode==t?(e=a.userName,!0):void 0}),e})})}t.$inject=["$scope","$q","attemperService","$uibModal","toastr","classesService","deptService","security"],angular.module("nqms").controller("DepartmentManagerAttemperController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i,r){function d(){a.dismiss()}function c(){p.formData.applyUserCode=l.getUserinfo().user.userCode,p.formData.status="01",s.saveChangeClass(p.formData).then(function(t){o.success("保存成功！","提示"),a.close("success")})}function m(t){var e=[];return e=e.concat(t.user),_.each(t.belongedDepts,function(t,a){e=e.concat(m(t))}),e=_.compact(_.flatten(e))}var p=this;n.getClassList({deptCode:r}).then(function(t){t&&(p.classes=t.data.data.lst)}),i.getDeptData(r).then(function(t){p.users=m(t)}),p.cancel=d,p.ok=c,p.formData={}}t.$inject=["$rootScope","$scope","$uibModalInstance","attemperService","classesService","security","toastr","deptService","id"],angular.module("nqms").controller("AttemperModalCtrl",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o){function i(){d.formData.createTime=a("date")(d.formData.createTime,"yyyy-MM-dd HH:mm:ss"),d.formData.updateTime=a("date")(d.formData.updateTime,"yyyy-MM-dd HH:mm:ss"),n.apprvChangeClass(d.formData).then(function(t){l.success("处理成功！","提示"),s.close("success")})}function r(){s.dismiss()}var d=this;d.formData=o,d.ok=i,d.cancel=r}t.$inject=["$rootScope","$scope","$filter","$uibModalInstance","attemperService","toastr","id"],angular.module("nqms").controller("AttemperHandlerCtrl",t)}(),function(){"use strict";function t(){function t(t,e,a,s){function n(){r.minMode=!r.minMode,t.$broadcast("toggleNavView",r.minMode)}function l(t){r.currentIndex=t,r.navData[t].child&&r.navData[t].child.length>0}function o(){r.isSubNavShow=!r.isSubNavShow,t.$broadcast("toggleSubNavView",r.isSubNavShow)}function i(){d.currentIndex=r.currentIndex,r.lastIndex=r.currentIndex,s.setCacheUser(d)}var r=this,d=s.getUserinfo();r.minMode=!1,r.isSubNavShow=!1,r.isActive=e.$parent.isActive,r.currentIndex=s.getUserinfo().currentIndex,r.lastIndex=r.currentIndex,r.navData=d.nav,r.currentIndex||(r.minMode=!1,r.isSubNavShow=!1),r.toggleNavView=n,r.toggleSubNavView=o,r.showSubNav=l,r.setActiveIndex=i,t.$broadcast("toggleNavView",r.minMode),t.$broadcast("toggleSubNavView",r.isSubNavShow)}t.$inject=["$rootScope","$scope","$log","security"];var e={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{},replace:!0,controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("nqms").directive("acmeNavbar",t)}(),function(){"use strict";function t(){function t(t,e,a,s,n,l,o,i,r){function d(){a.open({templateUrl:"app/components/header/changeUser.tpl.html",controller:"ChangeUserController",controllerAs:"vm",backdrop:"static",animation:!1,size:"sm"})}function c(){a.open({templateUrl:"app/components/header/changeRole.tpl.html",controller:"ChangeRoleController",controllerAs:"vm",backdrop:"static",animation:!1,size:"md"})}function m(e){return u.currentRole.roleCode==e.roleCode?void t.$broadcast("toast",{type:"warning",content:"\b\b\b已是当前角色！"}):void l.getNavigation(e).then(function(a){var s=l.getUserinfo();s.nav=a.data.data,s.role=e,l.setCacheUser(s),t.$broadcast("toast",{type:"success",content:"正在切换..."}),i(function(){o.go("home"),r.location.reload()},1e3)})}function p(){t.$broadcast("logout")}var u=this,v=l.getUserinfo().user.seqId;u.currentRole=l.getUserinfo().role,u.openUserDialog=d,u.openRoleDialog=c,u.logout=p,u.changeRole=m,e(function(){u.time_now=s().format("YYYY年MM月DD日  HH:mm:ss")},1e3);try{u.user=l.getUserinfo().user}catch(b){toastr.error("您还未登录"),o.go("login")}l.getUserRoleList({userId:v}).then(function(t){u.userRoleList=t.data.data}),n.info(u.user)}t.$inject=["$rootScope","$interval","$uibModal","moment","$log","security","$state","$timeout","$window"];var e={restrict:"E",templateUrl:"app/components/header/header.html",scope:{},replace:!0,controller:t,controllerAs:"hd",bindToController:!0};return e}angular.module("nqms").directive("acmeHeader",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i){function r(){t.dismiss("cancel")}function d(){c.loginBtnStatus.title="切换",c.loginBtnStatus.state=""}var c=this;c.cancel=r,c.formData={},c.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:n(),startingDay:1},c.validationOption={blurTrig:!0},c.loginBtnStatus={title:"切换",state:""},c.changeUser=function(n){var r=a.getUserinfo().user;return s.info(n),c.loginBtnStatus.title="正在切换...",c.loginBtnStatus.state="disabled",n.loginName===r.loginName?(i.info("您切换的用户已是当前登录用户，无需切换～","提示"),void d()):void a.login(n).then(function(s){var n;d(),s&&"-1"==s.data.code||(n={user:s.data.data.user,nav:s.data.data.funs,role:s.data.data.role,tab:{}},a.setUserinfo(n),a.setCacheUser(n),t.dismiss("cancel"),o(function(){e.path("/home"),l.location.reload()},0))},d)}}t.$inject=["$uibModalInstance","$location","security","$log","moment","$window","$timeout","toastr"],angular.module("nqms").config(["w5cValidatorProvider",function(t){t.setRules({loginName:{required:"用户名不能为空",pattern:"用户名必须输入字母、数字、下划线"},password:{required:"密码不能为空",minlength:"密码长度不能小于{minlength}",maxlength:"密码长度不能大于{maxlength}"}})}]).controller("ChangeUserController",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i,r){function d(){t.dismiss("cancel")}function c(){m.roleBtnStatus.title="切换",m.roleBtnStatus.state=""}var m=this,p=r.getUserinfo().role,u=r.getUserinfo().user.seqId;m.currentRole=r.getUserinfo().role,m.cancel=d,m.formData={},m.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:n(),startingDay:1},m.validationOption={blurTrig:!0},m.roleBtnStatus={title:"切换",state:""},r.getUserRoleList({userId:u}).then(function(t){m.userRoleList=t.data.data}),m.selectedRole=p,m.showRole=function(t){e.info(t),m.changedRole=t},m.changeRole=function(){return p=r.getUserinfo().role,m.changedRole?(m.roleBtnStatus.title="正在切换...",m.roleBtnStatus.state="disabled",m.changedRole.seqId===p.seqId?(o.info("您切换的角色已是当前登录的角色，无需切换～","提示"),void c()):void r.getNavigation(m.changedRole).then(function(t){var e=r.getUserinfo();e.nav=t.data.data,e.role=m.changedRole,e.tab={},r.setCacheUser(e),o.success("正在切换角色...","恭喜"),a.go("home"),s(function(){l.location.reload()},2e3)})["finally"](c)):void 0}}t.$inject=["$uibModalInstance","$log","$state","$timeout","moment","$window","toastr","$scope","security"],angular.module("nqms").controller("ChangeRoleController",t)}(),function(){"use strict";function t(t){var e={restrict:"E",require:"ngModel",scope:{},replace:!0,templateUrl:"app/components/colorPicker/colorPicker.html",link:function(e,a,s,n){t(function(){e.current=n.$viewValue}),e.colorArr=["white","#CC6666","#FFFF66","#00CCff","#00FF66","#CC99FF","#CC9933","#CCCCFF"],e.choose=function(t){n.$setViewValue(t),a.find(".color-picker-selector").hide(),e.current=t},e.toggle=function(){s.handle&&a.find(".color-picker-selector").toggle()}}};return e}t.$inject=["$timeout"],angular.module("nqms").directive("colorPicker",t)}(),function(){"use strict";function t(t,e){function a(t,e,a,s,n,l,o,i){var r=this;r.scope=t,r.isActive=t.isActive,r.tabTemp=i.currentUser.tab,r.removeTab=function(t){var e,a=angular.element(t.currentTarget).data("id"),s=angular.element(t.currentTarget).parents("li").prev("li"),n=angular.element(t.currentTarget).parents("li").next("li");e=s.length>0?"."+s.find("a").data("id"):n.length>0?"."+n.find("a").data("id"):"",angular.element(t.currentTarget).parents(".tab-bread__item").hasClass("active")&&o.go("home"+e),i.removeFromBreadcrumb(a)},angular.element(document).ready(function(){var t=angular.element(".tab-bread li"),e=t.length;r.tabItemLen=e}),r.isActive=function(t){var e=t.length;return t===l.path().substr(-e,e)},n.info("tab:",r.tab)}function s(e,a,s){e.tabItemLen=function(){var t=a.find("li"),e=t.length;return e},e.isLoading=function(){return t.pendingRequests.length>0},e.$watchGroup([e.tabItemLen,e.isLoading],function(t){var e=a.outerWidth();if(!t[1]){var s=a.find("li"),n=0,l=0;if(0===t[0])return;s.each(function(t,e){var a=angular.element(e),s=a.find(".tab-bread__item"),l=a.find("span"),o=l.innerWidth(),i=a.outerWidth(),r=s.width(),d=o+(i-r);n+=d}),n>e?(l=e/t[0],s.width(l)):s.width("auto")}})}a.$inject=["$scope","$interval","moment","$window","$log","$location","$state","security"];var n={restrict:"E",templateUrl:"app/components/breadcrumb/breadcrumb.html",scope:{},replace:!0,controller:a,controllerAs:"bc",link:s,bindToController:!0};return n}t.$inject=["$http","$log"],angular.module("nqms").directive("acmeBread",t)}(),function(){"use strict";function t(t){var e=this;t.getDeptData().then(function(t){e.deptData=t,e.getDeptName=_.memoize(function(e){var a;return _.some(t.belongedDepts,function(t){return t.deptCode==e?(a=t.deptName,!0):void 0}),a=a.replace("护士站","")})}),e.nurseCount={total:778,increase:109,leave:65},e.dutyRoster=[{deptCode:"0211",hours:3376},{deptCode:"5063",hours:3265},{deptCode:"5043",hours:2998},{deptCode:"5042",hours:2776},{deptCode:"2032",hours:2552}],e.malCase={type:"压疮",deptCode:"5043"},e.research={proj:78,paper:691},e.quality={worst:["书写标准","签名正规","人数相符","运用医学术语","特殊用药"],bestDeptCode:"5042",worstDeptCode:"0211"},e.bedNursing={liqDis:10018,doctor:9780,doc:20012,patrol:5012},e.exam={worst:["学习能力","抗压能力","礼貌用语","专业技能","工作态度"],bestDeptCode:"2032",worstDeptCode:"5063"},e.sat={patient:["医疗费用","医院环境","医护态度"],nurse:["工资待遇","排班制度","工作环境"]}}t.$inject=["deptService"],angular.module("nqms").controller("StatisticsController",t)}(),function(){"use strict";function t(t){function e(t){var e=d.pie,a=angular.copy(e,{});return a.title.text=t,a}function a(t){var e=d.horBar,a=angular.copy(e,{});return t.forEach(function(t){var e=angular.copy(a.serie,{});e.name=t,a.series.push(e)}),a.legend.data=t,delete a.serie,a}function s(t,e){var a=d.line,s=angular.copy(a,{});return e&&(e.forEach(function(t){var e=angular.copy(s.serie,{});e.name=t,s.series.push(e)}),s.legend.data=e),s.title.text=t,delete s.serie,s}function n(t,e){var a=d.radar,s=angular.copy(a,{});return s.legend.data=e,s.title.text=t,s}var l={title:{x:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},legend:{orient:"horizontal",bottom:"bottom",data:[]},series:[{type:"pie",radius:"55%",center:["50%","50%"],label:{normal:{show:!0,formatter:"{b} : {c} ({d}%)"}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:[]}]},o={grid:{top:60,right:"2%",left:"2%",bottom:"2%",containLabel:!0},legend:{orient:"horizontal",top:0,data:[]},xAxis:[{type:"value"}],yAxis:[{type:"category",axisTick:{show:!1},data:[]}],serie:{type:"bar",label:{normal:{show:!0}},data:[]},series:[]},i={title:{x:"center"},tooltip:{trigger:"axis"},legend:{data:[],top:"30"},grid:{left:"3%",right:"3%",top:"80",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[],serie:{type:"line",data:[]}},r={title:{},tooltip:{trigger:"axis"},legend:{x:"center",data:[],top:"30"},grid:{left:"3%",right:"3%",top:"80",containLabel:!0},radar:[],series:[],serie:{type:"radar",tooltip:{trigger:"item"},itemStyle:{normal:{areaStyle:{type:"default"}}},data:[]}},d={pie:l,horBar:o,line:i,radar:r},c={pieInit:e,horBarInit:a,lineInit:s,radarInit:n};return c}t.$inject=["$log"],angular.module("nqms").factory("chartsService",t)}(),function(){"use strict";function t(t,e,a,s,n,l,o,i){var r,d=this;d.$scope=a,d.minMode=o.minMode,a.isActive=d.isActive=function(t){var e,a=0;return""===t?!1:(a=t.length,e=n.path().substr(-a,a),t===e)},d.$scope.$on("toggleNavView",function(t,e){d.minMode=e}),d.$scope.$on("toggleSubNavView",function(t,e){d.isSubNavShow=e}),e.$on("$stateChangeStart",function(t,e,a,s,n,l){r=o.getUserinfo("isLogined"),"login"===e.name&&r&&t.preventDefault()})}t.$inject=["$log","$rootScope","$scope","$uibModal","$location","$window","security","$state"],angular.module("nqms").controller("MainController",t)}(),function(){"use strict";function t(t,e,a,s){function n(){o.loginBtnStatus.title="登录",o.loginBtnStatus.state=""}function l(){o.formData={}}var o=this;o.reset=l,o.loginBtnStatus={title:"登录",state:""},o.login=function(e){o.loginBtnStatus.title="正在登录...",o.loginBtnStatus.state="disabled",s.login(e).then(function(e){var n={user:e.data.data.user,nav:e.data.data.funs,role:e.data.data.role,tab:{}};s.setUserinfo(n),s.setCacheUser(n),t.$broadcast("toast",{type:"success",content:"登陆成功"}),a.go("home"),t.$broadcast("init")})["finally"](n)},o.validationOption={blurTrig:!0}}t.$inject=["$rootScope","$log","$state","security"],angular.module("nqms").config(["w5cValidatorProvider",function(t){t.setRules({loginName:{required:"用户名不能为空",pattern:"用户名必须输入字母、数字、下划线"},password:{required:"密码不能为空",minlength:"密码长度不能小于{minlength}",maxlength:"密码长度不能大于{maxlength}"}})}]).controller("LoginController",t)}(),function(){"use strict";function t(t,e){function a(t){var e={};return e.deptCode=t.deptCode,e.deptName=t.deptName,_.each(t.belongedDepts,function(e,s){t.belongedDepts[s]=a(e)}),Array.isArray(t.user)&&t.user.forEach(function(e){e.deptCode=t.deptCode,e.deptName=t.deptName}),e.children=_.compact([].concat(t.belongedDepts)),e}function s(e){t.$broadcast("deptchange",e.deptCode)}var n=this;n.select=s,e.getDeptData().then(function(e){n.deptData=e,n.treeData=[a(e)],n.expandedNodes=[n.treeData[0]],n.selectedNode=n.treeData[0],t.$watch("vm.filterText",function(t){t?n.expandedNodes=[].concat(n.treeData[0]).concat(n.treeData[0].children):n.expandedNodes=[n.treeData[0]]})})}t.$inject=["$scope","deptService"],angular.module("nqms").controller("DeptTreeCtrl",t)}(),function(){"use strict";function t(t,e,a,s,n){t.$on("toast",function(t,e){a[e.type](e.content||"",e.title||"")}),t.$on("logout",function(t){s.clearUserinfo(),s.clearCacheUser(),e.go("login")}),t.$on("init",function(e){n.getSysDic().then(function(e){t.dicInfo=e.data.data.dicInfo,t.getDicName=_.memoize(function(e,a){var s;return _.some(t.dicInfo[e],function(t){return t.dicCode==a?(s=t.dicName,!0):void 0}),s},function(t,e){return t+e}),t.getDicCode=_.memoize(function(e,a){var s;return _.some(t.dicInfo[e],function(t){return t.dicName==a?(s=t.dicCode,!0):void 0}),s},function(t,e){return t+e})})})}t.$inject=["$rootScope","$state","toastr","security","dicService"],angular.module("nqms").run(t)}(),function(){"use strict";function t(t,e,a,s){a.patientSatTypes=["住院安全与环境","护理技术","尊重病人","情感支持","健康教育"],a.nurseSatTypes=["医院与工作环境"];var n=s.getCacheUser();n?(s.setUserinfo(n),a.$broadcast("init")):e.go("login")}t.$inject=["$window","$state","$rootScope","security"],angular.module("nqms").run(t)}(),function(){"use strict";function t(t,e,a){t.state("home",{url:"/home",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("home.files",{url:"/files",templateUrl:"app/nursingWorkers/files/files.tpl.html",controller:"NursingWorkersFileController",controllerAs:"vm"}).state("home.add",{url:"/add",templateUrl:"app/nursingWorkers/add/add.tpl.html",controller:"HrAddController",controllerAs:"vm"}).state("home.alt",{url:"/alt",templateUrl:"app/nursingWorkers/alt/alt.tpl.html",controller:"AltCtrl",controllerAs:"vm"}).state("home.dept",{url:"/dept",templateUrl:"app/nursingWorkers/dept/dept.tpl.html",controller:"DeptController",controllerAs:"vm"}).state("home.quit",{url:"/quit",templateUrl:"app/nursingWorkers/quit/quit.tpl.html",controller:"HrQuitController",controllerAs:"vm"}).state("home.search",{url:"/search",templateUrl:"app/nursingWorkers/search/search.tpl.html",controller:"HrSearchController",controllerAs:"vm"}).state("home.qrcode",{url:"/qrcode",templateUrl:"app/nursingWorkers/qrcode/qrcode.tpl.html",controller:"HrQrcodeController",controllerAs:"vm"}).state("home.baseInfo",{url:"/baseInfo",templateUrl:"app/nursingWorkers/baseInfo/base.tpl.html",controller:"BaseInfoCtrl",controllerAs:"vm"}).state("home.baseInfo.stat",{url:"/stat/:id",templateUrl:"app/nursingWorkers/baseInfo/stat.tpl.html",controller:"BaseInfoStatCtrl",controllerAs:"vm"}).state("home.baseInfo.detail",{url:"/detail/:id?dept&deptN&hisCode",templateUrl:"app/nursingWorkers/baseInfo/detail.tpl.html",controller:"BaseInfoDetailCtrl",controllerAs:"vm"}).state("home.internship",{url:"/internship",templateUrl:"app/nursingWorkers/internship/internship.tpl.html",controller:"NursingWorkersInternshipController",controllerAs:"vm"}).state("home.graduate",{url:"/graduate",templateUrl:"app/nursingWorkers/graduate/graduate.tpl.html",controller:"NursingWorkersGraduateController",controllerAs:"vm"}).state("home.technical",{url:"/technical",templateUrl:"app/nursingWorkers/technical/technical.tpl.html",controller:"NursingWorkersTechnicalController",controllerAs:"vm"}).state("home.ulteriorly",{url:"/ulteriorly",templateUrl:"app/nursingWorkers/ulteriorly/ulteriorly.tpl.html",controller:"NursingWorkersUlteriorlyController",controllerAs:"vm"}).state("home.attemper",{url:"/attemper",templateUrl:"app/departmentManager/attemper/attemper.tpl.html",controller:"DepartmentManagerAttemperController",controllerAs:"vm"}).state("home.bed",{url:"/bed",templateUrl:"app/departmentManager/bed/bed.tpl.html"}).state("home.classes",{url:"/classes",templateUrl:"app/departmentManager/classes/classes.tpl.html",controller:"DepartmentManagerClassesController",controllerAs:"vm"}).state("home.endemicArea",{url:"/endemicArea",templateUrl:"app/departmentManager/endemicArea/endemicArea.tpl.html"}).state("home.turns",{url:"/turns",templateUrl:"app/departmentManager/turns/turns.tpl.html",controller:"DepartmentManagerTurnsController",controllerAs:"vm"}).state("home.turnsRule",{url:"/turnsRule",templateUrl:"app/departmentManager/turnsRule/turnsRule.tpl.html",controller:"DepartmentManagerTurnsRuleController",controllerAs:"vm"}).state("home.leave",{url:"/leave",templateUrl:"app/departmentManager/leave/leave.tpl.html"}).state("home.departmentAttemper",{url:"/departmentAttemper",templateUrl:"app/departmentManager/attemper/attemper.tpl.html",controller:"DepartmentManagerAttemperController",controllerAs:"vm"}).state("home.departmentStatistics",{url:"/departmentStatistics",templateUrl:"app/departmentManager/statistics/statistics.tpl.html",controller:"DepartmentManagerStatisticsController",controllerAs:"vm"}).state("home.type",{url:"/type",templateUrl:"app/malCaseUp/type/type.tpl.html",controller:"MalCaseUpTypeController",controllerAs:"vm"}).state("home.call",{url:"/call",templateUrl:"app/malCaseUp/call/call.tpl.html",controller:"MalCaseUpCallController",controllerAs:"vm"}).state("home.level",{url:"/level",templateUrl:"app/malCaseUp/level/level.tpl.html",controller:"MalCaseUpLevelController",controllerAs:"vm"}).state("home.handle",{url:"/handle",templateUrl:"app/malCaseUp/handle/handle.tpl.html",controller:"MalCaseUpHandleController",controllerAs:"vm"}).state("home.handle.malCase",{url:"/malCase",templateUrl:"app/malCaseUp/handle/malCaseInfo.tpl.html"}).state("home.handle.report",{url:"/report",templateUrl:"app/malCaseUp/handle/report.tpl.html"}).state("home.handle.reportXk",{url:"/reportXk",templateUrl:"app/malCaseUp/handle/reportXk.tpl.html"}).state("home.handle.requirement",{url:"/requirement",templateUrl:"app/malCaseUp/handle/requirement.tpl.html"}).state("home.handle.measures",{url:"/measures",templateUrl:"app/malCaseUp/handle/measures.tpl.html"}).state("home.handle.estimate",{url:"/estimate",templateUrl:"app/malCaseUp/handle/estimate.tpl.html"}).state("home.fix",{url:"/fix",templateUrl:"app/malCaseUp/handle/handle.tpl.html",controller:"MalCaseUpHandleController",controllerAs:"vm"}).state("home.element",{url:"/element",templateUrl:"app/malCaseUp/element/element.tpl.html",controller:"MalCaseUpElementController",controllerAs:"vm"}).state("malCaseUpStatistics",{url:"/statistics",templateUrl:"app/malCaseUp/statistics/statistics.tpl.html",controller:"MalCaseUpStatisticsController",controllerAs:"vm"}).state("home.roles",{url:"/roles",templateUrl:"app/system/roles/roles.tpl.html",controller:"RolesController",controllerAs:"vm"}).state("home.users",{url:"/users",templateUrl:"app/system/users/users.tpl.html",controller:"UsersController",controllerAs:"vm"}).state("home.workManual",{url:"/manualWork",templateUrl:"app/manual/workManual/workManual.tpl.html",controller:"ManualWorkController",controllerAs:"vm"}).state("home.manualItem",{url:"/manualItem",templateUrl:"app/manual/item/item.tpl.html",controller:"ManualItemController",controllerAs:"vm"}).state("home.qualityCheck",{url:"/qualityCheck",templateUrl:"app/quality/check/check.tpl.html",controller:"QualityCheckController",controllerAs:"vm"}).state("home.qualityDeal",{url:"/qualityDeal",templateUrl:"app/quality/deal/deal.tpl.html",controller:"QualityDealController",controllerAs:"vm"}).state("home.qualityForm",{url:"/qualityForm",templateUrl:"app/quality/form/form.tpl.html",controller:"QualityFormController",controllerAs:"vm"}).state("home.qualityTask",{url:"/qualityTask",templateUrl:"app/quality/task/task.tpl.html",controller:"QualityTaskController",controllerAs:"vm"}).state("home.researchItem",{url:"/researchItem",templateUrl:"app/research/item/item.tpl.html",controller:"ResearchItemController",controllerAs:"vm"}).state("home.researchPapers",{url:"/researchPapers",templateUrl:"app/research/papers/papers.tpl.html",controller:"ResearchPapersController",controllerAs:"vm"}).state("home.techFiles",{url:"/techFiles",templateUrl:"app/techFiles/techFiles/techFiles.tpl.html",controller:"TechFileController",controllerAs:"vm"}).state("home.jci",{url:"/jci",templateUrl:"app/techFiles/jci/jci.tpl.html",controller:"TechFileJCIController",controllerAs:"vm"}).state("home.nurseSatTemp",{url:"/nurseSatTemp",templateUrl:"app/sat/nurse/temp.tpl.html",controller:"SatNurseTempController",controllerAs:"vm"}).state("home.nurseSatResult",{url:"/nurseSatResult",templateUrl:"app/sat/nurse/result.tpl.html",controller:"SatNurseResultController",controllerAs:"vm"}).state("home.patientSatTemp",{url:"/patientSatTemp",templateUrl:"app/sat/patient/temp.tpl.html",controller:"SatPatientTempController",controllerAs:"vm"}).state("home.patientSatResult",{url:"/patientSatResult",templateUrl:"app/sat/patient/result.tpl.html",controller:"SatPatientResultController",controllerAs:"vm"}).state("home.statistics",{url:"/statisticsGlance",templateUrl:"app/statistics/main.tpl.html",controller:"StatisticsController",controllerAs:"vm"}).state("home.nurseManagerStat",{templateUrl:"app/statistics/nurseManager/stat.tpl.html"}).state("home.nurseManagerStat.form",{url:"/nurseManagerStatForm",templateUrl:"app/statistics/nurseManager/form.tpl.html",controller:"NurseManagerStatFormCtrl",controllerAs:"vm"}).state("home.nurseManagerStat.transfer",{url:"/nurseManagerStatTransfer",templateUrl:"app/statistics/nurseManager/transfer.tpl.html",controller:"NurseManagerStatTransferCtrl",controllerAs:"vm"}).state("home.researchStat",{url:"/researchStat",templateUrl:"app/statistics/research/stat.tpl.html",controller:"ResearchStatCtrl",controllerAs:"vm"}).state("home.dutyStat",{url:"/dutyStat",templateUrl:"app/statistics/duty/stat.tpl.html",controller:"DutyStatCtrl",controllerAs:"vm"}).state("home.examStat",{url:"/examStat",templateUrl:"app/statistics/exam/stat.tpl.html",controller:"ExamStatCtrl",controllerAs:"vm"}).state("home.satStat",{templateUrl:"app/statistics/sat/stat.tpl.html"}).state("home.satStat.patient",{url:"/patientSatStat",templateUrl:"app/statistics/sat/patient.tpl.html",controller:"PatientSatStatCtrl",controllerAs:"vm"}).state("home.satStat.nurse",{url:"/nurseSatStat",templateUrl:"app/statistics/sat/nurse.tpl.html",controller:"NurseSatStatCtrl",controllerAs:"vm"}).state("home.malCaseStat",{url:"/malCaseStat",templateUrl:"app/statistics/malCase/stat.tpl.html",controller:"MalCaseStatCtrl",controllerAs:"vm"}).state("home.qualityStat",{url:"/qualityStat",templateUrl:"app/statistics/quality/stat.tpl.html",controller:"QualityStatCtrl",controllerAs:"vm"}).state("home.bedNursing",{templateUrl:"app/statistics/bedNursing/stat.tpl.html"}).state("home.bedNursing.liqDis",{url:"/bedNursingLiqDisStat",templateUrl:"app/statistics/bedNursing/liqDis.tpl.html",controller:"BedNursingLiqDisStatCtrl",controllerAs:"vm"}).state("home.bedNursing.doctor",{url:"/bedNursingDoctorStat",templateUrl:"app/statistics/bedNursing/doctor.tpl.html",controller:"BedNursingDoctorStatCtrl",controllerAs:"vm"}).state("home.bedNursing.doc",{url:"/bedNursingDocStat",templateUrl:"app/statistics/bedNursing/doc.tpl.html",controller:"BedNursingDocStatCtrl",controllerAs:"vm"}).state("home.bedNursing.patrol",{url:"/bedNursinPatrolStat",templateUrl:"app/statistics/bedNursing/patrol.tpl.html",controller:"BedNursingPatrolStatCtrl",controllerAs:"vm"}).state("home.bedNursing.sign",{url:"/bedNursinSignStat",templateUrl:"app/statistics/bedNursing/sign.tpl.html",controller:"BedNursingSignStatCtrl",controllerAs:"vm"}).state("home.systemCalendar",{url:"/systemCalendar",templateUrl:"app/system/calendar/calendar.tpl.html",controller:"CalendarController",controllerAs:"vm"}).state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginController",controllerAs:"vm"}),e.otherwise("/login")}t.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("nqms").config(t)}(),function(){"use strict";angular.module("nqms").constant("moment",moment).constant("apiHost",function(){var t="/mnisqm";return{system:{login:t+"/system/login",getRoleList:t+"/system/getRoleLst",getDic:{url:t+"/system/getSysDic",method:"post"},getNavigation:t+"/system/getFunction",calendar:{setter:{url:t+"/system/creatSysDate",method:"post"},update:{url:t+"/system/updateSysDate",method:"post"},getter:{url:t+"/system/querySysDate",method:"get"}}},user:{getDept:t+"/user/getUserDepts",quit:{url:t+"/user/changeUserType",method:"post"},getComUserChange:{url:t+"/user/getAllComUserChange",method:"get"}},files:{getUserList:t+"/user/getUserList",getDimissionUserList:t+"/user/getDimissionUserList",getUserDetailInfo:t+"/user/getUserDetailInfo",add:t+"/user/insertObj","delete":t+"/user/deleteUserInfo",update:t+"/user/updateObj",save:t+"/user/saveComUser"},roles:{getNotHaveFunction:t+"/system/getNotHaveFunction",getFunction:t+"/system/getFunction",getHaveFunction:t+"/system/getHaveFunction",updateRole:t+"/system/saveSysRoleFuns",deleteRole:t+"/system/deleteRole",saveRole:t+"/system/saveRole"},users:{getUserList:t+"/system/getSysUserList",deleteUser:t+"/system/deleteSysUser",deleteUserRole:t+"/system/deleteSysUserRole",saveUserRole:t+"/system/saveSysUserRole",saveUser:t+"/system/saveSysUser"},events:{getEventTypeList:t+"/event/getEventTypeList",getEventList:t+"/event/getEventList",getEventReport:t+"/event/getEventReport",saveEventReport:t+"/event/saveEventReport",deleteEventReport:t+"/event/deleteEventReport",getReportDetail:t+"/event/getReportDetail",saveReportDetail:t+"/event/saveReportDetail",saveEventRequirement:t+"/event/saveEventRequirement",getEventRequirement:t+"/event/getEventRequirement",deleteEventRequirement:t+"/event/deleteEventRequirement",saveEventMeasures:t+"/event/saveEventMeasures",getEventMeasures:t+"/event/getEventMeasures",deleteEventMeasures:t+"/event/deleteEventMeasures",saveEventLevel:t+"/event/saveEventLevel",getEventLevels:t+"/event/getEventLevels",deleteEventLevel:t+"/event/deleteEventLevel"},schedule:{copySchedule:t+"/schedule/copySchedule",newSchedule:t+"/schedule/newSchedule",saveSchedule:t+"/schedule/saveSchedule",getSchedule:t+"/schedule/getSchedule",getGroupList:t+"/schedule/getGroupList",deleteGroup:t+"/schedule/deleteGroup",saveGroup:t+"/schedule/saveGroup",getClassList:t+"/schedule/getClassList",saveClass:t+"/schedule/saveClass",deleteClass:t+"/schedule/deleteClass",getLeaveList:t+"/schedule/getLeaveList",saveScheduleLeave:t+"/schedule/saveScheduleLeave",deleteScheduleLeave:t+"/schedule/deleteScheduleLeave",apprvScheduleLeave:t+"/schedule/apprvScheduleLeave",getRuleList:t+"/schedule/getRuleList",saveRule:t+"/schedule/saveRule",deleteRule:t+"/schedule/deleteRule",getUserNurses:t+"/schedule/getUserNurses",batchSaveUserNurse:t+"/schedule/batchSaveUserNurse",getChangeClass:t+"/schedule/getChangeClass",saveChangeClass:t+"/schedule/saveChangeClass",deleteChangeClass:t+"/schedule/deleteChangeClass",apprvChangeClass:t+"/schedule/apprvChangeClass",statistics:{getByLeave:t+"/schedule/getCountByLeave",getByDays:t+"/schedule/getCountByDays",getByClass:t+"/schedule/getCountByClass"}},manual:{item:{get:t+"/manualWork/queryManualWorkItemByDeptCode",save:t+"/manualWork/saveManualWorkItem","delete":t+"/manualWork/deleteManualWorkItem",update:t+"/manualWork/updateManualWorkItem"},workManual:{get:t+"/manualWork/queryManualWorkByDeptCodeAndDate",save:t+"/manualWork/saveManualWork","delete":t+"/manualWork/saveManualWorkDetail",
update:t+"/manualWork/updateManualWorkDetail"}},research:{getResearchItems:t+"/research/getResearchItems",saveResearchItem:t+"/research/saveResearchItem",deleteResearchItem:t+"/research/deleteResearchItem",saveResearchPaper:t+"/research/saveResearchPaper",getResearchPapers:t+"/research/getResearchPapers",deleteResearchPaper:t+"/research/deleteResearchPaper"},qualityManager:{getQualityFormList:t+"/quality/queryQualityFormByDeptCodeAndType",editQualityForm:t+"/quality/updateQualityForm",saveQualityForm:t+"/quality/saveQualityForm",deleteQualityForm:t+"/quality/deleteQualityForm",getQualityTaskList:t+"/quality/queryQTRByTimeAndTypeAndDeptCode",editQualityTask:t+"/quality/updateQualityTask",saveQualityTask:t+"/quality/saveQualityTask",deleteQualityTask:t+"/quality/deleteQualityTask",getAllQualityForm:t+"/quality/queryAllQualityForm",getQualityCheckDetail:t+"/quality/queryQRByTimeAndFormNameAndDeptCode",getQualityCheckList:t+"/quality/queryQRByTimeAndFormNameAndDeptCode",editQualityCheck:t+"/quality/updateQualityResult",deleteQualityCheck:t+"/quality/deleteQualityResult",getQualityDealList:t+"/quality/getQualityIssueManageByResultCode",saveQualityDeal:t+"/quality/saveQualityIssueManage",editQualityDeal:t+"/quality/updateQualityIssueManage",deleteQualityDeal:t+"/quality/deleteQualityIssueManage",getQualityResultCode:t+"/quality/queryQIMByTimeAndTypeAndDeptCode"},techFiles:{getNurseList:{url:t+"/user/getUserList",method:"get"},updateNurseInfo:{url:t+"/user/saveComUser",method:"post"},academic:{setter:{url:t+"/ProfSkillDoc/saveAcademicConference",method:"post"},getter:{url:t+"/ProfSkillDoc/getAcademicConferences",method:"post"},deleter:{url:t+"/ProfSkillDoc/deleteAcademicConference",method:"get"}},assessment:{setter:{url:t+"/ProfSkillDoc/saveAssessment",method:"post"},getter:{url:t+"/ProfSkillDoc/getAssessment",method:"post"},deleter:{url:t+"/ProfSkillDoc/deleteAssessment",method:"get"}},awardPunish:{setter:{url:t+"/ProfSkillDoc/saveAwardPunishmentInfo",method:"post"},getter:{url:t+"/ProfSkillDoc/getAwardPunishmentInfo",method:"post"},deleter:{url:t+"/ProfSkillDoc/deleteAwardPunishmentInfo",method:"get"}},conEducation:{setter:{url:t+"/ProfSkillDoc/saveContinuingEducation",method:"post"},getter:{url:t+"/ProfSkillDoc/getContinuingEducation",method:"post"},deleter:{url:t+"/ProfSkillDoc/deleteContinuingEducation",method:"get"}},cprAcls:{setter:{url:t+"/ProfSkillDoc/saveCprAcls",method:"post"},getter:{url:t+"/ProfSkillDoc/getCprAcls",method:"post"},deleter:{url:t+"/ProfSkillDoc/deleteCprAcls",method:"get"}},eduRecord:{setter:{url:t+"/ProfSkillDoc/saveEducationRecordInspection",method:"post"},getter:{url:t+"/ProfSkillDoc/getEducationRecordInspection",method:"post"},deleter:{url:t+"/ProfSkillDoc/deleteEducationRecordInspection",method:"get"}},nurseHirReg:{setter:{url:t+"/ProfSkillDoc/saveNurseHirarchicalRegistration",method:"post"},getter:{url:t+"/ProfSkillDoc/getNurseHirarchicalRegistration",method:"post"},deleter:{url:t+"/ProfSkillDoc/deleteNurseHirarchicalRegistration",method:"get"}},perAssessment:{setter:{url:t+"/ProfSkillDoc/savePersonalAssessment",method:"post"},getter:{url:t+"/ProfSkillDoc/getPersonalAssessment",method:"post"},deleter:{url:t+"/ProfSkillDoc/deletePersonalAssessment",method:"get"}},posStatement:{setter:{url:t+"/ProfSkillDoc/savePositionStatement",method:"post"},getter:{url:t+"/ProfSkillDoc/getPositionStatement",method:"post"},deleter:{url:t+"/ProfSkillDoc/deletePositionStatement",method:"get"}},preJobTrain:{setter:{url:t+"/ProfSkillDoc/savePreJobTraining",method:"post"},getter:{url:t+"/ProfSkillDoc/getPreJobTraining",method:"post"},deleter:{url:t+"/ProfSkillDoc/deletePreJobTraining",method:"get"}},nurseExp:{setter:{url:t+"/ProfSkillDoc/saveSpecialistNursesExperience",method:"post"},getter:{url:t+"/ProfSkillDoc/getSpecialistNursesExperience",method:"post"},deleter:{url:t+"/ProfSkillDoc/deleteSpecialistNursesExperience",method:"get"}}},satisfaction:{satTemp:{single:{url:t+"/satTemplate/getSatTemplateByFormCode",method:"get"},setter:{url:t+"/satTemplate/saveSatTemplate",method:"post"},updater:{url:t+"/satTemplate/updateSatTemplate",method:"post"},deleter:{url:t+"/satTemplate/deleteSatTemplate",method:"post"},getter:{url:t+"/satTemplate/querySatTemplateByFormType",method:"get"}},satResult:{setter:{url:t+"/satTemplate/saveSatResult",method:"post"},updater:{url:t+"/satTemplate/updateSatResult",method:"post"},deleter:{url:t+"/satTemplate/deleteSatResult",method:"post"},getter:{url:t+"/satTemplate/queryByDateAndFormTypeAndPatient",method:"get"}}},deptManager:{dept:{setter:{url:t+"/user/saveDept",method:"post"},deleter:{url:t+"/user/deleteDept",method:"get"},getter:{url:t+"/user/getAllDepts",method:"get"}},userDept:{setter:{url:t+"/user/saveUserDept",method:"post"},deleter:{url:t+"/user/deleteUserDept",method:"get"}}}}}())}(),function(){"use strict";function t(t,e,a,s){t.debugEnabled(!0),e.autoDismiss=!0,e.allowHtml=!0,e.timeOut=3e3,e.positionClass="toast-top-center",e.progressBar=!1,e.preventOpenDuplicates=!0,e.iconClasses={error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},a.config({blurTrig:!0,showError:!0,removeError:!0}),a.setRules({calendarYear:{number:"必须输入数字"}}),s.interceptors.push("myHttpInterceptor")}t.$inject=["$logProvider","toastrConfig","w5cValidatorProvider","$httpProvider"],angular.module("nqms").config(t)}(),angular.module("nqms").run(["$templateCache",function(t){t.put("app/login/login.html",'<div class="login-wrapper"><div class="header"><div class="container"><img src="../../assets/images/logo2.png" alt=""></div></div><div class="content"><div class="form-box"><div class="form-title"><span class="title-text">用户登录</span></div><div class="form-content"><form class="clearfix w5c-form" id="loginForm" novalidate="" w5c-form-validate="vm.validationOption" name="loginForm"><div class="form-unit"><label for="userName">用户名</label><div class="form-input"><input type="text" id="userName" autocomplete="off" ng-pattern="/^[0-9A-Za-z_]{1,19}$/" required="" ng-model="vm.formData.loginName" name="loginName" placeholder="用户名"></div></div><div class="form-unit"><label for="userName">密&nbsp;&nbsp;码</label><div class="form-input"><input type="password" name="password" id="password" autocomplete="off" required="" ng-model="vm.formData.password" placeholder="密码"> <span class="reset" ng-click="vm.reset()">重置</span></div></div><div class="form-btn"><input class="_btn" id="loginBtn" type="button" value="登 录" w5c-form-submit="vm.login(vm.formData)"></div></form></div></div></div><div class="footer"><p>深圳市联新移动医疗科技有限公司版权所有</p><p>当前版本：v3</p></div></div>'),t.put("app/main/main.html",'<div class="main-wrapper container-fluid full-screen"><acme-header></acme-header><acme-navbar></acme-navbar><div class="main-body container-fluid" ui-view="" ng-class="{\'main-body_min-nav\': main.minMode, \'sub-nav-hidden\': !main.isSubNavShow}"></div><div class="footer">Copyright © 2016 深圳联新移动医疗有限公司 All Rights Reserved.</div></div>'),t.put("app/role/role.tpl.html",'<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Title</title></head><body></body></html>'),t.put("app/statistics/main.tpl.html",'<div class="statistics-wrapper"><div class="row"><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.nurseManagerStat.form"><div class="statistics-title">护理人员管理</div><div class="statistics-content"><p class="row"><span class="col-md-6">总人数：</span><span class="col-md-6 text-right">{{vm.nurseCount.total}}人</span></p><p class="row"><span class="col-md-6">新增：</span><span class="col-md-6 text-right">{{vm.nurseCount.increase}}人</span></p><p class="row"><span class="col-md-6">离开：</span><span class="col-md-6 text-right">{{vm.nurseCount.leave}}人</span></p></div></a></div></div><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.researchStat"><div class="statistics-title">科研管理</div><div class="statistics-content"><p class="row"><span class="col-md-8">全院科研项目：</span> <span class="col-md-4 text-right">{{vm.research.proj}}个</span></p><p class="row"><span class="col-md-8">全院科研论文：</span> <span class="col-md-4 text-right">{{vm.research.paper}}篇</span></p></div></a></div></div><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.bedNursing.liqDis"><div class="statistics-title">床旁护理</div><div class="statistics-content"><p class="row"><span class="col-md-8">配液次数：</span> <span class="col-md-4 text-right">{{vm.bedNursing.liqDis}}</span></p><p class="row"><span class="col-md-8">医嘱执行次数：</span> <span class="col-md-4 text-right">{{vm.bedNursing.doctor}}</span></p><p class="row"><span class="col-md-8">文书体征使用次数：</span> <span class="col-md-4 text-right">{{vm.bedNursing.doc}}</span></p><p class="row"><span class="col-md-8">巡视次数：</span> <span class="col-md-4 text-right">{{vm.bedNursing.patrol}}</span></p></div></a></div></div><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.dutyStat"><div class="statistics-title">科室排班</div><div class="statistics-content"><p class="row" ng-repeat="item in vm.dutyRoster"><span class="col-md-6">{{vm.getDeptName(item.deptCode)}}：</span> <span class="col-md-6 text-right">{{item.hours}}小时</span></p></div></a></div></div></div><div class="row"><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.malCaseStat"><div class="statistics-title">不良事件</div><div class="statistics-content"><p class="row"><span class="col-md-8">上报最多的类型：</span> <span class="col-md-4 text-right text-danger">{{vm.malCase.type}}</span></p><p class="row"><span class="col-md-8">上报最多的科室：</span> <span class="col-md-4 text-right text-danger">{{vm.getDeptName(vm.malCase.deptCode)}}</span></p></div></a></div></div><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.qualityStat"><div class="statistics-title">护理质控</div><div class="statistics-content"><p class="row"><span class="col-md-12">评分最差的5项：</span></p><p class="row" ng-repeat="item in vm.quality.worst"><span class="col-md-12 text-right" ng-class="{\'text-danger\': $index === 0, \'text-warning\': $index === 1}">{{item}}</span></p><p class="row"><span class="col-md-8">评分最高的科室：</span> <span class="col-md-4 text-right text-success">{{vm.getDeptName(vm.quality.bestDeptCode)}}</span></p><p class="row"><span class="col-md-8">评分最低的科室：</span> <span class="col-md-4 text-right text-danger">{{vm.getDeptName(vm.quality.worstDeptCode)}}</span></p></div></a></div></div><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.examStat"><div class="statistics-title">考试培训</div><div class="statistics-content"><p class="row"><span class="col-md-12">考试最薄弱的5项：</span></p><p class="row" ng-repeat="item in vm.exam.worst"><span class="col-md-12 text-right" ng-class="{\'text-danger\': $index === 0, \'text-warning\': $index === 1}">{{item}}</span></p><p class="row"><span class="col-md-8">分数最高的科室：</span> <span class="col-md-4 text-right text-success">{{vm.getDeptName(vm.exam.bestDeptCode)}}</span></p><p class="row"><span class="col-md-8">分数最低的科室：</span> <span class="col-md-4 text-right text-danger">{{vm.getDeptName(vm.exam.worstDeptCode)}}</span></p></div></a></div></div><div class="col-md-3 text-center"><div class="statistics-card"><a ui-sref="home.satStat.patient"><div class="statistics-title">满意度</div><div class="statistics-content"><p class="row"><span class="col-md-12">患者最不满意的3项：</span></p><p class="row" ng-repeat="item in vm.sat.patient"><span class="col-md-12 text-right" ng-class="{\'text-danger\': $index === 0, \'text-warning\': $index === 1}">{{item}}</span></p><p class="row"><span class="col-md-12">护士最不满意的3项：</span></p><p class="row" ng-repeat="item in vm.sat.nurse"><span class="col-md-12 text-right" ng-class="{\'text-danger\': $index === 0, \'text-warning\': $index === 1}">{{item}}</span></p></div></a></div></div></div></div>'),t.put("app/common/exportExcel/exportExcel.tpl.html",'<button class="btn {{vm.classList}}" ng-click="vm.doExport(vm.exslSrc)"><i class="fa fa-download"></i> 导出</button>'),t.put("app/common/loading/loading.tpl.html",'<div class="loading-wrapper"><div class="spinner"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div></div>'),t.put("app/common/loading/loadingWrapper.tpl.html",'<div ng-transclude=""></div><loading type="{{type}}"></loading>'),t.put("app/common/noneDataInfo/noneDataInfo.tpl.html",'<div class="empty-placeholder"><h5><i class="fa fa-info-circle"></i> 没有查询到记录</h5></div>'),t.put("app/components/breadcrumb/breadcrumb.html",'<div class="tab-bread-wrapper"><ul class="tab-bread"><li ng-repeat="(id, name) in bc.tabTemp" uib-tooltip="{{name}}" tooltip-placement="bottom"><div ui-sref=".{{id}}" ui-sref-active="active" ng-class="{active: bc.isActive(\'{{id}}\')}" class="tab-bread__item" href="#"><span>{{name}}</span> <a ng-click="bc.removeTab($event)" data-id="{{id}}" class="close-tab" href="javascript:;">×</a></div></li></ul></div>'),t.put("app/components/colorPicker/colorPicker.html",'<div class="color-picker-wrapper"><div class="color-picker-item color-picker-current" ng-click="toggle()" ng-style="{\'background-color\': current}"></div><div class="color-picker-selector"><div class="color-picker-box" ng-repeat="item in colorArr"><div class="color-picker-item" ng-style="{\'background-color\': item}" ng-click="choose(item)"></div></div></div></div>'),t.put("app/components/header/changeRole.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">切换角色</h5></div><div class="modal-body">您的现有角色：<table class="table table-condensed table-bordered table-striped"><tr><th></th><th>角色编号</th><th>角色名称</th><th>所属部门</th></tr><tr ng-repeat="row in vm.userRoleList" ng-class="{success: row.seqId === vm.currentRole.seqId, active: row.seqId === vm.selectedRole.seqId}"><td><input id="{{row.seqId}}" name="userRole" ng-click="vm.showRole(row)" type="radio" value="{{row.seqId}}" ng-model="vm.selectedRole.seqId"></td><td data-title="\'角色编号\'"><label for="{{row.seqId}}">{{row.roleCode}}</label></td><td data-title="\'角色名称\'"><label for="{{row.seqId}}">{{row.roleName}}</label></td><td data-title="\'所属部门\'"><label for="{{row.seqId}}">{{ row.deptName }}</label></td></tr></table></div><div class="modal-footer"><button class="btn btn-sm btn-success {{vm.roleBtnStatus.state}}" type="button" {{vm.loginbtnstatus.state}}="" ng-click="vm.changeRole()">{{vm.roleBtnStatus.title}}</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div>'),t.put("app/components/header/changeUser.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">切换用户</h5></div><form class="form w5c-form login-box__form change-user-form" novalidate="" w5c-form-validate="vm.validationOption" name="changeUserForm"><div class="modal-body"><div class="form-item form-item__sm"><label class="name-label"><span class="fa fa-user"></span></label> <input autocomplete="off" ng-pattern="/^[0-9A-Za-z_]{1,19}$/" required="" type="text" ng-model="vm.formData.loginName" name="loginName" class="form-ctr input" id="user-name" placeholder="用户名"></div><div class="form-item form-item__sm"><label class="name-label" for="password"><span class="fa fa-lock"></span></label> <input autocomplete="off" type="password" required="" name="password" ng-model="vm.formData.password" class="form-ctr input" id="password" placeholder="密码"></div></div><div class="modal-footer"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" {{vm.loginbtnstatus.state}}="" w5c-form-submit="vm.changeUser(vm.formData)">{{vm.loginBtnStatus.title}}</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),t.put("app/components/header/header.html",'<nav class="navbar header-top navbar-default navbar-fixed-top navbar-lx"><div class="container-fluid"><div class="navbar-header"><div class="logo-wrapper pull-left"><a href="/" class="logo"></a></div></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a><i class="fa fa-calendar"></i> {{hd.time_now}}</a></li><li uib-dropdown=""><a id="msg-button" class="dropdown-link" uib-dropdown-toggle="" ng-disabled="disabled"><i class="fa fa-flag"></i> {{(hd.userRoleList | filter: hd.currentRole.roleCode)[0].roleName}} <i class="fa fa-caret-down"></i></a><ul uib-dropdown-menu="" role="menu" aria-labelledby="msg-button"><li ng-repeat="role in hd.userRoleList"><a href="javascript:;" ng-click="hd.changeRole(role)">{{role.roleName}} <span class="label label-primary label-sm pull-right">{{role.deptName}}</span></a></li></ul></li><li uib-dropdown=""><a id="msg-button" class="dropdown-link" uib-dropdown-toggle="" ng-disabled="disabled"><i class="fa fa-bell"></i> 消息 <i class="fa fa-caret-down"></i></a><ul uib-dropdown-menu="" role="menu" aria-labelledby="msg-button"><li><a href="">账号信息</a></li><li><a href="">账号信息</a></li><li><a href="">账号信息</a></li><li><a href="">账号信息</a></li></ul></li><li uib-dropdown=""><a id="user-button" class="dropdown-link" uib-dropdown-toggle="" ng-disabled="disabled"><i class="fa fa-user"></i> {{hd.user.loginName}} <i class="fa fa-caret-down"></i></a><ul uib-dropdown-menu="" role="menu" aria-labelledby="user-button"><li><a href="javascript:;"><i class="fa fa-exclamation-circle"></i> 账号信息</a></li><li><a href="javascript:;" ng-click="hd.openUserDialog()"><i class="fa fa-users"></i> <span>切换用户</span></a></li><li><a ng-click="hd.logout()" href="javascript:;"><i class="fa fa-sign-out"></i> <span>退出系统</span></a></li></ul></li></ul></div></div></nav>'),t.put("app/components/navbar/navbar.html",'<div class="left-nav" print-remove="" ng-class="{\'left-min\': vm.minMode, \'left-sub-min\': !vm.isSubNavShow}"><div class="nav-container" print-remove="" print-hide=""><div class="nav-wrapper" ng-class="{\'left-nav-min\': vm.minMode}"><ul class="nav-menu" print-remove=""><li class="nav-menu_item nav-view-trigger"><a href="javascript:;" ng-click="vm.toggleNavView()"><i class="fa nav-menu_item-icon" ng-class="{\'fa-list\': !vm.minMode, \'fa-square\': vm.minMode}"></i></a></li></ul><uib-accordion class="nav-menu"><uib-accordion-group panel-class="no-panel" ng-repeat="item in vm.navData" data-title="{{item.funUrl}}" is-open="item.isOpen"><uib-accordion-heading><div class="nav-menu_item" ng-click="vm.showSubNav($index)" ng-class="{\'active\': $index === vm.currentIndex, \'current\': $index === vm.lastIndex}"><a href="javascript:;" tooltip-enable="vm.minMode" uib-tooltip="{{item.funName}}" tooltip-placement="right" tooltip-append-to-body="true"><i class="fa icomoon icomoon-{{item.icoName}} nav-menu_item-icon"></i> <span class="nav-menu_item-text">{{item.funName}}</span> <i class="pull-right fa nav-menu_item-arrow" ng-class="{\'fa-angle-down\': item.isOpen, \'fa-angle-right\': !item.isOpen}"></i></a></div></uib-accordion-heading><ul class="nav-menu_sub-item"><li ng-repeat="subItem in item.child" tooltip-enable="vm.minMode" uib-tooltip="{{subItem.funName}}" tooltip-placement="right" tooltip-append-to-body="true"><a ui-sref-active="active" class="nav-menu_sub-item-text" ng-click="vm.setActiveIndex()" data-id="{{subItem.funUrl}}" data-name="{{subItem.funName}}" ui-sref=".{{subItem.funUrl}}"><i class="fa fa-caret-square-o-right nav-menu_item-icon"></i> {{subItem.funName}}</a></li></ul></uib-accordion-group></uib-accordion></div></div></div>'),t.put("app/departmentManager/attemper/attemper.model.html",'<div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写调班信息</h5></div><form class="w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="form-group col-sm-4"><label class="control-label col-sm-5">申请原因</label><div class="col-sm-7"><input class="form-control input-sm" ng-model="vm.formData.changeCause"></div></div><div class="form-group col-sm-4"><label class="control-label col-sm-5">申请人班次</label><div class="col-sm-7"><select class="form-control input-sm" ng-model="vm.formData.applyClass"><option ng-repeat="c in vm.classes" value="{{c.classCode}}">{{c.className}}</option></select></div></div><div class="form-group col-sm-4"><label class="control-label col-sm-5">申请人班次日期</label><div class="col-sm-7"><span class="input-group"><input type="text" id="applyClassDate" name="applyClassDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.applyClassDateOpen" ng-model="vm.formData.applyClassDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.applyClassDateOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-sm-4"><label class="control-label col-sm-5">调班人</label><div class="col-sm-7"><select class="form-control input-sm" ng-model="vm.formData.changeUserCode"><option ng-repeat="c in vm.users track by $index" value="{{c.userCode}}">{{c.userName}}</option></select></div></div><div class="form-group col-sm-4"><label class="control-label col-sm-5">调班人班次</label><div class="col-sm-7"><select class="form-control input-sm" ng-model="vm.formData.changeClass"><option ng-repeat="c in vm.classes" value="{{c.classCode}}">{{c.className}}</option></select></div></div><div class="form-group col-sm-4"><label class="control-label col-sm-5">调班人班次日期</label><div class="col-sm-7"><span class="input-group"><input type="text" id="changeClassDate" name="changeClassDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.changeClassDateOpen" ng-model="vm.formData.changeClassDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.changeClassDateOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),t.put("app/departmentManager/attemper/attemper.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-eye-slash"></i> <span>调班管理</span> <button class="btn btn-sm btn-primary" ng-click="vm.add()">新增调班</button></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>申请人</th><th>申请时间</th><th>申请原因</th><th>申请人班次</th><th>申请人班次日期</th><th>调班人</th><th>调班人班次</th><th>调班人班次日期</th><th>处理状态</th><th>处理备注</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list | filter : vm.filter"><tr class="row-{{$index}}"><td>{{vm.getUserName(row.applyUserCode)}}</td><td>{{row.createTime | date: \'yyyy-MM-dd HH:mm:ss\'}}</td><td>{{row.changeCause}}</td><td>{{vm.getClassName(row.applyClass)}}</td><td>{{row.applyClassDate}}</td><td>{{vm.getUserName(row.changeUserCode)}}</td><td>{{vm.getClassName(row.changeClass)}}</td><td>{{row.changeClassDate}}</td><td>{{getDicName(\'changeClass\', row.status)}}</td><td>{{row.refuseCause}}</td><td><button class="btn btn-xs btn-primary" ng-click="vm.handler(row)" uib-tooltip="处理" ng-show="row.status == \'01\'"><span class="fa fa-edit"></span></button> <button class="btn btn-xs btn-danger" ng-click="vm.del(row.seqId)" uib-tooltip="删除" ng-show="row.status == \'02\' || row.status == \'03\'"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/departmentManager/attemper/handler.tpl.html",'<div class="attemper-handler-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">处理调班申请</h5></div><form class="w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="form-group row"><label class="control-label col-sm-4">处理方式</label><div class="col-sm-8"><div class="radio"><label class="col-sm-6"><input type="radio" name="status" ng-model="vm.formData.status" value="02">拒绝</label> <label class="col-sm-6"><input type="radio" name="status" ng-model="vm.formData.status" value="03">通过</label></div></div></div><div class="form-group row"><label class="control-label col-sm-4">备注</label><div class="col-sm-8"><input class="form-control input-sm" ng-model="vm.formData.refuseCause"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">确定</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),t.put("app/departmentManager/bed/addBed.tpl.html",'<div class="mod-pop-dateForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">新增床位分组</h5></div><div class="modal-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addbedForm" form="addbedForm"><div class="form-wrapper"><div class="form-group"><label for="groupName" class="control-label col-xs-3">组名</label><div class="col-xs-9"><input class="form-control input-sm" name="groupName" required="" autocomplete="off" ng-model="vm.formData.groupName" type="text" id="groupName"></div></div><div class="form-group"><label for="bedCode" class="control-label col-xs-3">床位</label><div class="col-xs-9"><ul class="flow-list"><li ng-repeat="flowItem in vm.formData.bedList track by $index"><span>{{ flowItem }}</span> <a ng-click="vm.removeFlow($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></li></ul><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="新增床位" autocomplete="off" name="bedCode" id="bedCode"> <span class="input-group-btn"><button ng-click="vm.addFlow()" class="btn btn-primary btn-sm" ng-disabled="addbedForm.bedCode.$invalid || addbedForm.bedCode.$pristine"><span class="fa fa-plus"></span></button></span></div></div></div><div class="text-center"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></form></div></div>'),t.put("app/departmentManager/bed/bed.tpl.html",'<div class="dept-wrapper" ng-controller="DepartmentManagerClassesController as vm"><div class="page-left-menu" print-remove="" ng-if="vm.treeData[0].children && vm.treeData[0].children.length"><div class="panel pull-left dept-wrapper panel-default" full-height=""><div class="panel-heading"><i class="fa fa-calendar"></i> <span>科室列表</span></div><div class="panel-body dept-list"><div class="list-content"><treecontrol class="tree-light" tree-model="vm.treeData" on-selection="vm.select(node)" expanded-nodes="vm.expandedNodes" selected-node="vm.selectedNode">{{node.deptName}}</treecontrol><loading type="tree"></loading></div></div></div></div><div ng-class="{\'page-right-content\': vm.treeData[0].children && vm.treeData[0].children.length}"><div class="class-wrapper"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>班次管理</span> <button class="btn btn-sm btn-primary" ng-click="vm.addClasses()">新增班次</button></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th st-sort="hisCode">科室</th><th>班次</th><th>开始时间</th><th>结束时间</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td>{{ row.deptName }}</td><td>{{ row.className }}</td><td>{{ row.startTime }}</td><td>{{ row.endTime }}</td><td class="print-remove" data-title="\'操作\'"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.edit(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></div></div>'),t.put("app/departmentManager/classes/addClasses.tpl.html",'<div class="mod-pop-dateForm addClass-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">新增班次</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addClassesForm"><div class="container-fluid"><div class=""><div class="form-group"><label for="dept" class="col-sm-4 control-label">科室</label><div class="col-sm-8"><input class="form-control input-sm input-none" readonly="" name="" id="dept" type="text" value="{{vm.formData.deptName}}"></div></div><div class="form-group"><label for="turn" class="col-sm-4 control-label">班次</label><div class="col-sm-8"><input class="form-control input-sm" required="" ng-model="vm.formData.className" id="turn" name="" autocomplete="off" type="text"></div></div><div class="form-group partial-form-group"><label for="" class="col-sm-4 control-label">开始时间</label><div class="col-sm-8"><uib-timepicker class="timepick" ng-model="vm.formData.startTime" hour-step="1" minute-step="1" required="" template-url="app/common/tpls/timepicker/timepicer.html" show-meridian="false" show-minutes="true"></uib-timepicker></div></div><div class="form-group partial-form-group"><label for="" class="col-sm-4 control-label">结束时间</label><div class="col-sm-8"><uib-timepicker class="timepick" ng-model="vm.formData.endTime" hour-step="1" minute-step="1" required="" template-url="app/common/tpls/timepicker/timepicer.html" show-meridian="false" show-minutes="true"></uib-timepicker></div></div><div class="form-group partial-form-group"><label for="" class="col-sm-4 control-label">颜色区分</label><div class="col-sm-8"><color-picker ng-model="vm.formData.color" handle="true"></color-picker></div></div><div class="text-center"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></form></div></div>'),t.put("app/departmentManager/classes/classes.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>班次管理</span> <button class="btn btn-sm btn-primary" ng-click="vm.addClasses()">新增班次</button></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">科室</th><th>班次</th><th>开始时间</th><th>结束时间</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td>{{ row.deptName }}</td><td>{{ row.className }}</td><td>{{ row.startTime }}</td><td>{{ row.endTime }}</td><td class="print-remove" data-title="\'操作\'"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.edit(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),
t.put("app/departmentManager/leave/addLeave.tpl.html",'<div class="mod-pop-dateForm addLeave"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">请假</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addleaveForm"><div class="container-fluid"><div class="form-wrapper"><div class="form-group"><label for="txt" class="col-sm-2 control-label">请假类型</label><div class="col-sm-10"><select class="form-control input-sm" ng-model="vm.formData.leaveType"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.leaveType">{{item.dicName}}</option></select></div></div><div class="form-group"><label for="txt" class="col-sm-2 control-label">请假原因</label><div class="col-sm-10"><textarea class="form-control input-sm partial-textarea" id="txt" ng-model="vm.formData.leaveWhy"></textarea></div></div><div class="form-group partial-form-group"><label class="col-sm-2 control-label">请假时间</label><div class="col-sm-10 leave-time"><input type="text" class="form-control input-sm partial-input partial-input-sm date-pick" uib-datepicker-popup="yyyy-MM-dd" ng-model="vm.formData.startDate" is-open="popup1" ng-click="popup1 = true" placeholder="年-月-日" required="" readonly=""><uib-timepicker class="timepick" ng-model="vm.formData.startTime" hour-step="1" minute-step="1" show-meridian="false" template-url="app/common/tpls/timepicker/timepicer.html" show-minutes="false"></uib-timepicker><span class="leave-time-text">到</span> <input type="text" class="form-control input-sm partial-input partial-input-sm date-pick" uib-datepicker-popup="yyyy-MM-dd" ng-model="vm.formData.endDate" is-open="popup2" ng-click="popup2 = true" placeholder="年-月-日" readonly=""><uib-timepicker class="timepick" ng-model="vm.formData.endTime" hour-step="1" show-meridian="false" template-url="app/common/tpls/timepicker/timepicer.html" show-minutes="false"></uib-timepicker></div></div><div class="form-group clearfix"><div class="pull-right"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),t.put("app/departmentManager/leave/leave.tpl.html",'<div class="wrapper" ng-controller="DeptTreeCtrl as vm"><div class="page-left-menu" print-remove="" ng-if="vm.treeData[0].children && vm.treeData[0].children.length"><div class="panel pull-left dept-wrapper panel-default" full-height=""><div class="panel-heading"><i class="fa fa-sitemap"></i> <span>科室列表</span></div><div class="panel-body dept-list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText" placeholder="输入关键字搜索"></div><div class="list-content"><treecontrol class="tree-light" tree-model="vm.treeData" on-selection="vm.select(node)" filter-expression="vm.filterText" expanded-nodes="vm.expandedNodes" selected-node="vm.selectedNode">{{node.deptName}}</treecontrol><loading type="tree"></loading></div></div></div></div><div ng-class="{\'page-right-content\': vm.treeData[0].children && vm.treeData[0].children.length, \'padding-content\': !(vm.treeData[0].children && vm.treeData[0].children.length)}"><uib-tabset active="active"><uib-tab index="0" heading="请假"><div class="leave-wrapper" ng-controller="DepartmentManagerLeaveController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid"><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.addLeave()">请假</button></div></div><div class="panel-body"><table st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>部门名称</th><th>员工姓名</th><th>开始时间</th><th>结束时间</th><th>请假类型</th><th>请假原因</th><th>审批状态</th><th>备注</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td class="text-center">{{row.deptName}}</td><td class="text-center">{{row.userName}}</td><td class="text-center">{{row.startTime}}</td><td class="text-center">{{row.endTime}}</td><td class="text-center">{{row.leaveType}}</td><td class="text-center">{{row.leaveWhy}}</td><td class="text-center">{{row.approveStatusName}}</td><td class="text-center">{{row.approveRemark}}</td><td class="print-remove"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="审核" ng-click="vm.review(row)" ng-show="row.approveStatus == \'01\'"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></uib-tab><uib-tab index="1" heading="调班"><div class="attemper-wrapper" ng-controller="DepartmentManagerAttemperController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid"><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.add()">调班</button></div></div><div class="panel-body"><table st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>申请人</th><th>申请时间</th><th>申请原因</th><th>申请人班次</th><th>申请人班次日期</th><th>调班人</th><th>调班人班次</th><th>调班人班次日期</th><th>处理状态</th><th>处理备注</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list | filter : vm.filter"><tr class="row-{{$index}}"><td>{{vm.getUserName(row.applyUserCode)}}</td><td>{{row.createTime | date: \'yyyy-MM-dd HH:mm:ss\'}}</td><td>{{row.changeCause}}</td><td>{{vm.getClassName(row.applyClass)}}</td><td>{{row.applyClassDate}}</td><td>{{vm.getUserName(row.changeUserCode)}}</td><td>{{vm.getClassName(row.changeClass)}}</td><td>{{row.changeClassDate}}</td><td>{{getDicName(\'changeClass\', row.status)}}</td><td>{{row.refuseCause}}</td><td><button class="btn btn-xs btn-primary" ng-click="vm.handler(row)" uib-tooltip="处理" ng-show="row.status == \'01\'"><span class="fa fa-edit"></span></button> <button class="btn btn-xs btn-danger" ng-click="vm.del(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></uib-tab></uib-tabset></div></div>'),t.put("app/departmentManager/leave/review.tpl.html",'<div class="mod-pop-dateForm addLeave"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">请假</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="reviewForm"><div class="container-fluid"><div class=""><div class="form-group"><label class="col-sm-3 control-label">姓名：</label><div class="col-sm-9 input-sm">{{ vm.formData.userName }}</div></div><div class="form-group"><label for="txt" class="col-sm-3 control-label">请假原因：</label><div class="col-sm-9 input-sm">{{ vm.formData.leaveWhy }}</div></div><div class="form-group partial-form-group"><label class="col-sm-3 control-label">开始时间：</label><div class="col-sm-9 input-sm">{{ vm.formData.startTime }}</div></div><div class="form-group partial-form-group"><label class="col-sm-3 control-label">结束时间：</label><div class="col-sm-9 input-sm">{{ vm.formData.endTime }}</div></div><div class="form-group partial-form-group"><label class="col-sm-3 control-label">审核：</label><div class="col-sm-9"><div class="radio"><label><input type="radio" name="select1" value="02" aria-label="批准" required="" ng-model="vm.formData.approveStatus" ng-click="reviewForm.approveStatus = false"> <span class="select">批准</span></label> <label><input type="radio" name="select1" value="03" aria-label="拒绝" required="" ng-model="vm.formData.approveStatus" ng-click="reviewForm.approveStatus = true"> <span class="select">拒绝</span></label></div></div></div><div class="form-group"><label for="txt" class="col-sm-3 control-label">审核备注：</label><div class="col-sm-7"><textarea class="form-control input-sm partial-textarea" id="txt" ng-model="vm.formData.approveRemark"></textarea></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),t.put("app/departmentManager/endemicArea/endemicArea.tpl.html",'<div class="wrapper" ng-controller="DeptTreeCtrl as vm"><div class="page-left-menu" print-remove="" ng-if="vm.treeData[0].children && vm.treeData[0].children.length"><div class="panel pull-left dept-wrapper panel-default" full-height=""><div class="panel-heading"><i class="fa fa-sitemap"></i> <span>科室列表</span></div><div class="panel-body dept-list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText" placeholder="输入关键字搜索"></div><div class="list-content"><treecontrol class="tree-light" tree-model="vm.treeData" on-selection="vm.select(node)" filter-expression="vm.filterText" expanded-nodes="vm.expandedNodes" selected-node="vm.selectedNode">{{node.deptName}}</treecontrol><loading type="tree"></loading></div></div></div></div><div ng-class="{\'page-right-content\': vm.treeData[0].children && vm.treeData[0].children.length, \'padding-content\': !(vm.treeData[0].children && vm.treeData[0].children.length)}"><uib-tabset active="active"><uib-tab index="0" heading="人员分组"><div class="endemic-wrapper" ng-controller="DepartmentManagerEndemicAreaController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid"><div class="pull-right"><button class="btn btn-sm btn-success" ng-click="vm.saveArea()">保存</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th class="index-cell">序号</th><th>工号</th><th>姓名</th><th>所属护理组</th><th>是否参与排班</th></tr></thead><tbody><tr class="row-{{$index}}" ng-repeat="row in vm.list"><td class="index-cell">{{$index + 1}}</td><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td><select class="input-sm" ng-model="row.groupCode"><option ng-repeat="group in vm.groupLst" value="{{group.groupCode}}">{{group.groupName}}</option></select></td><td><input type="checkbox" ng-model="row.isSchedule" ng-true-value="\'1\'" ng-false-value="\'0\'"></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></uib-tab><uib-tab index="1" heading="班次定义"><div class="class-wrapper" ng-controller="DepartmentManagerClassesController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid"><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.addClasses()">新增班次</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th>班次</th><th>开始时间</th><th>结束时间</th><th>颜色区分</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td>{{ row.className }}</td><td>{{ row.startTime }}</td><td>{{ row.endTime }}</td><td class="space-ignore"><color-picker ng-model="row.color"></color-picker></td><td class="print-remove" data-title="\'操作\'"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.edit(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></uib-tab><uib-tab index="2" heading="分组定义"><div class="bed-wrapper" ng-controller="DepartmentManagerBedController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid"><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.open()">新增床位分组</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th class="index-cell">序号</th><th>组名</th><th>床位</th><th print-remove="">操作</th></tr></thead><tbody><tr class="row-{{$index}}" ng-repeat="row in vm.list"><td class="index-cell">{{ $index + 1 }}</td><td>{{ row.groupName }}</td><td>{{ row.beds }}</td><td class="print-remove" data-title="\'操作\'"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.open(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.deleteGroup(row.seqId)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div></uib-tab></uib-tabset></div></div>'),t.put("app/departmentManager/statistics/detail.grid.html",'<td colspan="{{tdLen}}"><div class="tpl"><table class="table table-hover table-condensed table-bordered table-striped"><thead><tr><th st-sort="rowNumber">序号</th><th st-sort="month">月份</th><th st-sort="deptCode">病区</th><th st-sort="hisCode">HIS工号</th><th st-sort="userName">姓名</th><th st-sort="bj" ng-if="vm.queryParams.type === \'leave\'">病假（天）</th><th st-sort="nj" ng-if="vm.queryParams.type === \'leave\'">年假（天）</th><th st-sort="hj" ng-if="vm.queryParams.type === \'leave\'">婚假（天）</th><th st-sort="txj" ng-if="vm.queryParams.type === \'leave\'">调休假（天）</th><th st-sort="sj" ng-if="vm.queryParams.type === \'leave\'">丧假（天）</th><th st-sort="cj" ng-if="vm.queryParams.type === \'leave\'">产假（天）</th><th st-sort="yb" ng-if="vm.queryParams.type === \'class\'">夜班（个）</th><th st-sort="jjr" ng-if="vm.queryParams.type === \'days\'">节假日上班（天）</th></tr></thead><tbody><tr ng-repeat="row in vm.statisticsData"><td>{{row.rowNumber}}</td><td>{{row.month}}</td><td>{{row.deptCode}}</td><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.bj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.nj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.hj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.txj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.sj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.cj}}</td><td ng-if="vm.queryParams.type === \'class\'">{{row.yb}}</td><td ng-if="vm.queryParams.type === \'days\'">{{row.jjr}}</td></tr></tbody></table></div></td>'),t.put("app/departmentManager/statistics/statistics.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>统计上报</span><div class="pull-right"></div></div><div class="filter-bar form-inline"><div class="filter-item"><label>统计类别：</label><select name="" ng-model="vm.queryParams.type" class="form-control input-sm"><option value="leave" selected="">考勤统计</option><option value="class">夜班统计</option></select></div><div class="filter-item" ng-if="vm.queryParams.type !== \'days\'"><label>月份：</label> <span class="input-group"><input ng-model="vm.queryParams.month" type="text" id="month" name="month" required="" uib-datepicker-popup="" datepicker-options="vm.options.month" on-open-focus="true" is-open="vm.picker.monthOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openPicker(\'month\')"><i class="fa fa-calendar"></i></button></span></span></div><div class="filter-item"><label>科室：</label><select class="form-controll input-sm" ng-model="vm.queryParams.dept" ng-options="dept as dept.deptName for dept in vm.deptList track by dept.deptCode" name="dept"></select></div><div class="filter-item" ng-if="vm.queryParams.type === \'days\'"><label>日期区间：</label><div class="inline"><span class="input-group"><input ng-model="vm.queryParams.startDate" type="text" id="startDate" name="startDate" required="" uib-datepicker-popup="" datepicker-options="vm.options.startDate" on-open-focus="true" is-open="vm.picker.startDateOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openPicker(\'startDate\')"><i class="fa fa-calendar"></i></button></span></span></div>-<div class="inline"><span class="input-group"><input ng-model="vm.queryParams.endDate" type="text" id="endDate" name="endDate" required="" uib-datepicker-popup="" datepicker-options="vm.options.endDate" on-open-focus="true" is-open="vm.picker.endDateOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openPicker(\'endDate\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="filter-item"><button type="button" name="button" class="btn btn-sm btn-primary" ng-click="vm.getStatistics()">统计</button></div></div><div class="panel-body"><table st-table="vm.statisticsData" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th st-sort="hisCode">HIS工号</th><th st-sort="userName">姓名</th><th st-sort="bj" ng-if="vm.queryParams.type === \'leave\'">病假（天）</th><th st-sort="nj" ng-if="vm.queryParams.type === \'leave\'">年假（天）</th><th st-sort="hj" ng-if="vm.queryParams.type === \'leave\'">婚假（天）</th><th st-sort="txj" ng-if="vm.queryParams.type === \'leave\'">调休假（天）</th><th st-sort="sj" ng-if="vm.queryParams.type === \'leave\'">丧假（天）</th><th st-sort="cj" ng-if="vm.queryParams.type === \'leave\'">产假（天）</th><th st-sort="yb" ng-if="vm.queryParams.type === \'class\'">夜班（个）</th><th st-sort="jjr" ng-if="vm.queryParams.type === \'days\'">节假日上班（天）</th><th ng-repeat="c in vm.classesList" st-sort="c.classCode" ng-if="vm.queryParams.type == \'class\'">{{c.className}}</th></tr></thead><tbody ng-repeat="row in vm.statisticsData"><tr><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.bj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.nj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.hj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.txj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.sj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.cj}}</td><td ng-if="vm.queryParams.type === \'class\'">{{row.yb}}</td><td ng-repeat="c in row.classList" ng-if="vm.queryParams.type === \'class\'">{{c.times}}</td><td ng-if="vm.queryParams.type === \'days\'">{{row.jjr}}</td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/departmentManager/turns/turns.tpl.html",'<div class="turns-wrapper wrapper"><div class="page-left-menu" print-remove="" full-height=""><div class="selector-wrapper"><select class="form-control input-sm" ng-model="vm.params.deptCode" ng-change="vm.load.func()"><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-calendar"></i><span>排版时间表</span></div><div class="panel-body dept-list"><div class="list-content"><treecontrol class="tree-light" tree-model="vm.treeData" on-selection="vm.select(node)" expanded-nodes="vm.expandedNodes" selected-node="vm.selectedNode">{{node.text}}</treecontrol><loading type="tree"></loading></div></div></div></div><div class="page-right-content"><uib-tabset active="active"><uib-tab index="0" heading="排班管理"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper container-fluid"><button class="btn btn-sm btn-default" ng-click="vm.backWeek()">上一周</button> <span>第{{vm.params.weeks}}周</span> <button class="btn btn-sm btn-default" ng-click="vm.nextWeek()">下一周</button><div class="pull-right"><button class="btn btn-sm btn-primary" ng-click="vm.newTurns()">重新排班</button> <button class="btn btn-sm btn-primary" ng-click="vm.copyWeek()">复制上周</button> <button class="btn btn-sm btn-success" ng-click="vm.saveTurns()">保存</button> <button class="btn btn-sm btn-success" print-landscape="" print-btn="">打印</button></div></div><div class="panel-body"><table print-table="vm.lst" class="table table-condensed table-bordered table-striped"><thead><tr><th>员工姓名</th><th>{{vm.data.week1}}</th><th>{{vm.data.week2}}</th><th>{{vm.data.week3}}</th><th>{{vm.data.week4}}</th><th>{{vm.data.week5}}</th><th>{{vm.data.week6}}</th><th>{{vm.data.week7}}</th></tr></thead><tbody><tr ng-repeat="row in vm.lst"><td>{{row.userName}}</td><td class="edit-cell-dir" ng-style="{ \'background-color\': vm.getClassColor(row.week1[0].classCode) }"><div class="turn-item-wrapper" ng-repeat="week1 in row.week1 track by $index"><div class="edit-text-dir">{{vm.getClassName(row.week1[$index].classCode)}}</div><select class="form-control input-sm edit-input-dir" ng-model="row.week1[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td><td class="edit-cell-dir" ng-style="{ \'background-color\': vm.getClassColor(row.week2[0].classCode) }"><div class="turn-item-wrapper" ng-repeat="week2 in row.week2 track by $index"><div class="edit-text-dir">{{vm.getClassName(row.week2[$index].classCode)}}</div><select class="form-control input-sm edit-input-dir" ng-model="row.week2[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td><td class="edit-cell-dir" ng-style="{ \'background-color\': vm.getClassColor(row.week3[0].classCode) }"><div class="turn-item-wrapper" ng-repeat="week3 in row.week3 track by $index"><div class="edit-text-dir">{{vm.getClassName(row.week3[$index].classCode)}}</div><select class="form-control input-sm edit-input-dir" ng-model="row.week3[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td><td class="edit-cell-dir" ng-style="{ \'background-color\': vm.getClassColor(row.week4[0].classCode) }"><div class="turn-item-wrapper" ng-repeat="week4 in row.week4 track by $index"><div class="edit-text-dir">{{vm.getClassName(row.week4[$index].classCode)}}</div><select class="form-control input-sm edit-input-dir" ng-model="row.week4[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td><td class="edit-cell-dir" ng-style="{ \'background-color\': vm.getClassColor(row.week5[0].classCode) }"><div class="turn-item-wrapper" ng-repeat="week5 in row.week5 track by $index"><div class="edit-text-dir">{{vm.getClassName(row.week5[$index].classCode)}}</div><select class="form-control input-sm edit-input-dir" ng-model="row.week5[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td><td class="edit-cell-dir" ng-style="{ \'background-color\': vm.getClassColor(row.week6[0].classCode) }"><div class="turn-item-wrapper" ng-repeat="week6 in row.week6 track by $index"><div class="edit-text-dir">{{vm.getClassName(row.week6[$index].classCode)}}</div><select class="form-control input-sm edit-input-dir" ng-model="row.week6[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td><td class="edit-cell-dir" ng-style="{ \'background-color\': vm.getClassColor(row.week7[0].classCode) }"><div class="turn-item-wrapper" ng-repeat="week7 in row.week7 track by $index"><div class="edit-text-dir">{{vm.getClassName(row.week7[$index].classCode)}}</div><select class="form-control input-sm edit-input-dir" ng-model="row.week7[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td></tr></tbody></table></div></div></uib-tab></uib-tabset></div></div>'),t.put("app/departmentManager/turnsRule/turnsRule.model.html",'<div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写排班规则</h5></div><form class="w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-5">规则名称</label><div class="col-sm-7"><input class="form-control input-sm" ng-model="vm.formData.ruleName"></div></div><div class="form-group col-sm-6"><label class="control-label col-sm-5">日期类型</label><div class="col-sm-7"><select class="form-control input-sm" ng-model="vm.formData.dateType"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.dateType">{{item.dicName}}</option></select></div></div></div><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-5">班次</label><div class="col-sm-7"><select class="form-control input-sm" ng-model="vm.formData.classCode"><option ng-repeat="c in vm.metaData.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></div><div class="form-group col-sm-6"><label class="control-label col-sm-5">班次次数</label><div class="col-sm-7"><input class="form-control input-sm" ng-model="vm.formData.userCount"></div></div></div><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-5">护理人员级别</label><div class="col-sm-7"><select class="input-sm" ng-model="vm.formData.userLevel"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.level">{{item.dicName}}</option></select></div></div><div class="form-group col-sm-6"><label class="control-label col-sm-5">备注</label><div class="col-sm-7"><input class="form-control input-sm" ng-model="vm.formData.remark"></div></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),t.put("app/departmentManager/turnsRule/turnsRule.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-eye-slash"></i> <span>排班规则管理</span> <button class="btn btn-sm btn-primary" ng-click="vm.add()">新增规则</button></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">规则名称</th><th>日期类型</th><th>班次</th><th>班次次数</th><th>护理人员级别</th><th>备注</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td>{{ row.ruleName }}</td><td>{{ row.dateTypeName }}</td><td>{{ row.className }}</td><td>{{ row.userCount }}</td><td>{{ getDicName(\'level\', row.userLevel) }}</td><td>{{ row.remark }}</td><td class="print-remove" data-title="\'操作\'"><button class="btn btn-xs btn-primary" ng-click="vm.edit(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-xs btn-danger" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/malCaseUp/element/element.tpl.html",'<div ng-controller="MalCaseUpElementController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-indent"></i> <span>不良元素元素管理</span><div class="pull-right"><button class="btn btn-xs btn-primary">新增元素</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'元素编号\'">{{row.elementCode}}</td><td data-title="\'元素名称\'">{{row.elementName}}</td><td data-title="\'显示名称\'">{{row.viewName}}</td><td data-title="\'压疮大小\'">{{row.groupName}}</td><td data-title="\'元素类型\'">{{row.elementType}}</td><td data-title="\'组件宽度\'">{{row.width}}</td><td data-title="\'备注\'">{{row.remark}}</td><td data-title="\'是否必填\'">{{row.required}}</td></tr></table></div></div></div>'),t.put("app/malCaseUp/fix/fix.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>角色信息</span><div class="pull-right"></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data" ng-class="{\'info\': vm.selectedUserCode === row.code}"><td data-title="\'发生时间\'" ng-click="vm.loadDetail(row.code)">{{row.eventTime}}</td><td data-title="\'科室\'" ng-click="vm.loadDetail(row.code)">{{row.deptName}}</td><td data-title="\'住院号\'" ng-click="vm.loadDetail(row.code)">{{ row.patientHospNo }}</td><td data-title="\'姓名\'" ng-click="vm.loadDetail(row.code)">{{row.patientName}}</td><td data-title="\'性别\'" ng-click="vm.loadDetail(row.code)">{{ row.email }}</td><td data-title="\'年龄\'" ng-click="vm.loadDetail(row.code)">{{row.phone}}</td><td data-title="\'主要诊断\'" ng-click="vm.loadDetail(row.code)">{{row.hisCode}}</td><td data-title="\'风险评估\'" ng-click="vm.loadDetail(row.code)">{{row.name}}</td><td data-title="\'等级\'" ng-click="vm.loadDetail(row.code)">{{ row.email }}</td><td data-title="\'类型\'" ng-click="vm.loadDetail(row.code)">{{row.phone}}</td><td data-title="\'简要（5WH1）\'" ng-click="vm.loadDetail(row.code)">{{row.hisCode}}</td><td data-title="\'当事人\'" ng-click="vm.loadDetail(row.code)">{{row.name}}</td><td data-title="\'处理措施\'" ng-click="vm.loadDetail(row.code)">{{ row.email }}</td><td data-title="\'后果\'" ng-click="vm.loadDetail(row.code)">{{row.phone}}</td><td data-title="\'改进措施\'" ng-click="vm.loadDetail(row.code)">{{row.name}}</td><td data-title="\'追踪\'" ng-click="vm.loadDetail(row.code)">{{ row.email }}</td><td data-title="\'报告人\'" ng-click="vm.loadDetail(row.code)">{{row.phone}}</td></tr></table></div></div></div>'),t.put("app/malCaseUp/call/call.include.html",'<form class="w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><div class="form-group col-sm-3"><label for="name" class="control-label col-sm-5">事件等级</label><div class="col-sm-7"><input type="hidden" ng-model="vm.formData.damageLevel"><select ng-change="vm.formData.damageLevel = (vm.metaData.levelList | filter:vm.formData.level.damageLevelName)[0].damageLevel" data="" class="form-controll input-sm" ng-options="level.damageLevelName for level in vm.metaData.levelList track by level.damageLevel" ng-model="vm.formData.level"></select></div></div><div class="form-group col-sm-3"><label for="name" class="control-label col-sm-5">上报科室</label><div class="col-sm-7"><input type="hidden" ng-model="vm.formData.deptCode"><select ng-change="vm.formData.deptCode = (vm.metaData.deptList | filter:vm.formData.dept.deptName)[0].deptCode" data="" class="form-controll input-sm" ng-options="dept.deptName for dept in vm.metaData.deptList track by dept.deptCode" ng-model="vm.formData.dept"></select></div></div><div class="form-group col-sm-3"><label for="email" class="control-label col-sm-5">上报人</label><div class="col-sm-7"><input type="hidden" ng-model="vm.formData.userCode"> <input readonly="" type="text" ng-model="vm.formData.userName" class="form-control input-sm"></div></div><div class="form-group col-sm-3"><label><input ng-model="vm.formData.userRole" value="当事人" name="userRole" type="radio"> 当事人</label> <label><input ng-model="vm.formData.userRole" value="目击者" name="userRole" type="radio"> 目击者</label></div><div class="form-group col-sm-6"><label for="email" class="control-label col-sm-2 fixed-label">发生时间</label><div class="col-sm-4"><span class="input-group"><input ng-model="vm.formData.eventDate" type="text" id="eventDate" name="eventDate" required="" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.eventTimeOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.eventTimeCalender()"><i class="fa fa-calendar"></i></button></span></span></div><div class="col-sm-5"><uib-timepicker template-url="app/common/tpls/timepicker/timepicer.html" ng-model="vm.formData.eventTime" class="time-picker" ng-change="vm.timeChanged()" hour-step="1" minute-step="1" show-meridian="ismeridian"></uib-timepicker></div></div><div class="form-group col-sm-3"><label for="name" class="control-label col-sm-5">住院号</label><div class="col-sm-7"><input class="form-control input-sm" required="" ng-model="vm.formData.patientHospNo" type="text"></div></div><div class="form-group col-sm-3"><label for="email" class="control-label col-sm-5">床号</label><div class="col-sm-7"><input type="text" ng-model="vm.formData.patientBedNo" class="form-control input-sm"></div></div><div class="form-group col-sm-3"><label for="email" class="control-label col-sm-5">姓名</label><div class="col-sm-7"><input type="text" ng-model="vm.formData.patientName" class="form-control input-sm"></div></div><div class="form-group col-sm-3"><label for="email" class="control-label col-sm-5">性别</label><div class="col-sm-7"><select name="gender" ng-model="vm.formData.patientGender" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.gender">{{item.dicName}}</option></select></div></div><div class="form-group col-sm-3"><label for="email" class="control-label col-sm-5">年龄</label><div class="col-sm-7"><input type="text" ng-model="vm.formData.patientAge" class="form-control input-sm" style="width:4em;"></div></div><div class="form-group col-sm-12"><label class="col-sm-1 control-label fixed-label">诊断</label><div class="col-sm-10"><input type="text" ng-model="vm.formData.patientDiagnose" class="form-control input-sm"></div></div><div class="form-group col-sm-12"><label class="col-sm-1 control-label fixed-label">事件类型</label><div class="col-sm-10"><label class="event-type" ng-repeat="eventType in vm.metaData.eventTypeList"><input ng-model="vm.formData.eventType" ng-checked="vm.formData.eventType.eventTypeCode == eventType.eventTypeCode" type="radio" value="{{eventType}}" name="eventTypeCode"> {{eventType.eventTypeName}}</label></div></div><div class="form-group col-sm-12"><label class="col-sm-2 control-label">事件经过描述(5WH1)</label><div class="col-sm-10"><textarea type="text" ng-model="vm.formData.eventDescribe" class="form-control input-sm"></textarea></div></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">上报</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),
t.put("app/malCaseUp/call/call.modal.html",'<div class="call-modal-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写上报信息</h5></div><div ng-include="" src="\'app/malCaseUp/call/call.include.html\'"></div></div>'),t.put("app/malCaseUp/call/call.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-list-alt"></i> <span>不良事件列表</span> <button ng-click="vm.open()" class="btn btn-primary btn-sm"><i class="fa fa-upload"></i> 事件上报</button></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">不良事件级别</th><th>类型</th><th>发生时间</th><th>科室</th><th>住院号</th><th>姓名</th><th>性别</th><th>年龄</th><th>主要诊断</th><th>简要（5WH1）</th><th>报告人</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td ng-click="vm.loadDetail(row.code)">{{ row.damageLevelName }}</td><td ng-click="vm.loadDetail(row.code)">{{row.eventTypeName}}</td><td ng-click="vm.loadDetail(row.code)">{{row.eventTime}}</td><td ng-click="vm.loadDetail(row.code)">{{row.deptName}}</td><td ng-click="vm.loadDetail(row.code)">{{ row.patientHospNo }}</td><td ng-click="vm.loadDetail(row.code)">{{row.patientName}}</td><td ng-click="vm.loadDetail(row.code)">{{ row.patientGenderName}}</td><td ng-click="vm.loadDetail(row.code)">{{row.patientAge}}</td><td ng-click="vm.loadDetail(row.code)">{{row.patientDiagnose}}</td><td ng-click="vm.loadDetail(row.code)">{{row.eventDescribe}}</td><td ng-click="vm.loadDetail(row.code)">{{row.userName}}</td><td><button class="btn btn-primary btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑" ng-if="!row.isEditing"><span class="fa fa-edit"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/malCaseUp/handle/estimate.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><ul class="list-group"><li ng-click="vm.fillItem(\'measure\', measure)" ng-class="{\'active\': vm.formData.measure.meaCode == measure.meaCode}" class="list-group-item" ng-repeat="measure in vm.formData.measureList track by $index">{{$index + 1}}. {{measure.meaContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{measure.userName}}</span></div><blockquote>{{!measure.resDescribe ? \'暂无评估\' : measure.resDescribe}}</blockquote></li><li class="list-group-item"><div class="form-group"><div class="col-sm-12"><textarea class="form-control input-sm" cols="50" rows="3" ng-disabled="!vm.formData.measure.seqId" ng-model="vm.formData.measure.resDescribe" placeholder="请选择措施">\n                </textarea></div></div><div class="form-group"><div class="col-sm-12"><button ng-click="vm.saveListItem(\'estimate\')" class="btn btn-primary btn-sm" ng-disabled="vm.formData.measure.resDescribe === \'\' || !vm.formData.measure.resDescribe">提交评估</button></div></div></li></ul></div></div></div></form>'),t.put("app/malCaseUp/handle/handle.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写上报信息</h5></div><div class="modal-body"><div class="container-fluid"><div class="text-center handle-nav"><div class="text-center status-buttons"><a ui-sref-active="active" ui-sref=".malCase"><span>1</span> 不良事件信息</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".reportXk"><span>2</span> 调查处理</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".requirement"><span>3</span> 整改要求</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".measures"><span>4</span> 整改措施</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".estimate"><span>5</span> 整改效果评估</a></div></div><div id="form-views" class="well well-sm" ui-view=""></div></div></div></div>'),t.put("app/malCaseUp/handle/handle.tpl.html",'<div class="col-md-12 handle-wrapper"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-list-alt"></i> <span>不良事件列表</span></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">不良事件级别</th><th>类型</th><th>发生时间</th><th>科室</th><th>住院号</th><th>姓名</th><th>性别</th><th>年龄</th><th>主要诊断</th><th>简要（5WH1）</th><th>报告人</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td ng-click="vm.loadDetail(row.code)">{{ row.damageLevelName }}</td><td ng-click="vm.loadDetail(row.code)">{{row.eventTypeName}}</td><td ng-click="vm.loadDetail(row.code)">{{row.eventTime}}</td><td ng-click="vm.loadDetail(row.code)">{{row.deptName}}</td><td ng-click="vm.loadDetail(row.code)">{{ row.patientHospNo }}</td><td ng-click="vm.loadDetail(row.code)">{{row.patientName}}</td><td ng-click="vm.loadDetail(row.code)">{{ row.patientGenderName}}</td><td ng-click="vm.loadDetail(row.code)">{{row.patientAge}}</td><td ng-click="vm.loadDetail(row.code)">{{row.patientDiagnose}}</td><td ng-click="vm.loadDetail(row.code)">{{row.eventDescribe}}</td><td ng-click="vm.loadDetail(row.code)">{{row.userName}}</td><td><button class="btn btn-primary btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑" ng-if="!row.isEditing"><span class="fa fa-edit"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/malCaseUp/handle/malCaseInfo.tpl.html",'<div class="modal-body case-info-wrapper"><div class="container-fluid"><div class="label-group col-md-6"><label class="col-md-4 control-label">事件类型</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.eventTypeName}}</div></div><div class="label-group col-md-6"><label class="col-md-4 control-label">不良事件级别</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.damageLevelName}}</div></div><div class="label-group col-md-6"><label for="name" class="col-md-4 control-label">上报科室</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.deptName}}</div></div><div class="label-group col-md-6"><label class="control-label col-md-4">发生时间</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.eventTime}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">上报人</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.userName}}（{{vm.metaData.malCaseInfo.userRole}}）</div></div><div class="label-group col-md-6"><label for="name" class="col-md-4 control-label">患者住院号</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientHospNo}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者床号</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientBedNo}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者姓名</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientName}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者性别</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientGenderName}}</div></div><div class="label-group col-md-6"><label class="col-md-4 control-label">患者年龄</label><div class="col-md-8 case-info">：{{vm.metaData.malCaseInfo.patientAge}}</div></div><div class="label-group col-md-12"><label class="col-md-2 control-label">患者诊断</label><div class="col-md-10 case-info">：{{vm.metaData.malCaseInfo.patientDiagnose}}</div></div><div class="label-group col-md-12"><label class="col-md-2 control-label">事件经过描述</label><div class="col-md-10 case-info">：{{vm.metaData.malCaseInfo.eventDescribe}}</div></div></div></div>'),t.put("app/malCaseUp/handle/measures.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><ul class="list-group"><li ng-class="{\'active\': vm.formData.measure.meaCode == measure.meaCode}" class="list-group-item" ng-click="vm.fillItem(\'measure\', measure)" ng-repeat="measure in vm.formData.measureList track by $index">{{$index + 1}}. {{measure.meaContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{measure.userName}}</span> <span style="margin-right:1em;">实施负责人：{{(vm.metaData.userList | filter:measure.headUserCode)[0].userName }}</span> <button class="btn btn-xs btn-danger" uib-tooltip="删除" ng-click="vm.removeListItem({index: $index, listName: \'measure\', meaCode: measure.meaCode, reportCode: vm.formData.reportCode})"><span class="fa fa-trash"></span></button></div></li><li class="list-group-item"><div class="form-group"><label for="email" class="col-sm-2 control-label">措施实施负责人：</label><div class="col-sm-10"><input type="hidden" name="headUserCode" ng-model="vm.formData.headUserCode"><select class="form-controll input-sm" name="userName" ng-model="vm.formData.measure.headUserName" ng-change="vm.formData.measure.headUserCode = (vm.metaData.userList | filter:vm.formData.measure.headUserName)[0].userCode"><option ng-repeat="user in vm.metaData.userList" ng-selected="user.userCode == vm.formData.measure.headUserCode" value="{{user.userName}}">{{user.userName}}</option></select></div></div><div class="form-group"><label for="email" class="col-sm-2 control-label">整改措施：</label><div class="col-sm-10"><textarea class="form-control input-sm" cols="50" rows="3" ng-model="vm.formData.measure.meaContent" placeholder="填写整改要求">\n                </textarea></div></div><div class="form-group"><label for="email" class="col-sm-2 control-label"></label><div class="col-sm-10"><button ng-click="vm.resetForm(\'measure\')" class="btn btn-primary btn-sm">清空</button> <button ng-click="vm.saveListItem(\'measure\')" class="btn btn-success btn-sm" ng-disabled="vm.formData.measure.meaContent === \'\' || !vm.formData.measure.meaContent">保存</button></div></div></li></ul></div></div></div></form>'),t.put("app/malCaseUp/handle/report.tpl.html",'<form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><p>患者信息</p><table class="table table-condensed table-bordered table-striped"><tr><th style="width: 5em;"></th><th class="text-center">不良事件发生前</th><th class="text-center">不良事件发生后</th></tr><tr><td>生命体征</td><td><div class="form-group"><label for="email" class="control-label">BP</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.bp_before.value" class="form-control input-sm"> mmHg</div><div class="form-group"><label for="email" class="control-label">P</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.p_before.value" class="form-control input-sm"> 次／分</div><br><div class="form-group"><label for="email" class="control-label">R</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.r_before.value" class="form-control input-sm"> 次／分</div><div class="form-group"><label for="email" class="control-label">T</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.t_before.value" class="form-control input-sm"> ℃</div></td><td><div class="form-group"><label for="email" class="control-label">BP</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.bp_after.value" class="form-control input-sm"> mmHg</div><div class="form-group"><label for="email" class="control-label">P</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.p_after.value" class="form-control input-sm"> 次／分</div><br><div class="form-group"><label for="email" class="control-label">R</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.r_after.value" class="form-control input-sm"> 次／分</div><div class="form-group"><label for="email" class="control-label">T</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.t_after.value" class="form-control input-sm"> ℃</div></td></tr><tr><td>精神状况</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_clear_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_clear_before.value" type="checkbox"> 神志清</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_directive_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_directive_before.value" type="checkbox"> 有定向力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_upset_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" tng-model="vm.formData.reportDetailList.psychosis_upset_before.value" type="checkbox"> 不安</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_undiscerned_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_undiscerned_before.value" type="checkbox"> 无定力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_halfComa_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_halfComa_before.value" type="checkbox"> 半昏迷</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_coma_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_coma_before.value" type="checkbox"> 昏迷</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.psychosis_else_before.value" class="input-sm form-control"></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_clear_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_clear_after.value" type="checkbox"> 神志清</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_directive_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_directive_after.value" type="checkbox"> 有定向力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_upset_after.value = \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" tng-model="vm.formData.reportDetailList.psychosis_upset_after.value" type="checkbox"> 不安</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_undiscerned_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_undiscerned_after.value" type="checkbox"> 无定力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_halfComa_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_halfComa_after.value" type="checkbox"> 半昏迷</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_coma_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_coma_after.value" type="checkbox"> 昏迷</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.psychosis_else_after.value" class="input-sm form-control"></div></div></td></tr><tr><td>运动</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_self_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_self_before.value"> 独立</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_assist_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_assist_before.value"> 辅助支持</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_limit_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_limit_before.value"> 限制在床/轮椅</label></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_self_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_self_after.value" type="checkbox"> 独立</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_assist_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_assist_after.value" type="checkbox"> 辅助支持</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_limit_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_limit_after.value" type="checkbox"> 限制在床/轮椅</label></div></div></td></tr><tr><td>残疾</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_none_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_none_before.value"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_auditionDown_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_auditionDown_before.value"> 听力下降</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_costive_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_costive_before.value"> 行动不便</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_unclearEyed_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_unclearEyed_before.value"> 视力缺损</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.deformity_else_before.value" class="input-sm form-control"></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_none_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_none_after.value" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_auditionDown_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_auditionDown_after.value" type="checkbox"> 听力下降</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_costive_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_costive_after.value" type="checkbox"> 行动不便</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_unclearEyed_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_unclearEyed_after.value" type="checkbox"> 视力缺损</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.deformity_else_after.value" class="input-sm form-control"></div></div></td></tr><tr><td>其他说明</td><td><textarea name="name" ng-model="vm.formData.reportDetailList.elsedeclare_before.value" rows="2" cols="50" class="form-control input-sm"></textarea></td><td><textarea name="name" ng-model="vm.formData.reportDetailList.elsedeclare_after.value" rows="2" cols="50" class="form-control input-sm"></textarea></td></tr></table></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生24小时内用药：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_none.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_none.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_diuretic.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_diuretic.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 利尿剂</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_nicotine.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_nicotine.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 尼古丁／镇静</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_high_handed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_high_handed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 抗高压</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_depressed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_depressed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 抗抑郁</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_24_medicine_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生前采取的特殊预防措施：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_none.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_none.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_accompany.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_accompany.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 陪伴</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_informed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_informed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 已告知</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_guardrail.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_guardrail.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 床边扶栏</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_motionDevice.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_motionDevice.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 动作设备</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_sign.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_sign.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 标识</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_closestool.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_closestool.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 床边便器</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_restlessLimit.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_restlessLimit.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 躁动约束</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_riskWarning.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_riskWarning.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 风险预警</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_before_measures_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生地点：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_ward.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_ward.value"> 病房</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_treatmentRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_treatmentRoom.value"> 治疗室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_changeRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_changeRoom.value"> 换药室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_handleRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_handleRoom.value"> 处置室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_corridor.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_corridor.value"> 走廊</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_washroom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_washroom.value"> 厕所</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_outDepartment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_outDepartment.value"> 病区外</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_happen_addr_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生原因：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_physiological.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_physiological.value"> 病患生理因素</label></div>（<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_old.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_old.value"> 年老体弱</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_longSick.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_longSick.value"> 久病不愈</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_worsen.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_worsen.value"> 病情恶化</label></div>）<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_mentality.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_mentality.value"> 病患心理因素</label></div>（<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_badMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_badMind.value"> 情绪不稳</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_lostMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_lostMind.value"> 精神失常</label></div>）<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_artificia.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_artificia.value"> 人为因素</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value"> 医疗材料故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value"> 仪器故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value"> 设备故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_yard.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_yard.value"> 场地</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_environment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_environment.value"> 环境因素</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_winebowl.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_winebowl.value"> 酒瘾</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_drugster.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_drugster.value"> 毒瘾</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutSystem.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutSystem.value"> 与制度有关</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutFlow.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutFlow.value"> 与流程有关</label></div><div class="checkbox"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control" ng-model="vm.formData.reportDetailList.malcase_reason_else.value"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件目击：</label><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_witness.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生的事实（包括不良事件发生经过，发生后治疗，发生后护理及发生后检查结果等情况，由当事人或发现者填写）：</label> <textarea name="name" ng-model="vm.formData.reportDetailList.malcase_truth.value" rows="3" cols="100" class="form-control input-sm"></textarea></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveReportDetail()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),
t.put("app/malCaseUp/handle/reportXk.tpl.html",'<form class="w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">日期类型</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK01_medicine_none.value"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.dateType">{{item.dicName}}</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">不良事件发生地点</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK03_medicine_none.value"><option value="01">门诊</option><option value="02">急诊</option><option value="03">住院病房</option><option value="04">监护室</option><option value="05">留观察室</option><option value="06">公共服务设施</option><option value="07">卫生间</option><option value="08">转运图中</option><option value="09">手术室</option><option value="10">走廊</option><option value="11">其他</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">发生于何种服务</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK02_medicine_none.value"><option value="01">手术</option><option value="02">分娩</option><option value="03">治疗</option><option value="04">护理</option><option value="05">饮食</option><option value="06">公共服务设施</option><option value="07">卫生间</option><option value="08">清扫</option><option value="09">采集标本</option><option value="10">服务项目不明</option><option value="11">其他</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">事件给患者带来的损害</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK04_medicine_none.value"><option value="01">死亡</option><option value="02">植物人</option><option value="03">严重</option><option value="04">较重</option><option value="05">重</option><option value="06">中</option><option value="07">轻</option><option value="08">无</option><option value="09">抢救中</option><option value="10">不明</option><option value="11">其他</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人身份</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK05_medicine_none.value"><option value="01">注册护士</option><option value="02">返聘护士</option><option value="03">招聘护士</option><option value="04">进修护士</option><option value="05">见习护士</option><option value="06">实习护士</option><option value="07">护工</option><option value="08">其他</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">当事职务</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK06_medicine_none.value"><option value="01">护士长</option><option value="02">负护士长</option><option value="03">组长</option><option value="04">护士</option><option value="05">见习护士</option><option value="06">实习护士</option><option value="07">护工或陪护</option><option value="08">其他</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人年龄</label><div class="col-sm-5"><input class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK07_medicine_none.value"></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人所在科室</label><div class="col-sm-5"><input class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK08_medicine_none.value"></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">医院名称</label><div class="col-sm-5"><input class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK09_medicine_none.value"></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">医院级别</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK10_medicine_none.value"><option value="01">三级特等</option><option value="02">三级甲等</option><option value="03">三级乙等</option><option value="04">三级丙等</option><option value="05">二级级甲等</option><option value="06">二级乙等</option><option value="07">二级丙等</option><option value="08">一级级甲等</option><option value="09">一级乙等</option><option value="10">一级丙等</option><option value="11">未定级</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者角色</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK11_medicine_none.value"><option value="01">事件当事人</option><option value="02">同事</option><option value="03">旁观者</option><option value="04">其他</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者职务</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK12_medicine_none.value"><option value="01">注册护士</option><option value="02">返聘护士</option><option value="03">招聘护士</option><option value="04">进修护士</option><option value="05">见习护士</option><option value="06">实习护士</option><option value="07">护工</option><option value="08">其他</option></select></div></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者职称</label><div class="col-sm-5"><select class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK13_medicine_none.value"><option value="01">主任护师</option><option value="02">副主任护师</option><option value="03">主管护师</option><option value="04">护师</option><option value="05">护士</option><option value="06">见习护士</option><option value="07">实习护士</option><option value="08">其他</option></select></div></div><div class="form-group col-md-6"><label class="control-label col-sm-5">联系电话</label><div class="col-sm-5"><input class="form-control input-sm" ng-model="vm.formData.reportDetailList.malcase_XK14_medicine_none.value"></div></div></div><div class="row"><div class="col-md-12"><label class="control-label col-md-2">未尽补充事宜</label><div class="col-sm-9"><textarea class="form-control" type="text" ng-model="vm.formData.reportDetailList.malcase_XK16_medicine_none.value">\n          </textarea></div></div></div><p class="xk-title">与当事人可能相关的因素:</p><div class="row"><div class="form-group"><label class="control-label col-sm-1">确认</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_qr_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_qr_01.value"> 确认不认真</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_qr_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_qr_02.value"> 确认错误</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_qr_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_qr_03.value"> 没有执行确认程序</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_qr_04.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">观察</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_gc_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_gc_01.value"> 观察不仔细</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_gc_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_gc_02.value"> 没有进行观察</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_gc_03.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">判断</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_PJ_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_PJ_01.value"> 经验不足</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_PJ_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_PJ_02.value"> 判断有误</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_PJ_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_PJ_03.value"> 未执行诊疗常规</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_PJ_04.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">诊断</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_zj_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_zj_01.value"> 知识储备不足</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_zj_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_zj_02.value"> 应用知识有误</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_zj_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_zj_03.value"> 应急经验不足</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_zj_04.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-1">技能</label><div class="col-sm-11"><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_jn_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_jn_01.value"> 不成熟技术</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_jn_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_jn_02.value"> 技术应用有误</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.dsr_jn_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_jn_03.value"> 未经卫生行政部门核准的技术</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.dsr_jn_04.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label col-sm-2">不良事件发生原因</label><div class="col-sm-10"><div class="col-sm-7"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_physiological.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_physiological.value"> 病患生理因素</label>（ <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_old.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_old.value"> 年老体弱</label> <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_longSick.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_longSick.value"> 久病不愈</label> <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_worsen.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_worsen.value"> 病情恶化</label>）</div><div class="col-sm-5"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_mentality.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_mentality.value"> 病患心理因素</label>（ <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_badMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_badMind.value"> 情绪不稳</label> <label><input ng-checked="vm.formData.reportDetailList.malcase_reason_lostMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_lostMind.value"> 精神失常</label>）</div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_artificia.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_artificia.value"> 人为因素</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value"> 医疗材料故障</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value"> 仪器故障</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value"> 设备故障</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_yard.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_yard.value"> 场地</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_environment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_environment.value"> 环境因素</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_winebowl.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_winebowl.value"> 酒瘾</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_drugster.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_drugster.value"> 毒瘾</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutSystem.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutSystem.value"> 与制度有关</label></div><div class="col-sm-3"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutFlow.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutFlow.value"> 与流程有关</label></div><div class="col-sm-3 vert-box"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control flex" ng-model="vm.formData.reportDetailList.malcase_reason_else.value"></div></div></div></div><div class="row"><div class="form-group"><label class="control-label">不良事件发生的事实（包括不良事件发生经过，发生后治疗，发生后护理及发生后检查结果等情况，由当事人或发现者填写）：</label> <textarea name="name" ng-model="vm.formData.reportDetailList.malcase_truth.value" rows="3" cols="100" class="form-control input-sm"></textarea></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveReportDetail()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),t.put("app/malCaseUp/handle/requirement.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><ul class="list-group"><li class="list-group-item" ng-class="{\'active\': vm.formData.requirement.reqCode == requirement.reqCode}" ng-click="vm.fillItem(\'requirement\', requirement)" ng-repeat="requirement in vm.formData.requirementList track by $index">{{$index + 1}}. {{requirement.reqContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{requirement.userName}}</span> <button class="btn btn-xs btn-danger" uib-tooltip="删除" ng-click="vm.removeListItem({index: $index, listName: \'requirement\', seqId: requirement.seqId})"><span class="fa fa-trash"></span></button></div></li><li class="list-group-item"><div class="form-group"><div class="col-sm-12"><textarea class="form-control input-sm" cols="50" rows="3" ng-model="vm.formData.requirement.reqContent" placeholder="填写整改要求">\n                </textarea></div></div><div class="form-group"><div class="col-sm-12"><button ng-click="vm.resetForm(\'requirement\')" class="btn btn-primary btn-sm">清空</button> <button ng-click="vm.saveListItem(\'requirement\')" class="btn btn-success btn-sm" ng-disabled="vm.formData.requirement.reqContent === \'\' || !vm.formData.requirement.reqContent">保存</button></div></div></li></ul></div></div></div></form>'),t.put("app/malCaseUp/level/addLevel.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写分级标准信息</h5></div><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">等级</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.damageLevelName" name="damageLevelName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" name="remark" ng-model="vm.formData.remark"></textarea></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">流程：</label><div class="col-sm-9"><div class="flow-list"><div ng-repeat="flowItem in vm.formData.flowList track by $index"><i class="fa fa-level-down fa-flip-horizontal" ng-if="!$last"></i> <span>{{flowItem}}</span> <a ng-click="vm.removeFlow($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></div></div><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="填写流程"> <span class="input-group-btn"><button ng-click="vm.addFlow($event)" class="btn btn-primary btn-sm" ng-disabled="vm.flowText === \'\' || !vm.flowText">添加流程</button></span></div></div></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),t.put("app/malCaseUp/level/level.tpl.html",'<div class="col-md-8"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>填写不良事件上报表</span></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">等级</th><th>等级描述</th><th>处理流程</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td data-title="\'等级\'" ng-click="vm.edit(row)">{{row.damageLevelName}}</td><td data-title="\'等级描述\'" ng-click="vm.edit(row)">{{row.remark}}</td><td data-title="\'处理流程\'" ng-click="vm.edit(row)">{{ row.flow }}</td><td data-title="\'操作\'"><button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div><div class="col-md-4"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>填写分级标准信息</span> <button class="btn btn-sm btn-success" type="button" ng-click="vm.save()" ng-disabled="addLevelForm.damageLevelName.$invalid || addLevelForm.remark.$invalid">保存</button></div><div class="panel-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="container-fluid"><div class="col-md-12"><div class="form-group"><label for="name" class="col-sm-3 control-label">等级</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.damageLevelName" name="damageLevelName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">描述</label><div class="col-sm-9"><textarea class="form-control input-sm" name="remark" ng-model="vm.formData.remark" required=""></textarea></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">流程</label><div class="col-sm-9"><div class="flow-list"><div ng-repeat="flowItem in vm.formData.flowList track by $index"><div class="btn-group btn-group-xs" role="group"><button type="button" class="btn btn-default btn-xs" name="button" ng-click="main.runApi(api)">{{flowItem}}</button> <a class="btn btn-danger btn-xs" ng-click="vm.removeFlow($index)"><i class="fa fa-times"></i></a></div><i class="fa fa-long-arrow-right" ng-if="!$last"></i></div></div><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="填写流程"> <span class="input-group-btn"><button ng-click="vm.addFlow()" class="btn btn-primary btn-sm" ng-disabled="vm.flowText === \'\' || !vm.flowText"><span class="fa fa-plus"></span></button></span></div></div></div></div></div></form></div></div></div>'),t.put("app/malCaseUp/statistics/statistics.tpl.html",'<div ng-controller="MalCaseUpStatisticsController as vm"><button ng-click="tableParams.sorting({})" class="btn btn-default pull-left">新增</button> <button ng-click="tableParams.sorting({})" class="btn btn-danger pull-left">修改</button><table ng-table="tableParams" class="table table-striped table-bordered"><thead><tr><td>事件名称</td><td>事件类型</td><td>伤害级别</td><td>事件描述</td></tr></thead><tbody style="background-color: white"><tr ng-repeat="ls in vm.lst"><td>{{ls.groupNo}}</td><td>{{ls.groupName}}</td><td>{{ls.bedNo}}</td><td>{{ls.remark}}</td></tr></tbody></table></div>'),t.put("app/malCaseUp/type/type.tpl.html",'<div class="col-md-12" ng-controller="MalCaseUpTypeController as vm"><div class="panel panel-layout panel-default" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="panel-heading"><i class="fa fa-send"></i> <span>上报类型列表</span> <button class="btn btn-sm btn-primary">增加类型</button></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th st-sort="hisCode">上报类型编号</th><th>上报类型名称</th><th>最后更新人</th><th>最后更新时间</th><th>操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td><em>{{row.eventTypeCode}}</em></td><td>{{row.eventTypeName}}</td><td>{{ row.updatePerson }}</td><td>{{row.lastUpdateTime}}</td><td><a href="javascript:;" ng-click="vm.open(row)">配置调查模板</a></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/manual/item/item.model.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5>填写科研管理</h5></div><div class="modal-body"><div class="static-form-item container-fluid"><div class="form-group"><div class="col-sm-3"><label class="control-label">课题名称：</label></div><div class="col-sm-9"><input ng-model="vm.formData.subjectName"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">上报</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div>'),t.put("app/manual/item/item.tpl.html",'<div class="col-md-7"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>工作项目表</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst" ng-class="{\'info\': vm.selectedItem.seqId == row.seqId}"><td data-title="\'工作项目\'" class="text-center" ng-click="vm.edit(row)">{{ row.itemName }}</td><td data-title="\'使用病区\'" class="text-center" ng-click="vm.edit(row)">{{ row.deptName }}</td><td data-title="\'频次\'" class="text-center" ng-click="vm.edit(row)">{{ row.frequencyName }} / {{ row.frequency }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.deleteItem(row.itemCode)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div><div class="col-md-5"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>项目信息</span><div class="pull-right"><button ng-click="vm.add()" class="btn btn-primary btn-xs">添加项目</button></div></div><div class="panel-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="workItemForm" form="workItemForm"><div class="container-fluid"><div class="col-md-12"><div class="form-group"><label for="itemName" class="col-sm-3 control-label">项目名称：</label><div class="col-sm-9"><input class="form-control input-sm" autocomplete="off" ng-model="vm.formData.itemName" name="itemName" type="text" id="itemName"></div></div><div class="form-group"><label class="col-sm-3 control-label">科室／病区：</label><div class="col-sm-9"><select class="form-controll input-sm" ng-model="vm.formData.dept" ng-options="dept as dept.deptName for dept in vm.deptList track by dept.deptCode" name="dept"></select></div></div><div class="form-group"><label for="frequencyName" class="col-sm-3 control-label">频次：</label><div class="col-sm-9"><input class="form-control input-sm" name="frequencyName" required="" autocomplete="off" ng-model="vm.formData.frequencyName" type="text" id="frequencyName"></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.save()" ng-disabled="workItemForm.groupName.$invalid || workItemForm.groupCode.$invalid">保存</button></div></div></div></div></form></div></div></div>'),t.put("app/manual/workManual/workManual.tpl.html",'<div class="col-md-7"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>床位分组管理</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'组号\'" class="text-center" ng-click="vm.edit(row)">{{ row.groupCode }}</td><td data-title="\'组名\'" class="text-center" ng-click="vm.edit(row)">{{ row.groupName }}</td><td data-title="\'床位\'" class="text-center" ng-click="vm.edit(row)">{{ row.beds }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.deleteGroup(row.seqId)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div><div class="col-md-5"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>新增分组</span></div><div class="panel-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addbedForm" form="addbedForm"><div class="container-fluid"><div class="col-md-12"><div class="form-group"><label for="groupCode" class="col-sm-3 control-label">组号：</label><div class="col-sm-9"><input class="form-control input-sm" autocomplete="off" ng-model="vm.formData.groupCode" name="groupCode" type="text" id="groupCode"></div></div><div class="form-group"><label for="groupName" class="col-sm-3 control-label">组名：</label><div class="col-sm-9"><input class="form-control input-sm" name="groupName" required="" autocomplete="off" ng-model="vm.formData.groupName" type="text" id="groupName"></div></div><div class="form-group"><label for="bedCode" class="col-sm-3 control-label">床位：</label><div class="col-sm-9"><ul class="flow-list"><li ng-repeat="flowItem in vm.formData.bedList track by $index"><span>{{ flowItem }}</span> <a ng-click="vm.removeFlow($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></li></ul><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="新增床位" autocomplete="off" name="bedCode" id="bedCode"> <span class="input-group-btn"><button ng-click="vm.addFlow()" class="btn btn-primary btn-sm" ng-disabled="addbedForm.bedCode.$invalid || addbedForm.bedCode.$pristine">新增</button></span></div></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveGroup()" ng-disabled="addbedForm.groupName.$invalid || addbedForm.groupCode.$invalid">保存</button></div></div></div></div></form></div></div></div>{{ vm.lst }}'),t.put("app/nursingWorkers/add/add.tpl.html",'<div class="hr-wrapper hr-add-wrapper"><uib-tabset active="active"><uib-tab index="0" heading="员工新增"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="tool-wrapper container-fluid"><button ng-click="vm.save()" class="btn btn-success btn-sm">保存</button></div><div class="add-form"><div class="form-group"><label for="hisCode" class="col-sm-4 control-label">员工编号</label><div class="col-sm-8"><input class="form-control input-sm" required="" ng-model="vm.detail.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group"><label for="userName" class="col-sm-4 control-label">姓名</label><div class="col-sm-8"><input class="form-control input-sm" required="" ng-model="vm.detail.userName" id="userName" name="userName" type="text"></div></div><div class="form-group"><label for="male" class="col-sm-4 control-label">性别</label><div class="col-sm-8"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.gender" checked="" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.gender" id="female" value="0"> 女</label></div></div></div></form></uib-tab></uib-tabset></div>'),
t.put("app/nursingWorkers/alt/alt.tpl.html",'<div class="baseinfo-wrapper"><div class="page-left-menu" print-remove=""><div class="panel pull-left dept-wrapper panel-default" full-height=""><div class="panel-heading"><i class="fa fa-bars"></i><span>科室人员列表</span></div><div class="panel-body dept-list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText" placeholder="输入姓名关键字搜索"></div><div class="list-content"><treecontrol class="tree-light" tree-model="vm.treeData" on-selection="vm.select(node)" filter-expression="vm.filterText" expanded-nodes="vm.expandedNodes">{{node.deptName || node.userName}}</treecontrol><loading type="tree"></loading></div></div></div></div><div class="page-right-content"><div class="hr-wrapper alt-wrapper"><loading type="content"></loading><uib-tabset active="active"><uib-tab index="0" heading="职称变更" active="tab.active"><form class="form-horizontal form-inline comUserPosition-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="comUserPositionForm"><div class="tool-wrapper container-fluid"><button ng-click="vm.addItem(\'comUserPosition\')" class="btn btn-primary btn-sm">添加职称</button> <button ng-click="vm.save(\'comUserPosition\')" class="btn btn-success btn-sm">保存</button></div><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>职称</th><th>审批单位</th><th>开始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.detail.comUserPosition track by $index"><td><input class="form-control input-sm" required="" name="positionName" ng-model="item.positionName" placeholder="在职职称" type="text"></td><td><input type="text" name="reviewUnit" required="" class="form-control input-sm" ng-model="item.reviewUnit"></td><td><span class="input-group"><input type="text" id="comUserPosition_startDate_{{$index}}" required="" name="comUserPositionStartDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" on-open-focus="true" id="comUserPosition_endDate_{{$index}}" required="" name="comUserPositionEndDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserPosition\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div></form></uib-tab><uib-tab index="1" heading="职务变更"><form class="form-horizontal form-inline comUserNursing-form" w5c-form-validate="vm.user.validationOption" name="comUserNursingForm"><div class="tool-wrapper container-fluid"><button ng-click="vm.addItem(\'comUserNursing\')" class="btn btn-primary btn-sm">添加职务变更</button> <button ng-click="vm.save(\'comUserNursing\')" class="btn btn-success btn-sm">保存</button></div><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>工作单位</th><th>单位级别</th><th>所属部门</th><th>职务</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.detail.comUserNursing"><td><input class="form-control input-sm" ng-model="item.reviewUnit" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.unitLevel"></td><td><input type="text" class="form-control input-sm" ng-model="item.deptName"></td><td><input type="text" class="form-control input-sm" ng-model="item.position"></td><td><span class="input-group"><input type="text" id="comUserNursing_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserNursing_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserNursing\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div></form></uib-tab><uib-tab index="2" heading="带教历史" active="tab.active"><form class="form-horizontal form-inline comUserPosition-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="comUserPositionForm"><div class="tool-wrapper container-fluid"><button ng-click="vm.addItem(\'comUserPosition\')" class="btn btn-primary btn-sm">添加职称</button> <button ng-click="vm.save(\'comUserPosition\')" class="btn btn-success btn-sm">保存</button></div><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>职称</th><th>审批单位</th><th>开始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.detail.comUserPosition track by $index"><td><input class="form-control input-sm" required="" name="positionName" ng-model="item.positionName" placeholder="在职职称" type="text"></td><td><input type="text" name="reviewUnit" required="" class="form-control input-sm" ng-model="item.reviewUnit"></td><td><span class="input-group"><input type="text" id="comUserPosition_startDate_{{$index}}" required="" name="comUserPositionStartDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" on-open-focus="true" id="comUserPosition_endDate_{{$index}}" required="" name="comUserPositionEndDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserPosition\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div></form></uib-tab><uib-tab index="3" heading="临床层级\b变更" active="tab.active"><form class="form-horizontal form-inline comUserPosition-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="comUserPositionForm"><div class="tool-wrapper container-fluid"><button ng-click="vm.addItem(\'comUserPosition\')" class="btn btn-primary btn-sm">添加职称</button> <button ng-click="vm.save(\'comUserPosition\')" class="btn btn-success btn-sm">保存</button></div><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>职称</th><th>审批单位</th><th>开始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.detail.comUserPosition track by $index"><td><input class="form-control input-sm" required="" name="positionName" ng-model="item.positionName" placeholder="在职职称" type="text"></td><td><input type="text" name="reviewUnit" required="" class="form-control input-sm" ng-model="item.reviewUnit"></td><td><span class="input-group"><input type="text" id="comUserPosition_startDate_{{$index}}" required="" name="comUserPositionStartDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" on-open-focus="true" id="comUserPosition_endDate_{{$index}}" required="" name="comUserPositionEndDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserPosition\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div></form></uib-tab><uib-tab index="4" heading="\b\b\b分科历史" active="tab.active"><form class="form-horizontal form-inline comUserPosition-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="comUserPositionForm"><div class="tool-wrapper container-fluid"><button ng-click="vm.addItem(\'comUserPosition\')" class="btn btn-primary btn-sm">添加职称</button> <button ng-click="vm.save(\'comUserPosition\')" class="btn btn-success btn-sm">保存</button></div><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>职称</th><th>审批单位</th><th>开始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.detail.comUserPosition track by $index"><td><input class="form-control input-sm" required="" name="positionName" ng-model="item.positionName" placeholder="在职职称" type="text"></td><td><input type="text" name="reviewUnit" required="" class="form-control input-sm" ng-model="item.reviewUnit"></td><td><span class="input-group"><input type="text" id="comUserPosition_startDate_{{$index}}" required="" name="comUserPositionStartDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" on-open-focus="true" id="comUserPosition_endDate_{{$index}}" required="" name="comUserPositionEndDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserPosition\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div></form></uib-tab></uib-tabset></div></div></div>'),t.put("app/nursingWorkers/baseInfo/add.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">编辑{{vm.metaData.title}}信息</h5></div><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="modal-body"><div class="form-group"><label for="hisCode" class="col-sm-4 control-label">员工编号：</label><div class="col-sm-8"><input class="form-control input-sm editable-input" required="" ng-model="vm.formData.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group"><label for="userName" class="col-sm-4 control-label">姓名：</label><div class="col-sm-8"><input class="form-control input-sm editable-input" required="" ng-model="vm.formData.userName" id="userName" name="userName" type="text"></div></div><div class="form-group"><label for="userName" class="col-sm-4 control-label">类型：</label><div class="col-sm-8"><label class="radio-inline" ng-repeat="item in dicInfo.nature"><input type="radio" name="nature" ng-checked="item.dicCode == \'03\'" ng-model="vm.formData.nature" value="{{item.dicCode}}"> {{item.dicName}}</label></div></div><div class="form-group"><label for="male" class="col-sm-4 control-label">性别：</label><div class="col-sm-8"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.formData.gender" checked="" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.formData.gender" id="female" value="0"> 女</label></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),t.put("app/nursingWorkers/baseInfo/base.tpl.html",'<div class="baseinfo-wrapper"><div class="page-left-menu" print-remove=""><div class="panel pull-left dept-wrapper panel-default" full-height=""><div class="panel-heading"><i class="fa fa-bars"></i><span>科室人员列表</span></div><div class="panel-body dept-list"><div class="tool-wrapper hr-tool"><div class="col-md-4 no-padding"><button class="btn btn-default btn-sm" href="" ng-click="vm.openAdd()"><i class="fa fa-user-plus"></i> 新增</button></div><div class="col-md-4 no-padding"><button class="btn btn-default btn-sm" ng-click="vm.openUpload()"><i class="fa fa-upload"></i> 导入</button></div><div class="col-md-4 no-padding"><export-excel exsl-src="\'/asdads\'" class-list="\'btn-sm btn-default\'"></export-excel></div></div><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText" placeholder="输入关键字搜索"></div><div class="list-content"><treecontrol ng-show="vm.isIncumbency" class="tree-light" tree-model="vm.treeData" on-selection="vm.select(node)" filter-expression="vm.filterText" expanded-nodes="vm.expandedNodes">{{node.deptName || node.userName}}</treecontrol><treecontrol ng-show="!vm.isIncumbency" class="tree-light" tree-model="vm.dimissionData" on-selection="vm.select(node)" filter-expression="vm.filterText" expanded-nodes="vm.expandedNodes"></treecontrol><loading type="tree"></loading></div><div class="tool-wrapper hr-tool file-type-switch"><div class="col-md-6 no-padding"><button ng-class="{\'active\': vm.isIncumbency}" class="btn btn-default btn-sm" href="" ng-click="vm.switchType()">在职</button></div><div class="col-md-6 no-padding"><button ng-class="{\'active\': !vm.isIncumbency}" class="btn btn-default btn-sm" ng-click="vm.switchType()">离职</button></div></div></div></div></div><div class="page-right-content"><div ui-view=""></div></div></div>'),t.put("app/nursingWorkers/baseInfo/detail.tpl.html",'<div class="hr-wrapper baseinfo-detail-wrapper" loading-wrapper="" loading-type="content" loading-options="vm.load"><div class="tool-wrapper"><div class="row"><div class="pull-left"><div class="btn-group" role="group" aria-label="..."><button class="btn btn-danger btn-sm" ng-click="vm.quit(vm.detail.comUser.userCode)"><i class="fa fa-user-times"></i> 离职</button></div></div></div></div><div class="tool-wrapper info-time-wrapper"><div class="row"><div class="col-md-3 info-time_item">职务：<span class="editable-label">{{vm.detail.comUser.duty && (dicInfo.position | filter:vm.detail.comUser.duty)[0].dicName || \'暂无\'}}</span> <a ng-click="vm.openInfo(\'duty\', \'职务\', \'comUserNursing\')" class="open-info-time"><i class="fa fa-edit"></i></a></div><div class="col-md-3 info-time_item">职称：<span class="editable-label">{{vm.detail.comUser.technicalPost && (dicInfo.technicalPost | filter:vm.detail.comUser.technicalPost)[0].dicName || \'暂无\'}}</span> <a ng-click="vm.openInfo(\'technicalPost\', \'职称\', \'comUserPosition\')" class="open-info-time"><i class="fa fa-edit"></i></a></div><div class="col-md-3 info-time_item">带教：<span class="editable-label">{{vm.detail.comUser.teachLevel && (dicInfo.teaching | filter:vm.detail.comUser.teachLevel)[0].dicName || \'暂无\'}}</span> <a ng-click="vm.openInfo(\'teachLevel\', \'带教\')" class="open-info-time"><i class="fa fa-edit"></i></a></div><div class="col-md-3 info-time_item">临床层级：<span class="editable-label">{{vm.detail.comUser.clinical && (dicInfo.clinical | filter:vm.detail.comUser.clinical)[0].dicName || \'暂无\'}}</span> <a ng-click="vm.openInfo(\'clinical\', \'临床层级\')" class="open-info-time"><i class="fa fa-edit"></i></a></div></div></div><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><form editable-form="vm" form-name="\'userForm\'" class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="tool-wrapper container-fluid"><div class="pull-right"><button editable-start="" class="btn btn-default btn-sm btn-edit" ng-click="userForm.showEdit()">编辑</button> <button editable-end="" ng-click="vm.save(\'comUser\');userForm.endEdit()" class="btn btn-primary btn-sm">保存</button> <button editable-end="" class="btn btn-default btn-sm btn-edit" ng-click="userForm.endEdit()">取消</button></div></div><div class="baseinfo-form container-fluid"><div class="form-group col-md-4"><label for="userName" class="col-sm-4 control-label">姓名：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.userName}}</span><div class="col-sm-8"><input editable-input="" class="form-control input-sm editable-input" required="" ng-model="vm.detail.comUser.userName" id="userName" name="userName" type="text"></div></div><div class="form-group col-md-4"><label for="hisCode" class="col-sm-4 control-label">科室：</label> <span class="editable-label">{{vm.detail.comUser.deptName || vm.stateParam.deptN}}</span></div><div class="form-group col-md-4"><label for="hisCode" class="col-sm-4 control-label">员工编号：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.hisCode}}</span><div class="col-sm-8"><input editable-input="" class="form-control input-sm" required="" ng-model="vm.detail.comUser.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group col-md-4"><label for="male" class="col-sm-4 control-label">性别：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.gender && (vm.detail.comUser.gender == 1 ? \'男\' : \'女\')}}</span><div editable-input="" class="col-sm-8"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.comUser.gender" checked="" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.comUser.gender" id="female" value="0"> 女</label></div></div><div class="form-group col-md-4"><label for="birthday" class="col-sm-4 control-label">出生年月：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.birthday}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" id="birthday" name="birthday" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.birthdayOpen" ng-model="vm.detail.comUser.birthday" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'birthdayOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">政治面貌：</label> <span editable-label="" class="editable-label">{{dicInfo.politacalStatus[vm.detail.comUser.politacalStatus - 1].dicName}}</span><div editable-input="" class="col-sm-8"><select id="politacalStatus" name="politacalStatus" ng-model="vm.detail.comUser.politacalStatus" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.politacalStatus">{{item.dicName}}</option></select></div></div><div class="form-group col-md-4"><label for="country" class="col-sm-4 control-label">国籍：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.country}}</span><div editable-input="" class="col-sm-8"><input type="text" id="country" name="country" ng-model="vm.detail.comUser.country" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="nativePlace" class="col-sm-4 control-label">籍贯：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.nativePlace}}</span><div editable-input="" class="col-sm-8"><input type="text" id="nativePlace" name="nativePlace" ng-model="vm.detail.comUser.nativePlace" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="nation" class="col-sm-4 control-label">民族：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.nation}}</span><div editable-input="" class="col-sm-8"><input type="text" id="nation" name="nation" ng-model="vm.detail.comUser.nation" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">婚姻状态：</label> <span editable-label="" class="editable-label">{{(vm.marrige | filter: vm.detail.comUser.marriage)[0].name}}</span><div editable-input="" class="col-sm-8"><select ng-model="vm.detail.comUser.marriage" class="form-control input-sm"><option value="{{item.code}}" ng-repeat="item in vm.marrige">{{item.name}}</option></select></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">生育状态：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.birth}}</span><div editable-input="" class="col-sm-8"><input ng-model="vm.detail.comUser.birth" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="email" class="col-sm-4 control-label">邮箱：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.email}}</span><div editable-input="" class="col-sm-8"><input id="email" class="form-control input-sm" name="email" ng-model="vm.detail.comUser.email" type="email"></div></div><div class="form-group col-md-4"><label for="phone" class="col-sm-4 control-label">联系电话：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.phone}}</span><div editable-input="" class="col-sm-8"><input id="phone" class="form-control input-sm" name="phone" ng-model="vm.detail.comUser.phone" type="tel"></div></div><div class="form-group col-md-4"><label for="papersType" class="col-sm-4 control-label">证件类型：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.papersType && (dicInfo.papersType | filter: vm.detail.comUser.papersType)[0].dicName}}</span><div editable-input="" class="col-sm-8"><select id="papersType" name="papersType" ng-model="vm.detail.comUser.papersType" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.papersType">{{item.dicName}}</option></select></div></div><div class="form-group col-md-4"><label for="papersNo" class="col-sm-4 control-label">证件号码：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.papersNo}}</span><div editable-input="" class="col-sm-8"><input type="text" id="papersNo" name="papersNo" ng-model="vm.detail.comUser.papersNo" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="practiceNo" class="col-sm-4 control-label">执业证书：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.practiceNo}}</span><div editable-input="" class="col-sm-8"><input type="text" id="practiceNo" name="practiceNo" ng-model="vm.detail.comUser.practiceNo" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="practiceApproveDate" class="col-sm-4 control-label">注册时间：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.practiceApproveDate}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" id="practiceApproveDate" name="practiceApproveDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.practiceApproveDateIsOpen" ng-model="vm.detail.comUser.practiceApproveDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'practiceApproveDateIsOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">注册机构：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.institution}}</span><div editable-input="" class="col-sm-8"><input ng-model="vm.detail.comUser.institution" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="education" class="col-sm-4 control-label">原始学历：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.education}}</span><div editable-input="" class="col-sm-8"><input type="text" id="education" name="education" ng-model="vm.detail.comUser.education" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="graduationDate" class="col-sm-4 control-label">取得时间：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.graduationDate}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" id="graduationDate" name="graduationDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.graduationDateOpen" ng-model="vm.detail.comUser.graduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'graduationDateOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="graduationSchool" class="col-sm-4 control-label">学校：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.graduationSchool}}</span><div editable-input="" class="col-sm-8"><input type="text" id="graduationSchool" name="nativePlace" ng-model="vm.detail.comUser.graduationSchool" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">最高学历：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.hEducation}}</span><div editable-input="" class="col-sm-8"><input type="text" ng-model="vm.detail.comUser.hEducation" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">取得时间：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.hGraduationDate}}</span><div editable-input="" class="col-sm-8"><span class="input-group"><input type="text" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.hGraduationDateOpen" ng-model="vm.detail.comUser.hGraduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'hGraduationDateOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">学校：</label> <span editable-label="" class="editable-label">{{vm.detail.comUser.hGraduationSchool}}</span><div editable-input="" class="col-sm-8"><input type="text" name="nativePlace" ng-model="vm.detail.comUser.hGraduationSchool" class="form-control input-sm"></div></div></div></form></uib-tab><uib-tab index="1" heading="家属"><form class="form-horizontal comUserFamily-form" w5c-form-validate="vm.user.validationOption" name="comUserFamilyForm"><div class="tool-wrapper container-fluid"><div class="pull-right"><button ng-click="vm.addItem(\'comUserFamily\')" class="btn btn-primary btn-sm">添加成员</button> <button ng-click="vm.save(\'comUserFamily\')" class="btn btn-success btn-sm">保存</button></div></div><table class="table table-striped table-condensed table-no-border"><tr><th>姓名</th><th>亲属关系</th><th>联系电话</th><th>邮件</th><th>备注</th><th></th></tr><tr ng-repeat="item in vm.detail.comUserFamily"><td><input type="text" class="form-control input-sm" ng-model="item.name"></td><td><input type="hidden" ng-model="item.userCode" ng-value="vm.comUser.userCode"> <input class="form-control input-sm" ng-model="item.relation" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.phone"></td><td><input type="text" class="form-control input-sm" ng-model="item.email"></td><td><input type="text" class="form-control input-sm" ng-model="item.remark"></td><td><button ng-click="vm.removeItem(\'comUserFamily\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></form></uib-tab><uib-tab index="4" heading="学历信息"><form class="form-horizontal form-inline comUserLearning-form" w5c-form-validate="vm.user.validationOption" name="comUserLearningForm"><div class="tool-wrapper container-fluid"><div class="pull-right"><button ng-click="vm.addItem(\'comUserLearning\')" class="btn btn-primary btn-sm">添加学历</button> <button ng-click="vm.save(\'comUserLearning\')" class="btn btn-success btn-sm">保存</button></div></div><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>学校</th><th>专业</th><th>学历</th><th>学历证书编号</th><th>学位</th><th>学位证书编号</th><th>描述</th><th>开始时间</th><th>结束时间</th><th></th></tr><tr ng-repeat="item in vm.detail.comUserLearning"><td><input class="form-control input-sm" ng-model="item.school" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.professional"></td><td><input type="text" class="form-control input-sm" ng-model="item.diploma"></td><td><input type="text" class="form-control input-sm" ng-model="item.diplomaNo"></td><td><input type="text" class="form-control input-sm" ng-model="item.degree"></td><td><input type="text" class="form-control input-sm" ng-model="item.degreeNo"></td><td><input type="text" class="form-control input-sm" ng-model="item.describe"></td><td><span class="input-group"><input type="text" id="comUserLearning_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserLearning_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserLearning\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div></form></uib-tab><uib-tab index="5" heading="继续教育"><form class="form-horizontal form-inline comUserTraining-form" w5c-form-validate="vm.user.validationOption" name="comUserTrainingForm"><div class="tool-wrapper container-fluid"><div class="pull-right"><button ng-click="vm.addItem(\'comUserTraining\')" class="btn btn-primary btn-sm">添加继续教育</button> <button ng-click="vm.save(\'comUserTraining\')" class="btn btn-success btn-sm">保存</button></div></div><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>学习内容</th><th>主办单位</th><th>学时</th><th>主讲</th><th>学分类型</th><th>学分</th><th>经费</th><th>描述</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.detail.comUserTraining"><td><input class="form-control input-sm" ng-model="item.learnContent" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.professional"></td><td><input type="text" class="form-control input-sm" style="width: 3em;" ng-model="item.diploma"></td><td><input type="text" class="form-control input-sm" ng-model="item.speaker"></td><td><input type="text" class="form-control input-sm" ng-model="item.creditType"></td><td><input type="text" class="form-control input-sm" style="width: 4em;" ng-model="item.credit"></td><td><input type="text" class="form-control input-sm" style="width: 4em;" ng-model="item.funding"></td><td><input type="text" class="form-control input-sm" ng-model="item.describe"></td><td><span class="input-group"><input type="text" id="comUserTraining_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserTraining_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserTraining\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div></form></uib-tab><uib-tab index="6" heading="教育工作"><form class="form-horizontal form-inline comUserEducation-form" w5c-form-validate="vm.user.validationOption" name="comUserEducationForm"><div class="tool-wrapper container-fluid"><div class="pull-right"><button ng-click="vm.addItem(\'comUserEducation\')" class="btn btn-primary btn-sm">添加教育信息</button> <button ng-click="vm.save(\'comUserEducation\')" class="btn btn-success btn-sm">保存</button></div></div><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>代课类型</th><th>学时数</th><th>课程专题</th><th>课程内容</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.detail.comUserEducation"><td><input class="form-control input-sm" ng-model="item.educationType" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.leaningTime"></td><td><input type="text" class="form-control input-sm" ng-model="item.courseTopics"></td><td><input type="text" class="form-control input-sm" ng-model="item.courseContent"></td><td><span class="input-group"><input type="text" id="comUserEducation_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserEducation_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserEducation\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div></form></uib-tab></uib-tabset></div>'),
t.put("app/nursingWorkers/baseInfo/editInfoTime.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">编辑{{vm.metaData.title}}信息</h5></div><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.metaData.validationOption" name="yearForm"><div class="modal-body"><div ng-if="vm.metaData.name === \'duty\'"><div class="well well-sm"><div class="form-group"><label class="col-sm-2 control-label">职务：</label><div class="col-sm-4"><select id="duty" name="duty" ng-model="vm.formData.duty" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.position">{{item.dicName}}</option></select></div></div><div class="form-group"><div class="col-sm-4 col-sm-offset-2"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok(\'comUser\')">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div><div class="panel panel-default"><table class="table table-hover table-condensed table-bordered"><thead><tr><th>职务</th><th>开始时间</th><th>结束时间</th></tr></thead><tbody><tr ng-repeat="row in vm.metaData.list"><td>{{row.position}}</td><td>{{row.startDate}}</td><td>{{row.endDate}}</td></tr><tr ng-show="vm.metaData.list.length === 0"><td colspan="3"><i class="fa fa-info-circle text-success"></i> 暂无记录</td></tr></tbody></table></div></div><div ng-if="vm.metaData.name === \'technicalPost\'"><div class="well well-sm"><div class="form-group"><label class="col-sm-2 control-label">职称：</label><div class="col-sm-4"><select id="technicalPost" name="technicalPost" ng-model="vm.formData.technicalPost" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.technicalPost">{{item.dicName}}</option></select></div></div><div class="form-group"><div class="col-sm-4 col-sm-offset-2"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok(\'comUser\')">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div><div class="panel panel-default"><table class="table table-hover table-condensed table-bordered"><thead><tr><th>职称</th><th>审批单位</th><th>开始时间</th></tr></thead><tbody><tr ng-repeat="row in vm.metaData.list"><td>{{row.technicalPost}}</td><td>{{row.reviewUnit}}</td><td>{{row.startDate}}</td></tr><tr ng-show="vm.metaData.list.length === 0"><td colspan="3"><i class="fa fa-info-circle text-success"></i> 暂无记录</td></tr></tbody></table></div></div><div ng-if="vm.metaData.name === \'teachLevel\' || vm.metaData.name === \'clinical\'"><div class="well well-sm"><div class="form-group"><label ng-if="vm.metaData.name === \'teachLevel\'" class="col-sm-2 control-label">带教：</label> <label ng-if="vm.metaData.name === \'clinical\'" class="col-sm-2 control-label">临床层级：</label><div class="col-sm-4"><select ng-if="vm.metaData.name === \'teachLevel\'" id="teaching" name="teaching" ng-model="vm.formData.teachLevel" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.teaching">{{item.dicName}}</option></select><select ng-if="vm.metaData.name === \'clinical\'" id="clinical" name="clinical" ng-model="vm.formData.clinical" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.clinical">{{item.dicName}}</option></select></div></div><div class="form-group"><div class="col-sm-4 col-sm-offset-2"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok(\'comUser\')">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div><div class="panel panel-default"><table class="table table-hover table-condensed table-bordered"><thead><tr><th>变更前</th><th>变更后</th><th>变更时间</th></tr></thead><tbody><tr ng-repeat="row in vm.metaData.list"><td>{{row.foreName}}</td><td>{{row.rearName}}</td><td>{{row.changeTime}}</td></tr><tr ng-show="vm.metaData.list.length === 0"><td colspan="3"><i class="fa fa-info-circle text-success"></i> 暂无记录</td></tr></tbody></table></div></div></div></form></div>'),t.put("app/nursingWorkers/baseInfo/stat.tpl.html",'<div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>科室数据</span></div><div class="panel-body no-padding"><table print-table="vm.userDataList" st-table="vm.userDataList" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th st-sort="hisCode">编号</th><th>姓名</th><th>邮箱</th><th>电话</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.userDataList"><tr class="row-{{$index}}"><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td>{{row.email}}</td><td>{{row.phone}}</td><td class="print-remove" data-title="\'操作\'"><a ui-sref="home.baseInfo.detail({id:row.userCode})">详情</a></td></tr><tr grid-expand="" tpl-src="app/nursingWorkers/files/files.detail.html" ng-show="vm.expanedIndex == $index && vm.expanded"></tr></tbody></table><none-data-info list="vm.userDataList"></none-data-info></div></div><div class="panel panel-default"><div class="panel-body"><div class="chart-wrapper"><div class="row"><div class="col-md-6 echarts-wrap" echarts="vm.level.identity" echarts-dimension="vm.level.dimension" config="vm.level.config"></div><div class="col-md-6 echarts-wrap" echarts="vm.rank.identity" echarts-dimension="vm.rank.dimension" config="vm.rank.config"></div></div><div class="row"><div class="col-md-6 echarts-wrap" echarts="vm.transfer.identity" echarts-dimension="vm.transfer.dimension" config="vm.transfer.config"></div><div class="col-md-6 echarts-wrap" echarts="vm.duty.identity" echarts-dimension="vm.duty.dimension" config="vm.duty.config"></div></div></div></div></div>'),t.put("app/nursingWorkers/baseInfo/uploadFile.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">导入文件</h5></div><div class="modal-body"><input type="file" nv-file-select="" uploader="vm.formData.uploader" multiple=""><br><table class="table table-bordered"><thead><tr><th>文件名</th><th ng-show="vm.formData.uploader.isHTML5">大小</th><th ng-show="vm.formData.uploader.isHTML5">进度</th><th>状态</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.formData.uploader.queue"><td><strong>{{ item.file.name }}</strong></td><td ng-show="vm.formData.uploader.isHTML5" nowrap="">{{ item.file.size/1024/1024|number:2 }} MB</td><td ng-show="vm.formData.uploader.isHTML5"><div class="progress" style="margin-bottom: 0;"><div class="progress-bar progress-bar-striped" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div></div></td><td class="text-center"><i ng-show="item.isSuccess" class="success-text fa fa-check"></i> <i ng-show="item.isCancel" class="fa warning-text fa-ban-circle"></i> <i ng-show="item.isError" class="fa danger-text fa-remove"></i></td><td nowrap=""><button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess"><span class="fa fa-upload"></span> 上传</button> <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading"><span class="fa fa-ban-circle"></span> 取消</button> <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()"><span class="fa fa-trash"></span> 移除</button></td></tr></tbody></table></div></div>'),t.put("app/nursingWorkers/dept/dept.detail.html",'<td colspan="{{tdLen}}"><table class="table table-bordered table-condensed"><thead><tr><th>姓名</th><th>工号</th><th>科室</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.detail"><td>{{item.userName}}</td><td>{{item.userCode}}</td><td><select class="form-control input-sm" name="deptCode" ng-model="item.deptCode"><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></td><td><button class="btn btn-success btn-xs" ng-click="vm.save(item)" uib-tooltip="保存"><span class="fa fa-save"></span></button></td></tr></tbody></table></td>'),t.put("app/nursingWorkers/dept/dept.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">新增科室</h5></div><div class="modal-body"><form class="form-horizontal" role="form" novalidate="" name="form"><div class="container-fluid"><div class="form-group"><label for="deptName" class="control-label">科室号</label> <input type="text" class="form-control input-sm" ng-model="vm.detail.deptCode"></div><div class="form-group"><label for="deptName" class="control-label">科室名</label> <input type="text" class="form-control input-sm" ng-model="vm.detail.deptName"></div><div class="form-group"><label for="fatherDept" class="control-label">父部门</label><select class="form-control" name="fatherDept" id="fatherDept" ng-model="vm.detail.fatherDept"><option value=""></option><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></div></div><div class="form-group text-center"><button class="btn btn-sm btn-success" type="button" ng-click="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div></div>'),t.put("app/nursingWorkers/dept/dept.tpl.html",'<div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>科室管理</span><div class="pull-right"><button class="btn btn-success btn-xs" ng-click="vm.open()">新增科室</button></div></div><div class="panel-body"><table st-table="vm.deptData" st-safe-src="rowCollection" class="table table-condensed table-bordered table-striped"><thead><tr class="header-export"><th></th><th>科室名</th><th>父部门</th><th>操作</th></tr></thead><tbody ng-repeat="row in vm.deptData | filter: {status: \'01\'}"><tr><td grid-expand-trigger="" grid-p="deptCode" grid-expand-method="loadDetail" class="trigger"><i class="fa fa-caret-right"></i></td><td>{{row.deptName}}</td><td>{{vm.getDeptName(row.fatherDept)}}</td><td data-title="\'操作\'"><button class="btn btn-primary btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr><tr grid-expand="" tpl-src="app/nursingWorkers/dept/dept.detail.html" ng-show="vm.expanedIndex == $index"></tr></tbody></table></div></div>'),t.put("app/nursingWorkers/files/files.detail.html",'<td colspan="{{tdLen}}"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><div class="form-group col-md-3"><label class="col-sm-6 control-label">科室：</label> <span class="col-sm-6">{{vm.detail.comUser.deptName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">员工编号：</label> <span class="col-sm-6">{{vm.detail.comUser.hisCode}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">员工姓名：</label> <span class="col-sm-6">{{vm.detail.comUser.userName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">员工性别：</label> <span class="col-sm-6">{{vm.detail.comUser.genderName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">出生日期：</label> <span class="col-sm-6">{{vm.detail.comUser.birthday | date: \'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">电话：</label> <span class="col-sm-6">{{vm.detail.comUser.phone}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">邮箱：</label> <span class="col-sm-6">{{vm.detail.comUser.email}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">到院日期：</label> <span class="col-sm-6">{{vm.detail.comUser.inductionDate | date: \'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">员工性质：</label> <span class="col-sm-6">{{vm.detail.comUser.natureName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">国籍：</label> <span class="col-sm-6">{{vm.detail.comUser.country}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">籍贯：</label> <span class="col-sm-6">{{vm.detail.comUser.nativePlace}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">民族：</label> <span class="col-sm-6">{{vm.detail.comUser.nation}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">证件类型：</label> <span class="col-sm-6">{{vm.detail.comUser.papersTypeName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">证件号码：</label> <span class="col-sm-6">{{vm.detail.comUser.papersNo}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">毕业学校：</label> <span class="col-sm-6">{{vm.detail.comUser.graduationSchool}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">所学专业：</label> <span class="col-sm-6">{{vm.detail.comUser.profession}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">学位：</label> <span class="col-sm-6">{{vm.detail.comUser.degree}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">学位证编号：</label> <span class="col-sm-6">{{vm.detail.comUser.degreeNo}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">学历：</label> <span class="col-sm-6">{{vm.detail.comUser.education}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">学历证编号：</label> <span class="col-sm-6">{{vm.detail.comUser.educationNo}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">毕业时间：</label> <span class="col-sm-6">{{vm.detail.comUser.graduationDate | date:\'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">外语水平：</label> <span class="col-sm-6">{{vm.detail.comUser.language}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">健康状态：</label> <span class="col-sm-6">{{vm.detail.comUser.health}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">批准时间：</label> <span class="col-sm-6">{{vm.detail.comUser.practiceApproveDate | date:\'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">执业类型：</label> <span class="col-sm-6">{{vm.detail.comUser.practiceTypeName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">执业证号：</label> <span class="col-sm-6">{{vm.detail.comUser.practiceType}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">有效期致：</label> <span class="col-sm-6">{{vm.detail.comUser.practiceValidDate | date: \'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">政治面貌：</label> <span class="col-sm-6">{{vm.detail.comUser.politacalStatusName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">职称：</label> <span class="col-sm-6">{{vm.detail.comUser.technicalPost}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">职务：</label> <span class="col-sm-6">{{vm.detail.comUser.duty}}</span></div></uib-tab><uib-tab index="1" heading="职称职务" active="tab.active"><table class="table table-striped table-condensed table-no-border"><tr><th>职务名称</th><th>审批单位</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserPosition"><td class="text-left">{{dtl.positionName}}</td><td class="text-left">{{dtl.reviewUnit}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="2" heading="护理信息"><table class="table table-striped table-condensed table-no-border"><tr><th>工作单位</th><th>工作部门</th><th>职务</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserNursing"><td class="text-left">{{dtl.reviewUnit}}</td><td class="text-left">{{dtl.deptName}}</td><td class="text-left">{{dtl.position}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="3" heading="教育工作"><table class="table table-striped table-condensed table-no-border"><tr><th>代课类型</th><th>学时数</th><th>课程专题</th><th>课程内容</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserEducation"><td class="text-left">{{dtl.educationType}}</td><td class="text-left">{{dtl.leaningTime}}</td><td class="text-left">{{dtl.courseTopics}}</td><td class="text-left">{{dtl.courseContent}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="4" heading="继续教育"><table class="table table-striped table-condensed table-no-border"><tr><th>主办单位</th><th>学习内容</th><th>学时</th><th>主讲</th><th>学分类型</th><th>学分</th><th>经费</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserTraining"><td class="text-left">{{dtl.professional}}</td><td class="text-left">{{dtl.learnContent}}</td><td class="text-left">{{dtl.diploma}}</td><td class="text-left">{{dtl.speaker}}</td><td class="text-left">{{dtl.creditType}}</td><td class="text-left">{{dtl.credit}}</td><td class="text-left">{{dtl.funding}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="5" heading="学历信息"><table class="table table-striped table-condensed table-no-border"><tr><th>学校</th><th>专业</th><th>学历</th><th>学历证书编号</th><th>学位</th><th>学位证书编号</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserLearning"><td class="text-left">{{dtl.school}}</td><td class="text-left">{{dtl.professional}}</td><td class="text-left">{{dtl.diploma}}</td><td class="text-left">{{dtl.diplomaNo}}</td><td class="text-left">{{dtl.degree}}</td><td class="text-left">{{dtl.degreeNo}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="6" heading="家庭成员"><table class="table table-striped table-condensed table-no-border"><tr><th>亲属关系</th><th>姓名</th><th>联系电话</th><th>邮件</th></tr><tr ng-repeat="dtl in vm.detail.comUserFamily"><td class="text-left">{{dtl.relation}}</td><td class="text-left">{{dtl.name}}</td><td class="text-left">{{dtl.phone}}</td><td class="text-left">{{dtl.email}}</td></tr></table></uib-tab></uib-tabset></td>'),t.put("app/nursingWorkers/files/files.tpl.html",'<div class="col-md-2" print-remove=""><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode,vm.deptData.deptName)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter: vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode,subItem.deptName)" class="sublist__item">{{subItem.deptName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>人员数据</span><div class="pull-right"><button class="btn btn-default btn-xs" ng-click="vm.openUpload()"><i class="fa fa-upload"></i> 导入数据</button> <button print-btn="" class="btn btn-default btn-xs"><i class="fa fa-print"></i> 打印</button> <button ng-click="vm.open()" ng-disabled="!vm.selectedDept" class="btn btn-default btn-xs"><i class="fa fa-user-plus"></i> 添加员工</button></div></div><div class="panel-body"><table class="print-header table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th><grid-check-all all="vm.userDataList"></grid-check-all></th><th print-remove=""></th><th>编号</th><th>姓名</th><th>邮箱</th><th>电话</th><th print-remove="">操作</th></tr></thead></table><table print-table="vm.userDataList" st-table="vm.userDataList" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th><grid-check-all all="vm.userDataList"></grid-check-all></th><th print-remove=""></th><th st-sort="hisCode">编号</th><th>姓名</th><th>邮箱</th><th>电话</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.userDataList"><tr class="row-{{$index}}"><td grid-checkbox="row"></td><td grid-expand-trigger="" grid-p="userCode" grid-expand-method="loadDetail" class="trigger"><i class="fa fa-caret-right"></i></td><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td>{{row.email}}</td><td>{{row.phone}}</td><td class="print-remove" data-title="\'操作\'"><button class="btn btn-default btn-xs" ng-click="vm.open(row.userCode)" uib-tooltip="编辑员工信息" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row)" uib-tooltip="删除员工" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr><tr grid-expand="" tpl-src="app/nursingWorkers/files/files.detail.html" ng-show="vm.expanedIndex == $index && vm.expanded"></tr></tbody></table><none-data-info list="vm.userDataList"></none-data-info></div></div></div>'),t.put("app/nursingWorkers/files/modal.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写用户信息</h5></div><div class="modal-body"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="static-form-item container-fluid"><div class="form-group col-md-4"><label for="hisCode" class="col-sm-4 control-label">科室：</label><div class="col-sm-8"><input class="form-control input-sm" disabled="" ng-model="vm.count.comUser.deptName" type="text"></div></div><div class="form-group col-md-4"><label for="hisCode" class="col-sm-4 control-label">员工编号：</label><div class="col-sm-8"><input class="form-control input-sm" required="" ng-model="vm.count.comUser.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group col-md-4"><label for="userName" class="col-sm-4 control-label">姓名：</label><div class="col-sm-8"><input class="form-control input-sm" required="" ng-model="vm.count.comUser.userName" id="userName" name="userName" type="text"></div></div><div class="form-group col-md-4"><label for="male" class="col-sm-4 control-label">性别：</label><div class="col-sm-8"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.count.comUser.gender" checked="" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.count.comUser.gender" id="female" value="0"> 女</label></div></div><div class="form-group col-md-4"><label for="birthday" class="col-sm-4 control-label">出生年月：</label><div class="col-sm-8"><span class="input-group"><input type="text" id="birthday" name="birthday" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.birthdayOpen" ng-model="vm.count.comUser.birthday" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'birthdayOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">政治面貌：</label><div class="col-sm-8"><select id="politacalStatus" name="politacalStatus" ng-model="vm.count.comUser.politacalStatus" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.politacalStatus">{{item.dicName}}</option></select></div></div><div class="form-group col-md-4"><label for="country" class="col-sm-4 control-label">国籍：</label><div class="col-sm-8"><input type="text" id="country" name="country" ng-model="vm.count.comUser.country" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="nativePlace" class="col-sm-4 control-label">籍贯：</label><div class="col-sm-8"><input type="text" id="nativePlace" name="nativePlace" ng-model="vm.count.comUser.nativePlace" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="nation" class="col-sm-4 control-label">民族：</label><div class="col-sm-8"><input type="text" id="nation" name="nation" ng-model="vm.count.comUser.nation" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">婚姻状态：</label><div class="col-sm-8"><select ng-model="vm.count.comUser.marriage" class="form-control input-sm"><option value="01" label="已婚"></option><option value="02" label="未婚"></option><option value="03" label="离异"></option><option value="04" label="丧偶"></option></select></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">生育状态：</label><div class="col-sm-8"><input ng-model="vm.count.comUser.birth" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="email" class="col-sm-4 control-label">邮箱：</label><div class="col-sm-8"><input id="email" class="form-control input-sm" name="email" ng-model="vm.count.comUser.email" type="email"></div></div><div class="form-group col-md-4"><label for="phone" class="col-sm-4 control-label">联系电话：</label><div class="col-sm-8"><input id="phone" class="form-control input-sm" name="phone" ng-model="vm.count.comUser.phone" type="tel"></div></div><div class="form-group col-md-4"><label for="papersType" class="col-sm-4 control-label">身份证件类型：</label><div class="col-sm-8"><select id="papersType" name="papersType" ng-model="vm.count.comUser.papersType" class="form-control input-sm"><option value="{{item.dicCode}}" ng-repeat="item in dicInfo.papersType">{{item.dicName}}</option></select></div></div><div class="form-group col-md-4"><label for="papersNo" class="col-sm-4 control-label">身份证件号码：</label><div class="col-sm-8"><input type="text" id="papersNo" name="papersNo" ng-model="vm.count.comUser.papersNo" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="practiceNo" class="col-sm-4 control-label">执业证书编号：</label><div class="col-sm-8"><input type="text" id="practiceNo" name="practiceNo" ng-model="vm.count.comUser.practiceNo" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="practiceApproveDate" class="col-sm-4 control-label">首次注册时间：</label><div class="col-sm-8"><span class="input-group"><input type="text" id="practiceApproveDate" name="practiceApproveDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.practiceApproveDateIsOpen" ng-model="vm.count.comUser.practiceApproveDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'practiceApproveDateIsOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">注册机构：</label><div class="col-sm-8"><input ng-model="vm.count.comUser.duty" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="education" class="col-sm-4 control-label">原始学历：</label><div class="col-sm-8"><input type="text" id="education" name="education" ng-model="vm.count.comUser.education" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="graduationDate" class="col-sm-4 control-label">取得时间：</label><div class="col-sm-8"><span class="input-group"><input type="text" id="graduationDate" name="graduationDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.graduationDateOpen" ng-model="vm.count.comUser.graduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'graduationDateOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="graduationSchool" class="col-sm-4 control-label">学校：</label><div class="col-sm-8"><input type="text" id="graduationSchool" name="nativePlace" ng-model="vm.count.comUser.graduationSchool" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">最高学历：</label><div class="col-sm-8"><input type="text" ng-model="vm.count.comUser.hEducation" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">取得时间：</label><div class="col-sm-8"><span class="input-group"><input type="text" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.hGraduationDateOpen" ng-model="vm.count.comUser.hGraduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'hGraduationDateOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">学校：</label><div class="col-sm-8"><input type="text" name="nativePlace" ng-model="vm.count.comUser.hGraduationSchool" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="duty" class="col-sm-4 control-label">职务：</label><div class="col-sm-8"><input id="duty" name="duty" ng-model="vm.count.comUser.duty" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="technicalPost" class="col-sm-4 control-label">职称：</label><div class="col-sm-8"><input type="text" id="technicalPost" name="technicalPost" ng-model="vm.count.comUser.technicalPost" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">临床层级：</label><div class="col-sm-8"><input type="text" ng-model="vm.count.comUser.clinical" class="form-control input-sm"></div></div></div><div class="container-fluid"><div class="form-group col-md-2 pull-right"><button data-type="comUser" w5c-form-submit="vm.save(\'comUser\', $event)" class="btn btn-success btn-sm">保存</button></div></div></form></uib-tab><uib-tab index="1" heading="家属" disable="!vm.accessible"><form class="form-horizontal comUserFamily-form" w5c-form-validate="vm.user.validationOption" name="comUserFamilyForm"><table class="table table-striped table-condensed table-no-border"><tr><th>姓名</th><th>亲属关系</th><th>联系电话</th><th>邮件</th><th>备注</th><th></th></tr><tr ng-repeat="item in vm.count.comUserFamily"><td><input type="text" class="form-control input-sm" ng-model="item.name"></td><td><input type="hidden" ng-model="item.userCode" ng-value="vm.comUser.userCode"> <input class="form-control input-sm" ng-model="item.relation" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.phone"></td><td><input type="text" class="form-control input-sm" ng-model="item.email"></td><td><input type="text" class="form-control input-sm" ng-model="item.remark"></td><td><button ng-click="vm.removeItem(\'comUserFamily\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table><div class="container-fluid"><button ng-click="vm.addItem(\'comUserFamily\')" class="btn btn-primary btn-sm">添加成员</button> <button data-type="comUserFamily" ng-click="vm.save(\'comUserFamily\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="2" heading="职称变更" disable="!vm.accessible" active="tab.active"><form class="form-horizontal form-inline comUserPosition-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="comUserPositionForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>职称</th><th>审批单位</th><th>开始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserPosition track by $index"><td><input class="form-control input-sm" required="" name="positionName" ng-model="item.positionName" placeholder="在职职称" type="text"></td><td><input type="text" name="reviewUnit" required="" class="form-control input-sm" ng-model="item.reviewUnit"></td><td><span class="input-group"><input type="text" id="comUserPosition_startDate_{{$index}}" required="" name="comUserPositionStartDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" on-open-focus="true" id="comUserPosition_endDate_{{$index}}" required="" name="comUserPositionEndDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserPosition\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserPosition\')" class="btn btn-primary btn-sm">添加职称</button> <button data-type="comUserPosition" w5c-form-submit="vm.save(\'comUserPosition\', $event)" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="3" heading="职务变更" disable="!vm.accessible"><form class="form-horizontal form-inline comUserNursing-form" w5c-form-validate="vm.user.validationOption" name="comUserNursingForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>工作单位</th><th>单位级别</th><th>所属部门</th><th>职务</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserNursing"><td><input class="form-control input-sm" ng-model="item.reviewUnit" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.unitLevel"></td><td><input type="text" class="form-control input-sm" ng-model="item.deptName"></td><td><input type="text" class="form-control input-sm" ng-model="item.position"></td><td><span class="input-group"><input type="text" id="comUserNursing_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserNursing_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserNursing\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserNursing\')" class="btn btn-primary btn-sm">添加教育信息</button> <button data-type="comUserNursing" w5c-form-submit="vm.save(\'comUserNursing\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="4" heading="学历信息" disable="!vm.accessible"><form class="form-horizontal form-inline comUserLearning-form" w5c-form-validate="vm.user.validationOption" name="comUserLearningForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>学校</th><th>专业</th><th>学历</th><th>学历证书编号</th><th>学位</th><th>学位证书编号</th><th>描述</th><th>开始时间</th><th>结束时间</th><th></th></tr><tr ng-repeat="item in vm.count.comUserLearning"><td><input class="form-control input-sm" ng-model="item.school" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.professional"></td><td><input type="text" class="form-control input-sm" ng-model="item.diploma"></td><td><input type="text" class="form-control input-sm" ng-model="item.diplomaNo"></td><td><input type="text" class="form-control input-sm" ng-model="item.degree"></td><td><input type="text" class="form-control input-sm" ng-model="item.degreeNo"></td><td><input type="text" class="form-control input-sm" ng-model="item.describe"></td><td><span class="input-group"><input type="text" id="comUserLearning_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserLearning_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserLearning\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserLearning\')" class="btn btn-primary btn-sm">添加学历</button> <button data-type="comUserLearning" ng-click="vm.save(\'comUserLearning\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="5" heading="继续教育" disable="!vm.accessible"><form class="form-horizontal form-inline comUserTraining-form" w5c-form-validate="vm.user.validationOption" name="comUserTrainingForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>学习内容</th><th>主办单位</th><th>学时</th><th>主讲</th><th>学分类型</th><th>学分</th><th>经费</th><th>描述</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserTraining"><td><input class="form-control input-sm" ng-model="item.learnContent" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.professional"></td><td><input type="text" class="form-control input-sm" style="width: 3em;" ng-model="item.diploma"></td><td><input type="text" class="form-control input-sm" ng-model="item.speaker"></td><td><input type="text" class="form-control input-sm" ng-model="item.creditType"></td><td><input type="text" class="form-control input-sm" style="width: 4em;" ng-model="item.credit"></td><td><input type="text" class="form-control input-sm" style="width: 4em;" ng-model="item.funding"></td><td><input type="text" class="form-control input-sm" ng-model="item.describe"></td><td><span class="input-group"><input type="text" id="comUserTraining_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserTraining_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserTraining\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserTraining\')" class="btn btn-primary btn-sm">添加继续教育</button> <button data-type="comUserTraining" ng-click="vm.save(\'comUserTraining\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="6" heading="教育工作" disable="!vm.accessible"><form class="form-horizontal form-inline comUserEducation-form" w5c-form-validate="vm.user.validationOption" name="comUserEducationForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>代课类型</th><th>学时数</th><th>课程专题</th><th>课程内容</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserEducation"><td><input class="form-control input-sm" ng-model="item.educationType" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.leaningTime"></td><td><input type="text" class="form-control input-sm" ng-model="item.courseTopics"></td><td><input type="text" class="form-control input-sm" ng-model="item.courseContent"></td><td><span class="input-group"><input type="text" id="comUserEducation_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserEducation_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserEducation\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserEducation\')" class="btn btn-primary btn-sm">添加教育信息</button> <button data-type="comUserEducation" ng-click="vm.save(\'comUserEducation\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab></uib-tabset></div></div>'),
t.put("app/nursingWorkers/qrcode/qrcode.tpl.html",'<div class="hr-wrapper hr-add-wrapper"><uib-tabset active="active"><uib-tab index="0" heading="二维码打印"><form class="form-horizontal" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="tool-wrapper container-fluid"><span class="col-sm-2"><input type="text" class="form-control input-sm" placeholder="姓名" ng-model="vm.params.userName"></span> <span class="col-sm-2"><input type="text" class="form-control input-sm" placeholder="编号" ng-model="vm.params.userCode"></span> <span class="col-sm-2"><select class="form-control input-sm" ng-model="vm.params.deptCode"><option value=""></option><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></span> <span class="col-sm-1 text-left"><button ng-click="vm.search()" class="btn btn-success btn-sm">查询</button></span></div></form><table st-table="vm.userData" st-safe-src="rowCollection" class="table table-condensed table-bordered table-striped"><thead><tr class="header-export"><th><grid-check-all all="vm.userData"></grid-check-all></th><th>用户名</th><th>工号</th><th>性别</th><th>用户类型</th><th>目前所在科室</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.userData"><td grid-checkbox="item"></td><td>{{item.userName}}</td><td>{{item.userCode}}</td><td>{{getDicName(\'gender\', item.gender)}}</td><td>{{getDicName(\'nature\', item.userType)}}</td><td></td><td></td></tr></tbody></table></uib-tab></uib-tabset></div>'),t.put("app/nursingWorkers/quit/quit.tpl.html",'<div class="hr-wrapper hr-add-wrapper"><uib-tabset active="active"><uib-tab index="0" heading="员工离职"><form class="form-horizontal" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="tool-wrapper container-fluid"><span class="col-sm-2"><input type="text" class="form-control input-sm" placeholder="姓名" ng-model="vm.params.userName"></span> <span class="col-sm-2"><input type="text" class="form-control input-sm" placeholder="编号" ng-model="vm.params.userCode"></span> <span class="col-sm-2"><select class="form-control input-sm" ng-model="vm.params.deptCode"><option value="">所有科室</option><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></span> <span class="col-sm-1 text-left"><button ng-click="vm.search()" class="btn btn-success btn-sm">查询</button></span></div></form><table st-table="vm.userData" st-safe-src="rowCollection" class="table table-condensed table-bordered table-striped"><thead><tr class="header-export"><th>用户名</th><th>工号</th><th>性别</th><th>用户类型</th><th>目前所在科室</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.userData"><td>{{item.userName}}</td><td>{{item.userCode}}</td><td>{{getDicName(\'gender\', item.gender)}}</td><td>{{getDicName(\'nature\', item.userType)}}</td><td>{{vm.getDeptName(item.deptCode)}}</td><td><button ng-click="vm.quit(item.userCode)" class="btn btn-sm btn-danger" uib-tooltip="离职"><span class="fa fa-close"></span></button></td></tr></tbody></table></uib-tab></uib-tabset></div>'),t.put("app/nursingWorkers/search/search.tpl.html",'<div class="hr-wrapper hr-add-wrapper"><uib-tabset active="active"><uib-tab index="0" heading="员工查询"><form class="form-horizontal" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="tool-wrapper container-fluid"><span class="col-sm-2"><input type="text" class="form-control input-sm" placeholder="姓名" ng-model="vm.params.userName"></span> <span class="col-sm-2"><input type="text" class="form-control input-sm" placeholder="编号" ng-model="vm.params.userCode"></span> <span class="col-sm-2"><select class="form-control input-sm" ng-model="vm.params.deptCode"><option value="">所有科室</option><option ng-repeat="item in vm.deptData" value="{{item.deptCode}}">{{item.deptName}}</option></select></span> <span class="col-sm-1 text-left"><button ng-click="vm.search()" class="btn btn-success btn-sm">查询</button></span></div></form><table st-table="vm.userData" st-safe-src="rowCollection" class="table table-condensed table-bordered table-striped"><thead><tr class="header-export"><th>用户名</th><th>工号</th><th>性别</th><th>用户类型</th><th>目前所在科室</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.userData"><td>{{item.userName}}</td><td>{{item.userCode}}</td><td>{{getDicName(\'gender\', item.gender)}}</td><td>{{getDicName(\'nature\', item.userType)}}</td><td>{{vm.getDeptName(item.deptCode)}}</td><td><a ui-sref="home.baseInfo.detail({id: item.userCode, dept: item.deptCode})" class="btn btn-sm btn-primary"><span class="fa fa-edit"></span></a></td></tr></tbody></table></uib-tab></uib-tabset></div>'),t.put("app/quality/check/check.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>质量检查</span></div><div class="panel-body"><form class="form-inline pull-right"><div class="form-group quality-filter"><label for="month" class="control-label">月份&nbsp;</label><select class="form-control input-sm" id="month"><option>1</option></select></div><div class="form-group quality-filter"><label for="type" class="control-label">类型&nbsp;</label><select class="form-control input-sm" id="type"><option value="">全部</option></select></div><div class="form-group quality-filter"><label for="area" class="control-label">病区&nbsp;</label><select class="form-control input-sm" id="area"></select></div><div class="form-group quality-filter"><button class="btn btn-xs btn-default">查询</button></div></form><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>检查日期</th><th>检查病区</th><th>检查类型</th><th>检查表</th><th>得分</th><th>状态</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td data-title="\'检查日期\'" class="text-center">{{ row.taskDate }}</td><td data-title="\'检查病区\'" class="text-center">{{ row.deptCode }}</td><td data-title="\'检查类型\'" class="text-center">{{ row.formType }}</td><td data-title="\'检查表\'" class="text-center">{{ row.formName }}</td><td data-title="\'得分\'" class="text-center">{{ row.count }}</td><td data-title="\'状态\'" class="text-center">{{ row.status }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.edit(row)" uib-tooltip="修改"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/quality/check/editCheck.tpl.html",'<div class="mod-pop-dateForm clearfix editCheck"><form class="form-inlne form-horizontal w5c-form" name="addCheckForm" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" form="addCheckForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">质量检查-交班</h5></div><div class="modal-body clearfix"><div class="row"><div class="form-group col-xs-6"><label for="date" class="control-label col-xs-3 partial-label">日期：</label><div class="col-xs-9"><input class="form-control input-sm input-none" readonly="" ng-value="vm.formData.taskDate"></div></div><div class="form-group col-xs-6"><label for="area" class="control-label col-xs-3 partial-label">病区：</label><div class="col-xs-9"><input class="form-control input-sm input-none" readonly="" ng-value="vm.formData.deptCode"></div></div></div>{{vm.formData.qualityResultDetailList}}<table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.formData.qualityResultDetailList"><td data-title="\'序号\'" class="text-center"></td><td data-title="\'检查内容及要求\'" class="text-center">{{ row.item }}</td><td data-title="\'分值\'" class="text-center">{{ row.points }}</td><td data-title="\'得分\'" class="col-xs-2 partial-td"><input type="number" class="form-control input-sm text-center" ng-model="row.count" placeholder="点击填写"></td><td data-title="\'扣分原因\'" class="text-center col-xs-4 partial-td"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="row.cause">\r\n                </textarea></td></tr></table></div><div class="modal-footer clearfix"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),t.put("app/quality/deal/addDeal.tpl.html",'<div class="mod-pop-dateForm addDeal"><form class="form-inline w5c-form" name="addDealForm" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" form="addDealForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">质量检查问题处理</h5></div><div class="modal-body clearfix"><div class="form-group"><label for="code" class="control-label">检查日期：</label> <input type="text" class="form-control input-sm" uib-datepicker-popup="yyyy-MM-dd" is-open="popup1" id="date" name="date" placeholder="年-月-日" clear-text="清除" close-text="关闭" current-text="今天" ng-click="popup1 = true" ng-model="vm.formData.checkDetail.taskDate" required="" readonly=""></div><div class="form-group"><label for="form_name" class="control-label">病区：</label> <input type="text" value="" class="form-control input-sm" id="form_name" name="form_name" ng-model="vm.formData.checkDetail.deptCode" required="" autocomplete="off"></div><div class="form-group"><label for="form_type" class="control-label">检查表单：</label><select class="form-control input-sm" id="select_form" name="select_form" required="" ng-model="vm.formData.checkDetail.selectForm" ng-options="x.formName for x in vm.metaData.qualityFormList"></select></div><div class="form-group"><button class="btn btn-xs btn-primary" ng-click="vm.checkDetail()">查看检查情况</button></div><div class="table-box"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped partial-table"><tr><td data-title="\'存在问题\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.issueContent"></textarea></td><td data-title="\'原因分析\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.reasonAnalysis"></textarea></td><td data-title="\'整改要求\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.resDescribe"></textarea></td><td data-title="\'整改措施\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.resPlan"></textarea></td><td data-title="\'效果评估\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.evaluation"></textarea></td></tr></table></div></div><div class="modal-footer clearfix"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),t.put("app/quality/deal/checkDetail.tpl.html",'<form role="form" form="addDealForm"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.metaData.checkDetailList[0].qualityResultDetailList"><td data-title="\'序号\'" class="text-center">{{ $index }}</td><td data-title="\'检查内容及要求\'" class="text-center">{{ row.item }}</td><td data-title="\'分值\'" class="text-center">{{ row.points }}</td><td data-title="\'得分\'" class="text-center">{{ row.count }}</td><td data-title="\'扣分原因\'" class="text-center">{{ row.cause }}</td></tr></table><div class="text-center"><button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">关闭</button></div></form>'),t.put("app/quality/deal/deal.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>质量检查问题处理</span><div class="pull-right"><button class="btn btn-xs btn-default" ng-click="vm.add()">新增问题</button></div></div><div class="panel-body"><form class="form-inline pull-right"><div class="form-group quality-filter"><label for="month" class="control-label">月份&nbsp;</label><select class="form-control input-sm" id="month"><option>1</option></select></div><div class="form-group quality-filter"><label for="type" class="control-label">类型&nbsp;</label><select class="form-control input-sm" id="type"><option value="">全部</option></select></div><div class="form-group quality-filter"><label for="area" class="control-label">病区&nbsp;</label><select class="form-control input-sm" id="area"></select></div><div class="form-group quality-filter"><button class="btn btn-xs btn-default">查询</button></div></form><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>检查日期</th><th>检查病区</th><th>存在问题</th><th>问题分析</th><th>整改要求</th><th>整改措施</th><th>整改效果评估</th><th>检查类型</th><th>检查表</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td>{{ row.taskTime }}</td><td>{{ row.deptName }}</td><td>{{ row.issueContent }}</td><td>{{ row.reasonAnalysis }}</td><td>{{ row.resDescribe }}</td><td>{{ row.resPlan }}</td><td>{{ row.evaluation }}</td><td>{{ row.type }}</td><td>{{ row.formName }}</td><td><button class="btn btn-default btn-xs" ng-click="vm.edit(row)" uib-tooltip="修改"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/quality/form/addForm.tpl.html",'<div class="mod-pop-dateForm addQualityForm"><form class="form-inline w5c-form" name="addQualityForm" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" form="addQualityForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">新增质量检查表单</h5></div><div class="modal-body"><div class="input-row"><div class="form-group"><label for="code" class="control-label">编号：</label> <input type="text" value="" class="form-control input-sm" id="code" ng-model="vm.formData.formCode" autocomplete="off"></div><div class="form-group"><label for="form_name" class="control-label">名称：</label> <input type="text" value="" class="form-control input-sm" id="form_name" name="form_name" ng-model="vm.formData.formName" autocomplete="off" required=""></div><div class="form-group"><label for="form_type" class="control-label">类型：</label><select class="form-control input-sm" id="form_type" required="" name="form_type" ng-model="vm.formData.formType"><option>1</option></select></div></div><div class="form-group dept-row"><label for="dept" class="control-label pull-left">使用科室：</label><div class="dept-row-input flow-list"><div ng-repeat="item in vm.formData.deptList track by $index" class="btn-group btn-group-xs" role="group"><button type="button" class="btn btn-default btn-xs" name="button" ng-click="main.runApi(api)">{{item}}</button> <a class="btn btn-danger btn-xs" ng-click="vm.removeDept($index)"><i class="fa fa-times"></i></a></div><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.deptText" autocomplete="off" name="useDept" id="dept"> <span class="input-group-btn add"><button ng-click="vm.addDept()" class="btn btn-primary btn-sm fa fa-plus" ng-disabled="addQualityForm.useDept.$invalid || addQualityForm.useDept.$pristine"></button></span></div></div></div><div class="clearfix"><table class="table table-condensed table-bordered table-striped partial-grid"><thead><tr><th class="text-center col">序号</th><th class="text-center col">检查内容及要求</th><th class="text-center col">标准分</th><th class="text-center col">检查方法及扣分标准</th><th class="text-center col">操作</th></tr></thead><tbody><tr ng-repeat="row in vm.formData.qualityFormDetailList track by $index"><td class="text-center">{{ row.detailCode }}</td><td class="text-center">{{ row.item }}</td><td class="text-center">{{ row.points }}</td><td class="text-center">{{ row.stantard }}</td><td class="text-center"><button class="btn btn-danger btn-xs" uib-tooltip="删除" ng-click="vm.removeDetailList($index)"><span class="fa fa-trash"></span></button></td></tr></tbody></table><ul class="clearfix partial-grid partial-list"><li class="pull-left col"><input type="text" class="form-control input-sm text-center" ng-model="vm.detailList.detailCode"></li><li class="pull-left col"><textarea class="form-control text-center" ng-model="vm.detailList.item"></textarea></li><li class="pull-left col"><input type="text" class="form-control input-sm text-center" ng-model="vm.detailList.points"></li><li class="pull-left col"><textarea class="form-control text-center" ng-model="vm.detailList.stantard"></textarea></li><li class="text-center pull-left col"><button class="btn btn-primary btn-xs text-center" uib-tooltip="增加" ng-click="vm.addDetailList(vm.detailList)"><span class="fa fa-plus"></span></button></li></ul></div></div><div class="modal-footer clearfix"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),t.put("app/quality/form/form.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>质量检查表单管理</span><div class="pull-right"><button class="btn btn-xs btn-default" ng-click="vm.addForm()">新增表单</button></div></div><div class="panel-body"><form class="form-inline pull-right"><div class="form-group quality-filter"><label for="type" class="control-label">类型&nbsp;</label><select class="form-control input-sm" id="type" ng-model="vm.filter_type.selected" ng-options="x.type for x in vm.filter_type"></select></div><div class="form-group quality-filter"><label for="area" class="control-label">病区&nbsp;</label><select class="form-control input-sm" id="area" ng-model="vm.filter_area.selected" ng-options="x.type for x in vm.filter_area"></select></div><div class="form-group quality-filter"><button class="btn btn-xs btn-default">查询</button></div></form><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>编号</th><th>类型</th><th>表单名称</th><th>使用科室</th><th>创建时间</th><th>状态</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td class="text-center">{{ row.seqId }}</td><td class="text-center">{{ row.formType }}</td><td class="text-center">{{ row.formName }}</td><td class="text-center">{{ row.deptCode }}</td><td class="text-center">{{ row.createTime }}</td><td class="text-center">{{ row.status }}</td><td class="text-center"><button class="btn btn-default btn-xs" ng-click="vm.edit(row)" uib-tooltip="修改" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/quality/task/addTask.tpl.html",'<div class="mod-pop-dateForm clearfix"><form class="form-inlne form-horizontal w5c-form" name="addQualityForm" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" form="addQualityForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">质量检查任务</h5></div><div class="modal-body clearfix"><div class="form-group"><label for="date" class="control-label col-xs-2 partial-label">检查日期：</label><div class="col-xs-4"><input type="text" class="form-control input-sm" uib-datepicker-popup="yyyy-MM-dd" is-open="popup1" id="date" name="date" required="" placeholder="年-月-日" clear-text="清除" close-text="关闭" current-text="今天" ng-click="popup1 = true" ng-model="vm.formData.taskDate" readonly=""></div></div><div class="form-group"><label for="dept" class="control-label col-xs-2 partial-label">检查科室：</label><div class="col-xs-10"><ul class="deptList"><li ng-repeat="item in vm.formData.deptList track by $index"><span>{{ item }}</span> <a ng-click="vm.removeDept($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></li></ul><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.deptText" autocomplete="off" name="useDept" id="dept"> <span class="input-group-btn add"><button ng-click="vm.addDept()" class="btn btn-primary btn-sm fa fa-plus" ng-disabled="addQualityForm.useDept.$invalid || addQualityForm.useDept.$pristine"></button></span></div></div></div><div class="form-group"><label for="select_form" class="control-label col-xs-2 partial-label">检查表单：</label><div class="col-xs-4"><select class="form-control input-sm" id="select_form" required="" name="select_form" ng-model="vm.formData.formCode" ng-options="x.formName for x in vm.metaData.qualityFormList"></select></div></div><div class="form-group"><label for="hand_user" class="control-label col-xs-2 partial-label">检查组长：</label><div class="col-xs-4"><input type="text" class="form-control input-sm" id="hand_user" autocomplete="off" required="" name="handUserName" ng-model="vm.formData.handUserName" value=""></div></div><div class="form-group"><label for="member" class="control-label col-xs-2 partial-label">检查组员：</label><div class="col-xs-10"><ul class="deptList"><li ng-repeat="item in vm.formData.memberList track by $index"><span>{{ item }}</span> <a ng-click="vm.removeMember($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></li></ul><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.memberText" autocomplete="off" name="member" id="member"> <span class="input-group-btn"><button ng-click="vm.addMember()" class="btn btn-primary btn-sm fa fa-plus" ng-disabled="addQualityForm.member.$invalid || addQualityForm.member.$pristine"></button></span></div></div></div></div><div class="modal-footer clearfix"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),t.put("app/quality/task/task.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>任务管理</span><div class="pull-right"><button class="btn btn-xs btn-default" ng-click="vm.addTask()">新增任务</button></div></div><div class="panel-body">{{vm.formData.task_form.current_selected}}<form class="form-inline pull-right"><div class="form-group quality-filter"><label for="month" class="control-label">月份&nbsp;</label><select class="form-control input-sm" id="month"><option>1</option></select></div><div class="form-group quality-filter"><label for="type" class="control-label">类型&nbsp;</label><select class="form-control input-sm" id="type"></select></div><div class="form-group quality-filter"><label for="area" class="control-label">病区&nbsp;</label><select class="form-control input-sm" id="area"></select></div><div class="form-group quality-filter"><button class="btn btn-xs btn-default">查询</button></div></form><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>检查日期</th><th>状态</th><th>检查病区</th><th>检查类型</th><th>检查表</th><th>检查组长</th><th>检查组成员</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td data-title="\'检查日期\'" class="text-center">{{ row.taskDate }}</td><td data-title="\'状态\'" class="text-center">{{ row.status }}</td><td data-title="\'检查病区\'" class="text-center">{{ row.deptCode }}</td><td data-title="\'检查类型\'" class="text-center">{{ row.formType }}</td><td data-title="\'检查表\'" class="text-center">{{ row.formName }}</td><td data-title="\'检查组长\'" class="text-center">{{ row.handUserName }}</td><td data-title="\'检查组成员\'" class="text-center">{{ row.joinUserName }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.editTask(row)" uib-tooltip="修改" ng-if="!row.isEditing"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.deleteTask(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/research/item/item.model.html",'<div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写科研管理</h5></div><form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="static-form-item container-fluid"><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">课题名称：</label></div><div class="col-sm-8"><input ng-model="vm.formData.subjectName"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">项目来源：</label></div><div class="col-sm-8"><input ng-model="vm.formData.itemSource"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">起始日期：</label></div><div class="col-sm-8"><input ng-model="vm.formData.startDate"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">结束日期：</label></div><div class="col-sm-8"><input ng-model="vm.formData.endDate"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">经费：</label></div><div class="col-sm-8"><input ng-model="vm.formData.cost"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">负责人：</label></div><div class="col-sm-8"><input ng-model="vm.formData.subjectHead"></div></div><div class="form-group col-md-12"><div class="col-sm-2"><label class="control-label">参与人：</label></div><div class="col-sm-10"><input ng-model="vm.formData.subjectParticipant"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),t.put("app/research/item/item.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-balance-scale"></i> <span>科研项目管理</span><div class="pull-right"><button class="btn btn-default btn-xs" ng-click="vm.open()">新增</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>课题名称</th><th>项目来源</th><th>起始日期</th><th>结束日期</th><th>经费</th><th>课题负责人</th><th>课题参与人</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td class="text-center">{{ row.subjectName }}</td><td class="text-center">{{ row.itemSource }}</td><td class="text-center">{{ row.startDate }}</td><td class="text-center">{{ row.endDate }}</td><td class="text-center">{{ row.cost }}</td><td class="text-center">{{ row.subjectHead }}</td><td class="text-center">{{ row.subjectParticipant }}</td><td class="text-center"><button class="btn btn-default btn-xs" ng-click="vm.edit(row)" uib-tooltip="编辑" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.deleteGroup(row.seqId)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/research/papers/papers.model.html",'<div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写科研论文</h5></div><form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="static-form-item container-fluid"><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">论文名称：</label></div><div class="col-sm-8"><input ng-model="vm.formData.paperName"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">作者：</label></div><div class="col-sm-8"><input ng-model="vm.formData.author"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">刊物名称：</label></div><div class="col-sm-8"><input ng-model="vm.formData.publictionName"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">刊号：</label></div><div class="col-sm-8"><input ng-model="vm.formData.publictionNo"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">字数：</label></div><div class="col-sm-8"><input ng-model="vm.formData.wordsNumber"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">核心刊物：</label></div><div class="col-sm-8"><input ng-model="vm.formData.corePubliction"></div></div><div class="form-group col-md-12"><div class="col-sm-2"><label class="control-label">发表日期：</label></div><div class="col-sm-10"><input ng-model="vm.formData.publishDate"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),t.put("app/research/papers/papers.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-balance-scale"></i> <span>科研论文管理</span><div class="pull-right"><button class="btn btn-primary btn-xs" ng-click="vm.add()">新增</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>论文名称</th><th>作者</th><th>刊物名称</th><th>刊号</th><th>字数</th><th>核心刊物</th><th>发表日期</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}"><td class="text-center">{{ row.paperName }}</td><td class="text-center">{{ row.author }}</td><td class="text-center">{{ row.publictionName }}</td><td class="text-center">{{ row.publictionNo }}</td><td class="text-center">{{ row.wordsNumber }}</td><td class="text-center">{{ row.corePubliction }}</td><td class="text-center">{{ row.publishDate }}</td><td class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.edit(row)" uib-tooltip="编辑"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.deletePapers(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/sat/nurse/result.modal.html",'<div class="sat-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">护士满意度调查</h5></div><div class="modal-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="form"><div class="container-fluid"><div class=""><div class="form-group"><label for="formCode" class="col-sm-1 control-label">日期</label><div class="input-group col-sm-3 pull-left"><input type="text" id="surverDate" name="surverDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.surverDateOpen" ng-model="vm.detail.surverDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.surverDateOpen = true"><i class="fa fa-calendar"></i></button></span></div><label for="formName" class="col-sm-1 control-label">调查表</label><div class="col-sm-6"><select class="form-control" name="formCode" id="formCode" ng-model="vm.tmpCode" ng-show="vm.isNew" ng-change="vm.reload()"><option ng-repeat="item in vm.tmps" value="{{item.formCode}}">{{item.formName}}</option></select><input class="form-control input-sm" type="text" ng-model="vm.detail.resultName" ng-hide="vm.isNew" disabled=""></div></div><div class="form-group"><label for="deptCode" class="col-sm-1 control-label">病区</label><div class="col-sm-3"><select class="form-control" name="deptCode" id="deptCode" ng-model="vm.detail.deptCode"><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><label for="userCode" class="col-sm-1 control-label">护士</label><div class="col-sm-3"><input type="text" class="form-control input-sm" ng-model="vm.detail.userCode"></div><label for="name" class="col-sm-1 control-label">姓名</label><div class="col-sm-3"><input type="text" class="form-control input-sm" ng-model="vm.detail.name"></div></div><div><table class="sat-table"><thead><tr><th>序号</th><th>调查问题</th><th>调查选项1</th><th>调查选项2</th><th>调查选项3</th></tr></thead><tbody><tr ng-repeat="item in vm.detail.satResultDetailList"><td>{{$index + 1}}</td><td>{{item.content}}</td><td ng-repeat="option in item.satOptionList"><div class="radio"><label><input type="radio" name="satOption{{item.seqId}}" value="{{option.optionCode}}" ng-model="item.optionCode"> {{option.optionContent}}</label></div></td></tr></tbody></table></div><div class="form-group text-center"><button class="btn btn-sm btn-success" type="button" ng-click="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></form></div></div>'),
t.put("app/sat/nurse/result.tpl.html",'<div class="sat-wrapper"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>护士满意度调查</span><div class="result-filter row clearfix"><span class="text">日期：从</span> <span class="input-group col-md-2"><input type="text" id="beginTime" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.beginTimeOpen" ng-model="vm.params.beginTime" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.beginTimeOpen = true"><i class="fa fa-calendar"></i></button></span></span> <span class="text">到</span> <span class="input-group col-md-2"><input type="text" id="endTime" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.endTimeOpen" ng-model="vm.params.endTime" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.endTimeOpen = true"><i class="fa fa-calendar"></i></button></span></span> <span class="text">类型</span> <span class="col-md-2"><select class="form-control" name="formType" id="formType" ng-model="vm.params.formType"><option value="">全部</option><option ng-repeat="item in nurseSatTypes" value="{{item}}">{{item}}</option></select></span> <span class="text">病区</span> <span class="col-md-2"><select class="form-control" name="deptCode" id="deptCode" ng-model="vm.params.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></span> <span class="btn btn-info" ng-click="vm.load()">查询</span> <span class="btn btn-success" ng-click="vm.open()">新增</span></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'调查日期\'">{{row.surverDate}}</td><td data-title="\'类型\'">{{ row.formType }}</td><td data-title="\'表单名称\'">{{ row.resultName }}</td><td data-title="\'病区\'">{{ vm.getDeptName(row.deptCode)}}</td><td data-title="\'护士编号\'">{{ row.userCode }}</td><td data-title="\'护士姓名\'">{{ row.name }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.open(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),t.put("app/sat/nurse/temp.modal.html",'<div class="sat-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">护士满意度模板</h5></div><div class="modal-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="form"><div class="container-fluid"><div class=""><div class="form-group"><label for="formCode" class="col-sm-1 control-label">编号：</label><div class="col-sm-3"><input class="form-control input-sm" name="" id="formCode" type="text" value="{{vm.formData.deptName}}" ng-model="vm.formData.formCode" disabled=""></div><label for="formName" class="col-sm-1 control-label">名称：</label><div class="col-sm-3"><input class="form-control input-sm" ng-model="vm.formData.formName" id="formName" name="" autocomplete="off" type="text"></div><label for="formType" class="col-sm-1 control-label">类型：</label><div class="col-sm-3"><select class="form-control" name="formType" id="formType" ng-model="vm.formData.formType"><option ng-repeat="item in nurseSatTypes" value="{{item}}">{{item}}</option></select></div></div><div><button class="btn btn-sm btn-success" ng-click="vm.add()">添加调查项</button><table class="sat-table"><thead><tr><th>序号</th><th>调查问题</th><th>调查选项1</th><th>调查选项2</th><th>调查选项3</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.formData.satTempDetailList"><td>{{$index + 1}}</td><td><input class="form-control" type="text" ng-model="item.content"></td><td ng-repeat="item in item.satOptionList"><input class="col-md-2" type="radio" disabled="disabled"><div class="col-md-10"><input class="form-control" type="text" ng-model="item.optionContent"></div></td><td><button class="btn btn-sm btn-danger" ng-click="vm.del($index)">删除</button></td></tr></tbody></table></div><div class="form-group text-center"><button class="btn btn-sm btn-success" type="button" ng-click="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></form></div></div>'),t.put("app/sat/nurse/temp.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>护士满意度调查模板</span><div class="pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.open()">新增</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'编号\'">{{row.formCode}}</td><td data-title="\'类型\'">{{ row.formType }}</td><td data-title="\'表单名称\'">{{ row.formName }}</td><td data-title="\'创建时间\'">{{ row.createTime }}</td><td data-title="\'状态\'">{{ row.status === \'01\' ? \'在用\': \'废弃\' }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.open(row)"><span class="fa fa-edit"></span></button> <button ng-show="row.status === \'01\'" class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),t.put("app/sat/patient/result.modal.html",'<div class="sat-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">患者满意度调查</h5></div><div class="modal-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="form"><div class="container-fluid"><div class=""><div class="form-group"><label for="formCode" class="col-sm-1 control-label">日期</label><div class="input-group col-sm-3 pull-left"><input type="text" id="surverDate" name="surverDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.surverDateOpen" ng-model="vm.detail.surverDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.surverDateOpen = true"><i class="fa fa-calendar"></i></button></span></div><label for="formName" class="col-sm-1 control-label">调查表</label><div class="col-sm-6"><select class="form-control" name="formCode" id="formCode" ng-model="vm.tmpCode" ng-show="vm.isNew" ng-change="vm.reload()"><option ng-repeat="item in vm.tmps" value="{{item.formCode}}">{{item.formName}}</option></select><input class="form-control input-sm" type="text" ng-model="vm.detail.resultName" ng-hide="vm.isNew" disabled=""></div></div><div class="form-group"><label for="deptCode" class="col-sm-1 control-label">病区</label><div class="col-sm-3"><select class="form-control" name="deptCode" id="deptCode" ng-model="vm.detail.deptCode"><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><label for="bedCode" class="col-sm-1 control-label">床号</label><div class="col-sm-1"><input type="text" class="form-control input-sm" ng-model="vm.detail.bedCode"></div><label for="name" class="col-sm-1 control-label">姓名</label><div class="col-sm-2"><input type="text" class="form-control input-sm" ng-model="vm.detail.name"></div><label for="inHospNo" class="col-sm-1 control-label">住院号</label><div class="col-sm-2"><input type="text" class="form-control input-sm" ng-model="vm.detail.inHospNo"></div></div><div><table class="sat-table"><thead><tr><th>序号</th><th>调查问题</th><th>调查选项1</th><th>调查选项2</th><th>调查选项3</th></tr></thead><tbody><tr ng-repeat="item in vm.detail.satResultDetailList"><td>{{$index + 1}}</td><td>{{item.content}}</td><td ng-repeat="option in item.satOptionList"><div class="radio"><label><input type="radio" name="satOption{{item.seqId}}" value="{{option.optionCode}}" ng-model="item.optionCode"> {{option.optionContent}}</label></div></td></tr></tbody></table></div><div class="form-group text-center"><button class="btn btn-sm btn-success" type="button" ng-click="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></form></div></div>'),t.put("app/sat/patient/result.tpl.html",'<div class="sat-wrapper"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>患者满意度调查</span><div class="result-filter row clearfix"><span class="text">日期：从</span> <span class="input-group col-md-2"><input type="text" id="beginTime" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.beginTimeOpen" ng-model="vm.params.beginTime" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.beginTimeOpen = true"><i class="fa fa-calendar"></i></button></span></span> <span class="text">到</span> <span class="input-group col-md-2"><input type="text" id="endTime" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.endTimeOpen" ng-model="vm.params.endTime" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.endTimeOpen = true"><i class="fa fa-calendar"></i></button></span></span> <span class="text">类型</span> <span class="col-md-2"><select class="form-control" name="formType" id="formType" ng-model="vm.params.formType"><option value="">全部</option><option ng-repeat="item in patientSatTypes" value="{{item}}">{{item}}</option></select></span> <span class="text">患者</span> <span class="col-md-2"><input type="text" class="form-control input-sm" name="patientName" id="patientName" ng-model="vm.params.patientName"></span> <span class="btn btn-info" ng-click="vm.load()">查询</span> <span class="btn btn-success" ng-click="vm.open()">新增</span></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'调查日期\'">{{row.surverDate}}</td><td data-title="\'类型\'">{{ row.formType }}</td><td data-title="\'表单名称\'">{{ row.resultName }}</td><td data-title="\'病区\'">{{ vm.getDeptName(row.deptCode)}}</td><td data-title="\'床号\'">{{ row.bedCode }}</td><td data-title="\'姓名\'">{{ row.name }}</td><td data-title="\'住院号\'">{{ row.inHospNo }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.open(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),t.put("app/sat/patient/temp.modal.html",'<div class="sat-wrapper"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">患者满意度模板</h5></div><div class="modal-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="form"><div class="container-fluid"><div class=""><div class="form-group"><label for="formCode" class="col-sm-1 control-label">编号：</label><div class="col-sm-3"><input class="form-control input-sm" name="" id="formCode" type="text" value="{{vm.formData.deptName}}" ng-model="vm.formData.formCode" disabled=""></div><label for="formName" class="col-sm-1 control-label">名称：</label><div class="col-sm-3"><input class="form-control input-sm" ng-model="vm.formData.formName" id="formName" name="" autocomplete="off" type="text"></div><label for="formType" class="col-sm-1 control-label">类型：</label><div class="col-sm-3"><select class="form-control" name="formType" id="formType" ng-model="vm.formData.formType"><option ng-repeat="item in patientSatTypes" value="{{item}}">{{item}}</option></select></div></div><div><button class="btn btn-sm btn-success" ng-click="vm.add()">添加调查项</button><table class="sat-table"><thead><tr><th>序号</th><th>调查问题</th><th>调查选项1</th><th>调查选项2</th><th>调查选项3</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in vm.formData.satTempDetailList"><td>{{$index + 1}}</td><td><input class="form-control" type="text" ng-model="item.content"></td><td ng-repeat="item in item.satOptionList"><input class="col-md-2" type="radio" disabled="disabled"><div class="col-md-10"><input class="form-control" type="text" ng-model="item.optionContent"></div></td><td><button class="btn btn-sm btn-danger" ng-click="vm.del($index)">删除</button></td></tr></tbody></table></div><div class="form-group text-center"><button class="btn btn-sm btn-success" type="button" ng-click="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></form></div></div>'),t.put("app/sat/patient/temp.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>患者满意度调查模板</span><div class="pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.open()">新增</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'编号\'">{{row.formCode}}</td><td data-title="\'类型\'">{{ row.formType }}</td><td data-title="\'表单名称\'">{{ row.formName }}</td><td data-title="\'创建时间\'">{{ row.createTime }}</td><td data-title="\'状态\'">{{ row.status === \'01\' ? \'在用\': \'废弃\' }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.open(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),t.put("app/statistics/bedNursing/doc.tpl.html",'<div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row data-panel"><span class="col-md-3"></span> <span class="col-md-3">总遗漏率：{{vm.baseData.miss}}</span> <span class="col-md-3">整体合格率：{{vm.baseData.qualified}}</span> <span class="col-md-3"></span></div><div class="row"><div class="col-md-4 echarts-wrap" ng-repeat="item in vm.charts" echarts="item.identity" echarts-dimension="item.dimension" config="item.config"></div></div></div>'),t.put("app/statistics/bedNursing/doctor.tpl.html",'<div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="echarts-wrap" echarts="vm.chart.identity" echarts-dimension="vm.chart.dimension" config="vm.chart.config"></div></div></div>'),t.put("app/statistics/bedNursing/liqDis.tpl.html",'<div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="echarts-wrap" echarts="vm.chart.identity" echarts-dimension="vm.chart.dimension" config="vm.chart.config"></div></div></div>'),t.put("app/statistics/bedNursing/patrol.tpl.html",'<div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="col-md-12 echarts-wrap" echarts="vm.chart.identity" echarts-dimension="vm.chart.dimension" config="vm.chart.config"></div><div class="col-md-6 echarts-wrap" ng-repeat="item in vm.charts" echarts="item.identity" echarts-dimension="item.dimension" config="item.config"></div></div></div>'),t.put("app/statistics/bedNursing/sign.tpl.html",'<div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="echarts-wrap" echarts="vm.sign.identity" echarts-dimension="vm.sign.dimension" config="vm.sign.config"></div></div></div>'),t.put("app/statistics/bedNursing/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="link-wrapper"><a class="stat-header" ui-sref="home.bedNursing.liqDis" ui-sref-active="active">配液统计</a> <a class="stat-header" ui-sref="home.bedNursing.doctor" ui-sref-active="active">医嘱统计</a> <a class="stat-header" ui-sref="home.bedNursing.sign" ui-sref-active="active">生命体征</a> <a class="stat-header" ui-sref="home.bedNursing.doc" ui-sref-active="active">护理文书</a> <a class="stat-header" ui-sref="home.bedNursing.patrol" ui-sref-active="active">巡视统计</a></div><div ui-view=""></div></div>'),t.put("app/statistics/duty/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row data-panel"><span class="col-md-3">护士总数：{{vm.baseData.total}}</span> <span class="col-md-3">请假人次：{{vm.baseData.leave}}</span> <span class="col-md-3">调班人次：{{vm.baseData.shift}}</span> <span class="col-md-3">拒绝调班：{{vm.baseData.refuse}}</span></div><div class="echarts-wrap" echarts="vm.duty.identity" echarts-dimension="vm.duty.dimension" config="vm.duty.config"></div></div></div>'),t.put("app/statistics/exam/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4"><select class="form-control" ng-model="vm.filter.type"><option value="">全部</option><option value="0">入职考试</option><option value="1">年中考试</option><option value="2">年终考试</option><option value="3">护理质量培训</option></select></div><div class="col-md-4"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="col-md-6"><div class="echarts-wrap" echarts="vm.exam.identity" echarts-dimension="vm.exam.dimension" config="vm.exam.config"></div></div><div class="col-md-6"><div class="echarts-wrap" echarts="vm.train.identity" echarts-dimension="vm.train.dimension" config="vm.train.config"></div></div></div></div></div>'),t.put("app/statistics/malCase/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics"><span class="fa fa-table"></span></a><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="echarts-wrap" echarts="vm.mal.identity" echarts-dimension="vm.mal.dimension" config="vm.mal.config"></div></div></div></div>'),t.put("app/statistics/nurseManager/form.tpl.html",'<div class="chart-wrapper"><div class="row"><div class="col-md-6 echarts-wrap" echarts="vm.level.identity" echarts-dimension="vm.level.dimension" config="vm.level.config"></div><div class="col-md-6 echarts-wrap" echarts="vm.edu.identity" echarts-dimension="vm.edu.dimension" config="vm.edu.config"></div></div><div class="row"><div class="col-md-6 echarts-wrap" echarts="vm.age.identity" echarts-dimension="vm.age.dimension" config="vm.age.config"></div><div class="col-md-6 echarts-wrap" echarts="vm.gender.identity" echarts-dimension="vm.gender.dimension" config="vm.gender.config"></div></div><div class="row"><div class="col-md-6 echarts-wrap" echarts="vm.political.identity" echarts-dimension="vm.political.dimension" config="vm.political.config"></div></div></div>'),t.put("app/statistics/nurseManager/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="link-wrapper"><a ui-sref="home.nurseManagerStat.form" ui-sref-active="active">人员组成统计</a> <a ui-sref="home.nurseManagerStat.transfer" ui-sref-active="active">人事调动统计</a></div><div ui-view=""></div></div>'),t.put("app/statistics/nurseManager/transfer.tpl.html",'<div class="chart-wrapper"><div class="row filter"><span class="input-group center col-md-2"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></span></div><div class="row data-panel"><span class="col-md-3">护士总数：{{vm.baseData.total}}</span> <span class="col-md-3">调动人次：{{vm.baseData.transfer}}</span> <span class="col-md-3">新增人数：{{vm.baseData.increase}}</span> <span class="col-md-3">离开人数：{{vm.baseData.leave}}</span></div><div class="echarts-wrap" echarts="vm.transfer.identity" echarts-dimension="vm.transfer.dimension" config="vm.transfer.config"></div></div>'),t.put("app/statistics/quality/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="echarts-wrap" echarts="vm.quality.identity" echarts-dimension="vm.quality.dimension" config="vm.quality.config"></div></div></div></div>'),t.put("app/statistics/sat/nurse.tpl.html",'<div class="statistics-wrapper"><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4"><select class="form-control" ng-model="vm.filter.type"><option value="">全部</option><option value="0">工作环境调查表</option><option value="1">工作氛围调查表</option></select></div><div class="col-md-4"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="col-md-7"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'项目\'">{{row.key}}</td><td data-title="\'分值\'">{{row.value}}</td></tr></table></div><div class="col-md-5"><div class="echarts-wrap" echarts="vm.sat.identity" echarts-dimension="vm.sat.dimension" config="vm.sat.config"></div></div></div></div></div>'),t.put("app/statistics/sat/patient.tpl.html",'<div class="statistics-wrapper"><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4"><select class="form-control" ng-model="vm.filter.type"><option value="">全部</option><option value="0">门诊调查表</option><option value="1">住院调查表</option></select></div><div class="col-md-4"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker="month"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="col-md-7"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'项目\'">{{row.key}}</td><td data-title="\'分值\'">{{ row.value }}</td></tr></table></div><div class="col-md-5"><div class="echarts-wrap" echarts="vm.sat.identity" echarts-dimension="vm.sat.dimension" config="vm.sat.config"></div></div></div></div></div>'),t.put("app/statistics/sat/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="link-wrapper"><a class="stat-header" ui-sref="home.satStat.patient" ui-sref-active="active">患者满意度统计</a> <a class="stat-header" ui-sref="home.satStat.nurse" ui-sref-active="active">护士满意度统计</a></div><div ui-view=""></div></div>'),t.put("app/statistics/research/stat.tpl.html",'<div class="statistics-wrapper"><a class="stat-link" ui-sref="home.statistics" title="统计一览"><span class="fa fa-table"></span></a><div class="chart-wrapper"><div class="row filter"><div class="center col-md-6 row"><div class="col-md-4"><select class="form-control" ng-model="vm.filter.deptCode"><option value="">全部</option><option ng-repeat="item in vm.deptData.belongedDepts" value="{{item.deptCode}}">{{item.deptName}}</option></select></div><div class="col-md-4 pull-right"><div class="input-group"><input type="text" id="date" name="date" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.pickerOpen" ng-model="vm.filter.date" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" common-picker=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.pickerOpen = true"><i class="fa fa-calendar"></i></button></span></div></div></div></div><div class="row"><div class="col-md-6"><p class="text-center">科研项目统计：{{vm.baseData.proj}}</p><div class="echarts-wrap" echarts="vm.proj.identity" echarts-dimension="vm.proj.dimension" config="vm.proj.config"></div></div><div class="col-md-6"><p class="text-center">科研论文统计：{{vm.baseData.paper}}</p><div class="echarts-wrap" echarts="vm.paper.identity" echarts-dimension="vm.paper.dimension" config="vm.paper.config"></div></div></div></div></div>'),
t.put("app/techFiles/jci/jci.detail.html",'<td colspan="{{tdLen}}"><uib-tabset active="active"><uib-tab index="0" heading="岗位职责"><table class="table table-striped table-condensed table-no-border"><tr><th>岗位名称</th><th>工作概要</th><th>上下关系</th><th>工作职责</th><th>工作标准</th><th>其他要求</th><th>开始时间</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.posStatement"><td>{{item.positionName}}</td><td>{{item.jobSummary}}</td><td>{{item.leaderMemberRelation}}</td><td>{{item.responsibilities}}</td><td>{{item.jobStandard}}</td><td>{{item.otherRequirements}}</td><td>{{item.beginTime}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="1" heading="岗前培训"><table class="table table-striped table-condensed table-no-border"><tr><th>级别</th><th>培训名称</th><th>开始时间</th><th>结束时间</th><th>考核情况</th><th>合格证书</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.preJobTrain"><td>{{item.rank}}</td><td>{{item.trainName}}</td><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.assessmentCondition}}</td><td>{{item.certificateQualification}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="2" heading="评估考核"><table class="table table-striped table-condensed table-no-border"><tr><th>考核内容</th><th>考核时间</th><th>考核结果</th><th>审核人</th></tr><tr ng-repeat="item in vm.detail.assessment"><td>{{item.assessmentContent}}</td><td>{{item.assessmentTime}}</td><td>{{item.assessmentResult}}</td><td>{{item.auditor}}</td></tr></table></uib-tab><uib-tab index="3" heading="继续教育"><table class="table table-striped table-condensed table-no-border"><tr><th>级别</th><th>教育名称</th><th>开始时间</th><th>结束时间</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.conEducation"><td>{{item.rank}}</td><td>{{item.educationName}}</td><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="4" heading="CPR/ACLS证书"><table class="table table-striped table-condensed table-no-border"><tr><th>培训时间</th><th>培训名称</th><th>考核情况</th><th>合格证书</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.cprAcls"><td>{{item.trainTime}}</td><td>{{item.trainName}}</td><td>{{item.assessmentContent}}</td><td>{{item.certificateQualification}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="5" heading="教育记录与考核"><table class="table table-striped table-condensed table-no-border"><tr><th>开始时间</th><th>结束时间</th><th>级别</th><th>培训名称</th><th>考核结果</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.eduRecord"><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.rank}}</td><td>{{item.trainName}}</td><td>{{item.assessmentResult}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab></uib-tabset></td>'),t.put("app/techFiles/jci/jci.tpl.html",'<div class="col-md-2" print-remove=""><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter: vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode)" class="sublist__item">{{subItem.deptName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>人员数据</span><div class="pull-right"><button print-btn="" class="btn btn-primary btn-xs">打印</button></div></div><div class="panel-body"><table st-table="vm.data" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th></th><th st-sort="hisCode">工号</th><th>姓名</th><th>病区</th><th>出生时间</th><th>性别</th><th>毕业时间</th><th>毕业院校</th><th>获得学位</th><th>操作</th></tr></thead><tbody ng-repeat="row in vm.data"><tr><td grid-expand-trigger="" grid-p="userCode" grid-expand-method="loadDetail" class="trigger"><i class="fa fa-caret-right"></i></td><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td>{{vm.getDeptName(row.deptCode)}}</td><td>{{row.birthday}}</td><td>{{vm.genders[row.gender]}}</td><td>{{row.graduationDate}}</td><td>{{row.graduationSchool}}</td><td>{{row.education}}</td><td data-title="\'操作\'"><button class="btn btn-default btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑员工信息"><span class="fa fa-pencil"></span></button></td></tr><tr grid-expand="" tpl-src="app/techFiles/jci/jci.detail.html" ng-show="vm.expanedIndex == $index"></tr></tbody></table></div></div></div>'),t.put("app/techFiles/jci/modal.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写护士信息</h5></div><div class="modal-body"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="static-form-item container-fluid"><div class="col-md-6"><div class="form-group"><label for="hisCode" class="col-sm-3 control-label">工号：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.detail.info.hisCode" id="hisCode" name="hisCode" type="text" readonly=""></div></div><div class="form-group"><label for="userName" class="col-sm-3 control-label">姓名：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.detail.info.userName" id="userName" name="userName" type="text" readonly=""></div></div><div class="form-group"><label for="male" class="col-sm-3 control-label">性别：</label><div class="col-sm-9"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.info.gender" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.info.gender" id="female" value="0"> 女</label></div></div><div class="form-group"><label for="birthday" class="col-sm-3 control-label">出生日期：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="birthday" name="birthday" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.birthdayOpen" ng-model="vm.detail.info.birthday" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.birthdayOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div></div><div class="col-md-6"><div class="form-group"><label for="graduationSchool" class="col-sm-3 control-label">毕业学校：</label><div class="col-sm-9"><input type="text" id="graduationSchool" name="nativePlace" ng-model="vm.detail.info.graduationSchool" class="form-control input-sm"></div></div><div class="form-group"><label for="graduationDate" class="col-sm-3 control-label">毕业时间：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="graduationDate" name="graduationDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.graduationDateOpen" ng-model="vm.detail.info.graduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.graduationDateOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><label for="education" class="col-sm-3 control-label">学历：</label><div class="col-sm-9"><input type="text" id="education" name="education" ng-model="vm.detail.info.education" class="form-control input-sm"></div></div></div></div><div class="container-fluid"><div class="col-md-6"><div class="form-group"><label class="col-sm-3 control-label"></label> <button w5c-form-submit="vm.save()" class="btn btn-success btn-sm">保存</button></div></div></div></form></uib-tab><uib-tab index="1" heading="岗位职责"><form class="form-horizontal form-inline posStatement-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="posStatementForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>岗位名称</th><th>工作概要</th><th>上下关系</th><th>工作职责</th><th>工作标准</th><th>其他要求</th><th>开始时间</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.posStatement track by $index"><td><input class="form-control input-sm input-tiny" name="positionName" type="text" required="" ng-model="item.positionName"></td><td><input class="form-control input-sm input-tiny" name="jobSummary" type="text" required="" ng-model="item.jobSummary"></td><td><input class="form-control input-sm input-tiny" name="leaderMemberRelation" type="text" required="" ng-model="item.leaderMemberRelation"></td><td><input class="form-control input-sm input-tiny" name="responsibilities" type="text" required="" ng-model="item.responsibilities"></td><td><input class="form-control input-sm input-tiny" name="jobStandard" type="text" required="" ng-model="item.jobStandard"></td><td><input class="form-control input-sm input-tiny" name="otherRequirements" type="text" required="" ng-model="item.otherRequirements"></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" ng-model="item.beginTime" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'posStatement\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'posStatement\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'posStatement\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="2" heading="岗前培训" active="tab.active"><form class="form-horizontal form-inline preJobTrain-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="preJobTrainForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>级别</th><th>培训名称</th><th>开始时间</th><th>结束时间</th><th>状态</th><th>合格证书</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.preJobTrain track by $index"><td><select class="form-control input-sm" name="rank" ng-model="item.rank"><option value="{{rank}}" ng-repeat="rank in vm.rankArray">{{rank}}</option></select></td><td><input class="form-control input-sm input-tiny" name="trainName" type="text" required="" ng-model="item.trainName"></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><select class="form-control input-sm" name="assessmentCondition" ng-model="item.assessmentCondition"><option value="{{result}}" ng-repeat="result in vm.resultArray">{{result}}</option></select></td><td><input class="form-control input-sm input-tiny" name="certificateQualification" type="text" required="" ng-model="item.certificateQualification"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'preJobTrain\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'preJobTrain\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'preJobTrain\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="3" heading="评估考核" active="tab.active"><form class="form-horizontal form-inline assessment-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="assessmentForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>考核内容</th><th>考核时间</th><th>考核结果</th><th>审核人</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.assessment track by $index"><td><input class="form-control input-sm" name="assessmentContent" type="text" required="" ng-model="item.assessmentContent"></td><td><span class="input-group"><input type="text" name="assessmentTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.assDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.assessmentTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.assDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm" name="assessmentResult" type="text" required="" ng-model="item.assessmentResult"></td><td><input class="form-control input-sm" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><button ng-click="vm.saveItem(\'assessment\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'assessment\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'assessment\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="4" heading="继续教育" active="tab.active"><form class="form-horizontal form-inline conEducation-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="conEducationForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>级别</th><th>教育名称</th><th>开始时间</th><th>结束时间</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.conEducation track by $index"><td><select class="form-control input-sm" name="rank" ng-model="item.rank"><option value="{{rank}}" ng-repeat="rank in vm.rankArray">{{rank}}</option></select></td><td><input class="form-control input-sm input-tiny" name="educationName" type="text" required="" ng-model="item.educationName"></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.beginTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.beginTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'conEducation\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'conEducation\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'conEducation\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="5" heading="CPR/ACLS证书" active="tab.active"><form class="form-horizontal form-inline cprAcls-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="cprAclsForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>培训时间</th><th>培训名称</th><th>考核情况</th><th>合格证书</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.cprAcls track by $index"><td><span class="input-group"><input type="text" name="trainTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.trainTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.trainTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.trainTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="trainName" type="text" required="" ng-model="item.trainName"></td><td><select class="form-control input-sm" name="assessmentContent" ng-model="item.assessmentContent"><option value="{{result}}" ng-repeat="result in vm.resultArray">{{result}}</option></select></td><td><input class="form-control input-sm input-tiny" name="certificateQualification" type="text" required="" ng-model="item.certificateQualification"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'cprAcls\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'cprAcls\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'cprAcls\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="6" heading="教育记录与考核" active="tab.active"><form class="form-horizontal form-inline eduRecord-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="eduRecordForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>开始时间</th><th>结束时间</th><th>级别</th><th>培训名称</th><th>考核结果</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.eduRecord track by $index"><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><select class="form-control input-sm" name="rank" ng-model="item.rank"><option value="{{rank}}" ng-repeat="rank in vm.rankArray">{{rank}}</option></select></td><td><input class="form-control input-sm input-tiny" name="trainName" type="text" required="" ng-model="item.trainName"></td><td><select class="form-control input-sm" name="assessmentResult" ng-model="item.assessmentResult"><option value="{{result}}" ng-repeat="result in vm.resultArray">{{result}}</option></select></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'eduRecord\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'eduRecord\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'eduRecord\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab></uib-tabset></div></div>'),t.put("app/techFiles/techFiles/modal.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写护士信息</h5></div><div class="modal-body"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="static-form-item container-fluid"><div class="col-md-6"><div class="form-group"><label for="hisCode" class="col-sm-3 control-label">工号：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.detail.info.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group"><label for="userName" class="col-sm-3 control-label">姓名：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.detail.info.userName" id="userName" name="userName" type="text"></div></div><div class="form-group"><label for="male" class="col-sm-3 control-label">性别：</label><div class="col-sm-9"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.info.gender" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.info.gender" id="female" value="0"> 女</label></div></div><div class="form-group"><label for="birthday" class="col-sm-3 control-label">出生日期：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="birthday" name="birthday" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.birthdayOpen" ng-model="vm.detail.info.birthday" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.birthdayOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div></div><div class="col-md-6"><div class="form-group"><label for="graduationSchool" class="col-sm-3 control-label">毕业学校：</label><div class="col-sm-9"><input type="text" id="graduationSchool" name="nativePlace" ng-model="vm.detail.info.graduationSchool" class="form-control input-sm"></div></div><div class="form-group"><label for="graduationDate" class="col-sm-3 control-label">毕业时间：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="graduationDate" name="graduationDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.graduationDateOpen" ng-model="vm.detail.info.graduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.graduationDateOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><label for="education" class="col-sm-3 control-label">学历：</label><div class="col-sm-9"><input type="text" id="education" name="education" ng-model="vm.detail.info.education" class="form-control input-sm"></div></div></div></div><div class="container-fluid"><div class="col-md-6"><div class="form-group"><label class="col-sm-3 control-label"></label> <button w5c-form-submit="vm.save()" class="btn btn-success btn-sm">保存</button></div></div></div></form></uib-tab><uib-tab index="1" heading="护士分层分级登记" active="tab.active"><form class="form-horizontal form-inline nurseHirReg-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="nurseHirRegForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>开始时间</th><th>结束时间</th><th>层级</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.nurseHirReg track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="hierarchy" type="text" required="" ng-model="item.hierarchy"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'nurseHirReg\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'nurseHirReg\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'nurseHirReg\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="2" heading="专科护士经历" active="tab.active"><form class="form-horizontal form-inline nurseExp-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="nurseExpForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>开始时间</th><th>结束时间</th><th>级别</th><th>所属专科</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.nurseExp track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><select class="form-control input-sm" name="rank" ng-model="item.rank"><option value="{{rank}}" ng-repeat="rank in vm.rankArray">{{rank}}</option></select></td><td><input class="form-control input-sm input-tiny" name="juniorCollege" type="text" required="" ng-model="item.juniorCollege"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'nurseExp\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'nurseExp\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'nurseExp\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="3" heading="学术会议、学习班" active="tab.active"><form class="form-horizontal form-inline academic-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="academicForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>会议名称</th><th>会议时间</th><th>会议地点</th><th>主办单位</th><th>学分</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.academic track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><input class="form-control input-sm input-tiny" name="meetingName" type="text" required="" ng-model="item.meetingName"></td><td><span class="input-group"><input type="text" name="meetingDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.meetingDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.meetingDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.meetingDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="meetingSite" type="text" required="" ng-model="item.meetingSite"></td><td><input class="form-control input-sm input-tiny" name="hostUnit" type="text" required="" ng-model="item.hostUnit"></td><td><input class="form-control input-sm input-tiny" name="credit" type="text" required="" ng-model="item.credit"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'academic\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'academic\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'academic\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="4" heading="奖励情况" active="tab.active"><form class="form-horizontal form-inline award-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="awardForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>奖励时间</th><th>奖励原因</th><th>奖励措施</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.award track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="apTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.apTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.apTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.apTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="reason" type="text" required="" ng-model="item.reason"></td><td><input class="form-control input-sm input-tiny" name="measure" type="text" required="" ng-model="item.measure"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'awardPunish\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'awardPunish\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'award\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="5" heading="惩罚情况" active="tab.active"><form class="form-horizontal form-inline punish-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="punishForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>惩罚时间</th><th>惩罚原因</th><th>惩罚措施</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.punish track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="apTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.apTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.apTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.apTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="reason" type="text" required="" ng-model="item.reason"></td><td><input class="form-control input-sm input-tiny" name="measure" type="text" required="" ng-model="item.measure"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'awardPunish\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'awardPunish\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'punish\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="6" heading="个人考核结果" active="tab.active"><form class="form-horizontal form-inline perAssessment-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="perAssessmentForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>考核时间</th><th>考核项目</th><th>考核结果</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.perAssessment track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="assessmentTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.assessmentTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.assessmentTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.assessmentTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="assessmentItem" type="text" required="" ng-model="item.assessmentItem"></td><td><input class="form-control input-sm input-tiny" name="assessmentResult" type="text" required="" ng-model="item.assessmentResult"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'perAssessment\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'perAssessment\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'perAssessment\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab></uib-tabset></div></div>'),
t.put("app/techFiles/techFiles/techFiles.detail.html",'<td colspan="{{tdLen}}"><uib-tabset active="active"><uib-tab index="0" heading="护士分层分级登记"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>开始时间</th><th>结束时间</th><th>层级</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.nurseHirReg"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.hierarchy}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="1" heading="专科护士经历"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>开始时间</th><th>结束时间</th><th>级别</th><th>所属专科</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.nurseExp"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.rank}}</td><td>{{item.juniorCollege}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="2" heading="学术会议、学习班"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>会议名称</th><th>会议时间</th><th>会议地点</th><th>主办单位</th><th>学分</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.academic"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.meetingName}}</td><td>{{item.meetingDate}}</td><td>{{item.meetingSite}}</td><td>{{item.hostUnit}}</td><td>{{item.credit}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="3" heading="奖励情况"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>奖励时间</th><th>奖励原因</th><th>奖励措施</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.awardPunish | filter: {apType: 1}"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.apTime}}</td><td>{{item.reason}}</td><td>{{item.measure}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="4" heading="惩罚情况"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>惩罚时间</th><th>惩罚原因</th><th>惩罚措施</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.awardPunish | filter: {apType: 2}"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.apTime}}</td><td>{{item.reason}}</td><td>{{item.measure}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="5" heading="个人考核结果"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>考核时间</th><th>考核项目</th><th>考核结果</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.perAssessment"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.assessmentTime}}</td><td>{{item.assessmentItem}}</td><td>{{item.assessmentResult}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab></uib-tabset></td>'),t.put("app/techFiles/techFiles/techFiles.tpl.html",'<div class="col-md-2" print-remove=""><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter: vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode)" class="sublist__item">{{subItem.deptName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>人员数据</span><div class="pull-right"><button print-btn="" class="btn btn-primary btn-xs">打印</button></div></div><div class="panel-body"><table st-table="vm.data" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th></th><th st-sort="hisCode">工号</th><th>姓名</th><th>病区</th><th>出生时间</th><th>性别</th><th>毕业时间</th><th>毕业院校</th><th>获得学位</th><th>操作</th></tr></thead><tbody ng-repeat="row in vm.data"><tr><td grid-expand-trigger="" grid-p="userCode" grid-expand-method="loadDetail" class="trigger"><i class="fa fa-caret-right"></i></td><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td>{{vm.getDeptName(row.deptCode)}}</td><td>{{row.birthday}}</td><td>{{vm.genders[row.gender]}}</td><td>{{row.graduationDate}}</td><td>{{row.graduationSchool}}</td><td>{{row.education}}</td><td data-title="\'操作\'"><button class="btn btn-default btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑员工信息"><span class="fa fa-pencil"></span></button></td></tr><tr grid-expand="" tpl-src="app/techFiles/techFiles/techFiles.detail.html" ng-show="vm.expanedIndex == $index"></tr></tbody></table></div></div></div>'),t.put("app/system/calendar/calendar.tpl.html",'<div class="col-md-12"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>系统日历</span><div class="pull-right"><button ng-click="vm.open()" class="btn btn-default btn-xs">新建日历</button></div></div><div class="panel-body"><div class="calendar-wrapper calendar"><div class="calendar-header"><div class="calendar_ctrl"><button class="btn btn-default btn-xs" ng-click="vm.previousMonth()"><i class="fa fa-angle-left"></i></button> <span class="calendar_current">{{vm.loadParams.year}}年 {{vm.loadParams.month}}月</span> <button class="btn btn-default btn-xs" ng-click="vm.nextMonth()"><i class="fa fa-angle-right"></i></button> <button class="btn btn-default btn-xs" ng-click="vm.resetCalendar()">今天</button></div><div class="calendar_weeks"><div class="weeks-item" ng-repeat="weekItem in vm.weeks">{{weekItem[1]}}</div></div></div><div class="calendar-body"><div class="calendar_empty" ng-if="vm.isEmpty">暂无日历～</div><div class="calendar_grid" ng-if="!vm.isEmpty"><div class="calendar-row" ng-repeat="weekRow in vm.dataList"><div class="calendar_week-count">{{weekRow[0].weeks}}<br>周</div><div class="calendar_day calendar_diable-day" ng-repeat="num in vm.placeholderArr track by $index" ng-if="$parent.$index == 0"></div><div class="calendar_day" ng-repeat="day in weekRow"><div class="day-container"><div class="calendar_day-text" ng-class="{\'current-day\': day.date == vm.currentDate}">{{day.day}}</div><div class="calendar-setting"><a href="" ng-click="vm.openSetting(day)"><i class="fa fa-pencil-square-o"></i></a></div><span class="label label-holiday label-success" ng-if="day.isHoliday">假</span> <span class="label label-weekend label-default" ng-if="day.isWeekend">周末</span></div></div></div></div></div></div></div></div></div>'),t.put("app/system/calendar/calendarCreate.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写日历年份</h5></div><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.metaData.validationOption" name="yearForm"><div class="modal-body"><div class="row"><div class="col-sm-12"><input class="form-control input-sm" maxlength="4" required="" ng-model="vm.formData.year" id="calendarYear" name="calendarYear" type="text" placeholder="填写年份，如：2016"></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),t.put("app/system/calendar/calendarSetting.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">编辑日历信息</h5></div><form class="calendar-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.metaData.validationOption" name="yearForm"><div class="modal-body"><div class="calendar-form_date-info row"><div class="col-md-4">{{vm.formData.date}}</div><div class="col-md-4">{{vm.formData.weekText}}</div><div class="col-md-4">第{{vm.formData.weeks}}周</div></div><div class="form-group"><input type="checkbox" ng-true-value="1" ng-false-value="0" id="isWeekend" ng-model="vm.formData.isWeekend" ng-checked="vm.formData.isWeekend == 1"> <label for="isWeekend">是否周末</label></div><div class="form-group"><input type="checkbox" ng-true-value="1" ng-false-value="0" id="isHoliday" ng-model="vm.formData.isHoliday" ng-checked="vm.formData.isHoliday == 1"> <label for="isHoliday">是否节假日</label></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),t.put("app/system/roles/addRole.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写角色信息</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="userForm"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">角色名称：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.roleName" id="roleName" name="roleName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" name="remark" ng-model="vm.formData.remark"></textarea></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),t.put("app/system/roles/roles.tpl.html",'<div class="col-md-2"><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>角色列表</span></div><div class="panel-body list"><ul class="sublist"><li ng-repeat="item in vm.roleData" class="accordion-item" ng-class="{\'active\': item.roleCode === vm.roleDetail.roleCode}"><a ng-click="vm.load(item)" data-role-code="{{item.roleCode}}" class="sublist__item">{{item.roleName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>角色信息</span><div class="pull-right"><button ng-click="vm.open()" class="btn btn-default btn-xs">添加角色</button></div></div><div class="panel-body"><form data-role-id="{{vm.roleDetail.seqId}}" class="form form-horizontal w5c-form role-edit-form change-user-form" novalidate="" w5c-form-validate="vm.validationOption" name="roleEditForm"><div class="container-fluid"><div class="col-md-6"><div class="form-group"><label for="roleCode" class="col-sm-3 control-label">角色编号：</label><div class="col-sm-9"><input class="form-control input-sm" ng-model="vm.roleDetail.roleCode" id="roleCode" name="roleCode" type="text"></div></div><div class="form-group"><label for="roleName" class="col-sm-3 control-label">角色名称：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.roleDetail.roleName" id="roleName" name="roleName" type="text"></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" ng-disabled="" w5c-form-submit="vm.edit()">保存</button> <button class="btn btn-sm btn-danger" type="button" ng-disabled="" ng-click="vm.del()">删除</button></div></div></div><div class="col-md-6"><div class="form-group"><label for="remark" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" id="remark" name="remark" ng-model="vm.roleDetail.remark"></textarea></div></div></div></div><div class="navgation-edition container-fluid" ng-if="vm.roleDetail"><div class="col-md-5"><div class="panel panel-danger"><div class="panel-heading"><i class="fa fa-bars"></i> <span>未添加的功能</span></div><uib-accordion class="list-accordion" close-others="false"><uib-accordion-group ng-repeat="item in vm.notHaveList" panel-class="list__title" is-open="item.isOpen"><uib-accordion-heading><span class="dept-list__text">{{item.funName}}</span> <i class="pull-right fa" ng-class="{\'fa-angle-down\': item.isOpen, \'fa-angle-right\': !item.isOpen}"></i></uib-accordion-heading><ul class="dept-sublist"><li ng-repeat="subItem in item.child"><a ng-click="vm.navExchange(item, subItem, $parent.$index, $index, \'add\')" class="sublist__item">{{subItem.funName}}</a></li></ul></uib-accordion-group></uib-accordion></div></div><div class="col-md-2 exchange-icon"><div class="text-center"><i class="fa fa-exchange"></i></div></div><div class="col-md-5"><div class="panel panel-success"><div class="panel-heading"><i class="fa fa-bars"></i> <span>已添加的功能</span></div><uib-accordion class="list-accordion" close-others="false"><uib-accordion-group ng-repeat="item in vm.hadList" panel-class="list__title" is-open="item.isOpen"><uib-accordion-heading><span class="dept-list__text">{{item.funName}}</span> <i class="pull-right fa" ng-class="{\'fa-angle-down\': item.isOpen, \'fa-angle-right\': !item.isOpen}"></i></uib-accordion-heading><ul class="dept-sublist"><li ng-repeat="subItem in item.child"><a ng-click="vm.navExchange(item, subItem, $parent.$index, $index, \'remove\')" class="sublist__item">{{subItem.funName}}</a></li></ul></uib-accordion-group></uib-accordion></div></div></div></form></div></div></div>'),t.put("app/system/users/addExistRole.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">编辑用户角色信息</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="userForm"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">角色名称：</label><div class="col-sm-9"><select class="form-controll input-sm" ng-options="role.roleName for role in vm.metaData.roleList track by role.roleCode" name="userName" ng-model="vm.formData.role"></select></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">所属科室：</label><div class="col-sm-9"><select class="form-controll input-sm" ng-options="dept.deptName for dept in vm.metaData.deptList track by dept.deptCode" name="dept" ng-model="vm.formData.dept"></select></div></div></div></div></form></div><div class="modal-footer"><button class="btn btn-sm btn-success {{vm.roleBtnStatus.state}}" type="button" ng-click="vm.formData = {data: [{roleCode:vm.formData.role.roleCode,deptCode: vm.formData.dept.deptCode, userId: vm.metaData.currentUser.seqId}]}; vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div>'),t.put("app/system/users/addUser.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写角色信息</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="userForm"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">所属部门：</label><div class="col-sm-9"><input type="hidden" name="deptCode" ng-model="vm.formData.deptCode"> <input class="form-control input-sm" required="" ng-model="vm.formData.deptName" readonly="" id="deptCode" type="text"></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label">用户姓名：</label><div class="col-sm-9"><select class="form-controll input-sm" name="userName" ng-model="vm.formData.userName" ng-change="vm.formData.userCode = (vm.metaData.userList | filter:vm.formData.userName)[0].userCode"><option ng-repeat="user in vm.metaData.userList" value="{{user.userName}}">{{user.userName}}</option></select></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label">用户编号：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.userCode" id="userCode" readonly="" name="userCode" type="text"></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label">登录名：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.loginName" id="loginName" name="loginName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">密码：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.password" id="password" name="password" type="text"></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),t.put("app/system/users/users.detail.html",'<td colspan="{{tdLen}}"><table st-table="vm.userRoleList" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th>角色编号</th><th>所属部门</th><th>角色名称</th><th>操作</th></tr></thead><tbody><tr class="row-{{$index}}" ng-repeat="row in vm.userRoleList"><td>{{row.roleCode}}</td><td>{{row.deptName}}</td><td>{{row.roleName}}</td><td><button class="btn btn-danger btn-xs" uib-tooltip="删除角色" ng-click="vm.delUserRole(row.seqId)" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></tbody></table><none-data-info list="vm.userRoleList"></none-data-info></td>'),t.put("app/system/users/users.tpl.html",'<div class="col-md-2"><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list" full-height=""><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><uib-accordion class="list-accordion"><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode, vm.deptData.deptName)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter:vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode, subItem.deptName)" class="sublist__item">{{subItem.deptName}}</a></li></ul></uib-accordion></div></div></div><div class="col-md-10"><div class="panel panel-layout panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>用户信息</span><div class="pull-right"><button ng-click="vm.open()" class="btn btn-default btn-xs" ng-disabled="!vm.selectedDept">添加用户</button></div></div><div class="panel-body"><table print-table="vm.list" st-table="vm.list" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered"><thead><tr class="header-export"><th></th><th>员工编号</th><th>用户姓名</th><th>登录名</th><th print-remove="">操作</th></tr></thead><tbody ng-repeat="row in vm.list"><tr class="row-{{$index}}" ng-class="{\'info\': row.userCode === vm.selectedUser.userCode}"><td grid-expand-trigger="" grid-p="seqId" grid-expand-method="showRole" class="trigger"><i class="fa fa-caret-right"></i></td><td>{{row.userCode}}</td><td>{{row.userName}}</td><td>{{row.loginName}}</td><td><a href="javascript:;" ng-click="vm.open(row)" ng-if="!row.isEditing">编辑</a> ｜ <span ng-if="vm.expanedIndex == $index"><a href="javascript:;" ng-click="vm.openRole()">添加角色</a> ｜</span> <a href="javascript:;" class="danger-text" ng-click="vm.del(row.seqId)" ng-if="!row.isEditing">删除</a></td></tr><tr grid-expand="" tpl-src="app/system/users/users.detail.html" ng-show="vm.expanedIndex == $index && vm.expanded"></tr></tbody></table><none-data-info list="vm.list"></none-data-info></div></div></div>'),t.put("app/common/tpls/timepicker/timepicer.html",'<div class="uib-timepicker"><div class="form-input"><div class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}"><input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()"><div class="time-spinner" ng-show="::showSpinners"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link time-spinner_btn" ng-disabled="noIncrementHours()" tabindex="-1"><span class="fa fa-chevron-up"></span></a> <a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link time-spinner_btn" ng-disabled="noDecrementHours()" tabindex="-1"><span class="fa fa-chevron-down"></span></a></div></div><div class="uib-separator" ng-show="showMinutes">:</div><div class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}" ng-show="showMinutes"><input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()"><div class="time-spinner" ng-show="::showSpinners"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link time-spinner_btn" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="fa fa-chevron-up"></span></a> <a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link time-spinner_btn" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="fa fa-chevron-down"></span></a></div></div><div class="uib-separator" ng-show="showSeconds">:</div><div class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds"><input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()"><div class="time-spinner" ng-show="::showSpinners"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link time-spinner_btn" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="fa fa-chevron-up"></span></a> <a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link time-spinner_btn" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="fa fa-chevron-down"></span></a></div></div><div ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></div></div></div>')}]);