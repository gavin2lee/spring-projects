!function(){"use strict";angular.module("nqms",["ngLocale","ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","toastr","w5c.validator","ngTable","AngularPrint","ui.grid"])}(),function(){"use strict";function e(){return{restrict:"A",templateUrl:function(e,t){return t.tplSrc||""},link:function(e,t){t.addClass("tr-expand")}}}function t(){return{restrict:"A",template:"<i class=\"fa\" ng-class=\"{'fa-caret-right': !expandArr[$index], 'fa-caret-down': expandArr[$index]}\">",link:function(e,t){var a=t.parent()[0];e.expandArr=new Array(e.row.length),t.addClass("td-expand"),t.bind("click",function(){var t=a.querySelectorAll("td").length;e.tdLen=t,e.expandArr[e.$index]=!e.expandArr[e.$index]})}}}angular.module("nqms").directive("gridExpand",e).directive("gridExpandTrigger",t)}(),function(){"use strict";function e(){return{require:"^stTable",template:'<input type="checkbox"/>',scope:{row:"=gridCheckbox"},link:function(e,t,a,l){t.bind("change",function(){e.$apply(function(){l.select(e.row,"multiple")})}),e.$watch("row.isSelected",function(e){e===!0?t.parent().addClass("active"):t.parent().removeClass("active"),t.children()[0].checked="undefined"!=typeof e?e:!1})}}}angular.module("nqms").directive("gridCheckbox",e)}(),function(){"use strict";function e(){return{restrict:"E",template:'<input type="checkbox" ng-model="isAllSelected" />',scope:{all:"="},link:function(e){e.$watch("isAllSelected",function(){"undefined"!=typeof e.all&&e.all.forEach(function(t){t.isSelected=e.isAllSelected})}),e.$watch("all",function(t,a){a&&a.forEach(function(e){e.isSelected=!1}),e.isAllSelected=!1})}}}angular.module("nqms").directive("gridCheckAll",e)}(),function(){"use strict";function e(e,t,a){function l(e){var a=r.getNurseList;return t[a.method](a.url,{params:{deptCode:e}})}function s(e){var a=r.updateNurseInfo;return t[a.method](a.url,{comUser:e,dataType:"comUser"})}function o(e){return function(a){var l=r[e].getter;return t[l.method](l.url,{userCode:a})}}function n(e){return function(a){var l=r[e].setter;return t[l.method](l.url,a)}}function i(e){return function(a){var l=r[e].deleter;return t[l.method](l.url,{params:{seqId:a}})}}var r=a.techFiles,d={getNurseList:l,updateNurseInfo:s,getNurseHirReg:o("nurseHirReg"),saveNurseHirReg:n("nurseHirReg"),deleteNurseHirReg:i("nurseHirReg"),getNurseExp:o("nurseExp"),saveNurseExp:n("nurseExp"),deleteNurseExp:i("nurseExp"),getAcademic:o("academic"),saveAcademic:n("academic"),deleteAcademic:i("academic"),getAwardPunish:o("awardPunish"),saveAwardPunish:n("awardPunish"),deleteAwardPunish:i("awardPunish"),getPerAssessment:o("perAssessment"),savePerAssessment:n("perAssessment"),deletePerAssessment:i("perAssessment")};return d}e.$inject=["$window","$http","apiHost"],angular.module("nqms").factory("techFilesService",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(t){o.delNurseJCI(t).then(function(t){e.$broadcast("toast",{type:"success",content:"删除成功"}),r()})}function i(e){var t=a.open({templateUrl:"app/techFiles/techFiles/modal.tpl.html",controller:"TechModalController",backdrop:"static",controllerAs:"vm",animation:!0,size:"xlg",resolve:{id:function(){return angular.extend({deptCode:c.selectedDept},e)}}});t.result["finally"](function(){r(),c.selectedUserId=""})}function r(e){e?c.selectedDept=e:e=c.selectedDept,o.getNurseList(e).then(function(e){var t=e.data.data.lst;c.tableParams=new s({},{dataset:t})})}function d(e){c.selectedUserId=e,o.getNurseHirReg(e).then(function(e){c.detail.nurseHirReg=e.data.data}),o.getNurseExp(e).then(function(e){c.detail.nurseExp=e.data.data}),o.getAcademic(e).then(function(e){c.detail.academic=e.data.data}),o.getAwardPunish(e).then(function(e){c.detail.awardPunish=e.data.data}),o.getPerAssessment(e).then(function(e){c.detail.perAssessment=e.data.data})}var c=this;c.rootScope=e,c.scope=t,c.del=n,c.open=i,c.load=r,c.loadDetail=d,c.detail={},l.getDeptData().then(function(e){c.deptData=e,c.getDeptName=_.memoize(function(t){var a;return _.some(e.belongedDepts,function(e){return e.deptCode==t?(a=e.deptName,!0):void 0}),a})})}e.$inject=["$rootScope","$scope","$uibModal","deptService","NgTableParams","techFilesService"],angular.module("nqms").controller("TechFileController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){y.getNurseHirReg(),y.getNurseExp(),y.getAcademic(),y.getAwardPunish(),y.getPerAssessment()}function d(){n.updateNurseInfo(b.detail.info).then(function(){e.$broadcast("toast",{type:"success",content:"保存成功"})})}function c(){a.dismiss()}function m(e){b.detail[e].push(angular.copy(k[e]))}function u(t,a){var l=n["save"+h(t)],s=y["get"+h(t)],a=angular.extend({},a);v(a),l(a).then(function(){e.$broadcast("toast",{type:"success",content:"保存成功"}),s()})}function p(t,a,l){if(a){var s=n["delete"+h(t)],o=y["get"+h(t)];s(a).then(function(){e.$broadcast("toast",{type:"success",content:"删除成功"}),o()})}else b.detail[t].splice(l,1)}function v(e){for(var t in e)t.indexOf("IsOpen")>-1&&delete e[t];return e.userCode=f.userCode,e.userName=f.userName,e}var b=this,f=i,g=f.userCode,h=l("capitalize"),D=l("filter"),y={getNurseHirReg:function(){n.getNurseHirReg(g).then(function(e){b.detail.nurseHirReg=e.data.data})},getNurseExp:function(){n.getNurseExp(g).then(function(e){b.detail.nurseExp=e.data.data})},getAcademic:function(){n.getAcademic(g).then(function(e){b.detail.academic=e.data.data})},getAwardPunish:function(){n.getAwardPunish(g).then(function(e){b.detail.award=D(e.data.data,{apType:1}),b.detail.punish=D(e.data.data,{apType:2})})},getPerAssessment:function(){n.getPerAssessment(g).then(function(e){b.detail.perAssessment=e.data.data})}},k={nurseHirReg:{},nurseExp:{rank:"一般专科护士"},academic:{},award:{apType:1},punish:{apType:2},perAssessment:{}};o.getDeptData().then(function(e){b.deptData=e.belongedDepts}),b.detail={info:f},b.rankArray=["一般专科护士","高级专科护士","临床护理专家"],b.save=d,b.cancel=c,b.addItem=m,b.saveItem=u,b.removeItem=p,r()}e.$inject=["$rootScope","$scope","$uibModalInstance","$filter","NgTableParams","deptService","techFilesService","id"],angular.module("nqms").controller("TechModalController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){D.getPosStatement(),D.getPreJobTrain(),D.getAssessment(),D.getConEducation(),D.getCprAcls(),D.getEduRecord()}function d(){n.updateNurseInfo(b.detail.info).then(function(){e.$broadcast("toast",{type:"success",content:"保存成功"})})}function c(){a.dismiss()}function m(e){b.detail[e].push(angular.copy(y[e]))}function u(t,a){var l=n["save"+h(t)],s=D["get"+h(t)],a=angular.extend({},a);v(a),l(a).then(function(){e.$broadcast("toast",{type:"success",content:"保存成功"}),s()})}function p(t,a,l){if(a){var s=n["delete"+h(t)],o=D["get"+h(t)];s(a).then(function(){e.$broadcast("toast",{type:"success",content:"删除成功"}),o()})}else b.detail[t].splice(l,1)}function v(e){for(var t in e)t.indexOf("IsOpen")>-1&&delete e[t];return e.userCode=f.userCode,e.userName=f.userName,e}var b=this,f=i,g=f.userCode,h=l("capitalize"),D={getPosStatement:function(){n.getPosStatement(g).then(function(e){b.detail.posStatement=e.data.data})},getPreJobTrain:function(){n.getPreJobTrain(g).then(function(e){b.detail.preJobTrain=e.data.data})},getAssessment:function(){n.getAssessment(g).then(function(e){b.detail.assessment=e.data.data})},getConEducation:function(){n.getConEducation(g).then(function(e){b.detail.conEducation=e.data.data})},getCprAcls:function(){n.getCprAcls(g).then(function(e){b.detail.cprAcls=e.data.data})},getEduRecord:function(){n.getEduRecord(g).then(function(e){b.detail.eduRecord=e.data.data})}},y={posStatement:{},preJobTrain:{rank:"全院",assessmentCondition:"合格"},assessment:{},conEducation:{rank:"全院"},cprAcls:{assessmentContent:"合格"},eduRecord:{rank:"全院",assessmentResult:"合格"}};b.detail={info:f},b.rankArray=["全院","护理部","科室"],b.resultArray=["合格","不合格"],b.save=d,b.cancel=c,b.addItem=m,b.saveItem=u,b.removeItem=p,r()}e.$inject=["$rootScope","$scope","$uibModalInstance","$filter","NgTableParams","deptService","techFilesJCIService","id"],angular.module("nqms").controller("JCIModalController",e)}(),function(){"use strict";function e(e,t,a){function l(e){var a=r.getNurseList;return t[a.method](a.url,{params:{deptCode:e}})}function s(e){var a=r.updateNurseInfo;return t[a.method](a.url,{comUser:e,dataType:"comUser"})}function o(e){return function(a){var l=r[e].getter;return t[l.method](l.url,{userCode:a})}}function n(e){return function(a){var l=r[e].setter;return t[l.method](l.url,a)}}function i(e){return function(a){var l=r[e].deleter;return t[l.method](l.url,{params:{seqId:a}})}}var r=a.techFiles,d={getNurseList:l,updateNurseInfo:s,getPosStatement:o("posStatement"),savePosStatement:n("posStatement"),deletePosStatement:i("posStatement"),getPreJobTrain:o("preJobTrain"),savePreJobTrain:n("preJobTrain"),deletePreJobTrain:i("preJobTrain"),getAssessment:o("assessment"),saveAssessment:n("assessment"),deleteAssessment:i("assessment"),getConEducation:o("conEducation"),saveConEducation:n("conEducation"),deleteConEducation:i("conEducation"),getCprAcls:o("cprAcls"),saveCprAcls:n("cprAcls"),deleteCprAcls:i("cprAcls"),getEduRecord:o("eduRecord"),saveEduRecord:n("eduRecord"),deleteEduRecord:i("eduRecord")};return d}e.$inject=["$window","$http","apiHost"],angular.module("nqms").factory("techFilesJCIService",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(t){o.delNurseJCI(t).then(function(t){e.$broadcast("toast",{type:"success",content:"删除成功"}),r()})}function i(e){var t=a.open({templateUrl:"app/techFiles/jci/modal.tpl.html",controller:"JCIModalController",controllerAs:"vm",backdrop:"static",animation:!0,size:"xlg",resolve:{id:function(){return angular.extend({deptCode:c.selectedDept},e)}}});t.result["finally"](function(){r(),c.selectedUserId=""})}function r(e){e?c.selectedDept=e:e=c.selectedDept,o.getNurseList(e).then(function(e){var t=e.data.data.lst;c.tableParams=new s({},{dataset:t})})}function d(e){c.selectedUserId=e,o.getPosStatement(e).then(function(e){c.detail.posStatement=e.data.data}),o.getPreJobTrain(e).then(function(e){c.detail.preJobTrain=e.data.data}),o.getAssessment(e).then(function(e){c.detail.assessment=e.data.data}),o.getConEducation(e).then(function(e){c.detail.conEducation=e.data.data}),o.getCprAcls(e).then(function(e){c.detail.cprAcls=e.data.data}),o.getEduRecord(e).then(function(e){c.detail.eduRecord=e.data.data})}var c=this;c.rootScope=e,c.scope=t,c.del=n,c.open=i,c.load=r,c.loadDetail=d,c.detail={},l.getDeptData().then(function(e){c.deptData=e})}e.$inject=["$rootScope","$scope","$uibModal","deptService","NgTableParams","techFilesJCIService"],angular.module("nqms").controller("TechFileJCIController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e){function s(e){l.error("获取用户数据失败！\n"+angular.toJson(e.data,!0))}return a.get(t.users.getUserList,{params:{deptCode:e}}).then(m)["catch"](s)}function i(e){return a.post(t.users.deleteUser,{seqId:e}).then(m)}function r(e){return a.post(t.users.saveUser,e).then(m)}function d(e){return a.post(t.users.saveUserRole,e).then(m)}function c(e){return a.post(t.users.deleteUserRole,e).then(m)}function m(e){return"0"===e.data.code?e:void 0}var u={getUserList:n,deleteUser:i,save:r,saveUserRole:d,deleteUserRole:c};return u}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("usersService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,d){function c(e,a){h.selectedDept=e,h.selectedUser=!1,D.formData={deptCode:e,deptName:a},n.getUserList(e).then(function(e){"0"===e.data.code&&(h.tableParams=new s({},{dataset:e.data.data}))}),i.getUserList(e).then(function(e){e&&(D.metaData.userList=e,t.info(e))})}function m(e){if(e)D.formData=angular.extend({},D.formData,e);else for(var t in D.formData)D.formData.hasOwnProperty(t)&&"deptCode"!==t&&"deptName"!==t&&delete D.formData[t];r.open({templateUrl:"app/system/users/addUser.tpl.html",ok:v,size:"md",data:D})}function u(e){var t="app/system/roles/addRole.tpl.html";e?(y.formData=angular.extend({},y.formData,e),r.open({templateUrl:t,ok:v,size:"md",data:y})):(t="app/system/users/addExistRole.tpl.html",d.getUserRoleList({userId:d.currentUser.user.seqId}).then(function(e){y.metaData.roleList=e.data.data,y.metaData.currentUser=h.selectedUser,y.metaData.deptList=angular.extend([],h.deptData.belongedDepts),y.metaData.deptList.unshift({deptCode:h.deptData.deptCode,deptName:h.deptData.deptName}),y.metaData.deptList=angular.extend({},[D.formData]),y.metaData.hadRoleList=h.userRoleList.map(function(e){return e.roleCode}),r.open({templateUrl:t,ok:b,size:"md",data:y})}))}function p(e){n.deleteUser(e).then(function(e){e&&"0"===e.data.code&&(o.success("删除成功！","提示"),c(D.formData.deptCode,D.formData.deptName),r.close("success"))})}function v(e){n.save(e).then(function(e){e&&"0"===e.data.code&&(o.success("已保存！","提示"),c(D.formData.deptCode,D.formData.deptName),r.close("success"))})}function b(e){n.saveUserRole(e).then(function(e){e&&"0"===e.data.code&&(o.success("添加成功！","提示"),f(h.selectedUser),r.close("success"))})}function f(e){h.selectedUser=e,d.getUserRoleList({userId:e.seqId}).then(function(e){h.userRoleList=e.data.data,h.roleTableParams=new s({},{dataset:e.data.data})})}function g(e){n.deleteUserRole(e).then(function(e){e&&"0"===e.data.code&&(o.success("删除成功！","提示"),f(h.selectedUser),r.close("success"))})}var h=this,D={formData:{},metaData:{}},y={formData:{},metaData:{}};l.getDeptData().then(function(e){h.deptData=e}),h.del=p,h.open=m,h.delUserRole=g,h.openRole=u,h.showRole=f,h.selectedDept=null,h.load=c}e.$inject=["$scope","$log","$uibModal","deptService","NgTableParams","toastr","usersService","filesService","modalService","security"],angular.module("nqms").controller("UsersController",e)}(),function(){"use strict";function e(e,t,a,l,s){function o(){a.save(i.role).then(function(a){a&&"0"===a.data.code?(s.success("添加成功！","提示"),e.dismiss("cancel"),l.getUserRoleList(),t.$apply()):s.error("保存失败","警告")})}function n(){e.dismiss("cancel")}var i=this;i.cancel=n,i.save=o}e.$inject=["$uibModalInstance","$rootScope","rolesService","security","toastr"],angular.module("nqms").controller("RolesModalController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e){function s(e){return"0"===e.data.code?e:void l.error("获取用户数据失败！\n"+e.data.msg)}function o(e){l.error("获取用户数据失败！\n"+angular.toJson(e.data,!0))}return a.get(t.roles.getHaveFunction,{params:{roleCode:e}}).then(s)["catch"](o)}function i(e){function s(e){return"0"===e.data.code?e:void l.error("获取用户数据失败！\n"+e.data.msg)}function o(e){l.error("获取用户数据失败！\n"+angular.toJson(e.data,!0))}return a.get(t.roles.getNotHaveFunction,{params:{roleCode:e}}).then(s)["catch"](o)}function r(e){return a.post(t.roles.updateRole,e).then(function(e){return"0"===e.data.code?e:null})}function d(e){return a.post(t.roles.saveRole,e).then(function(e){return"0"===e.data.code?e:null})["catch"](function(e){})}function c(e){return a.post(t.roles.deleteRole,e).then(function(e){return"0"===e.data.code?e:null})}var m={getHaveFunction:n,getNotHaveFunction:i,save:d,edit:r,del:c};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("rolesService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,d){function c(e){var l=s.getNotHaveFunction(e.roleCode),o=s.getHaveFunction(e.roleCode);g.roleDetail=e,a.all([l,o]).then(function(e){t.info(e),g.notHaveList=e[0]&&"0"===e[0].data.code?e[0].data.data:[],g.hadList=e[1]&&"0"===e[1].data.code?e[1].data.data:[]})}function m(){i.open({templateUrl:"app/system/roles/addRole.tpl.html",size:"md",ok:v})}function u(){var e={seqId:g.roleDetail.seqId,roleCode:g.roleDetail.roleCode};s.del(e).then(function(e){e&&(o.success("该角色已删除","提示"),g.roleDetail=null,f())})}function p(){var e=angular.copy(g.roleDetail),a=[];e.funs=angular.copy(g.hadList),e.funs.forEach(function(e,t){a=a.concat(e.child),e.child=[]}),e.funs=e.funs.concat(a),delete e.updateTime,delete e.createTime,t.info(e),s.edit(e).then(function(e){t.info(e),e&&"0"===e.data.code?(o.success("保存成功！","提示"),t.info(g.hadList)):o.error(e.data.msg,"警告")})}function v(e){s.save(e).then(function(e){e&&"0"===e.data.code?(o.success("添加成功！","提示"),i.close("success"),f()):o.error("保存失败","警告")})}function b(e,t,a,l,s){var o,n="add"===s?g.hadList:g.notHaveList,i="add"===s?g.notHaveList:g.hadList;n.some(function(a,l){return a.funCode===e.funCode?(a.child.push(t),!0):void(l===n.length-1&&(o=angular.copy(e),o.child=[t],n.push(o)))}),0===n.length&&(o=angular.copy(e),o.child=[t],n.push(o)),e.child.splice(l,1),0===e.child.length&&i.splice(a,1)}function f(){r.getUserRoleList().then(function(e){g.roleData=e.data.data})}var g=this;r.getUserRoleList().then(function(e){g.roleData=e.data.data});g.del=u,g.edit=p,g.open=m,g.navExchange=b,g.load=c}e.$inject=["$scope","$log","$q","$uibModal","rolesService","toastr","NgTableParams","modalService","security","$injector"],angular.module("nqms").controller("RolesController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.research.deleteResearchPaper,{seqId:e}).then(c)}function r(e){return a.post(t.research.saveResearchPaper,e).then(c)}function d(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.research.getResearchPapers,{params:e}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var m={getResearchPapers:d,saveResearchPaper:r,deleteResearchPaper:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("paperService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){s.getResearchPapers().then(function(e){e&&(v.lst=e.data.data.lst,v.tableParams=new a({},{dataset:v.lst}))})}function d(e){v.formData=e,p()}function c(){v.formData={},p()}function m(){s.saveResearchPaper(v.formData).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),r(),o.close("success"))})}function u(e){s.deleteResearchPaper(e).then(function(e){e&&"0"===e.data.code&&(n.success("已删除！","提示"),r(),o.close("success"))})}function p(){v.formData.deptCode=v.deptCode,o.open({templateUrl:"app/research/papers/papers.model.html",size:"md",ok:m,data:{formData:v.formData}})}var v=this;v.savePaper=m,v.edit=d,v.deletePapers=u,v.formData={},v.add=c,v.deptCode=i.getUserinfo().role.deptCode,r()}e.$inject=["$scope","$log","NgTableParams","$filter","paperService","modalService","toastr","security"],angular.module("nqms").controller("ResearchPapersController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.research.deleteResearchItem,{seqId:e}).then(c)}function r(e){return a.post(t.research.saveResearchItem,e).then(c)}function d(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.research.getResearchItems,{params:e}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var m={getResearchItems:d,saveResearchItem:r,deleteResearchItem:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("researchItemService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){l.getResearchItems().then(function(e){e&&(p.lst=e.data.data.lst,p.tableParams=new a({},{dataset:p.lst}))})}function r(e){v=e,u()}function d(){v={},u()}function c(){l.saveResearchItem(v).then(function(e){e&&"0"===e.data.code&&(o.success("保存成功！","提示"),i(),s.close("success"))})}function m(e){l.deleteResearchItem(e).then(function(e){e&&"0"===e.data.code&&(o.success("已删除！","提示"),i(),s.close("success"))})}function u(){v.deptCode=p.deptCode,s.open({templateUrl:"app/research/item/item.model.html",size:"md",ok:c,data:{formData:v}})}var p=this,v={};p.saveGroup=c,p.edit=r,p.deleteGroup=m,p.add=d,p.deptCode=n.getUserinfo().role.deptCode,p.open=u,i()}e.$inject=["$scope","$log","NgTableParams","researchItemService","modalService","toastr","security"],angular.module("nqms").controller("ResearchItemController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){var l={};return l.seqId=e,a.get(t.qualityManager.deleteQualityTask,{params:l}).then(u)}function r(e){return a.post(t.qualityManager.editQualityTask,e).then(u)}function d(e){return a.post(t.qualityManager.saveQualityTask,e).then(u)}function c(e,l,s){var o={};return l?o.deptCode=l:"",s?o.type=s:"",e?o.date=e:"",a.get(t.qualityManager.getQualityTaskList,{params:o}).then(u)}function m(){return a.get(t.qualityManager.getAllQualityForm,{}).then(u)}function u(e){return"0"===e.data.code?e:void 0}var p={getTaskList:c,saveTask:d,deleteTask:i,editTask:r,getAllQualityForm:m};return p}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("taskService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){s.getTaskList(w,k,x).then(function(e){e&&(D.lst=e.data.data,D.tableParams=new a({},{dataset:D.lst}))})}function d(){s.getAllQualityForm().then(function(e){e&&(D.formList=e.data.data,D.tableParams=new a({},{dataset:D.formList}),y.metaData.qualityFormList=angular.extend({},D.formList))})}function c(){y={formData:{},metaData:{}},o.open({templateUrl:"app/quality/task/addTask.tpl.html",size:"md",ok:g,data:y,methodsObj:{addDept:u,addMember:v,removeDept:p,removeMember:b,qualityFormList:d}})}function m(e){y.formData=angular.extend({},e),D.selectedLevel=e,e&&(e.deptCode?y.formData.deptList=e.deptCode.split(","):"",e.joinUserName?y.formData.memberList=e.joinUserName.split(","):""),o.open({templateUrl:"app/quality/task/addTask.tpl.html",size:"md",ok:f,data:y,methodsObj:{addDept:u,addMember:v,removeDept:p,removeMember:b,qualityFormList:d}})}function u(){var e=this;""!==e.deptText&&(e.formData.deptList=e.formData.deptList||[],e.formData.deptList.push(e.deptText),e.deptText="")}function p(e){var t=this;t.formData.deptList.splice(e,1)}function v(){var e=this;""!==e.memberText&&(e.formData.memberList=e.formData.memberList||[],e.formData.memberList.push(e.memberText),e.memberText="")}function b(e){var t=this;t.formData.memberList.splice(e,1)}function f(){var e,t,a;e=angular.extend({},y.formData),a=e.taskDate,e.deptCode=e.deptList?e.deptList.join(","):"",e.joinUserName=e.memberList?e.memberList.join(","):"",e.formCode=e.formCode.formCode,e.taskDate=moment(a).format("YYYY-MM-DD"),t=e.createTime,e.createTime=moment(parrent_create_Time).format("YYYY-MM-DD hh:mm:ss"),s.editTask(e).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),r(),D.formData={},o.close("success"))})}function g(){var e=angular.extend({},y.formData),t=e.taskDate;e.deptCode=e.deptList?e.deptList.join(","):"",e.joinUserName=e.memberList?e.memberList.join(","):"",e.formCode=e.formCode.formCode,e.taskDate=moment(t).format("YYYY-MM-DD"),s.saveTask(e).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),r(),D.formData={},o.close("success"))})}function h(e){s.deleteTask(e).then(function(e){e&&"0"===e.data.code&&(n.success("已删除！","提示"),r(),D.formData={},o.close("success"))})}var D=this,y={formData:{},metaData:{}},k="",x="",w="2016-04";D.addTask=c,D.saveEditTask=f,D.saveTask=g,D.editTask=m,D.deleteTask=h,D.addDept=u,D.addMember=v,D.removeDept=p,D.removeMember=b,D.qualityFormList=d,D.deptCode=i.getUserinfo().role.deptCode,r(),d()}e.$inject=["$scope","$log","NgTableParams","$filter","taskService","modalService","toastr","security"],angular.module("nqms").controller("QualityTaskController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){var l={};return l.seqId=e,a.get(t.qualityManager.deleteQualityForm,{params:l}).then(m)}function r(e){return a.post(t.qualityManager.editQualityForm,e).then(m)}function d(e){return a.post(t.qualityManager.saveQualityForm,e).then(m)}function c(e,l){var s={};return e?s.deptCode=e:"",l?s.type=l:"",a.get(t.qualityManager.getQualityFormList,{params:s}).then(m)}function m(e){return"0"===e.data.code?e:void 0}var u={getFormList:c,saveForm:d,deleteForm:i,editForm:r};return u}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("formService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,d,c,m){function u(){e.getFormList(C,L).then(function(e){e&&(x.lst=e.data.data,x.tableParams=new n({},{dataset:x.lst}))})}function p(){w={formData:{},metaData:{}},i.open({templateUrl:"app/quality/form/addForm.tpl.html",size:"lg",ok:h,data:{formData:w.formData},methodsObj:{addDept:v,removeDept:b,addDetailList:f,removeDetailList:g}})}function v(){var e=this;""!==e.deptText&&(e.formData.deptList=e.formData.deptList||[],e.formData.deptList.push(e.deptText),e.deptText="")}function b(e){var t=this;t.formData.deptList.splice(e,1)}function f(e){var t=this;t.detailList&&(t.detailList.detailCode||t.detailList.item||t.detailList.points||t.detailList.stantard)&&(t.detailList.item&&(t.formData.qualityFormDetailList||(t.formData.qualityFormDetailList=[])),t.formData.qualityFormDetailList.push(e),t.detailList={})}function g(e){var t=this;t.formData.qualityFormDetailList.splice(e,1)}function h(){var t=angular.extend({},w.formData);t.deptCode=t.deptList?t.deptList.join(","):"",e.saveForm(t).then(function(e){e&&"0"===e.data.code&&(o.success("保存成功！","提示"),u(),x.formData={},i.close("success"))})}function D(e){w.formData=angular.extend({},e),e&&e.deptCode&&(w.formData.deptList=e.deptCode.split(",")),i.open({templateUrl:"app/quality/form/addForm.tpl.html",size:"lg",ok:y,data:{formData:w.formData},methodsObj:{addDept:v,removeDept:b,addDetailList:f,removeDetailList:g}})}function y(){var t,a,l,s;if(t=angular.extend({},w.formData),t.deptCode=t.deptList?t.deptList.join(","):"",l=t.createTime,t.createTime=moment(l).format("YYYY-MM-DD hh:mm:ss"),t.qualityFormDetailList){a=t.qualityFormDetailList.length;for(var n=0;a>n;n++)s=t.qualityFormDetailList[n].createTime,t.qualityFormDetailList[n].createTime=moment(s).format("YYYY-MM-DD hh:mm:ss")}e.editForm(t).then(function(e){e&&"0"===e.data.code&&(o.success("保存成功！","提示"),u(),x.formData={},i.close("success"))})}function k(t){e.deleteForm(t).then(function(e){e&&"0"===e.data.code&&(o.success("已删除！","提示"),u(),t==x.formData.seqId&&(x.formData={}),i.close("success"))})}var x=this,w={formData:{},metaData:{}},C="",L="";x.saveEditForm=y,x.saveForm=h,x.edit=D,x.del=k,x.addForm=p,x.addDept=v,x.removeDept=b,x.addDetailList=f,x.removeDetailList=g,x.deptCode=r.getUserinfo().role.deptCode,x.filter_type=[{type:"全部"},{type:"1"}],x.filter_area=[{type:"全部"},{type:"1"}],x.filter_type.selected=x.filter_type[0],x.filter_area.selected=x.filter_area[0],u()}e.$inject=["formService","$scope","$log","$q","$uibModal","toastr","NgTableParams","modalService","security","$injector","$state","$location"],angular.module("nqms").controller("QualityFormController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){var l={};return l.seqId=e,a.get(t.qualityManager.deleteQualityDeal,{params:l}).then(p)}function r(e){return a.post(t.qualityManager.saveQualityDeal,e).then(p)}function d(e){var l={};return e?l.resultCode=e:"",a.get(t.qualityManager.getQualityDealList,{params:l}).then(p)}function c(e,l,s){var o={};return e?o.date=e:"",l?o.deptCode=l:"",s?o.type=s:"",a.get(t.qualityManager.getQualityResultCode,{params:o}).then(p)}function m(e,l,s){var o={};return e?o.date=e:"",l?o.deptCode=l:"",s?o.formName=s:"",a.get(t.qualityManager.getQualityCheckDetail,{params:o}).then(p)}function u(){var e={};return a.get(t.qualityManager.getAllQualityForm,{params:e}).then(p)}function p(e){return"0"===e.data.code?e:void 0}var v={getDealList:d,saveDeal:r,deleteDeal:i,getChekcDetail:m,getAllQualityForm:u,getResultCode:c};return v}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("dealService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){return s.getResultCode(k,x,w).then(function(e){return e?(h.result_code=e.data.data,h.tableParams=new a({},{dataset:h.result_code}),h.result_code[0].resultCode):void 0})}function d(e){s.getDealList(e).then(function(e){e&&(h.lst=e.data.data,h.tableParams=new a({},{dataset:h.lst}))})}function c(){s.getAllQualityForm().then(function(e){e&&(h.formList=e.data.data,h.tableParams=new a({},{dataset:h.formList}),D.metaData.qualityFormList=angular.extend({},h.formList))})}function m(){D={formData:{},metaData:{}},c(),o.open({templateUrl:"app/quality/deal/addDeal.tpl.html",size:"lg",ok:b,data:D,methodsObj:{qualityFormList:c,checkDetail:u}})}function u(){var e,t,l,n,i=this;D.metaData={},i.formData.checkDetail&&i.formData.checkDetail.taskDate&&i.formData.checkDetail.deptCode&&i.formData.checkDetail.selectForm.formName&&(n=i.formData.checkDetail.taskDate,e=moment(n).format("YYYY-MM-DD"),t=i.formData.checkDetail.deptCode,l=i.formData.checkDetail.selectForm.formName,s.getChekcDetail(e,t,l).then(function(e){e&&(h.get_lst=e.data.data,h.tableParams=new a({},{dataset:h.get_lst}),D.metaData.checkDetailList=angular.extend({},h.get_lst),g=D.metaData.checkDetailList[0].resultCode)}),o.open({templateUrl:"app/quality/deal/checkDetail.tpl.html",size:"md",data:D,methodsObj:{qualityFormList:c,checkDetail:u}}))}function p(e){D.formData=angular.extend({},e),h.selectedLevel=e,e&&(e.deptCode?D.formData.deptList=e.deptCode.split(","):"",e.joinUserName?D.formData.memberList=e.joinUserName.split(","):""),o.open({templateUrl:"app/quality/deal/addDeal.tpl.html",size:"lg",ok:v,data:D,methodsObj:{qualityFormList:c}})}function v(){var e=angular.extend({},D.formData),t=e.taskDate;e.deptCode=e.deptList?e.deptList.join(","):"",e.joinUserName=e.memberList?e.memberList.join(","):"",e.formCode=e.formCode.formCode,e.taskDate=moment(t).format("YYYY-MM-DD"),s.saveDeal(e).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),d(),h.formData={},o.close("success"))})}function b(){var e=angular.extend({},D.formData);(e.issueContent||e.reasonAnalysis||e.resDescribe||e.resPlan||e.evaluation)&&(e.formName=e.checkDetail.selectForm.formName,e.resultCode=g,e.issueTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),e.reasonTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),e.resDTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),e.resPTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),e.evaluationTime=moment(new Date).format("YYYY-MM-DD hh:mm:ss"),e.issueUserCode=y,e.reasonUserCode=y,e.resDUserCode=y,e.resPUserCode=y,e.evaluationUserCode=y,s.saveDeal(e).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),d(),h.formData={},o.close("success"))}))}function f(e){s.deleteDeal(e).then(function(t){t&&"0"===t.data.code&&(n.success("已删除！","提示"),d(),e==h.formData.seqId&&(h.dataForDealModal.formData={}),o.close("success"))})}var g,h=this,D={formData:{},metaData:{}},y=i.getUserinfo().user.userCode,k="2016-04",x="",w="";h.add=m,h.saveEdit=v,h.save=b,h.edit=p,h.del=f,h.qualityFormList=c,h.deptCode=i.getUserinfo().role.deptCode,h.checkDetail=u,r().then(d)}e.$inject=["$scope","$log","NgTableParams","$filter","dealService","modalService","toastr","security"],angular.module("nqms").controller("QualityDealController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){var l={};return l.seqId=e,a.get(t.qualityManager.deleteQualityCheck,{params:l}).then(c)}function r(e){return a.post(t.qualityManager.editQualityCheck,e).then(c)}function d(e,l,s){var o={};return e?o.date=e:"",l?o.deptCode=l:"",s?o.formCode=s:"",a.get(t.qualityManager.getQualityCheckList,{params:o}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var m={getCheckList:d,saveEditCheck:r,deleteCheck:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("checkService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){s.getCheckList(v,b,f).then(function(e){e&&(u.lst=e.data.data,u.tableParams=new a({},{dataset:u.lst}))})}function d(e){p.formData=angular.extend({},e),o.open({templateUrl:"app/quality/check/editCheck.tpl.html",size:"md",ok:c,data:p})}function c(){var e,t,a,l,i,d,c=0;e=angular.extend({},p.formData),i=e.qualityResultDetailList.length;for(var m=0;i>m;m++)d=e.qualityResultDetailList[m].count,c+=Number(d);if(e.count=c,
a=e.createTime,e.createTime=moment(a).format("YYYY-MM-DD hh:mm:ss"),a=e.updateTime,e.updateTime=moment(a).format("YYYY-MM-DD hh:mm:ss"),e.qualityResultDetailList){t=e.qualityResultDetailList.length;for(var m=0;t>m;m++)l=e.qualityResultDetailList[m].createTime,e.qualityResultDetailList[m].createTime=moment(l).format("YYYY-MM-DD hh:mm:ss"),e.qualityResultDetailList[m].updateTime=moment(l).format("YYYY-MM-DD hh:mm:ss")}s.saveEditCheck(e).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),r(),u.dataForCheckModal={},o.close("success"))})}function m(e){s.deleteCheck(e).then(function(e){e&&"0"===e.data.code&&(n.success("已删除！","提示"),r(),o.close("success"))})}var u=this,p={formData:{},metaData:{}},v="2016-04",b="",f="";u.save=c,u.edit=d,u.del=m,u.deptCode=i.getUserinfo().role.deptCode,r()}e.$inject=["$scope","$log","NgTableParams","$filter","checkService","modalService","toastr","security"],angular.module("nqms").controller("QualityCheckController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r){function d(e){var t={};t[e]=m.count[e],"comUser"==e?(t[e].birthday&&(t[e].birthday=o(t[e].birthday).format("YYYY-MM-DD")),t[e].practiceApproveDate&&(t[e].practiceApproveDate=o(t[e].practiceApproveDate).format("YYYY-MM-DD")),t[e].inductionDate&&(t[e].inductionDate=o(t[e].inductionDate).format("YYYY-MM-DD")),t[e].graduationDate&&(t[e].graduationDate=o(t[e].graduationDate).format("YYYY-MM-DD")),t[e].practiceValidDate&&(t[e].practiceValidDate=o(t[e].practiceValidDate).format("YYYY-MM-DD")),m.count[e].deptCode=l.selectedDeptCode):("comUserFamily"!==e&&(t[e].startDate=o(t[e].startDate).format("YYYY-MM-DD"),t[e].endDate=o(t[e].endDate).format("YYYY-MM-DD")),t[e].map(function(e,t){return e.userCode=l.selectedUser.comUser.userCode,e})),t.dataType=e,l.add(t).then(function(e){e&&(n.success("保存成功！","提示"),l.getUserInfo(m.count.comUser.userCode,m.count.comUser.hisCode).then(function(e){m.accessible=!0,m.rootScope.$broadcast("refreshUserList",l.selectedDeptCode),m.rootScope.$broadcast("refreshUserDetail",e)}))})}function c(){a.dismiss("cancel")}var m=this;m.rootScope=e,m.scope=t,m.deptName=l.selectedDeptName,m.cancel=c,m.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:o(),startingDay:1},m.validationOption={blurTrig:!0},m.accessible=!l.isNew,m.save=d,m.count=l.isNew?{}:angular.extend({},l.selectedUser);var u={comUserPosition:{positionName:"",reviewUnit:"",startDate:"",endDate:""},comUserNursing:{reviewUnit:"",unitLevel:"",deptName:"",position:"",startDate:"",endDate:""},comUserEducation:{educationType:"",leaningTime:"",courseTopics:"",courseContent:"",startDate:"",endDate:""},comUserTraining:{learnContent:"",professional:"",diploma:"",speaker:"",creditType:"",credit:"",funding:"",describe:"",startDate:"",endDate:""},comUserLearning:{school:"",professional:"",diploma:"",diplomaNo:"",degree:"",degreeNo:"",describe:"",startDate:"",endDate:""},comUserFamily:{relation:"",name:"",phone:"",email:"",remark:""}};m.addItem=function(e){m.count[e].push(angular.extend({},u[e]))},m.removeItem=function(e,t,a){a?l.deleteUser(e,a).then(function(a){a&&m.count[e].splice(t,1)}):m.count[e].splice(t,1)},m.openCalender=function(e,t){t?t[e]=!0:m[e]=!0},m.scope.$on("resetCount",function(e,t){m.count=t})}e.$inject=["$rootScope","$scope","$uibModalInstance","filesService","$log","moment","toastr","$window","$controller"],angular.module("nqms").config(["w5cValidatorProvider",function(e){e.config({showError:!1,removeError:!0}),e.setRules({userCode:{number:"必须输入数字"},userName:{required:"姓名不能为空"},duty:{required:"职务不能为空"},email:{required:"邮箱不能为空"},phone:{required:"电话不能为空"},positionName:{required:"必填"},reviewUnit:{required:"必填"}})}]).controller("fileModalController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e,s){function o(e){return"0"===e.data.code?e.data.data:void l.error("获取用户数据失败！\n"+e.data.msg)}function n(e){l.error("获取用户数据失败！\n"+angular.toJson(e.data,!0))}return a.get(t.files.getUserDetailInfo,{params:{userCode:e,hisCode:s}}).then(o)["catch"](n)}function i(e){function s(e){return"0"===e.data.code?(m.userList=e.data.data.lst,m.tableParams=new o({},{dataset:e.data.data.lst}),e.data.data.lst):void l.error("获取用户数据失败！\n"+e.data.msg)}return a.get(t.files.getUserList,{params:{deptCode:e}}).then(s)}function r(e){return m.selectedUser=e,e}function d(e){return a.post(t.files.save,e).then(function(e){return"0"===e.data.code?e:void 0})}function c(e,l){return a.post(t.files["delete"],{dataType:e,delSeqId:l}).then(function(e){return"0"===e.data.code?e:void 0})}var m={selectedUser:{},isNew:!0,selectedDeptCode:"",userList:[],tableParams:null,getUserInfo:n,getUserList:i,setSelectUser:r,add:d,deleteUser:c};return m}e.$inject=["$window","apiHost","$http","$log","$q","NgTableParams"],angular.module("nqms").config(["toastrConfig",function(e){e.tapToDismiss=!0,e.timeOut=0}]).factory("filesService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(e,t){p.selectedDept=e,p.selectedUserCode=!1,n.selectedDeptCode=e,n.selectedDeptName=t,n.getUserList(e).then(function(e){a.info("用户数据",e),p.userDataList=e,p.tableParams=n.tableParams})}function d(e){function t(){l.open({templateUrl:"app/nursingWorkers/files/modal.tpl.html",controller:"fileModalController",backdrop:"static",controllerAs:"vm",animation:!0,size:"xlg"})}n.isNew=!e,e?m(e,t):t()}function c(e){n.deleteUser("comUser",e.seqId).then(function(e){e&&(i.success("删除成功","提示"),p.scope.$emit("refreshUserList",p.selectedDept))})}function m(e,t){p.selectedUserCode=e,n.getUserInfo(e,"").then(function(e){u(e,t)})}function u(e,t){p.detail=angular.extend({},e);var a,l=e;for(a in l)l.hasOwnProperty(a)&&b.forEach(function(e){l[a][e]&&(l[a][e]=new Date(l[a][e])),l[a].length>0&&l[a].map(function(t){return t[e]&&(t[e]=new Date(t[e])),t})});n.selectedUser=l,p.rootScope.$broadcast("resetCount",n.selectedUser),t&&t()}var p=this,v=0,b=["birthday","inductionDate","practiceApproveDate","practiceValidDate","graduationDate","startDate","endDate"];p.rootScope=e,p.scope=t,p.isOpen=!0,s.getDeptData().then(function(e){a.info("科室数据",e),p.deptData=e}),a.info(v),p.del=c,p.open=d,p.load=r,p.loadDetail=m,p.tableParams=n.tableParams,p.scope.$on("refreshUserList",function(e,t){r(t)}),p.scope.$on("refreshUserDetail",function(e,t){p.selectedUserCode=t.comUser.userCode,u(t)})}e.$inject=["$rootScope","$scope","$log","$uibModal","deptService","NgTableParams","filesService","toastr"],angular.module("nqms").controller("NursingWorkersFileController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.manual.workManual["delete"],{seqId:e}).then(c)}function r(e){return a.post(t.manual.workManual.save,e).then(c)}function d(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.manual.workManual.get,{params:e}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var m={get:d,save:r,"delete":i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("workManualService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){s.getGroupList().then(function(e){e&&(b.lst=e.data.data.lst,b.tableParams=new a({},{dataset:b.lst}))})}function d(e){b.formData=angular.extend({},e),b.selectedLevel=e,e&&e.beds&&(b.formData.bedList=e.beds.split(";"))}function c(){b.formData={}}function m(){""!==b.flowText&&(b.formData.bedList=b.formData.bedList||[],b.formData.bedList.push(b.flowText),b.flowText="")}function u(e){b.formData.bedList.splice(e,1)}function p(){var e=angular.extend({},b.formData);e.beds=e.bedList?e.bedList.join(";"):"",e.deptCode=b.deptCode,s.saveGroup(e).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),r(),b.formData={},o.close("success"))})}function v(e){s.deleteGroup(e).then(function(t){t&&"0"===t.data.code&&(n.success("已删除！","提示"),r(),e==b.formData.seqId&&(b.formData={}),o.close("success"))})}var b=this;b.saveGroup=p,b.edit=d,b.deleteGroup=v,b.formData={},b.add=c,b.deptCode=i.getUserinfo().role.deptCode,r(),b.removeFlow=u,b.addFlow=m}e.$inject=["$scope","$log","NgTableParams","$filter","bedService","modalService","toastr","security"],angular.module("nqms").controller("ManualWorkController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.manual.item["delete"],{itemCode:e}).then(c)}function r(e){return a.post(t.manual.item.save,e).then(c)}function d(e){var l={};return l.deptCode=e||n.getUserinfo().role.deptCode,a.get(t.manual.item.get,{params:l}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var m={getItems:d,saveItem:r,deleteItem:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("manualItemService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){s.getItems().then(function(e){e&&(p.lst=e.data.data,p.tableParams=new a({},{dataset:p.lst}))})}function d(e){p.formData=angular.extend({},e),p.selectedItem=e,p.formData.dept={deptCode:p.formData.deptCode,deptName:p.formData.deptName}}function c(){p.formData={}}function m(){var e=angular.extend({},p.formData);e.deptCode=e.dept.deptCode,e.deptName=e.dept.deptName,delete e.dept,s.saveItem(e).then(function(e){e&&"0"===e.data.code&&(o.success("保存成功！","提示"),r(),p.formData={})})}function u(e){s.deleteItem(e).then(function(t){t&&"0"===t.data.code&&(o.success("已删除！","提示"),r(),e==p.formData.seqId&&(p.formData={}))})}var p=this;p.save=m,p.edit=d,p.deleteItem=u,p.formData={},p.add=c,p.deptCode=n.getUserinfo().role.deptCode,p.deptList=i.deptList,0===p.deptList.length&&i.getDeptData().then(function(e){p.deptList=e.belongedDepts,p.deptList.unshift({deptCode:e.deptCode,deptName:e.deptName})}),r()}e.$inject=["$scope","$log","NgTableParams","$filter","manualItemService","toastr","security","deptService"],angular.module("nqms").controller("ManualItemController",e)}(),function(){"use strict";function e(e,t,a,l){function s(){return t.get(e.events.getEventTypeList).then(o)}function o(e){return"0"===e.data.code?e:void 0}var n={apiHost:e,getEventType:s};return n}e.$inject=["apiHost","$http","$log","toastr"],angular.module("nqms").config(["toastrConfig",function(e){e.tapToDismiss=!0,e.timeOut=0}]).factory("typeService",e)}(),function(){"use strict";function e(e,t,a,l,s){function o(){s.getEventType().then(function(e){e&&(n.lst=e.data.data.lst,n.tableParams=new a({},{dataset:n.lst}))})}var n=this;o()}e.$inject=["$scope","$log","NgTableParams","$filter","typeService"],angular.module("nqms").controller("MalCaseUpTypeController",e)}(),function(){"use strict";function e(e,t,a,l){var s=this;s.lst=[{groupNo:"跌倒",groupName:"不良治疗",bedNo:"Ⅱ级",remark:"跌倒"},{groupNo:"坠床",groupName:"不良治疗",bedNo:"Ⅱ级",remark:"坠床"},{groupNo:"走失",groupName:"不良治疗",bedNo:"Ⅰ级",remark:"走失"},{groupNo:"烫伤",groupName:"不良治疗",bedNo:"Ⅲ级",remark:"烫伤"},{groupNo:"医患争吵",groupName:"医患沟通",bedNo:"Ⅰ级",remark:"医患争吵"},{groupNo:"身体攻击",groupName:"医患沟通",bedNo:"Ⅳ级",remark:"身体攻击"},{groupNo:"咽入异物",groupName:"饮食类",bedNo:"Ⅱ级",remark:"咽入异物"},{groupNo:"食物中毒",groupName:"饮食类",bedNo:"Ⅳ级",remark:"食物中毒"},{groupNo:"仪器故障",groupName:"医疗设备",bedNo:"0级",remark:"仪器故障"},{groupNo:"院内压疮",groupName:"皮肤类",bedNo:"Ⅲ级",remark:"院内压疮"}],t.debug(s.lst),s.tableParams=new a({page:1,count:10},{total:s.lst.length,getData:function(t,a){var o=a.sorting()?l("orderBy")(s.lst,a.orderBy()):s.lst;o=a.filter()?l("filter")(o,a.filter()):o,a.total(o.length),t.resolve(e.users=o.slice((a.page()-1)*a.count(),a.page()*a.count()))}})}e.$inject=["$scope","$log","NgTableParams","$filter"],angular.module("nqms").controller("MalCaseUpStatisticsController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e){return a.post(t.events.deleteEventLevel,{seqId:e}).then(d)}function i(e){return a.post(t.events.saveEventLevel,e).then(d)}function r(e){return a.get(t.events.getEventLevels,{params:e}).then(d)}function d(e){return"0"===e.data.code?e:void 0}var c={save:i,get:r,del:n};return c}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("levelService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){s.get().then(function(e){e&&(v.lst=e.data.data.lst,v.tableParams=new a({},{dataset:v.lst}))})}function r(e){v.formData=angular.extend({},e),v.selectedLevel=e,e&&e.flow&&(v.formData.flowList=e.flow.split("|"))}function d(){v.formData={}}function c(){""!==v.flowText&&(v.formData.flowList=v.formData.flowList||[],v.formData.flowList.push(v.flowText),v.flowText="")}function m(e){v.formData.flowList.splice(e,1)}function u(){var e=angular.extend({},v.formData);e.flow=e.flowList?e.flowList.join("|"):"",s.save(e).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),i(),v.formData={},o.close("success"))})}function p(e){s.del(e).then(function(t){t&&"0"===t.data.code&&(n.success("已删除！","提示"),i(),e==v.formData.seqId&&(v.formData={}),o.close("success"))})}var v=this;v.save=u,v.edit=r,v.del=p,v.formData={},v.add=d,i(),v.removeFlow=m,v.addFlow=c}e.$inject=["$scope","$log","NgTableParams","$filter","levelService","modalService","toastr"],angular.module("nqms").controller("MalCaseUpLevelController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e,l){return a.post(t.events.deleteEventReport,{seqId:e,reportCode:l}).then(v)}function i(e){return a.get(t.events.getReportDetail,{params:e}).then(v)}function r(e){return a.get(t.events.getEventMeasures,{params:e}).then(v)}function d(e){return a.get(t.events.getEventRequirement,{params:e}).then(v)}function c(e){return a.post(t.events.saveReportDetail,e).then(v)}function m(e){return a.post(t.events.saveEventMeasures,e).then(v)}function u(e){return a.post(t.events.saveEventRequirement,e).then(v)}function p(e){return a.post(t.events.saveReportDetail,e).then(v)}function v(e){return"0"===e.data.code?e:void 0}function b(e){return a.post(t.events.deleteEventRequirement,e).then(v)}function f(e){return a.post(t.events.deleteEventMeasures,e).then(v)}function g(e){return a.post(t.events.deleteEventReport,e).then(v)}var h={saveReportDetail:c,saveMeasure:m,saveRequirement:u,saveEstimate:p,deleteMeasure:f,deleteRequirement:b,deleteEstimate:g,getReportDetail:i,getEventMeasures:r,getEventRequirement:d,del:n};return h}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("handleService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,d,c,m,u,p){function v(){c.getEventList().then(function(e){e&&(w.lst=e.data.data.lst,w.tableParams=new s({},{dataset:w.lst}))})}function b(e){w.selectedEvent=e,g(e).then(f)}function f(){r.open({templateUrl:"app/malCaseUp/handle/handle.modal.html",size:"lg",appendTo:angular.element(".handle-wrapper"),data:{formData:C,metaData:L},methodsObj:{saveReportDetail:h,saveListItem:function(e,t){var a=this,l=a.upFirstLetter(e),s={};switch(l="Estimate"===l?"Measure":l,s.userCode=n.getUserinfo().user.userCode,e){case"requirement":angular.extend(s,{reportCode:a.formData.reportCode,seqId:a.formData[e].seqId||null,reqCode:a.formData[e]&&a.formData[e].reqCode||null,reqContent:a.formData[e].reqContent,remark:""});break;case"measure":a.formData[e].meaTime||(s.meaTime=moment().format("YYYY-MM-DD HH:mm:ss")),angular.extend(s,{seqId:a.formData[e].seqId||null,reportCode:a.formData.reportCode,meaCode:a.formData[e]&&a.formData[e].meaCode||null,meaContent:a.formData[e].meaContent,headUserCode:a.formData[e].headUserCode});break;case"estimate":angular.extend(s,{seqId:a.formData.measure.seqId||null,reportCode:a.formData.reportCode,meaCode:a.formData.measure&&a.formData.measure.meaCode||null,headUserCode:a.formData.measure.headUserCode,meaContent:a.formData.measure.meaContent,resStatus:"",resDescribe:a.formData.measure.resDescribe})}a.formData[e+"List"]||(a.formData[e+"List"]=[]),u["save"+l](s).then(function(t){t&&(d.success("保存成功","提示"),a.rootScope.$broadcast("refresh"+l,a.formData.reportCode,a),a.formData[e]={})})},removeListItem:function(e){var t,a=this,l=a.upFirstLetter(e.listName);switch(a.formData[e.listName+"List"].splice(e.index,1),e.listName){case"measure":t={reportCode:a.reportCode,meaCode:e.meaCode};break;case"requirement":t={seqId:e.seqId};break;case"estimate":return}u["delete"+l](t).then(function(e){e&&d.success("已删除","提示")})},fillItem:function(e,t){var a=this;a.formData[e]=angular.extend({},t)},resetForm:function(e){this.formData[e]={}},upFirstLetter:function(e){return e.replace(/^\w{1}/,function(e){return e.toUpperCase()})}}})}function g(e){var t=e.reportCode,a=n.getUserinfo().role.deptCode;C.reportCode=t;var s=p.getUserList(a),o=u.getEventRequirement({reportCode:t}),i=u.getEventMeasures({reportCode:t}),r=u.getReportDetail({reportCode:t}),d=l.all([o,i,r,s]).then(function(t){var a=t[0].data.data.lst,l=t[1].data.data.lst,s={},o=t[3];t[2].data.data.lst.forEach(function(e){s[e.itemCode]={value:e.itemValue,seqId:e.seqId}}),L.malCaseInfo=e,L.userList=o,C.requirementList=a,C.measureList=l,C.reportDetailList=s});return d}function h(){var e,t=this,a=angular.extend({},t.formData.reportDetailList),l=[];for(e in a)a.hasOwnProperty(e)&&l.push({reportCode:t.formData.reportCode,itemCode:e,seqId:a[e].seqId||null,itemValue:a[e].value});u.saveReportDetail(l).then(function(e){e&&"0"===e.data.code&&(d.success("保存成功！","提示"),w.scope.$broadcast("resfreshReportDetail",t.formData.reportCode,t),r.close("success"))})}function D(e,t){i.del(e,t).then(function(e){e&&"0"===e.data.code&&(d.success("已删除！","提示"),v(),r.close("success"))})}function y(e,t,a){u.getEventRequirement({reportCode:t}).then(function(e){e&&(a.formData.requirementList=e.data.data.lst)})}function k(e,t,a){u.getEventMeasures({reportCode:t}).then(function(e){e&&(a.formData.measureList=e.data.data.lst)})}function x(e,t,a){u.getReportDetail({reportCode:t}).then(function(e){e&&(a.formData.reportDetailList=e.data.data.lst)})}var w=this,C={},L={};w.rootScope=e,w.scope=t,w.open=b,w.del=D,v(),w.scope.$on("refreshMeasure",k),w.scope.$on("refreshRequirement",y),w.scope.$on("refreshReportDetail",x)}e.$inject=["$rootScope","$scope","$log","$q","NgTableParams","$filter","security","levelService","modalService","toastr","fixService","deptService","handleService","filesService"],angular.module("nqms").controller("MalCaseUpHandleController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.events.deleteEventLevel,{seqId:e}).then(c)}function r(e){return a.post(t.events.saveEventLevel,e).then(c)}function d(e){var l=e||{};return l.userCode=n.getUserinfo().user.userCode,l.deptCode=n.getUserinfo().role.deptCode,a.get(t.events.getEventList,{params:l}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var m={save:r,getEventList:d,del:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("fixService",e)}(),function(){"use strict";angular.module("nqms").controller("MalCaseUpElementController",["$uibModal","$log",function(e,t){var a=this;a.lst=[{elementCode:"1",elementName:"压疮大小",viewName:"压疮大小",groupName:"压疮信息",elementType:"文本框",width:"3/12",remark:"备注",required:"是"},{elementCode:"2",elementName:"发生时间",viewName:"发生时间",groupName:"压疮信息",elementType:"文本框",width:"3/12",remark:"备注",required:"是"},{elementCode:"3",elementName:"性别",viewName:"性别",groupName:"患者信息",elementType:"单选框",width:"3/12",remark:"备注",required:"是"},{elementCode:"4",elementName:"医疗类型",viewName:"医疗类型",groupName:"患者信息",elementType:"下拉框",width:"3/12",remark:"备注",required:"是"},{elementCode:"5",elementName:"年龄",viewName:"年龄",groupName:"患者信息",elementType:"文本框",width:"3/12",remark:"备注",required:"是"}]}])}(),function(){"use strict";function e(e,t,a,l,s,o){function n(e,l){return a.post(t.events.deleteEventReport,{seqId:e,reportCode:l}).then(r)}function i(e){return a.post(t.events.saveEventReport,e).then(r)}function r(e){return"0"===e.data.code?e:void 0}var d={save:i,del:n};return d}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("callService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,d,c,m,u){function p(){d.getEventList().then(function(e){e&&(k.lst=e.data.data.lst,k.tableParams=new a({},{dataset:k.lst}))}),u.getEventType().then(function(e){e&&(w.eventTypeList=e.data.data.lst)})}function v(e){function t(){i.open({templateUrl:"app/malCaseUp/call/call.modal.html",size:"lg",ok:D,data:{formData:x,metaData:w},methodsObj:{eventTimeCalender:function(){var e=this;e.eventTimeOpen=!0},setUser:function(e){var t=this;t.formData.flowList.splice(e,1)}}})}x=angular.extend({},e),k.selectedLevel=e,w.deptList=m.deptList&&m.deptList.belongedDepts,b().then(function(){w.deptList?t():m.getDeptData().then(function(e){var a=e;a&&(w.deptList=a.belongedDepts,0===w.deptList.length&&(delete a.belongedDepts,w.deptList=[a]),t())})}),e&&(x.eventDate=new Date(e.eventTime),x.eventTime=new Date(e.eventTime),x.level={damageLevel:e.damageLevel},x.dept={deptCode:e.deptCode,deptName:e.deptName},x.eventType={eventTypeCode:e.eventTypeCode,eventTypeName:e.eventTypeName}),x.userCode=s.getUserinfo().user.userCode,x.userCode=s.getUserinfo().user.userName}function b(){return n.get().then(function(e){e&&(w.levelList=e.data.data.lst)})}function f(){k.formData={}}function g(){""!==k.flowText&&(k.formData.flowList=k.formData.flowList||[],k.formData.flowList.push(k.flowText),k.flowText="")}function h(e){k.formData.flowList.splice(e,1)}function D(e){var t,a,l=angular.extend({},e);l.deptName=l.dept.deptName,t=o(l.eventDate).format("YYYY-MM-DD"),a=o(l.eventTime).format("HH:mm:ss"),delete l.eventDate,delete l.dept,l.eventTypeCode=angular.fromJson(l.eventType).eventTypeCode,l.eventTypeName=angular.fromJson(l.eventType).eventTypeName,delete l.eventType,delete l.level,l.eventTime=o(t+" "+a).format("YYYY-MM-DD HH:mm:ss"),c.save(l).then(function(e){e&&"0"===e.data.code&&(r.success("保存成功！","提示"),p(),k.formData={},i.close("success"))})}function y(e,t){c.del(e,t).then(function(e){e&&"0"===e.data.code&&(r.success("已删除！","提示"),p(),i.close("success"))})}var k=this,x={},w={};k.save=D,k.open=v,k.del=y,k.add=f,w.eventTypeList=[{code:1,name:"运送中病情变化"},{code:2,name:"误吸"},{code:3,name:"院内压疮"},{code:4,name:"坠床"},{code:5,name:"跌倒"}],p(),k.removeFlow=h,k.addFlow=g}e.$inject=["$scope","$log","NgTableParams","$filter","security","moment","levelService","modalService","toastr","fixService","callService","deptService","typeService"],angular.module("nqms").controller("MalCaseUpCallController",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(){a.getRuleList().then(function(e){e&&(u.lst=e.data.data.lst,u.tableParams=new t({},{dataset:u.lst}))})}function i(e){p=e,d()}function r(){p={},d()}function d(){e.debug(u.classList),l.open({templateUrl:"app/departmentManager/turnsRule/turnsRule.model.html",size:"lg",ok:c,data:{formData:p,metaData:v}})}function c(){e.debug(p),a.saveRule(p).then(function(e){e&&"0"==e.data.code&&(s.success("保存成功！","提示"),n(),l.close("success"))})}function m(e){a.deleteRule(e).then(function(e){e&&"0"==e.data.code&&(s.success("已删除！","提示"),n())})}var u=this,p={},v={};u.save=c,u.add=r,u.del=m,u.edit=i,n(),o.getClassList().then(function(t){t&&(u.classList=t.data.data.lst,v.classList=u.classList,e.debug(u.classList))})}e.$inject=["$log","NgTableParams","turnsRuleService","modalService","toastr","classesService"],angular.module("nqms").controller("DepartmentManagerTurnsRuleController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.schedule.deleteRule,{seqId:e}).then(c)}function r(e){return e.deptCode=n.getUserinfo().role.deptCode,a.post(t.schedule.saveRule,e).then(c)}function d(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.schedule.getRuleList,{params:e}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var m={getRuleList:d,saveRule:r,deleteRule:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("turnsRuleService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){var l={};return l.week=e,l.deptCode=n.getUserinfo().role.deptCode,a.get(t.schedule.getSchedule,{params:l}).then(m)}function r(e){return e.deptCode=n.getUserinfo().role.deptCode,e.deptName=n.getUserinfo().role.deptName,a.post(t.schedule.saveSchedule,e).then(m)}function d(e){var l={};return l.deptCode=n.getUserinfo().role.deptCode,l.week=e,a.get(t.schedule.newSchedule,{params:l}).then(m)}function c(e){var l={};return l.deptCode=n.getUserinfo().role.deptCode,l.outWeek=e,l.srcWeek=e-1,a.get(t.schedule.copySchedule,{params:l}).then(m)}function m(e){return"0"===e.data.code?e:void 0}var u={saveSchedule:r,newSchedule:d,getSchedule:i,copySchedule:c};return u}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("turnsService",e)}(),function(){"use strict";function e(e,t,a,l){function s(){o()}function o(t){e.getSchedule(t).then(function(e){e&&(m.data=e.data.data,m.lst=m.data.dtls)})}function n(){m.data.dtls=m.lst,e.saveSchedule(m.data).then(function(e){e&&0==e.data.code&&(l.success("保存成功！","提示"),o(m.data.weeks))})}function i(){m.data.weeks&&(m.data.weeks=m.data.weeks+1,o(m.data.weeks))}function r(){m.data.weeks&&(m.data.weeks=m.data.weeks-1,o(m.data.weeks))}function d(){e.newSchedule(m.data.weeks).then(function(e){e&&0==e.data.code&&(l.success("排班成功！","提示"),m.data=e.data.data,m.lst=m.data.dtls)})}function c(){e.copySchedule(m.data.weeks).then(function(e){e&&0==e.data.code&&(l.success("复制成功！","提示"),m.data=e.data.data,m.lst=m.data.dtls)})}var m=this;m.saveTurns=n,m.nextWeek=i,m.backWeek=r,m.newTurns=d,m.copyWeek=c,s(),t.getClassList().then(function(e){e&&(m.classList=e.data.data.lst)})}e.$inject=["turnsService","classesService","$log","toastr"],angular.module("nqms").controller("DepartmentManagerTurnsController",e)}(),function(){"use strict";function e(e,t){function a(a){return t.get(e.schedule.statistics.getByLeave,{params:a}).then(o)}function l(a){return t.get(e.schedule.statistics.getByClass,{params:a}).then(o)}function s(a){return t.get(e.schedule.statistics.getByDays,{params:a}).then(o)}function o(e){return"0"===e.data.code?e:void 0}var n={getByLeave:a,getByClass:l,getByDays:s};return n}e.$inject=["apiHost","$http"],angular.module("nqms").config(["toastrConfig",function(e){e.tapToDismiss=!0,e.timeOut=0}]).factory("deptStatisticsService",e)}(),function(){"use strict";function e(e,t,a){function l(){n.queryParams={type:"leave",month:new Date,dept:n.deptList[0],startDate:new Date,endDate:new Date},n.options.startDate={maxDate:n.queryParams.endDate},n.options.endDate={minDate:n.queryParams.startDate},o()}function s(e){n.picker[e+"Open"]=!n.picker[e+"Open"]}function o(e){var l=""!==e&&e?e.replace(/(\w{1})/g,function(e){return e.toUpperCase()}):"Leave",s=angular.extend({},n.queryParams);switch(s.deptCode=s.dept.deptCode,s.month=a(s.month).format("YYYY-MM"),delete s.dept,l){case"Leave":delete s.type,delete s.month,s.startDate=a(s.startDate).format("YYYY-MM-DD"),s.endDate=a(s.endDate).format("YYYY-MM-DD");break;case"Days":delete s.type;break;default:delete s.type}t["getBy"+l](s).then(function(e){e&&(n.statisticsData=e.data.data.lst)})}var n=this;n.deptList=e.deptList,n.picker={monthOpen:!1,startDateOpen:!1,endDateOpen:!1},n.options={month:{datepickerMode:"month",minMode:"month"}},n.openPicker=s,n.getStatistics=o,0===n.deptList.length&&e.getDeptData().then(function(e){n.deptList=e.belongedDepts,n.deptList.unshift({deptCode:e.deptCode,deptName:e.deptName})}).then(l)}e.$inject=["deptService","deptStatisticsService","moment"],angular.module("nqms").controller("DepartmentManagerStatisticsController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.schedule.apprvScheduleLeave,e).then(m)}function r(e){return a.post(t.schedule.deleteScheduleLeave,{seqId:e}).then(m)}function d(e){return a.post(t.schedule.saveScheduleLeave,e).then(m)}function c(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.schedule.getLeaveList,{params:e}).then(m)}function m(e){return"0"===e.data.code?e:void 0}var u={getLeaveList:c,saveScheduleLeave:d,deleteScheduleLeave:r,apprvScheduleLeave:i};return u}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("leaveService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,d){function c(){e.getLeaveList().then(function(e){if(e){h.lst=e.data.data.lst;for(var t=0;t<h.lst.length;t++)h.lst[t].startTime=s(new Date(h.lst[t].startTime)).format("YYYY-MM-DD HH:MM:SS"),h.lst[t].endTime=s(new Date(h.lst[t].endTime)).format("YYYY-MM-DD HH:MM:SS");h.tableParams=new n({},{dataset:h.lst})}})}function m(){i.open({templateUrl:"app/departmentManager/leave/addLeave.tpl.html",size:"md",ok:g,data:{formData:D}})}function u(){D.startDate=new Date(D.startTime),D.endDate=new Date(D.endTime)}function p(e){D=angular.extend({},e),u(),m()}function v(t){e.deleteScheduleLeave(t).then(function(e){e&&"0"===e.data.code&&(o.success("已删除！","提示"),c(),i.close("success"))})}function b(e){D=angular.extend({},e),u(),i.open({templateUrl:"app/departmentManager/leave/review.tpl.html",size:"md",ok:f,data:{formData:D}})}function f(){e.apprvScheduleLeave(D).then(function(e){e&&"0"===e.data.code&&(o.success("保存成功！","提示"),c(),D={},i.close("success"))})}function g(){function t(e,t){var a,l,o;return a=s(e).format("YYYY-MM-DD"),l=s(t).format("HH:mm:ss"),o=s(a+" "+l).format("YYYY-MM-DD HH:mm:ss")}var a=D.startDate,l=D.startTime,n=D.endDate,d=D.endTime;D.startTime=t(a,l),D.endTime=t(n,d),D.deptCode=r.getUserinfo().role.deptCode,D.deptNme=r.getUserinfo().role.deptNme,e.saveScheduleLeave(D).then(function(e){e&&"0"===e.data.code&&(o.success("保存成功！","提示"),c(),D={},i.close("success"))})}var h=this,D={};h.addLeave=m,h.saveLeave=g,h.edit=p,h.del=v,h.review=b,c(),D.deptCode=r.getUserinfo().role.deptCode,D.deptName=r.getUserinfo().role.deptName}e.$inject=["leaveService","$scope","$log","$q","moment","toastr","NgTableParams","modalService","security","$injector"],angular.module("nqms").controller("DepartmentManagerLeaveController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.schedule.batchSaveUserNurse,e).then(d)}function r(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.schedule.getUserNurses,{params:e}).then(d)}function d(e){return"0"===e.data.code?e:void 0}var c={getUserNurses:r,batchSaveUserNurse:i};return c}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("areaService",e)}(),function(){"use strict";function e(e,t,a,l){function s(){t.getUserNurses().then(function(e){e&&(n.lst=e.data.data.lst)}),l.getGroupList().then(function(e){e&&0==e.data.code&&(n.groupLst=e.data.data.lst)})}function o(){t.batchSaveUserNurse(n.lst).then(function(e){e&&0==e.data.code&&a.success("保存成功！","提示")})}var n=this;n.saveArea=o,s()}e.$inject=["$log","areaService","toastr","bedService"],angular.module("nqms").controller("DepartmentManagerEndemicAreaController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.schedule.deleteClass,{seqId:e}).then(c)}function r(e){return a.post(t.schedule.saveClass,e).then(c)}function d(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.schedule.getClassList,{params:e}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var m={getClassList:d,saveclass:r,deleteClass:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("classesService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r,d){function c(){e.getClassList().then(function(e){e&&(b.lst=e.data.data.lst,b.tableParams=new n({},{dataset:b.lst}))})}function m(){f.formData.deptCode=b.deptCode,f.formData.deptName=b.deptName,i.open({templateUrl:"app/departmentManager/classes/addClasses.tpl.html",size:"md",ok:v,data:f})}function u(e){function t(e){var t,a,l;return t="2099-01-01 "+e,a=new Date(t),l=moment(a).format("YYYY HH:mm")}f.formData=angular.extend({},e),f.formData.startTime=t(e.startTime),f.formData.endTime=t(e.endTime),
m()}function p(t){e.deleteClass(t).then(function(e){e&&"0"===e.data.code&&(o.success("已删除！","提示"),c(),i.close("success"))})}function v(){var t,a,l=f.formData.startTime,s=f.formData.endTime;t=moment(l).format("HH:mm"),a=moment(s).format("HH:mm"),f.formData.startTime=t,f.formData.endTime=a,e.saveclass(f.formData).then(function(e){e&&"0"===e.data.code&&(o.success("保存成功！","提示"),c(),f.formData={},i.close("success"))})}var b=this,f={formData:{},metaData:{}};b.saveclass=v,b.addClasses=m,b.edit=u,b.del=p,b.deptCode=r.getUserinfo().role.deptCode,b.deptName=r.getUserinfo().role.deptName,f.formData.deptCode=b.deptCode,f.formData.deptName=b.deptName,c()}e.$inject=["classesService","$scope","$log","$q","$uibModal","toastr","NgTableParams","modalService","security","$injector"],angular.module("nqms").controller("DepartmentManagerClassesController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.schedule.deleteGroup,{seqId:e}).then(c)}function r(e){return a.post(t.schedule.saveGroup,e).then(c)}function d(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.schedule.getGroupList,{params:e}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var m={getGroupList:d,saveGroup:r,deleteGroup:i};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("bedService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){s.getGroupList().then(function(e){e&&(b.lst=e.data.data.lst,b.tableParams=new a({},{dataset:b.lst}))})}function d(e){b.formData=angular.extend({},e),b.selectedLevel=e,e&&e.beds&&(b.formData.bedList=e.beds.split(";"))}function c(){b.formData={}}function m(){""!==b.flowText&&(b.formData.bedList=b.formData.bedList||[],b.formData.bedList.push(b.flowText),b.flowText="")}function u(e){b.formData.bedList.splice(e,1)}function p(){var e=angular.extend({},b.formData);e.beds=e.bedList?e.bedList.join(";"):"",e.deptCode=b.deptCode,s.saveGroup(e).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),r(),b.formData={},o.close("success"))})}function v(e){s.deleteGroup(e).then(function(t){t&&"0"===t.data.code&&(n.success("已删除！","提示"),r(),e==b.formData.seqId&&(b.formData={}),o.close("success"))})}var b=this;b.saveGroup=p,b.edit=d,b.deleteGroup=v,b.formData={},b.add=c,b.deptCode=i.getUserinfo().role.deptCode,r(),b.removeFlow=u,b.addFlow=m}e.$inject=["$scope","$log","NgTableParams","$filter","bedService","modalService","toastr","security"],angular.module("nqms").controller("DepartmentManagerBedController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(e){return a.post(t.schedule.deleteChangeClass,{seqId:e}).then(m)}function r(e){return a.post(t.schedule.saveChangeClass,e).then(m)}function d(e){return a.post(t.schedule.apprvChangeClass,e).then(m)}function c(){var e={};return e.deptCode=n.getUserinfo().role.deptCode,a.get(t.schedule.getChangeClass,{params:e}).then(m)}function m(e){return"0"===e.data.code?e:void 0}var u={getChangeClass:c,saveChangeClass:r,deleteChangeClass:i,apprvChangeClass:d};return u}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("attemperService",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(){a.getChangeClass().then(function(e){e&&(u.lst=e.data.data.lst,u.tableParams=new t({},{dataset:u.lst}))}),o.getClassList().then(function(e){e&&(u.classes=e.data.data.lst)})}function i(e){p=e,d()}function r(){p={},d()}function d(){l.open({templateUrl:"app/departmentManager/attemper/attemper.model.html",size:"lg",ok:c,data:{formData:p,classes:u.classes},methodsObj:{}})}function c(){a.saveChangeClass(p).then(function(e){e&&"0"==e.data.code&&(s.success("保存成功！","提示"),n(),l.close("success"))})}function m(e){a.deleteChangeClass(e).then(function(e){e&&"0"==e.data.code&&(s.success("已删除！","提示"),n())})}var u=this,p={};u.save=c,u.add=r,u.del=m,u.edit=i,n()}e.$inject=["$log","NgTableParams","attemperService","modalService","toastr","classesService"],angular.module("nqms").controller("DepartmentManagerAttemperController",e)}(),function(){"use strict";function e(){function e(e,t,a,l){function s(){r.minMode=!r.minMode,e.$broadcast("toggleNavView",r.minMode)}function o(t){r.currentIndex=t,r.navData[t].child&&r.navData[t].child.length>0&&(r.isSubNavShow=!0,e.$broadcast("toggleSubNavView",r.isSubNavShow))}function n(){r.isSubNavShow=!r.isSubNavShow,e.$broadcast("toggleSubNavView",r.isSubNavShow)}function i(){d.currentIndex=r.currentIndex,l.setCacheUser(d)}var r=this,d=l.getUserinfo();r.minMode=!0,r.isSubNavShow=!0,r.isActive=t.$parent.isActive,r.currentIndex=l.getUserinfo().currentIndex,r.navData=d.nav,r.currentIndex||(r.minMode=!1,r.isSubNavShow=!1),r.toggleNavView=s,r.toggleSubNavView=n,r.showSubNav=o,r.setActiveIndex=i,e.$broadcast("toggleNavView",r.minMode),e.$broadcast("toggleSubNavView",r.isSubNavShow)}e.$inject=["$rootScope","$scope","$log","security"];var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{},replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("nqms").directive("acmeNavbar",e)}(),function(){"use strict";function e(){function e(e,t,a,l,s,o,n,i){function r(){a.open({templateUrl:"app/components/header/changeUser.tpl.html",controller:"ChangeUserController",controllerAs:"vm",backdrop:"static",animation:!1,size:"sm"})}function d(){a.open({templateUrl:"app/components/header/changeRole.tpl.html",controller:"ChangeRoleController",controllerAs:"vm",backdrop:"static",animation:!1,size:"md"})}function c(){e.$broadcast("logout")}var m=this;m.openUserDialog=r,m.openRoleDialog=d,m.logout=c,t(function(){m.time_now=l().format("YYYY年MM月DD日  HH:mm:ss")},1e3);try{m.user=o.getUserinfo().user}catch(u){i.error("您还未登录"),n.go("login")}finally{}s.info(m.user)}e.$inject=["$rootScope","$interval","$uibModal","moment","$log","security","$state","toastr"];var t={restrict:"E",templateUrl:"app/components/header/header.html",scope:{},replace:!0,controller:e,controllerAs:"hd",bindToController:!0};return t}angular.module("nqms").directive("acmeHeader",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){function r(){e.dismiss("cancel")}function d(){c.loginBtnStatus.title="切换",c.loginBtnStatus.state=""}var c=this;c.cancel=r,c.formData={},c.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:s(),startingDay:1},c.validationOption={blurTrig:!0},c.loginBtnStatus={title:"切换",state:""},c.changeUser=function(s){var r=a.getUserinfo().user;return l.info(s),c.loginBtnStatus.title="正在切换...",c.loginBtnStatus.state="disabled",s.loginName===r.loginName?(i.info("您切换的用户已是当前登录用户，无需切换～","提示"),void d()):void a.login(s).then(function(l){var s;d(),l&&"-1"==l.data.code||(s={user:l.data.data.user,nav:l.data.data.funs,role:l.data.data.role,tab:{}},a.setUserinfo(s),a.setCacheUser(s),e.dismiss("cancel"),n(function(){t.path("/home"),o.location.reload()},0))},d)}}e.$inject=["$uibModalInstance","$location","security","$log","moment","$window","$timeout","toastr"],angular.module("nqms").config(["w5cValidatorProvider",function(e){e.setRules({loginName:{required:"用户名不能为空",pattern:"用户名必须输入字母、数字、下划线"},password:{required:"密码不能为空",minlength:"密码长度不能小于{minlength}",maxlength:"密码长度不能大于{maxlength}"}})}]).controller("ChangeUserController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i,r){function d(){e.dismiss("cancel")}function c(){m.roleBtnStatus.title="切换",m.roleBtnStatus.state=""}var m=this,u=r.getUserinfo().role,p=r.getUserinfo().user.seqId;m.currentRole=r.getUserinfo().role,m.cancel=d,m.formData={},m.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:s(),startingDay:1},m.validationOption={blurTrig:!0},m.roleBtnStatus={title:"切换",state:""},r.getUserRoleList({userId:p}).then(function(e){m.userRoleList=e.data.data}),m.selectedRole=u,m.showRole=function(e){t.info(e),m.changedRole=e},m.changeRole=function(){return u=r.getUserinfo().role,m.changedRole?(m.roleBtnStatus.title="正在切换...",m.roleBtnStatus.state="disabled",m.changedRole.seqId===u.seqId?(n.info("您切换的角色已是当前登录的角色，无需切换～","提示"),void c()):void r.getNavigation(m.changedRole).then(function(e){var t=r.getUserinfo();t.nav=e.data.data,t.role=m.changedRole,t.tab={},r.setCacheUser(t),n.success("正在切换角色...","恭喜"),a.go("home"),l(function(){o.location.reload()},2e3)})["finally"](c)):void 0}}e.$inject=["$uibModalInstance","$log","$state","$timeout","moment","$window","toastr","$scope","security"],angular.module("nqms").controller("ChangeRoleController",e)}(),function(){"use strict";function e(e,t){function a(e,t,a,l,s,o,n,i){var r=this;r.scope=e,r.isActive=e.isActive,r.tabTemp=i.currentUser.tab,r.removeTab=function(e){var t,a=angular.element(e.currentTarget).data("id"),l=angular.element(e.currentTarget).parents("li").prev("li"),s=angular.element(e.currentTarget).parents("li").next("li");t=l.length>0?"."+l.find("a").data("id"):s.length>0?"."+s.find("a").data("id"):"",angular.element(e.currentTarget).parents(".tab-bread__item").hasClass("active")&&n.go("home"+t),i.removeFromBreadcrumb(a)},angular.element(document).ready(function(){var e=angular.element(".tab-bread li"),t=e.length;r.tabItemLen=t}),r.isActive=function(e){var t=e.length;return e===o.path().substr(-t,t)},s.info("tab:",r.tab)}function l(t,a,l){t.tabItemLen=function(){var e=a.find("li"),t=e.length;return t},t.isLoading=function(){return e.pendingRequests.length>0},t.$watchGroup([t.tabItemLen,t.isLoading],function(e){var t=a.outerWidth();if(!e[1]){var l=a.find("li"),s=0,o=0;if(0===e[0])return;l.each(function(e,t){var a=angular.element(t),l=a.find(".tab-bread__item"),o=a.find("span"),n=o.innerWidth(),i=a.outerWidth(),r=l.width(),d=n+(i-r);s+=d}),s>t?(o=t/e[0],l.width(o)):l.width("auto")}})}a.$inject=["$scope","$interval","moment","$window","$log","$location","$state","security"];var s={restrict:"E",templateUrl:"app/components/breadcrumb/breadcrumb.html",scope:{},replace:!0,controller:a,controllerAs:"bc",link:l,bindToController:!0};return s}e.$inject=["$http","$log"],angular.module("nqms").directive("acmeBread",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){function i(){return h}function r(e){h=e}function d(){h=null}function c(){return angular.fromJson(a.sessionStorage.getItem("userinfo"))}function m(e){a.sessionStorage.setItem("userinfo",angular.toJson(e))}function u(){a.sessionStorage.removeItem("userinfo")}function p(t){return e.post(n.system.login,t)}function v(t){return e.get(n.system.getRoleList,{params:t})}function b(t){return e.get(n.system.getNavigation,{params:{roleCode:t.roleCode,userRoleId:t.seqId}})}function f(e,t){h.tab[e]=t,m(h)}function g(e){delete h.tab[e],m(h)}var h,D={getUserinfo:i,setUserinfo:r,clearUserinfo:d,getCacheUser:c,setCacheUser:m,clearCacheUser:u,login:p,getUserRoleList:v,getNavigation:b,addToBreadcrumb:f,removeFromBreadcrumb:g,minMode:!1};return D}e.$inject=["$http","$log","$window","$location","$timeout","$state","apiHost"],angular.module("nqms").factory("security",e)}(),function(){"use strict";function e(e,t,a){return{request:function(e){return e||a.when(e)},requestError:function(l){return t.info("请求失败："+l.statusText,l),e.$broadcast("toast",{type:"error",content:"请检查网络连接或联系服务器管理员！",title:"请求错误"}),a.reject(l)},response:function(t){return-2==t.data.code&&e.$broadcast("logout"),-1==t.data.code&&e.$broadcast("toast",{type:"error",content:t.data.msg}),t.data.code&&0!=t.data.code?a.reject("code error"):t||a.when(t)},responseError:function(l){return t.info("响应失败："+l.statusText,l),e.$broadcast("toast",{type:"error",content:"错误码："+l.status+"<br> URL："+(l.config&&l.config.url||"")+"\n "+(l.message||"")+"<br> 请检查网络连接或联系服务器管理员！",title:"没有响应"}),a.reject(l)}}}e.$inject=["$rootScope","$log","$q"],angular.module("nqms").factory("myHttpInterceptor",e)}(),function(){"use strict";function e(e,t,a,l,s,o){function n(){function e(e){return"0"===e.data.code?(i.deptCode||(r.deptList=e.data.data),e.data.data):void l.error("获取科室数据失败！\n"+e.data.msg)}function s(e){l.error("获取科室数据失败！\n"+angular.toJson(e.data,!0))}return t.get(a.user.getDept,{params:{deptCode:i.deptCode}}).then(e)["catch"](s)}var i=o.getUserinfo().role,r={apiHost:a,getDeptData:n,deptList:[]};return r}e.$inject=["$window","$http","apiHost","$log","toastr","security"],angular.module("nqms").factory("deptService",e)}(),function(){"use strict";function e(e,t){return{open:function(t){e.open({templateUrl:t.templateUrl,size:t.size,backdrop:"static",appendTo:t.appendTo,animation:t.animation||!0,controller:"ModalController",controllerAs:"vm",resolve:{initFn:function(){return t.initFn},ok:function(){return t.ok},data:function(){return t.data?t.data:void 0},methodsObj:function(){return t.methodsObj?t.methodsObj:void 0}}})},close:function(e){t.dismissAll(e)}}}e.$inject=["$uibModal","$uibModalStack"],angular.module("nqms").factory("modalService",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n){var i=this;if(i.rootScope=e,i.scope=t,i.formData=s&&s.formData,i.metaData=s&&s.metaData,angular.isObject(o))for(var r in o)"function"==typeof o[r]&&(i[r]=o[r]);else o&&$log.error("methodsObj必须是对象!");n&&n(i),i.ok=function(){l(i.formData)},i.cancel=function(){a.dismiss("cancel")}}e.$inject=["$rootScope","$scope","$uibModalInstance","ok","data","methodsObj","initFn"],angular.module("nqms").controller("ModalController",e)}(),function(){"use strict";function e(e){function t(t,a){t.isLoading=function(){return e.pendingRequests.length>0},t.$watch(t.isLoading,function(e){e?a[0].setAttribute("style","display: block"):a[0].setAttribute("style","display: none")})}return{restrict:"E",templateUrl:"app/common/loading/loading.tpl.html",link:t,scope:{},controller:function(){var e=this;e.windowWidth=window.innerWidth,e.windowHeight=window.innerHeight,e.loadingWidth=window.innerWidth-200},controllerAs:"vm"}}e.$inject=["$http"],angular.module("nqms").directive("loading",e)}(),function(){"use strict";angular.module("nqms").filter("capitalize",function(){return function(e){return e?e[0].toUpperCase()+e.slice(1):void 0}})}(),function(){"use strict";function e(e,t,a,l,s){function o(t,a){return e({url:t,method:"POST",data:a}).then(n)}function n(e){return"0"===e.data.code?e:void 0}var i={downloadExcel:o};return i}e.$inject=["$http","$log","$q","toastr","security"],angular.module("nqms").factory("exportExcelService",e)}(),function(){"use strict";function e(e){return{restrict:"E",scope:{},controller:"ExportExcelController",controllerAs:"vm",bindToController:{exslSrc:"="},templateUrl:"app/common/exportExcel/exportExcel.tpl.html"}}e.$inject=["$http"],angular.module("nqms").directive("exportExcel",e)}(),function(){"use strict";function e(e,t,a){function l(){var e,t,a=document.querySelectorAll(".table[st-table] .header-export th"),l=document.querySelectorAll(".table[st-table] tbody td");return e=[].map.call(a,function(e){return e.textContent}),t=[].map.call(l,function(e){return e.textContent}),{header:e,body:t}}function s(t){var s=l();a.downloadExcel(t,s).then(function(t){t&&e.$broadcast("toast",{type:"success",content:"导出成功！"})})}var o=this;o.doExport=s}e.$inject=["$rootScope","$http","exportExcelService"],angular.module("nqms").controller("ExportExcelController",e)}(),function(){"use strict";function e(e){var t=(e("date"),{restrict:"A",require:"ngModel",link:function(e,t,a,l){l.$formatters.shift(),l.$formatters.shift(),l.$parsers.shift()}});return t}e.$inject=["$filter"],angular.module("nqms").directive("timestampToString",e)}(),function(){"use strict";function e(e,t,a,l,s){var o=this;t.$on("toast",function(e,t){l[t.type](t.content||"",t.title||"")}),t.$on("logout",function(e){s.clearUserinfo(),s.clearCacheUser(),a.go("login")}),o.limitEvent=function(e){e.stopPropagation(),e.preventDefault()}}e.$inject=["$rootScope","$scope","$state","toastr","security"],angular.module("nqms").controller("CoreController",e)}(),function(){"use strict";function e(e,t,a,l,s,o,n,i){var r,d=this;d.$scope=a,d.minMode=n.minMode,a.isActive=d.isActive=function(e){var t,a=0;return""===e?!1:(a=e.length,t=s.path().substr(-a,a),e===t)},d.$scope.$on("toggleNavView",function(e,t){d.minMode=t}),d.$scope.$on("toggleSubNavView",function(e,t){d.isSubNavShow=t}),t.$on("$stateChangeStart",function(e,t,a,l,s,o){r=n.getUserinfo("isLogined"),"login"===t.name&&r&&e.preventDefault()})}e.$inject=["$log","$rootScope","$scope","$uibModal","$location","$window","security","$state"],angular.module("nqms").controller("MainController",e)}(),function(){"use strict";function e(e,t,a,l){function s(){o.loginBtnStatus.title="登录",o.loginBtnStatus.state=""}var o=this;o.loginBtnStatus={title:"登录",state:""},o.login=function(t){o.loginBtnStatus.title="正在登录...",o.loginBtnStatus.state="disabled",l.login(t).then(function(t){var s={user:t.data.data.user,nav:t.data.data.funs,role:t.data.data.role,tab:{}};l.setUserinfo(s),l.setCacheUser(s),e.$broadcast("toast",{type:"success",content:"登陆成功"}),a.go("home")})["finally"](s)},o.validationOption={blurTrig:!0}}e.$inject=["$rootScope","$log","$state","security"],angular.module("nqms").config(["w5cValidatorProvider",function(e){e.setRules({loginName:{required:"用户名不能为空",pattern:"用户名必须输入字母、数字、下划线"},password:{required:"密码不能为空",minlength:"密码长度不能小于{minlength}",maxlength:"密码长度不能大于{maxlength}"}})}]).controller("LoginController",e)}(),function(){"use strict";function e(e,t,a,l){var s=l.getCacheUser();s?l.setUserinfo(s):t.go("login"),a.minMode=!1}e.$inject=["$window","$state","$rootScope","security"],angular.module("nqms").run(e)}(),function(){"use strict";function e(e,t,a){e.state("home",{url:"/home",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("home.files",{url:"/files",templateUrl:"app/nursingWorkers/files/files.tpl.html",controller:"NursingWorkersFileController",controllerAs:"vm"}).state("home.internship",{url:"/internship",templateUrl:"app/nursingWorkers/internship/internship.tpl.html",controller:"NursingWorkersInternshipController",controllerAs:"vm"}).state("home.graduate",{url:"/graduate",templateUrl:"app/nursingWorkers/graduate/graduate.tpl.html",controller:"NursingWorkersGraduateController",controllerAs:"vm"}).state("home.technical",{url:"/technical",templateUrl:"app/nursingWorkers/technical/technical.tpl.html",controller:"NursingWorkersTechnicalController",controllerAs:"vm"}).state("home.ulteriorly",{url:"/ulteriorly",templateUrl:"app/nursingWorkers/ulteriorly/ulteriorly.tpl.html",controller:"NursingWorkersUlteriorlyController",controllerAs:"vm"}).state("home.attemper",{url:"/attemper",templateUrl:"app/departmentManager/attemper/attemper.tpl.html",controller:"DepartmentManagerAttemperController",controllerAs:"vm"}).state("home.bed",{url:"/bed",templateUrl:"app/departmentManager/bed/bed.tpl.html",controller:"DepartmentManagerBedController",controllerAs:"vm"}).state("home.classes",{url:"/classes",templateUrl:"app/departmentManager/classes/classes.tpl.html",controller:"DepartmentManagerClassesController",controllerAs:"vm"}).state("home.endemicArea",{url:"/endemicArea",templateUrl:"app/departmentManager/endemicArea/endemicArea.tpl.html",controller:"DepartmentManagerEndemicAreaController",controllerAs:"vm"}).state("home.turns",{url:"/turns",templateUrl:"app/departmentManager/turns/turns.tpl.html",controller:"DepartmentManagerTurnsController",controllerAs:"vm"}).state("home.turnsRule",{url:"/turnsRule",templateUrl:"app/departmentManager/turnsRule/turnsRule.tpl.html",controller:"DepartmentManagerTurnsRuleController",controllerAs:"vm"}).state("home.leave",{url:"/leave",templateUrl:"app/departmentManager/leave/leave.tpl.html",controller:"DepartmentManagerLeaveController",controllerAs:"vm"}).state("home.departmentAttemper",{url:"/attemper",templateUrl:"app/departmentManager/attemper/attemper.tpl.html",controller:"DepartmentManagerAttemperController",controllerAs:"vm"}).state("home.departmentStatistics",{url:"/departmentStatistics",templateUrl:"app/departmentManager/statistics/statistics.tpl.html",controller:"DepartmentManagerStatisticsController",controllerAs:"vm"}).state("home.type",{url:"/type",templateUrl:"app/malCaseUp/type/type.tpl.html",controller:"MalCaseUpTypeController",controllerAs:"vm"}).state("home.call",{url:"/call",templateUrl:"app/malCaseUp/call/call.tpl.html",controller:"MalCaseUpCallController",controllerAs:"vm"}).state("home.level",{url:"/level",templateUrl:"app/malCaseUp/level/level.tpl.html",controller:"MalCaseUpLevelController",controllerAs:"vm"}).state("home.handle",{url:"/handle",templateUrl:"app/malCaseUp/handle/handle.tpl.html",controller:"MalCaseUpHandleController",controllerAs:"vm"}).state("home.handle.malCase",{url:"/malCase",templateUrl:"app/malCaseUp/handle/malCaseInfo.tpl.html"}).state("home.handle.report",{url:"/report",templateUrl:"app/malCaseUp/handle/report.tpl.html"}).state("home.handle.reportXk",{url:"/reportXk",templateUrl:"app/malCaseUp/handle/reportXk.tpl.html"}).state("home.handle.requirement",{url:"/requirement",templateUrl:"app/malCaseUp/handle/requirement.tpl.html"}).state("home.handle.measures",{url:"/measures",templateUrl:"app/malCaseUp/handle/measures.tpl.html"}).state("home.handle.estimate",{url:"/estimate",templateUrl:"app/malCaseUp/handle/estimate.tpl.html"}).state("home.fix",{url:"/fix",templateUrl:"app/malCaseUp/handle/handle.tpl.html",controller:"MalCaseUpHandleController",controllerAs:"vm"}).state("home.element",{url:"/element",templateUrl:"app/malCaseUp/element/element.tpl.html",controller:"MalCaseUpElementController",controllerAs:"vm"}).state("malCaseUpStatistics",{url:"/statistics",templateUrl:"app/malCaseUp/statistics/statistics.tpl.html",controller:"MalCaseUpStatisticsController",controllerAs:"vm"}).state("home.roles",{url:"/roles",templateUrl:"app/system/roles/roles.tpl.html",controller:"RolesController",controllerAs:"vm"}).state("home.users",{url:"/users",templateUrl:"app/system/users/users.tpl.html",controller:"UsersController",controllerAs:"vm"}).state("home.workManual",{url:"/manualWork",templateUrl:"app/manual/workManual/workManual.tpl.html",controller:"ManualWorkController",controllerAs:"vm"}).state("home.manualItem",{url:"/manualItem",templateUrl:"app/manual/item/item.tpl.html",controller:"ManualItemController",controllerAs:"vm"}).state("home.qualityCheck",{url:"/qualityCheck",templateUrl:"app/quality/check/check.tpl.html",controller:"QualityCheckController",controllerAs:"vm"}).state("home.qualityDeal",{url:"/qualityDeal",templateUrl:"app/quality/deal/deal.tpl.html",controller:"QualityDealController",controllerAs:"vm"}).state("home.qualityForm",{url:"/qualityForm",templateUrl:"app/quality/form/form.tpl.html",controller:"QualityFormController",controllerAs:"vm"}).state("home.qualityTask",{url:"/qualityTask",templateUrl:"app/quality/task/task.tpl.html",controller:"QualityTaskController",controllerAs:"vm"}).state("home.researchItem",{url:"/researchItem",templateUrl:"app/research/item/item.tpl.html",controller:"ResearchItemController",controllerAs:"vm"}).state("home.researchPapers",{url:"/researchPapers",templateUrl:"app/research/papers/papers.tpl.html",controller:"ResearchPapersController",controllerAs:"vm"}).state("home.techFiles",{url:"/techFiles",templateUrl:"app/techFiles/techFiles/techFiles.tpl.html",controller:"TechFileController",controllerAs:"vm"}).state("home.jci",{url:"/jci",templateUrl:"app/techFiles/jci/jci.tpl.html",controller:"TechFileJCIController",controllerAs:"vm"}).state("login",{url:"/login",templateUrl:"app/login/login.html"}),t.otherwise("/login")}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("nqms").config(e)}(),function(){"use strict";angular.module("nqms").constant("moment",moment).constant("apiHost",function(){var e="/mnisqm";return{system:{login:e+"/system/login",getRoleList:e+"/system/getRoleLst",getNavigation:e+"/system/getFunction"},user:{getDept:e+"/user/getUserDepts"},files:{getUserList:e+"/user/getUserList",getUserDetailInfo:e+"/user/getUserDetailInfo",add:e+"/user/insertObj","delete":e+"/user/deleteUserInfo",update:e+"/user/updateObj",save:e+"/user/saveComUser"},roles:{getNotHaveFunction:e+"/system/getNotHaveFunction",getFunction:e+"/system/getFunction",getHaveFunction:e+"/system/getHaveFunction",updateRole:e+"/system/saveSysRoleFuns",deleteRole:e+"/system/deleteRole",saveRole:e+"/system/saveRole"},users:{getUserList:e+"/system/getSysUserList",deleteUser:e+"/system/deleteSysUser",deleteUserRole:e+"/system/deleteSysUserRole",saveUserRole:e+"/system/saveSysUserRole",saveUser:e+"/system/saveSysUser"},events:{getEventTypeList:e+"/event/getEventTypeList",getEventList:e+"/event/getEventList",getEventReport:e+"/event/getEventReport",saveEventReport:e+"/event/saveEventReport",deleteEventReport:e+"/event/deleteEventReport",getReportDetail:e+"/event/getReportDetail",saveReportDetail:e+"/event/saveReportDetail",saveEventRequirement:e+"/event/saveEventRequirement",getEventRequirement:e+"/event/getEventRequirement",deleteEventRequirement:e+"/event/deleteEventRequirement",saveEventMeasures:e+"/event/saveEventMeasures",getEventMeasures:e+"/event/getEventMeasures",deleteEventMeasures:e+"/event/deleteEventMeasures",saveEventLevel:e+"/event/saveEventLevel",getEventLevels:e+"/event/getEventLevels",deleteEventLevel:e+"/event/deleteEventLevel"},schedule:{newSchedule:e+"/schedule/newSchedule",saveSchedule:e+"/schedule/saveSchedule",getSchedule:e+"/schedule/getSchedule",getGroupList:e+"/schedule/getGroupList",deleteGroup:e+"/schedule/deleteGroup",saveGroup:e+"/schedule/saveGroup",getClassList:e+"/schedule/getClassList",saveClass:e+"/schedule/saveClass",deleteClass:e+"/schedule/deleteClass",getLeaveList:e+"/schedule/getLeaveList",saveScheduleLeave:e+"/schedule/saveScheduleLeave",deleteScheduleLeave:e+"/schedule/deleteScheduleLeave",apprvScheduleLeave:e+"/schedule/apprvScheduleLeave",getRuleList:e+"/schedule/getRuleList",saveRule:e+"/schedule/saveRule",deleteRule:e+"/schedule/deleteRule",getUserNurses:e+"/schedule/getUserNurses",batchSaveUserNurse:e+"/schedule/batchSaveUserNurse",getChangeClass:e+"/schedule/getChangeClass",saveChangeClass:e+"/schedule/saveChangeClass",deleteChangeClass:e+"/schedule/deleteChangeClass",apprvChangeClass:e+"/schedule/apprvChangeClass",statistics:{getByLeave:e+"/schedule/getCountByLeave",getByDays:e+"/schedule/getCountByDays",getByClass:e+"/schedule/getCountByClass"}},manual:{item:{get:e+"/manualWork/queryManualWorkItemByDeptCode",save:e+"/manualWork/saveManualWorkItem","delete":e+"/manualWork/deleteManualWorkItem",update:e+"/manualWork/updateManualWorkItem"},workManual:{get:e+"/manualWork/queryManualWorkByDeptCodeAndDate",save:e+"/manualWork/saveManualWork","delete":e+"/manualWork/saveManualWorkDetail",update:e+"/manualWork/updateManualWorkDetail"}},research:{getResearchItems:e+"/research/getResearchItems",saveResearchItem:e+"/research/saveResearchItem",deleteResearchItem:e+"/research/deleteResearchItem",saveResearchPaper:e+"/research/saveResearchPaper",getResearchPapers:e+"/research/getResearchPapers",deleteResearchPaper:e+"/research/deleteResearchPaper"},qualityManager:{getQualityFormList:e+"/quality/queryQualityFormByDeptCodeAndType",editQualityForm:e+"/quality/updateQualityForm",saveQualityForm:e+"/quality/saveQualityForm",deleteQualityForm:e+"/quality/deleteQualityForm",getQualityTaskList:e+"/quality/queryQTRByTimeAndTypeAndDeptCode",editQualityTask:e+"/quality/updateQualityTask",saveQualityTask:e+"/quality/saveQualityTask",deleteQualityTask:e+"/quality/deleteQualityTask",getAllQualityForm:e+"/quality/queryAllQualityForm",getQualityCheckDetail:e+"/quality/queryQRByTimeAndFormNameAndDeptCode",getQualityCheckList:e+"/quality/queryQRByTimeAndFormNameAndDeptCode",editQualityCheck:e+"/quality/updateQualityResult",deleteQualityCheck:e+"/quality/deleteQualityResult",getQualityDealList:e+"/quality/getQualityIssueManageByResultCode",saveQualityDeal:e+"/quality/saveQualityIssueManage",editQualityDeal:e+"/quality/updateQualityIssueManage",deleteQualityDeal:e+"/quality/deleteQualityIssueManage",getQualityResultCode:e+"/quality/queryQIMByTimeAndTypeAndDeptCode"},techFiles:{getNurseList:{url:e+"/user/getUserList",method:"get"},updateNurseInfo:{url:e+"/user/saveComUser",method:"post"},academic:{setter:{url:e+"/ProfSkillDoc/saveAcademicConference",method:"post"},getter:{url:e+"/ProfSkillDoc/getAcademicConferences",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteAcademicConference",method:"get"}},assessment:{setter:{url:e+"/ProfSkillDoc/saveAssessment",method:"post"},getter:{url:e+"/ProfSkillDoc/getAssessment",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteAssessment",method:"get"}},awardPunish:{setter:{url:e+"/ProfSkillDoc/saveAwardPunishmentInfo",method:"post"},getter:{url:e+"/ProfSkillDoc/getAwardPunishmentInfo",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteAwardPunishmentInfo",method:"get"}},conEducation:{setter:{url:e+"/ProfSkillDoc/saveContinuingEducation",method:"post"},getter:{url:e+"/ProfSkillDoc/getContinuingEducation",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteContinuingEducation",method:"get"}},cprAcls:{setter:{url:e+"/ProfSkillDoc/saveCprAcls",method:"post"},getter:{url:e+"/ProfSkillDoc/getCprAcls",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteCprAcls",method:"get"}},eduRecord:{setter:{url:e+"/ProfSkillDoc/saveEducationRecordInspection",method:"post"},getter:{url:e+"/ProfSkillDoc/getEducationRecordInspection",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteEducationRecordInspection",method:"get"}},nurseHirReg:{setter:{url:e+"/ProfSkillDoc/saveNurseHirarchicalRegistration",method:"post"},getter:{url:e+"/ProfSkillDoc/getNurseHirarchicalRegistration",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteNurseHirarchicalRegistration",method:"get"}},perAssessment:{setter:{url:e+"/ProfSkillDoc/savePersonalAssessment",method:"post"},getter:{url:e+"/ProfSkillDoc/getPersonalAssessment",method:"post"},deleter:{url:e+"/ProfSkillDoc/deletePersonalAssessment",method:"get"}},posStatement:{setter:{url:e+"/ProfSkillDoc/savePositionStatement",method:"post"},getter:{url:e+"/ProfSkillDoc/getPositionStatement",method:"post"},deleter:{url:e+"/ProfSkillDoc/deletePositionStatement",method:"get"}},preJobTrain:{setter:{url:e+"/ProfSkillDoc/savePreJobTraining",method:"post"},getter:{url:e+"/ProfSkillDoc/getPreJobTraining",method:"post"},deleter:{url:e+"/ProfSkillDoc/deletePreJobTraining",method:"get"}},nurseExp:{setter:{url:e+"/ProfSkillDoc/saveSpecialistNursesExperience",method:"post"},getter:{url:e+"/ProfSkillDoc/getSpecialistNursesExperience",method:"post"},deleter:{url:e+"/ProfSkillDoc/deleteSpecialistNursesExperience",method:"get"}}}}}())}(),function(){"use strict";function e(e,t,a,l){e.debugEnabled(!0),t.autoDismiss=!0,t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-center",t.progressBar=!1,t.preventOpenDuplicates=!0,t.position="toast-top-center",t.iconClasses={error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},a.config({blurTrig:!0,showError:!0,removeError:!0}),l.interceptors.push("myHttpInterceptor")}e.$inject=["$logProvider","toastrConfig","w5cValidatorProvider","$httpProvider"],angular.module("nqms").config(e)}(),angular.module("nqms").run(["$templateCache",function(e){e.put("app/login/login.html",'<div class="center-bg" ng-controller="LoginController as vm"><div class="left-bg"></div><div class="w"><div class="login-wrapper"><div class="logo-nurse"></div><div class="login-box"><div class="login-box__header">用户登录</div><form class="login-box__form form-wrapper w5c-form" novalidate="" w5c-form-validate="vm.validationOption" name="loginForm"><div class="err-wrapper"></div><div class="form-item form-item__sm"><label class="name-label"><span class="fa fa-user"></span></label> <input autocomplete="off" ng-pattern="/^[0-9A-Za-z_]{1,19}$/" required="" type="text" ng-model="vm.formData.loginName" name="loginName" class="form-ctr input" id="user-name" placeholder="用户名"></div><div class="form-item form-item__sm"><label class="name-label" for="password"><span class="fa fa-lock"></span></label> <input autocomplete="off" type="password" required="" name="password" ng-model="vm.formData.password" class="form-ctr input" id="password" placeholder="密码"></div><div class="submit-wrapper form-item"><button w5c-form-submit="vm.login(vm.formData)" class="btn login-btn btn-default {{vm.loginBtnStatus.state}}">{{vm.loginBtnStatus.title}}</button></div><div class="reset-password"><a href="javascript:;">重置</a></div></form></div></div></div></div>'),
e.put("app/main/main.html",'<div class="container-fluid full-screen"><acme-header></acme-header><acme-navbar></acme-navbar><div class="main-body container-fluid" ui-view="" ng-class="{\'main-body_min-nav\': main.minMode, \'sub-nav-hidden\': !main.isSubNavShow}"></div><div class="footer">Copyright © 2016 深圳联新移动医疗有限公司 All Rights Reserved.</div></div>'),e.put("app/role/role.tpl.html",'<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Title</title></head><body></body></html>'),e.put("app/common/exportExcel/exportExcel.tpl.html",'<button class="btn btn-xs btn-default" ng-click="vm.doExport(vm.exslSrc)"><i class="fa fa-download"></i> 导出Excel</button>'),e.put("app/common/loading/loading.tpl.html",'<div class="loading-wrapper" ng-style="{\'margin-left\': vm.windowWidth / 2 - 25 + \'px\', \'margin-top\': vm.windowHeight / 2 - 25 + \'px\'}"><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div>'),e.put("app/components/breadcrumb/breadcrumb.html",'<div class="tab-bread-wrapper"><ul class="tab-bread"><li ng-repeat="(id, name) in bc.tabTemp" uib-tooltip="{{name}}" tooltip-placement="bottom"><div ui-sref=".{{id}}" ui-sref-active="active" ng-class="{active: bc.isActive(\'{{id}}\')}" class="tab-bread__item" href="#"><span>{{name}}</span> <a ng-click="bc.removeTab($event)" data-id="{{id}}" class="close-tab" href="javascript:;">×</a></div></li></ul></div>'),e.put("app/components/header/changeRole.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">切换角色</h5></div><div class="modal-body">您的现有角色：<table class="table table-condensed table-bordered table-striped"><tr><th></th><th>角色编号</th><th>角色名称</th><th>所属部门</th></tr><tr ng-repeat="row in vm.userRoleList" ng-class="{success: row.seqId === vm.currentRole.seqId, active: row.seqId === vm.selectedRole.seqId}"><td><input id="{{row.seqId}}" name="userRole" ng-click="vm.showRole(row)" type="radio" value="{{row.seqId}}" ng-model="vm.selectedRole.seqId"></td><td data-title="\'角色编号\'"><label for="{{row.seqId}}">{{row.roleCode}}</label></td><td data-title="\'角色名称\'"><label for="{{row.seqId}}">{{row.roleName}}</label></td><td data-title="\'所属部门\'"><label for="{{row.seqId}}">{{ row.deptName }}</label></td></tr></table></div><div class="modal-footer"><button class="btn btn-sm btn-success {{vm.roleBtnStatus.state}}" type="button" {{vm.loginbtnstatus.state}}="" ng-click="vm.changeRole()">{{vm.roleBtnStatus.title}}</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div>'),e.put("app/components/header/changeUser.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">切换用户</h5></div><form class="form w5c-form login-box__form change-user-form" novalidate="" w5c-form-validate="vm.validationOption" name="changeUserForm"><div class="modal-body"><div class="form-item form-item__sm"><label class="name-label"><span class="fa fa-user"></span></label> <input autocomplete="off" ng-pattern="/^[0-9A-Za-z_]{1,19}$/" required="" type="text" ng-model="vm.formData.loginName" name="loginName" class="form-ctr input" id="user-name" placeholder="用户名"></div><div class="form-item form-item__sm"><label class="name-label" for="password"><span class="fa fa-lock"></span></label> <input autocomplete="off" type="password" required="" name="password" ng-model="vm.formData.password" class="form-ctr input" id="password" placeholder="密码"></div></div><div class="modal-footer"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" {{vm.loginbtnstatus.state}}="" w5c-form-submit="vm.changeUser(vm.formData)">{{vm.loginBtnStatus.title}}</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/components/header/header.html",'<nav class="navbar header-top navbar-default navbar-fixed-top navbar-lx"><div class="container-fluid"><div class="navbar-header"><div class="logo-wrapper pull-left"><a href="/" class="logo"></a></div></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a><i class="fa fa-calendar"></i> {{hd.time_now}}</a></li><li uib-dropdown=""><a id="msg-button" class="dropdown-link" uib-dropdown-toggle="" ng-disabled="disabled"><i class="fa fa-bell"></i> 消息</a><ul uib-dropdown-menu="" role="menu" aria-labelledby="msg-button"><li><a href="">账号信息</a></li><li><a href="">账号信息</a></li><li><a href="">账号信息</a></li><li><a href="">账号信息</a></li></ul></li><li uib-dropdown=""><a id="user-button" class="dropdown-link" uib-dropdown-toggle="" ng-disabled="disabled"><i class="fa fa-user"></i> {{hd.user.loginName}}</a><ul uib-dropdown-menu="" role="menu" aria-labelledby="user-button"><li><a href="javascript:;"><i class="fa fa-exclamation-circle"></i> 账号信息</a></li><li><a href="javascript:;" ng-click="hd.openRoleDialog()"><i class="fa fa-exchange"></i> <span>切换角色</span></a></li><li><a href="javascript:;" ng-click="hd.openUserDialog()"><i class="fa fa-users"></i> <span>切换用户</span></a></li><li><a ng-click="hd.logout()" href="javascript:;"><i class="fa fa-sign-out"></i> <span>退出系统</span></a></li></ul></li></ul></div></div></nav>'),e.put("app/components/navbar/navbar.html",'<div class="left-nav" print-remove="" ng-class="{\'left-min\': vm.minMode, \'left-sub-min\': !vm.isSubNavShow}"><div class="nav-container" print-remove="" print-hide=""><div class="nav-wrapper" ng-class="{\'left-nav-min\': vm.minMode}"><ul class="nav-menu" print-remove=""><li class="nav-menu_item nav-view-trigger"><a href="javascript:;" ng-click="vm.toggleNavView()"><i class="fa nav-menu_item-icon" ng-class="{\'fa-list\': !vm.minMode, \'fa-square\': vm.minMode}"></i></a></li><li class="nav-menu_item" ng-class="{\'active\': $index === vm.currentIndex}" ng-repeat="item in vm.navData track by $index" data-title="{{item.funUrl}}"><a href="javascript:;" ng-click="vm.showSubNav($index)" tooltip-enable="vm.minMode" uib-tooltip="{{item.funName}}" tooltip-placement="right" tooltip-append-to-body="true"><i class="fa fa-{{item.icoName}} nav-menu_item-icon"></i> <span class="nav-menu_item-text" ng-if="!vm.minMode">{{item.funName}}</span></a></li></ul></div><div class="sub-nav" print-remove="" ng-class="{\'sub-nav-min\': !vm.isSubNavShow, \'nav-min\': vm.minMode}"><ul class="sub-nav-list nav-menu"><li class="nav-title sub-nav-list_item"><i class="nav-menu_item-icon"></i> <span class="nav-menu_item-text">{{vm.navData[vm.currentIndex].funName}}</span></li><li class="sub-nav-list_item nav-menu_item" ng-repeat="subItem in vm.navData[vm.currentIndex].child"><a ui-sref-active="active" ng-click="vm.setActiveIndex()" ng-class="{active: vm.isActive(\'{{subItem.funUrl}}\')}" data-id="{{subItem.funUrl}}" data-name="{{subItem.funName}}" ui-sref=".{{subItem.funUrl}}"><i class="nav-menu_item-icon"></i> <span class="nav-menu_item-text">{{subItem.funName}}</span></a></li></ul><a class="sub-nav-trigger" href="javascript:;" ng-click="vm.toggleSubNavView()" ng-class="{\'outer\': !vm.isSubNavShow}" ng-mouseenter="vm.triggerHover = {\'width\': \'20px\'}"><i class="fa" ng-class="{\'fa-angle-left\': vm.isSubNavShow, \'fa-angle-right\': !vm.isSubNavShow}"></i></a></div></div></div>'),e.put("app/departmentManager/bed/bed.tpl.html",'<div class="col-md-7"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>床位分组管理</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'组号\'" class="text-center" ng-click="vm.edit(row)">{{ row.groupCode }}</td><td data-title="\'组名\'" class="text-center" ng-click="vm.edit(row)">{{ row.groupName }}</td><td data-title="\'床位\'" class="text-center" ng-click="vm.edit(row)">{{ row.beds }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.deleteGroup(row.seqId)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div><div class="col-md-5"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>新增分组</span></div><div class="panel-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addbedForm" form="addbedForm"><div class="container-fluid"><div class="col-md-12"><div class="form-group"><label for="groupCode" class="col-sm-3 control-label">组号：</label><div class="col-sm-9"><input class="form-control input-sm" autocomplete="off" ng-model="vm.formData.groupCode" name="groupCode" type="text" id="groupCode"></div></div><div class="form-group"><label for="groupName" class="col-sm-3 control-label">组名：</label><div class="col-sm-9"><input class="form-control input-sm" name="groupName" required="" autocomplete="off" ng-model="vm.formData.groupName" type="text" id="groupName"></div></div><div class="form-group"><label for="bedCode" class="col-sm-3 control-label">床位：</label><div class="col-sm-9"><ul class="flow-list"><li ng-repeat="flowItem in vm.formData.bedList track by $index"><span>{{ flowItem }}</span> <a ng-click="vm.removeFlow($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></li></ul><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="新增床位" autocomplete="off" name="bedCode" id="bedCode"> <span class="input-group-btn"><button ng-click="vm.addFlow()" class="btn btn-primary btn-sm" ng-disabled="addbedForm.bedCode.$invalid || addbedForm.bedCode.$pristine">新增</button></span></div></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveGroup()" ng-disabled="addbedForm.groupName.$invalid || addbedForm.groupCode.$invalid">保存</button></div></div></div></div></form></div></div></div>'),e.put("app/departmentManager/attemper/attemper.model.html",'<div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写排班规则</h5></div><form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-4">申请人：</label> <input ng-model="vm.formData.applyUserCode"></div><div class="form-group col-sm-6"><label class="control-label col-sm-4">申请原因：</label> <input ng-model="vm.formData.changeCause"></div></div><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-4">处理状态：</label><select ng-model="vm.formData.status"><option value="01">未处理</option><option value="02">已审批</option><option value="03">已拒绝</option></select></div><div class="form-group col-sm-6"><label class="control-label col-sm-4">处理备注：</label> <input ng-model="vm.formData.remark"></div></div><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-4">申请人班次：</label> <input ng-model="vm.formData.applyClass"></div><div class="form-group col-sm-6"><label class="control-label col-sm-4">申请人班次日期：</label> <input ng-model="vm.formData.applyClassDate"></div></div><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-4">调班人：</label> <input ng-model="vm.formData.changeUserCode"></div><div class="form-group col-sm-6"><label class="control-label col-sm-4">调班人班次：</label> <input ng-model="vm.formData.changeClass"></div></div><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-4">调班人班次日期：</label> <input ng-model="vm.formData.changeClassDate"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),e.put("app/departmentManager/attemper/attemper.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-eye-slash"></i> <span>调班管理</span><div class="pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.add()">新增调班</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr><th>申请人</th><th>申请时间</th><th>申请原因</th><th>处理状态</th><th>处理备注</th><th>申请人班次</th><th>申请人班次日期</th><th>调班人</th><th>调班人班次</th><th>调班人班次日期</th><th>操作</th></tr><tr ng-repeat="row in vm.lst"><td>{{row.changeUserCode}}</td><td>{{row.group}}</td><td>{{row.changeCause}}</td><td>{{row.status}}</td><td>{{row.refuseCause}}</td><td>{{row.applyClass}}</td><td>{{row.applyClassDate}}</td><td>{{row.changeUserCode}}</td><td>{{row.changeClass}}</td><td>{{row.changeClassDate}}</td><td><button class="btn btn-xs btn-primary" ng-click="vm.edit(row)"><span class="fa fa-pencil"></span></button> <button class="btn btn-xs btn-primary" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/departmentManager/classes/addClasses.tpl.html",'<div class="mod-pop-dateForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">新增班次</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addClassesForm"><div class="container-fluid"><div class=""><div class="form-group"><label for="dept" class="col-sm-3 control-label">科室：</label><div class="col-sm-6"><input class="form-control input-sm input-none" readonly="" name="" id="dept" type="text" value="{{vm.formData.deptName}}"></div></div><div class="form-group"><label for="turn" class="col-sm-3 control-label">班次：</label><div class="col-sm-4"><input class="form-control input-sm" required="" ng-model="vm.formData.className" id="turn" name="" autocomplete="off" type="text"></div></div><div class="form-group partial-form-group"><label for="" class="col-sm-3 control-label">开始时间：</label><div class="col-sm-8"><uib-timepicker class="timepick" ng-model="vm.formData.startTime" hour-step="1" minute-step="1" required="" template-url="app/common/tpls/timepicker/timepicer.html" show-meridian="false"></uib-timepicker></div></div><div class="form-group partial-form-group"><label for="" class="col-sm-3 control-label">结束时间：</label><div class="col-sm-8"><uib-timepicker class="timepick" ng-model="vm.formData.endTime" hour-step="1" minute-step="1" required="" template-url="app/common/tpls/timepicker/timepicer.html" show-meridian="false"></uib-timepicker></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),e.put("app/departmentManager/classes/classes.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>班次管理</span><div class="pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.addClasses()">新增班次</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'科室\'">{{vm.deptName}}</td><td data-title="\'班次\'">{{ row.className }}</td><td data-title="\'开始时间\'">{{ row.startTime }}</td><td data-title="\'结束时间\'">{{ row.endTime }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-primary btn-xs classes-handler-btn" uib-tooltip="编辑" ng-click="vm.edit(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs classes-handler-btn" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/departmentManager/endemicArea/endemicArea.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>病区护理人员管理</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr><th>工号</th><th>姓名</th><th>所属护理组</th><th>护士级别</th><th>是否夜班准入</th><th>是否参与排班</th></tr><tr ng-repeat="row in vm.lst"><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td><select ng-model="row.groupCode"><option ng-repeat="group in vm.groupLst" value="{{group.groupCode}}">{{group.groupName}}</option></select></td><td><select ng-model="row.level"><option value="01">N1</option><option value="02">N2</option><option value="03">N3</option></select></td><td><select ng-model="row.night"><option value="1">是</option><option value="0">否</option></select></td><td><select ng-model="row.isSchedule"><option value="1">是</option><option value="0">否</option></select></td></tr></table><div class="pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.saveArea()">保存</button></div></div></div></div>'),e.put("app/departmentManager/leave/addLeave.tpl.html",'<div class="mod-pop-dateForm addLeave"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">请假</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addleaveForm"><div class="container-fluid"><div class=""><div class="form-group"><label for="txt" class="col-sm-3 control-label">请假类型：</label><div class="col-sm-7"><select ng-model="vm.formData.leaveType"><option value="01">调休假</option><option value="02">事假</option><option value="03">年假</option><option value="04">病假</option><option value="05">产假</option><option value="06">丧假</option></select></div></div><div class="form-group"><label for="txt" class="col-sm-3 control-label">请假原因：</label><div class="col-sm-7"><textarea class="form-control input-sm partial-textarea" id="txt" ng-model="vm.formData.leaveWhy"></textarea></div></div><div class="form-group"><label for="txt" class="col-sm-3 control-label">请假天数：</label><div class="col-sm-7"><input class="form-control input-sm" ng-model="vm.formData.days"></div></div><div class="form-group partial-form-group"><label class="col-sm-3 control-label">开始时间：</label><div class="col-sm-8"><input type="text" class="form-control input-sm partial-input partial-input-sm date-pick" uib-datepicker-popup="yyyy-MM-dd" ng-model="vm.formData.startDate" is-open="popup1" ng-click="popup1 = true" placeholder="年-月-日" required="" readonly=""><uib-timepicker class="timepick" ng-model="vm.formData.startTime" hour-step="1" minute-step="1" second-step="1" show-meridian="false" template-url="app/common/tpls/timepicker/timepicer.html" show-seconds="true"></uib-timepicker></div></div><div class="form-group partial-form-group"><label class="col-sm-3 control-label">结束时间：</label><div class="col-sm-8"><input type="text" class="form-control input-sm partial-input partial-input-sm date-pick" uib-datepicker-popup="yyyy-MM-dd" ng-model="vm.formData.endDate" is-open="popup2" ng-click="popup2 = true" placeholder="年-月-日" readonly=""><uib-timepicker class="timepick" ng-model="vm.formData.endTime" hour-step="1" minute-step="1" second-step="1" show-meridian="false" template-url="app/common/tpls/timepicker/timepicer.html" show-seconds="true"></uib-timepicker></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),e.put("app/departmentManager/leave/leave.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>请假管理</span><div class="pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.addLeave()">请假</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'部门名称\'" class="text-center">{{row.deptName}}</td><td data-title="\'员工姓名\'" class="text-center">{{row.userName}}</td><td data-title="\'起始时间\'" class="text-center">{{row.startTime}}</td><td data-title="\'结束时间\'" class="text-center">{{row.endTime}}</td><td data-title="\'请假类型\'" class="text-center">{{row.leaveType}}</td><td data-title="\'请假原因\'" class="text-center">{{row.leaveWhy}}</td><td data-title="\'审批状态\'" class="text-center">{{row.approveStatusName}}</td><td data-title="\'备注\'" class="text-center">{{row.approveRemark}}</td><td data-title="\'操作\'" class="text-center operation"><button class="btn btn-xs btn-primary f14" uib-tooltip="修改" ng-click="vm.edit(row)"><span class="fa fa-edit"></span></button> <button class="btn btn-xs btn-danger f14" uib-tooltip="删除" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button> <button class="btn btn-xs btn-default f14" uib-tooltip="审核批准" ng-click="vm.review(row)"><span class="fa fa-list-alt"></span></button></td></tr></table></div></div></div>'),e.put("app/departmentManager/leave/review.tpl.html",'<div class="mod-pop-dateForm addLeave"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">请假</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="reviewForm"><div class="container-fluid"><div class=""><div class="form-group"><label class="col-sm-3 control-label">姓名：</label><div class="col-sm-6 input-sm">{{ vm.formData.userName }}</div></div><div class="form-group"><label for="txt" class="col-sm-3 control-label">请假原因：</label><div class="col-sm-7 input-sm">{{ vm.formData.leaveWhy }}</div></div><div class="form-group partial-form-group"><label class="col-sm-3 control-label">开始时间：</label><div class="col-sm-8 input-sm">{{ vm.formData.startTime }}</div></div><div class="form-group partial-form-group"><label class="col-sm-3 control-label">结束时间：</label><div class="col-sm-8 input-sm">{{ vm.formData.endTime }}</div></div><div class="form-group partial-form-group"><label class="col-sm-3 control-label">审核：</label><div class="col-sm-8"><div class="radio"><label><input type="radio" name="select1" value="02" aria-label="批准" required="" ng-model="vm.formData.approveStatus" ng-click="reviewForm.approveStatus = false"> <span class="select">批准</span></label> <label><input type="radio" name="select1" value="03" aria-label="拒绝" required="" ng-model="vm.formData.approveStatus" ng-click="reviewForm.approveStatus = true"> <span class="select">拒绝</span></label></div></div></div><div class="form-group" ng-if="reviewForm.approveStatus === true || vm.formData.approveStatus==\'03\'"><label for="txt" class="col-sm-3 control-label">审核备注：</label><div class="col-sm-7"><textarea class="form-control input-sm partial-textarea" id="txt" ng-model="vm.formData.approveRemark"></textarea></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),e.put("app/departmentManager/turns/turns.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading" style="height: 40px"><i class="fa fa-eye-slash"></i> <span>排班管理</span><div class="week-switch pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.backWeek()">上一周</button> <span>第{{vm.data.weeks}}周</span> <button class="btn btn-xs btn-primary" ng-click="vm.nextWeek()">下一周</button> <button class="btn btn-xs btn-primary" ng-click="vm.newTurns()">重新排班</button> <button class="btn btn-xs btn-primary" ng-click="vm.copyWeek()">复制上周</button> <button class="btn btn-xs btn-primary" ng-click="vm.saveTurns()">保存</button></div></div><div class="panel-body"><form class="form-inline"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr><th>员工姓名</th><th>{{vm.data.week1}}</th><th>{{vm.data.week2}}</th><th>{{vm.data.week3}}</th><th>{{vm.data.week4}}</th><th>{{vm.data.week5}}</th><th>{{vm.data.week6}}</th><th>{{vm.data.week7}}</th></tr><tr ng-repeat="row in vm.lst"><td>{{row.userName}}</td><td><div class="turn-item-wrapper" ng-repeat="week1 in row.week1 track by $index"><select class="form-control input-sm" ng-model="row.week1[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td><td><div class="turn-item-wrapper" ng-repeat="week2 in row.week2 track by $index"><select class="form-control input-sm" ng-model="row.week2[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td><td><div class="turn-item-wrapper" ng-repeat="week3 in row.week3 track by $index"><select class="form-control input-sm" ng-model="row.week3[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td><td><div class="turn-item-wrapper" ng-repeat="week4 in row.week4 track by $index"><select class="form-control input-sm" ng-model="row.week4[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td><td><div class="turn-item-wrapper" ng-repeat="week5 in row.week5 track by $index"><select class="form-control input-sm" ng-model="row.week5[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td><td><div class="turn-item-wrapper" ng-repeat="week6 in row.week6 track by $index"><select class="form-control input-sm" ng-model="row.week6[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td><td><div class="turn-item-wrapper" ng-repeat="week7 in row.week7 track by $index"><select class="form-control input-sm" ng-model="row.week7[$index].classCode"><option ng-repeat="c in vm.classList" value="{{c.classCode}}">{{c.className}}</option></select></div></td></tr></table></form></div></div></div>'),e.put("app/departmentManager/statistics/detail.grid.html",'<td colspan="{{tdLen}}"><div class="tpl"><table class="table table-hover table-condensed table-bordered table-striped"><thead><tr><th st-sort="rowNumber">序号</th><th st-sort="month">月份</th><th st-sort="deptCode">病区</th><th st-sort="hisCode">HIS工号</th><th st-sort="userName">姓名</th><th st-sort="bj" ng-if="vm.queryParams.type === \'leave\'">病假（天）</th><th st-sort="nj" ng-if="vm.queryParams.type === \'leave\'">年假（天）</th><th st-sort="hj" ng-if="vm.queryParams.type === \'leave\'">婚假（天）</th><th st-sort="txj" ng-if="vm.queryParams.type === \'leave\'">调休假（天）</th><th st-sort="sj" ng-if="vm.queryParams.type === \'leave\'">丧假（天）</th><th st-sort="cj" ng-if="vm.queryParams.type === \'leave\'">产假（天）</th><th st-sort="yb" ng-if="vm.queryParams.type === \'class\'">夜班（个）</th><th st-sort="jjr" ng-if="vm.queryParams.type === \'days\'">节假日上班（天）</th></tr></thead><tbody><tr ng-repeat="row in vm.statisticsData"><td>{{row.rowNumber}}</td><td>{{row.month}}</td><td>{{row.deptCode}}</td><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.bj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.nj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.hj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.txj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.sj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.cj}}</td><td ng-if="vm.queryParams.type === \'class\'">{{row.yb}}</td><td ng-if="vm.queryParams.type === \'days\'">{{row.jjr}}</td></tr></tbody></table></div></td>'),e.put("app/departmentManager/statistics/statistics.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>统计上报</span><div class="pull-right"><export-excel exsl-src="\'/asdasd/asdasd/asdasd\'"></export-excel><button class="btn btn-xs btn-default" ng-click="vm.addLeave()"><i class="fa fa-print"></i> 打印</button></div></div><div class="filter-bar form-inline"><div class="filter-item"><label>统计类别：</label><select name="" ng-model="vm.queryParams.type" class="form-control input-sm"><option value="leave" selected="">考勤统计</option><option value="class">夜班统计</option></select></div><div class="filter-item" ng-if="vm.queryParams.type !== \'days\'"><label>月份：</label> <span class="input-group"><input ng-model="vm.queryParams.month" type="text" id="month" name="month" required="" uib-datepicker-popup="" datepicker-options="vm.options.month" on-open-focus="true" is-open="vm.picker.monthOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openPicker(\'month\')"><i class="fa fa-calendar"></i></button></span></span></div><div class="filter-item"><label>科室：</label><select class="form-controll input-sm" ng-model="vm.queryParams.dept" ng-options="dept as dept.deptName for dept in vm.deptList track by dept.deptCode" name="dept"></select></div><div class="filter-item" ng-if="vm.queryParams.type === \'days\'"><label>日期区间：</label><div class="inline"><span class="input-group"><input ng-model="vm.queryParams.startDate" type="text" id="startDate" name="startDate" required="" uib-datepicker-popup="" datepicker-options="vm.options.startDate" on-open-focus="true" is-open="vm.picker.startDateOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openPicker(\'startDate\')"><i class="fa fa-calendar"></i></button></span></span></div>-<div class="inline"><span class="input-group"><input ng-model="vm.queryParams.endDate" type="text" id="endDate" name="endDate" required="" uib-datepicker-popup="" datepicker-options="vm.options.endDate" on-open-focus="true" is-open="vm.picker.endDateOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openPicker(\'endDate\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="filter-item"><button type="button" name="button" class="btn btn-sm btn-default" ng-click="vm.getStatistics()">统计</button></div></div><div class="panel-body"><table st-table="vm.statisticsData" st-safe-src="rowCollection" class="table table-hover table-condensed table-bordered table-striped"><thead><tr class="header-export"><th st-sort="hisCode">HIS工号</th><th st-sort="userName">姓名</th><th st-sort="bj" ng-if="vm.queryParams.type === \'leave\'">病假（天）</th><th st-sort="nj" ng-if="vm.queryParams.type === \'leave\'">年假（天）</th><th st-sort="hj" ng-if="vm.queryParams.type === \'leave\'">婚假（天）</th><th st-sort="txj" ng-if="vm.queryParams.type === \'leave\'">调休假（天）</th><th st-sort="sj" ng-if="vm.queryParams.type === \'leave\'">丧假（天）</th><th st-sort="cj" ng-if="vm.queryParams.type === \'leave\'">产假（天）</th><th st-sort="yb" ng-if="vm.queryParams.type === \'class\'">夜班（个）</th><th st-sort="jjr" ng-if="vm.queryParams.type === \'days\'">节假日上班（天）</th></tr></thead><tbody ng-repeat="row in vm.statisticsData"><tr><td>{{row.hisCode}}</td><td>{{row.userName}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.bj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.nj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.hj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.txj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.sj}}</td><td ng-if="vm.queryParams.type === \'leave\'">{{row.cj}}</td><td ng-if="vm.queryParams.type === \'class\'">{{row.yb}}</td><td ng-if="vm.queryParams.type === \'days\'">{{row.jjr}}</td></tr></tbody></table></div></div></div>'),
e.put("app/departmentManager/turnsRule/turnsRule.model.html",'<div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写排班规则</h5></div><form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-4">规则名称：</label> <input ng-model="vm.formData.ruleName"></div><div class="form-group col-sm-6"><label class="control-label col-sm-4">日期类型：</label><select ng-model="vm.formData.dateType"><option value="01">工作日</option><option value="02">周末</option></select></div></div><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-4">班次：</label><select ng-model="vm.formData.classCode"><option ng-repeat="c in vm.metaData.classList" value="{{c.classCode}}">{{c.className}}</option></select></div><div class="form-group col-sm-6"><label class="control-label col-sm-4">班次次数：</label> <input ng-model="vm.formData.userCount"></div></div><div class="row"><div class="form-group col-sm-6"><label class="control-label col-sm-4">护理人员级别：</label> <input ng-model="vm.formData.userLevel"></div><div class="form-group col-sm-6"><label class="control-label col-sm-4">备注：</label> <input ng-model="vm.formData.remark"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),e.put("app/departmentManager/turnsRule/turnsRule.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-eye-slash"></i> <span>排班规则管理</span><div class="pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.add()">新增规则</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'规则名称\'">{{row.ruleName}}</td><td data-title="\'日期类型\'">{{row.dateTypeName}}</td><td data-title="\'班次\'">{{row.className}}</td><td data-title="\'班次次数\'">{{row.userCount}}</td><td data-title="\'护理人员级别\'">{{row.userLevel}}</td><td data-title="\'备注\'">{{row.remark}}</td><td data-title="\'操作\'" print-remove=""><button class="btn btn-xs btn-primary" ng-click="vm.edit(row)"><span class="fa fa-pencil"></span></button> <button class="btn btn-xs btn-primary" ng-click="vm.del(row.seqId)"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/malCaseUp/call/call.include.html",'<form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><div class="form-group"><label for="name" class="control-label">事件等级：</label> <input type="hidden" ng-model="vm.formData.damageLevel"><select ng-change="vm.formData.damageLevel = (vm.metaData.levelList | filter:vm.formData.level.damageLevelName)[0].damageLevel" data="" class="form-controll input-sm" ng-options="level.damageLevelName for level in vm.metaData.levelList track by level.damageLevel" ng-model="vm.formData.level"></select></div><div class="form-group"><label for="name" class="control-label">上报科室：</label> <input type="hidden" ng-model="vm.formData.deptCode"><select ng-change="vm.formData.deptCode = (vm.metaData.deptList | filter:vm.formData.dept.deptName)[0].deptCode" data="" class="form-controll input-sm" ng-options="dept.deptName for dept in vm.metaData.deptList track by dept.deptCode" ng-model="vm.formData.dept"></select></div><div class="form-group"><label for="email" class="control-label">发生时间：</label> <span class="input-group"><input ng-model="vm.formData.eventDate" type="text" id="eventDate" name="eventDate" required="" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.eventTimeOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.eventTimeCalender()"><i class="fa fa-calendar"></i></button></span></span><uib-timepicker template-url="app/common/tpls/timepicker/timepicer.html" ng-model="vm.formData.eventTime" class="time-picker" ng-change="vm.timeChanged()" hour-step="1" minute-step="1" show-meridian="ismeridian"></uib-timepicker></div><div class="form-group"><label for="email" class="control-label">上报人：</label> <input type="hidden" ng-model="vm.formData.userCode"> <input readonly="" type="text" ng-model="vm.formData.userName" class="form-control input-sm"></div><div class="form-group"><div class="checkbox"><label><input ng-model="vm.formData.userRole" value="当事人" name="userRole" type="radio"> 当事人</label></div><div class="checkbox"><label><input ng-model="vm.formData.userRole" value="目击者" name="userRole" type="radio"> 目击者</label></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">住院号：</label> <input class="form-control input-sm" required="" ng-model="vm.formData.patientHospNo" type="text"></div><div class="form-group"><label for="email" class="control-label">床号：</label> <input type="text" ng-model="vm.formData.patientBedNo" class="form-control input-sm"></div><div class="form-group"><label for="email" class="control-label">姓名：</label> <input type="text" ng-model="vm.formData.patientName" class="form-control input-sm"></div><div class="form-group"><label for="email" class="control-label">性别：</label><select name="gender" ng-model="vm.formData.patientGender" class="form-control input-sm"><option value="0">女</option><option value="1">男</option></select></div><div class="form-group"><label for="email" class="control-label">年龄：</label> <input type="text" ng-model="vm.formData.patientAge" class="form-control input-sm" style="width:4em;"> 岁</div><div class="form-group form-block"><label class="col-sm-1 control-label">诊断：</label><div class="col-sm-11"><input type="text" ng-model="vm.formData.patientDiagnose" class="form-control input-sm"></div></div></div><div class="row"><div class="form-group"><label class="control-label">事件类型：</label><div class="checkbox" ng-repeat="eventType in vm.metaData.eventTypeList"><label><input ng-model="vm.formData.eventType" ng-checked="vm.formData.eventType.eventTypeCode == eventType.eventTypeCode" type="radio" value="{{eventType}}" name="eventTypeCode"> {{eventType.eventTypeName}}</label></div></div></div><div class="row"><div class="form-group form-block"><label class="col-sm-2 control-label">事件经过描述（5WH1）：</label><div class="col-sm-10"><textarea type="text" ng-model="vm.formData.eventDescribe" class="form-control input-sm"></textarea></div></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">上报</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),e.put("app/malCaseUp/call/call.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写上报信息</h5></div><div ng-include="" src="\'app/malCaseUp/call/call.include.html\'"></div></div>'),e.put("app/malCaseUp/call/call.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-list-alt"></i> <span>不良事件列表</span><div class="pull-right"><button ng-click="vm.open()" class="btn btn-primary btn-xs"><i class="fa fa-upload"></i> 事件上报</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data"><td data-title="\'不良事件级别\'" ng-click="vm.loadDetail(row.code)">{{ row.damageLevelName }}</td><td data-title="\'类型\'" ng-click="vm.loadDetail(row.code)">{{row.eventTypeName}}</td><td data-title="\'发生时间\'" ng-click="vm.loadDetail(row.code)">{{row.eventTime}}</td><td data-title="\'科室\'" ng-click="vm.loadDetail(row.code)">{{row.deptName}}</td><td data-title="\'患者住院号\'" ng-click="vm.loadDetail(row.code)">{{ row.patientHospNo }}</td><td data-title="\'患者姓名\'" ng-click="vm.loadDetail(row.code)">{{row.patientName}}</td><td data-title="\'患者性别\'" ng-click="vm.loadDetail(row.code)">{{ row.patientGenderName}}</td><td data-title="\'患者年龄\'" ng-click="vm.loadDetail(row.code)">{{row.patientAge}}</td><td data-title="\'患者主要诊断\'" ng-click="vm.loadDetail(row.code)">{{row.patientDiagnose}}</td><td data-title="\'简要（5WH1）\'" ng-click="vm.loadDetail(row.code)">{{row.eventDescribe}}</td><td data-title="\'报告人\'" ng-click="vm.loadDetail(row.code)">{{row.userName}}</td><td data-title="\'操作\'"><button class="btn btn-default btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button></td></tr></table></div></div></div>'),e.put("app/malCaseUp/element/element.tpl.html",'<div ng-controller="MalCaseUpElementController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-indent"></i> <span>不良元素元素管理</span><div class="pull-right"><button class="btn btn-xs btn-primary">新增元素</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'元素编号\'">{{row.elementCode}}</td><td data-title="\'元素名称\'">{{row.elementName}}</td><td data-title="\'显示名称\'">{{row.viewName}}</td><td data-title="\'压疮大小\'">{{row.groupName}}</td><td data-title="\'元素类型\'">{{row.elementType}}</td><td data-title="\'组件宽度\'">{{row.width}}</td><td data-title="\'备注\'">{{row.remark}}</td><td data-title="\'是否必填\'">{{row.required}}</td></tr></table></div></div></div>'),e.put("app/malCaseUp/fix/fix.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>角色信息</span><div class="pull-right"></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data" ng-class="{\'info\': vm.selectedUserCode === row.code}"><td data-title="\'发生时间\'" ng-click="vm.loadDetail(row.code)">{{row.eventTime}}</td><td data-title="\'科室\'" ng-click="vm.loadDetail(row.code)">{{row.deptName}}</td><td data-title="\'住院号\'" ng-click="vm.loadDetail(row.code)">{{ row.patientHospNo }}</td><td data-title="\'姓名\'" ng-click="vm.loadDetail(row.code)">{{row.patientName}}</td><td data-title="\'性别\'" ng-click="vm.loadDetail(row.code)">{{ row.email }}</td><td data-title="\'年龄\'" ng-click="vm.loadDetail(row.code)">{{row.phone}}</td><td data-title="\'主要诊断\'" ng-click="vm.loadDetail(row.code)">{{row.hisCode}}</td><td data-title="\'风险评估\'" ng-click="vm.loadDetail(row.code)">{{row.name}}</td><td data-title="\'等级\'" ng-click="vm.loadDetail(row.code)">{{ row.email }}</td><td data-title="\'类型\'" ng-click="vm.loadDetail(row.code)">{{row.phone}}</td><td data-title="\'简要（5WH1）\'" ng-click="vm.loadDetail(row.code)">{{row.hisCode}}</td><td data-title="\'当事人\'" ng-click="vm.loadDetail(row.code)">{{row.name}}</td><td data-title="\'处理措施\'" ng-click="vm.loadDetail(row.code)">{{ row.email }}</td><td data-title="\'后果\'" ng-click="vm.loadDetail(row.code)">{{row.phone}}</td><td data-title="\'改进措施\'" ng-click="vm.loadDetail(row.code)">{{row.name}}</td><td data-title="\'追踪\'" ng-click="vm.loadDetail(row.code)">{{ row.email }}</td><td data-title="\'报告人\'" ng-click="vm.loadDetail(row.code)">{{row.phone}}</td></tr></table></div></div></div>'),e.put("app/malCaseUp/handle/estimate.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><ul class="list-group"><li ng-click="vm.fillItem(\'measure\', measure)" ng-class="{\'active\': vm.formData.measure.meaCode == measure.meaCode}" class="list-group-item" ng-repeat="measure in vm.formData.measureList track by $index">{{$index + 1}}. {{measure.meaContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{measure.userName}}</span></div><blockquote>{{!measure.resDescribe ? \'暂无评估\' : measure.resDescribe}}</blockquote></li><li class="list-group-item"><div class="form-group"><div class="col-sm-12"><textarea class="form-control input-sm" cols="50" rows="3" ng-disabled="!vm.formData.measure.seqId" ng-model="vm.formData.measure.resDescribe" placeholder="请选择措施">\n                </textarea></div></div><div class="form-group"><div class="col-sm-12"><button ng-click="vm.saveListItem(\'estimate\')" class="btn btn-primary btn-sm" ng-disabled="vm.formData.measure.resDescribe === \'\' || !vm.formData.measure.resDescribe">提交评估</button></div></div></li></ul></div></div></div></form>'),e.put("app/malCaseUp/handle/handle.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写上报信息</h5></div><div class="modal-body"><div class="container-fluid"><div class="text-center handle-nav"><div class="text-center status-buttons"><a ui-sref-active="active" ui-sref=".malCase"><span>1</span> 不良事件信息</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".reportXk"><span>2</span> 调查处理</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".requirement"><span>3</span> 整改要求</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".measures"><span>4</span> 整改措施</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".estimate"><span>5</span> 整改效果评估</a></div></div><div id="form-views" class="well well-sm" ui-view=""></div></div></div></div>'),e.put("app/malCaseUp/handle/handle.tpl.html",'<div class="col-md-12 handle-wrapper"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-list-alt"></i> <span>不良事件列表</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data"><td data-title="\'不良事件级别\'" ng-click="vm.loadDetail(row.code)">{{ row.damageLevelName }}</td><td data-title="\'类型\'" ng-click="vm.loadDetail(row.code)">{{row.eventTypeName}}</td><td data-title="\'发生时间\'" ng-click="vm.loadDetail(row.code)">{{row.eventTime}}</td><td data-title="\'科室\'" ng-click="vm.loadDetail(row.code)">{{row.deptName}}</td><td data-title="\'患者住院号\'" ng-click="vm.loadDetail(row.code)">{{ row.patientHospNo }}</td><td data-title="\'患者姓名\'" ng-click="vm.loadDetail(row.code)">{{row.patientName}}</td><td data-title="\'患者性别\'" ng-click="vm.loadDetail(row.code)">{{ row.patientGenderName}}</td><td data-title="\'患者年龄\'" ng-click="vm.loadDetail(row.code)">{{row.patientAge}}</td><td data-title="\'患者主要诊断\'" ng-click="vm.loadDetail(row.code)">{{row.patientDiagnose}}</td><td data-title="\'简要（5WH1）\'" ng-click="vm.loadDetail(row.code)">{{row.eventDescribe}}</td><td data-title="\'报告人\'" ng-click="vm.loadDetail(row.code)">{{row.userName}}</td><td data-title="\'操作\'"><button class="btn btn-default btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button></td></tr></table></div></div></div>'),e.put("app/malCaseUp/handle/malCaseInfo.tpl.html",'<div class="modal-body"><div class="container-fluid"><div class="label-group col-md-6"><label class="col-md-4 control-label">事件类型：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.eventTypeName}}</div></div><div class="label-group col-md-6"><label class="col-md-4 control-label">不良事件级别：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.damageLevelName}}</div></div><div class="label-group col-md-6"><label for="name" class="col-md-4 control-label">上报科室：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.deptName}}</div></div><div class="label-group col-md-6"><label class="control-label col-md-4">发生时间：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.eventTime}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">上报人：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.userName}}（{{vm.metaData.malCaseInfo.userRole}}）</div></div><div class="label-group col-md-6"><label for="name" class="col-md-4 control-label">患者住院号：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.patientHospNo}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者床号：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.patientBedNo}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者姓名：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.patientName}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者性别：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.patientGenderName}}</div></div><div class="label-group col-md-6"><label class="col-md-4 control-label">患者年龄：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.patientAge}}</div></div><div class="label-group col-md-12"><label class="col-md-2 control-label">患者诊断：</label><div class="col-md-10">{{vm.metaData.malCaseInfo.patientDiagnose}}</div></div><div class="label-group col-md-12"><label class="col-md-2 control-label">事件经过描述：</label><div class="col-md-10">{{vm.metaData.malCaseInfo.eventDescribe}}</div></div></div></div>'),e.put("app/malCaseUp/handle/measures.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><ul class="list-group"><li ng-class="{\'active\': vm.formData.measure.meaCode == measure.meaCode}" class="list-group-item" ng-click="vm.fillItem(\'measure\', measure)" ng-repeat="measure in vm.formData.measureList track by $index">{{$index + 1}}. {{measure.meaContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{measure.userName}}</span> <span style="margin-right:1em;">实施负责人：{{(vm.metaData.userList | filter:measure.headUserCode)[0].userName }}</span> <button class="btn btn-xs btn-danger" uib-tooltip="删除" ng-click="vm.removeListItem({index: $index, listName: \'measure\', meaCode: measure.meaCode, reportCode: vm.formData.reportCode})"><span class="fa fa-trash"></span></button></div></li><li class="list-group-item"><div class="form-group"><label for="email" class="col-sm-2 control-label">措施实施负责人：</label><div class="col-sm-10"><input type="hidden" name="headUserCode" ng-model="vm.formData.headUserCode"><select class="form-controll input-sm" name="userName" ng-model="vm.formData.measure.headUserName" ng-change="vm.formData.measure.headUserCode = (vm.metaData.userList | filter:vm.formData.measure.headUserName)[0].userCode"><option ng-repeat="user in vm.metaData.userList" ng-selected="user.userCode == vm.formData.measure.headUserCode" value="{{user.userName}}">{{user.userName}}</option></select></div></div><div class="form-group"><label for="email" class="col-sm-2 control-label">整改措施：</label><div class="col-sm-10"><textarea class="form-control input-sm" cols="50" rows="3" ng-model="vm.formData.measure.meaContent" placeholder="填写整改要求">\n                </textarea></div></div><div class="form-group"><label for="email" class="col-sm-2 control-label"></label><div class="col-sm-10"><button ng-click="vm.resetForm(\'measure\')" class="btn btn-primary btn-sm">清空</button> <button ng-click="vm.saveListItem(\'measure\')" class="btn btn-success btn-sm" ng-disabled="vm.formData.measure.meaContent === \'\' || !vm.formData.measure.meaContent">保存</button></div></div></li></ul></div></div></div></form>'),e.put("app/malCaseUp/handle/report.tpl.html",'<form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><p>患者信息</p><table class="table table-condensed table-bordered table-striped"><tr><th style="width: 5em;"></th><th class="text-center">不良事件发生前</th><th class="text-center">不良事件发生后</th></tr><tr><td>生命体征</td><td><div class="form-group"><label for="email" class="control-label">BP</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.bp_before.value" class="form-control input-sm"> mmHg</div><div class="form-group"><label for="email" class="control-label">P</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.p_before.value" class="form-control input-sm"> 次／分</div><br><div class="form-group"><label for="email" class="control-label">R</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.r_before.value" class="form-control input-sm"> 次／分</div><div class="form-group"><label for="email" class="control-label">T</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.t_before.value" class="form-control input-sm"> ℃</div></td><td><div class="form-group"><label for="email" class="control-label">BP</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.bp_after.value" class="form-control input-sm"> mmHg</div><div class="form-group"><label for="email" class="control-label">P</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.p_after.value" class="form-control input-sm"> 次／分</div><br><div class="form-group"><label for="email" class="control-label">R</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.r_after.value" class="form-control input-sm"> 次／分</div><div class="form-group"><label for="email" class="control-label">T</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.t_after.value" class="form-control input-sm"> ℃</div></td></tr><tr><td>精神状况</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_clear_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_clear_before.value" type="checkbox"> 神志清</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_directive_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_directive_before.value" type="checkbox"> 有定向力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_upset_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" tng-model="vm.formData.reportDetailList.psychosis_upset_before.value" type="checkbox"> 不安</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_undiscerned_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_undiscerned_before.value" type="checkbox"> 无定力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_halfComa_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_halfComa_before.value" type="checkbox"> 半昏迷</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_coma_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_coma_before.value" type="checkbox"> 昏迷</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.psychosis_else_before.value" class="input-sm form-control"></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_clear_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_clear_after.value" type="checkbox"> 神志清</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_directive_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_directive_after.value" type="checkbox"> 有定向力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_upset_after.value = \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" tng-model="vm.formData.reportDetailList.psychosis_upset_after.value" type="checkbox"> 不安</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_undiscerned_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_undiscerned_after.value" type="checkbox"> 无定力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_halfComa_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_halfComa_after.value" type="checkbox"> 半昏迷</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_coma_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_coma_after.value" type="checkbox"> 昏迷</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.psychosis_else_after.value" class="input-sm form-control"></div></div></td></tr><tr><td>运动</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_self_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_self_before.value"> 独立</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_assist_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_assist_before.value"> 辅助支持</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_limit_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_limit_before.value"> 限制在床/轮椅</label></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_self_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_self_after.value" type="checkbox"> 独立</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_assist_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_assist_after.value" type="checkbox"> 辅助支持</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_limit_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_limit_after.value" type="checkbox"> 限制在床/轮椅</label></div></div></td></tr><tr><td>残疾</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_none_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_none_before.value"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_auditionDown_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_auditionDown_before.value"> 听力下降</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_costive_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_costive_before.value"> 行动不便</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_unclearEyed_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_unclearEyed_before.value"> 视力缺损</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.deformity_else_before.value" class="input-sm form-control"></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_none_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_none_after.value" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_auditionDown_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_auditionDown_after.value" type="checkbox"> 听力下降</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_costive_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_costive_after.value" type="checkbox"> 行动不便</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_unclearEyed_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_unclearEyed_after.value" type="checkbox"> 视力缺损</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.deformity_else_after.value" class="input-sm form-control"></div></div></td></tr><tr><td>其他说明</td><td><textarea name="name" ng-model="vm.formData.reportDetailList.elsedeclare_before.value" rows="2" cols="50" class="form-control input-sm"></textarea></td><td><textarea name="name" ng-model="vm.formData.reportDetailList.elsedeclare_after.value" rows="2" cols="50" class="form-control input-sm"></textarea></td></tr></table></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生24小时内用药：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_none.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_none.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_diuretic.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_diuretic.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 利尿剂</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_nicotine.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_nicotine.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 尼古丁／镇静</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_high_handed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_high_handed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 抗高压</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_depressed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_depressed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 抗抑郁</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_24_medicine_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生前采取的特殊预防措施：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_none.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_none.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_accompany.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_accompany.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 陪伴</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_informed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_informed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 已告知</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_guardrail.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_guardrail.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 床边扶栏</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_motionDevice.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_motionDevice.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 动作设备</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_sign.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_sign.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 标识</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_closestool.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_closestool.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 床边便器</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_restlessLimit.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_restlessLimit.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 躁动约束</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_riskWarning.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_riskWarning.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 风险预警</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_before_measures_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生地点：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_ward.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_ward.value"> 病房</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_treatmentRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_treatmentRoom.value"> 治疗室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_changeRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_changeRoom.value"> 换药室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_handleRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_handleRoom.value"> 处置室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_corridor.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_corridor.value"> 走廊</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_washroom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_washroom.value"> 厕所</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_outDepartment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_outDepartment.value"> 病区外</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_happen_addr_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生原因：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_physiological.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_physiological.value"> 病患生理因素</label></div>（<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_old.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_old.value"> 年老体弱</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_longSick.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_longSick.value"> 久病不愈</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_worsen.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_worsen.value"> 病情恶化</label></div>）<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_mentality.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_mentality.value"> 病患心理因素</label></div>（<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_badMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_badMind.value"> 情绪不稳</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_lostMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_lostMind.value"> 精神失常</label></div>）<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_artificia.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_artificia.value"> 人为因素</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value"> 医疗材料故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value"> 仪器故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value"> 设备故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_yard.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_yard.value"> 场地</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_environment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_environment.value"> 环境因素</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_winebowl.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_winebowl.value"> 酒瘾</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_drugster.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_drugster.value"> 毒瘾</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutSystem.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutSystem.value"> 与制度有关</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutFlow.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutFlow.value"> 与流程有关</label></div><div class="checkbox"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control" ng-model="vm.formData.reportDetailList.malcase_reason_else.value"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件目击：</label><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_witness.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生的事实（包括不良事件发生经过，发生后治疗，发生后护理及发生后检查结果等情况，由当事人或发现者填写）：</label> <textarea name="name" ng-model="vm.formData.reportDetailList.malcase_truth.value" rows="3" cols="100" class="form-control input-sm"></textarea></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveReportDetail()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),
e.put("app/malCaseUp/handle/reportXk.tpl.html",'<form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">日期类型：</label><select class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK01_medicine_none.value"><option value="01">工作日</option><option value="02">周末</option><option value="03">节日</option></select></div><div class="form-group col-md-6"><label class="control-label col-sm-5">不良事件发生地点：</label><select class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK03_medicine_none.value"><option value="01">门诊</option><option value="02">急诊</option><option value="03">住院病房</option><option value="04">监护室</option><option value="05">留观察室</option><option value="06">公共服务设施</option><option value="07">卫生间</option><option value="08">转运图中</option><option value="09">手术室</option><option value="10">走廊</option><option value="11">其他</option></select></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">发生于何种服务：</label><select class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK02_medicine_none.value"><option value="01">手术</option><option value="02">分娩</option><option value="03">治疗</option><option value="04">护理</option><option value="05">饮食</option><option value="06">公共服务设施</option><option value="07">卫生间</option><option value="08">清扫</option><option value="09">采集标本</option><option value="10">服务项目不明</option><option value="11">其他</option></select></div><div class="form-group col-md-6"><label class="control-label col-sm-5">事件给患者带来的损害：</label><select class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK04_medicine_none.value"><option value="01">死亡</option><option value="02">植物人</option><option value="03">严重</option><option value="04">较重</option><option value="05">重</option><option value="06">中</option><option value="07">轻</option><option value="08">无</option><option value="09">抢救中</option><option value="10">不明</option><option value="11">其他</option></select></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人身份：</label><select class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK05_medicine_none.value"><option value="01">注册护士</option><option value="02">返聘护士</option><option value="03">招聘护士</option><option value="04">进修护士</option><option value="05">见习护士</option><option value="06">实习护士</option><option value="07">护工</option><option value="08">其他</option></select></div><div class="form-group col-md-6"><label class="control-label col-sm-5">当事职务：</label><select class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK06_medicine_none.value"><option value="01">护士长</option><option value="02">负护士长</option><option value="03">组长</option><option value="04">护士</option><option value="05">见习护士</option><option value="06">实习护士</option><option value="07">护工或陪护</option><option value="08">其他</option></select></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人年龄：</label> <input class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK07_medicine_none.value"></div><div class="form-group col-md-6"><label class="control-label col-sm-5">当事人所在科室：</label> <input class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK08_medicine_none.value"></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">医院名称：</label> <input class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK09_medicine_none.value"></div><div class="form-group col-md-6"><label class="control-label col-sm-5">医院级别：</label><select class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK10_medicine_none.value"><option value="01">三级特等</option><option value="02">三级甲等</option><option value="03">三级乙等</option><option value="04">三级丙等</option><option value="05">二级级甲等</option><option value="06">二级乙等</option><option value="07">二级丙等</option><option value="08">一级级甲等</option><option value="09">一级乙等</option><option value="10">一级丙等</option><option value="11">未定级</option></select></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者角色：</label><select class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK11_medicine_none.value"><option value="01">事件当事人</option><option value="02">同事</option><option value="03">旁观者</option><option value="04">其他</option></select></div><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者职务：</label><select class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK12_medicine_none.value"><option value="01">注册护士</option><option value="02">返聘护士</option><option value="03">招聘护士</option><option value="04">进修护士</option><option value="05">见习护士</option><option value="06">实习护士</option><option value="07">护工</option><option value="08">其他</option></select></div></div><div class="row"><div class="form-group col-md-6"><label class="control-label col-sm-5">报告者职称：</label><select class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK13_medicine_none.value"><option value="01">主任护师</option><option value="02">副主任护师</option><option value="03">主管护师</option><option value="04">护师</option><option value="05">护士</option><option value="06">见习护士</option><option value="07">实习护士</option><option value="08">其他</option></select></div><div class="form-group col-md-6"><label class="control-label col-sm-5">联系电话：</label> <input class="col-sm-5" ng-model="vm.formData.reportDetailList.malcase_XK14_medicine_none.value"></div></div><div class="row"><div class="form-group col-md-2"><label class="control-label">未尽补充事宜：</label></div><textarea class="col-md-9" type="text" ng-model="vm.formData.reportDetailList.malcase_XK16_medicine_none.value">\n    </textarea></div><label>与当事人可能相关的因素:</label><div class="row"><div class="form-group"><label class="control-label">确认：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_qr_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_qr_01.value"> 确认不认真</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_qr_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_qr_02.value"> 确认错误</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_qr_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_qr_03.value"> 没有执行确认程序</label></div><div class="checkbox"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control" ng-model="vm.formData.reportDetailList.dsr_qr_04.value"></div></div></div><div class="row"><div class="form-group"><label class="control-label">观察：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_gc_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_gc_01.value"> 观察不仔细</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_gc_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_gc_02.value"> 没有进行观察</label></div><div class="checkbox"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control" ng-model="vm.formData.reportDetailList.dsr_gc_03.value"></div></div></div><div class="row"><div class="form-group"><label class="control-label">判断/诊断：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_PJ_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_PJ_01.value"> 经验不足</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_PJ_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_PJ_02.value"> 判断有误</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_PJ_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_PJ_03.value"> 未执行诊疗常规</label></div><div class="checkbox"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control" ng-model="vm.formData.reportDetailList.dsr_PJ_04.value"></div></div></div><div class="row"><div class="form-group"><label class="control-label">判断/诊断：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_zj_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_zj_01.value"> 知识储备不足</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_zj_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_zj_02.value"> 应用知识有误</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_zj_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_zj_03.value"> 应急经验不足</label></div><div class="checkbox"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control" ng-model="vm.formData.reportDetailList.dsr_zj_04.value"></div></div></div><div class="row"><div class="form-group"><label class="control-label">技能/处置：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_jn_01.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_jn_01.value"> 不成熟技术</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_jn_02.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_jn_02.value"> 技术应用有误</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.dsr_jn_03.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.dsr_jn_03.value"> 未经卫生行政部门核准的技术</label></div><div class="checkbox"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control" ng-model="vm.formData.reportDetailList.dsr_jn_04.value"></div></div></div><div class="row"><div class="form-group"><label class="control-label">不良事件发生原因：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_physiological.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_physiological.value"> 病患生理因素</label></div>（<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_old.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_old.value"> 年老体弱</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_longSick.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_longSick.value"> 久病不愈</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_worsen.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_worsen.value"> 病情恶化</label></div>）<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_mentality.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_mentality.value"> 病患心理因素</label></div>（<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_badMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_badMind.value"> 情绪不稳</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_lostMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_lostMind.value"> 精神失常</label></div>）<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_artificia.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_artificia.value"> 人为因素</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value"> 医疗材料故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value"> 仪器故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value"> 设备故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_yard.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_yard.value"> 场地</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_environment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_environment.value"> 环境因素</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_winebowl.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_winebowl.value"> 酒瘾</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_drugster.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_drugster.value"> 毒瘾</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutSystem.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutSystem.value"> 与制度有关</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutFlow.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutFlow.value"> 与流程有关</label></div><div class="checkbox"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control" ng-model="vm.formData.reportDetailList.malcase_reason_else.value"></div></div></div><div class="row"><div class="form-group"><label class="control-label">不良事件发生的事实（包括不良事件发生经过，发生后治疗，发生后护理及发生后检查结果等情况，由当事人或发现者填写）：</label> <textarea name="name" ng-model="vm.formData.reportDetailList.malcase_truth.value" rows="3" cols="100" class="form-control input-sm"></textarea></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveReportDetail()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),e.put("app/malCaseUp/handle/requirement.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><ul class="list-group"><li class="list-group-item" ng-class="{\'active\': vm.formData.requirement.reqCode == requirement.reqCode}" ng-click="vm.fillItem(\'requirement\', requirement)" ng-repeat="requirement in vm.formData.requirementList track by $index">{{$index + 1}}. {{requirement.reqContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{requirement.userName}}</span> <button class="btn btn-xs btn-danger" uib-tooltip="删除" ng-click="vm.removeListItem({index: $index, listName: \'requirement\', seqId: requirement.seqId})"><span class="fa fa-trash"></span></button></div></li><li class="list-group-item"><div class="form-group"><div class="col-sm-12"><textarea class="form-control input-sm" cols="50" rows="3" ng-model="vm.formData.requirement.reqContent" placeholder="填写整改要求">\n                </textarea></div></div><div class="form-group"><div class="col-sm-12"><button ng-click="vm.resetForm(\'requirement\')" class="btn btn-primary btn-sm">清空</button> <button ng-click="vm.saveListItem(\'requirement\')" class="btn btn-success btn-sm" ng-disabled="vm.formData.requirement.reqContent === \'\' || !vm.formData.requirement.reqContent">保存</button></div></div></li></ul></div></div></div></form>'),e.put("app/malCaseUp/level/addLevel.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写分级标准信息</h5></div><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">等级</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.damageLevelName" name="damageLevelName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" name="remark" ng-model="vm.formData.remark"></textarea></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">流程：</label><div class="col-sm-9"><div class="flow-list"><div ng-repeat="flowItem in vm.formData.flowList track by $index"><i class="fa fa-level-down fa-flip-horizontal" ng-if="!$last"></i> <span>{{flowItem}}</span> <a ng-click="vm.removeFlow($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></div></div><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="填写流程"> <span class="input-group-btn"><button ng-click="vm.addFlow($event)" class="btn btn-primary btn-sm" ng-disabled="vm.flowText === \'\' || !vm.flowText">添加流程</button></span></div></div></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/malCaseUp/level/level.tpl.html",'<div class="col-md-7"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>填写不良事件上报表</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data" ng-class="{\'info\': vm.selectedLevel.seqId === row.seqId}"><td data-title="\'等级\'" ng-click="vm.edit(row)">{{row.damageLevelName}}</td><td data-title="\'等级描述\'" ng-click="vm.edit(row)">{{row.remark}}</td><td data-title="\'处理流程\'" ng-click="vm.edit(row)">{{ row.flow }}</td><td data-title="\'操作\'"><button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div><div class="col-md-5"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>填写分级标准信息</span><div class="pull-right"><button ng-click="vm.add()" class="btn btn-primary btn-xs"><i class="fa fa-plus"></i> 添加分级标准 <i class="fa fa-angle-right"></i></button></div></div><div class="panel-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="container-fluid"><div class="col-md-12"><div class="form-group"><label for="name" class="col-sm-3 control-label">等级</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.damageLevelName" name="damageLevelName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" name="remark" ng-model="vm.formData.remark"></textarea></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">流程：</label><div class="col-sm-9"><div class="flow-list"><div ng-repeat="flowItem in vm.formData.flowList track by $index"><i class="fa fa-level-down fa-flip-horizontal" ng-if="!$last"></i> <span>{{flowItem}}</span> <a ng-click="vm.removeFlow($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></div></div><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="填写流程"> <span class="input-group-btn"><button ng-click="vm.addFlow()" class="btn btn-primary btn-sm" ng-disabled="vm.flowText === \'\' || !vm.flowText">添加流程</button></span></div></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.save()">保存</button></div></div></div></div></form></div></div></div>'),e.put("app/malCaseUp/statistics/statistics.tpl.html",'<div ng-controller="MalCaseUpStatisticsController as vm"><button ng-click="tableParams.sorting({})" class="btn btn-default pull-left">新增</button> <button ng-click="tableParams.sorting({})" class="btn btn-danger pull-left">修改</button><table ng-table="tableParams" class="table table-striped table-bordered"><thead><tr><td>事件名称</td><td>事件类型</td><td>伤害级别</td><td>事件描述</td></tr></thead><tbody style="background-color: white"><tr ng-repeat="ls in vm.lst"><td>{{ls.groupNo}}</td><td>{{ls.groupName}}</td><td>{{ls.bedNo}}</td><td>{{ls.remark}}</td></tr></tbody></table></div>'),e.put("app/malCaseUp/type/type.tpl.html",'<div class="col-md-12" ng-controller="MalCaseUpTypeController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-send"></i> <span>上报类型列表</span><div class="pull-right"><button class="btn btn-xs btn-primary">增加类型</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in $data"><td data-title="\'上报类型编号\'"><em>{{row.eventCode}}</em></td><td data-title="\'上报类型名称\'">{{row.eventName}}</td><td data-title="\'最后更新人\'">{{ row.lastUpdateCode }}</td><td data-title="\'最后更新时间\'">{{row.lastUpdateTime}}</td></tr></table><loading></loading></div></div></div>'),e.put("app/manual/item/item.model.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5>填写科研管理</h5></div><div class="modal-body"><div class="static-form-item container-fluid"><div class="form-group"><div class="col-sm-3"><label class="control-label">课题名称：</label></div><div class="col-sm-9"><input ng-model="vm.formData.subjectName"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">上报</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div>'),e.put("app/manual/item/item.tpl.html",'<div class="col-md-7"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>工作项目表</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst" ng-class="{\'info\': vm.selectedItem.seqId == row.seqId}"><td data-title="\'工作项目\'" class="text-center" ng-click="vm.edit(row)">{{ row.itemName }}</td><td data-title="\'使用病区\'" class="text-center" ng-click="vm.edit(row)">{{ row.deptName }}</td><td data-title="\'频次\'" class="text-center" ng-click="vm.edit(row)">{{ row.frequencyName }} / {{ row.frequency }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.deleteItem(row.itemCode)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div><div class="col-md-5"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>项目信息</span><div class="pull-right"><button ng-click="vm.add()" class="btn btn-primary btn-xs">添加项目</button></div></div><div class="panel-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="workItemForm" form="workItemForm"><div class="container-fluid"><div class="col-md-12"><div class="form-group"><label for="itemName" class="col-sm-3 control-label">项目名称：</label><div class="col-sm-9"><input class="form-control input-sm" autocomplete="off" ng-model="vm.formData.itemName" name="itemName" type="text" id="itemName"></div></div><div class="form-group"><label class="col-sm-3 control-label">科室／病区：</label><div class="col-sm-9"><select class="form-controll input-sm" ng-model="vm.formData.dept" ng-options="dept as dept.deptName for dept in vm.deptList track by dept.deptCode" name="dept"></select></div></div><div class="form-group"><label for="frequencyName" class="col-sm-3 control-label">频次：</label><div class="col-sm-9"><input class="form-control input-sm" name="frequencyName" required="" autocomplete="off" ng-model="vm.formData.frequencyName" type="text" id="frequencyName"></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.save()" ng-disabled="workItemForm.groupName.$invalid || workItemForm.groupCode.$invalid">保存</button></div></div></div></div></form></div></div></div>'),e.put("app/manual/workManual/workManual.tpl.html",'<div class="col-md-7"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>床位分组管理</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'组号\'" class="text-center" ng-click="vm.edit(row)">{{ row.groupCode }}</td><td data-title="\'组名\'" class="text-center" ng-click="vm.edit(row)">{{ row.groupName }}</td><td data-title="\'床位\'" class="text-center" ng-click="vm.edit(row)">{{ row.beds }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.deleteGroup(row.seqId)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div><div class="col-md-5"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>新增分组</span></div><div class="panel-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addbedForm" form="addbedForm"><div class="container-fluid"><div class="col-md-12"><div class="form-group"><label for="groupCode" class="col-sm-3 control-label">组号：</label><div class="col-sm-9"><input class="form-control input-sm" autocomplete="off" ng-model="vm.formData.groupCode" name="groupCode" type="text" id="groupCode"></div></div><div class="form-group"><label for="groupName" class="col-sm-3 control-label">组名：</label><div class="col-sm-9"><input class="form-control input-sm" name="groupName" required="" autocomplete="off" ng-model="vm.formData.groupName" type="text" id="groupName"></div></div><div class="form-group"><label for="bedCode" class="col-sm-3 control-label">床位：</label><div class="col-sm-9"><ul class="flow-list"><li ng-repeat="flowItem in vm.formData.bedList track by $index"><span>{{ flowItem }}</span> <a ng-click="vm.removeFlow($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></li></ul><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="新增床位" autocomplete="off" name="bedCode" id="bedCode"> <span class="input-group-btn"><button ng-click="vm.addFlow()" class="btn btn-primary btn-sm" ng-disabled="addbedForm.bedCode.$invalid || addbedForm.bedCode.$pristine">新增</button></span></div></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveGroup()" ng-disabled="addbedForm.groupName.$invalid || addbedForm.groupCode.$invalid">保存</button></div></div></div></div></form></div></div></div>{{ vm.lst }}'),e.put("app/nursingWorkers/files/files.tpl.html",'<div class="col-md-2" print-remove=""><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode,vm.deptData.deptName)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter: vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode,subItem.deptName)" class="sublist__item">{{subItem.deptName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>人员数据</span><div class="pull-right"><button ng-click="vm.open()" ng-disabled="!vm.selectedDept" class="btn btn-primary btn-xs"><i class="fa fa-user-plus"></i> 添加员工</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data" ng-class="{\'info\': vm.selectedUserCode === row.userCode}"><td data-title="\'编号\'">{{row.hisCode}}</td><td data-title="\'姓名\'">{{row.userName}}</td><td data-title="\'邮箱\'">{{ row.email }}</td><td data-title="\'电话\'">{{row.phone}}</td><td data-title="\'操作\'"><button class="btn btn-default btn-xs" ng-click="vm.open(row.userCode)" uib-tooltip="编辑员工信息" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row)" uib-tooltip="删除员工" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),
e.put("app/nursingWorkers/files/modal.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写用户信息</h5></div><div class="modal-body"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="static-form-item container-fluid"><div class="form-group col-md-4"><label for="hisCode" class="col-sm-4 control-label">科室：</label><div class="col-sm-8"><input class="form-control input-sm" disabled="" ng-model="vm.deptName" type="text"></div></div><div class="form-group col-md-4"><label for="hisCode" class="col-sm-4 control-label">员工编号：</label><div class="col-sm-8"><input class="form-control input-sm" ng-model="vm.count.comUser.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group col-md-4"><label for="userName" class="col-sm-4 control-label">姓名：</label><div class="col-sm-8"><input class="form-control input-sm" required="" ng-model="vm.count.comUser.userName" id="userName" name="userName" type="text"></div></div><div class="form-group col-md-4"><label for="male" class="col-sm-4 control-label">性别：</label><div class="col-sm-8"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.count.comUser.gender" checked="" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.count.comUser.gender" id="female" value="0"> 女</label></div></div><div class="form-group col-md-4"><label for="birthday" class="col-sm-4 control-label">出生年月：</label><div class="col-sm-8"><span class="input-group"><input type="text" id="birthday" name="birthday" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.birthdayOpen" ng-model="vm.count.comUser.birthday" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'birthdayOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="politacalStatus" class="col-sm-4 control-label">政治面貌：</label><div class="col-sm-8"><select id="politacalStatus" name="politacalStatus" ng-model="vm.count.comUser.politacalStatus" class="form-control input-sm"><option value="01" label="党员"></option><option value="02" label="团员"></option><option value="03" label="公民"></option><option value="04" label="其他"></option></select></div></div><div class="form-group col-md-4"><label for="country" class="col-sm-4 control-label">国籍：</label><div class="col-sm-8"><input type="text" id="country" name="country" ng-model="vm.count.comUser.country" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="nativePlace" class="col-sm-4 control-label">籍贯：</label><div class="col-sm-8"><input type="text" id="nativePlace" name="nativePlace" ng-model="vm.count.comUser.nativePlace" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="nation" class="col-sm-4 control-label">民族：</label><div class="col-sm-8"><input type="text" id="nation" name="nation" ng-model="vm.count.comUser.nation" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">婚姻状态：</label><div class="col-sm-8"><select ng-model="vm.count.comUser.marriage" class="form-control input-sm"><option value="01" label="已婚"></option><option value="02" label="未婚"></option><option value="03" label="离异"></option><option value="04" label="丧偶"></option></select></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">生育状态：</label><div class="col-sm-8"><input ng-model="vm.count.comUser.birth" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="email" class="col-sm-4 control-label">邮箱：</label><div class="col-sm-8"><input id="email" class="form-control input-sm" name="email" ng-model="vm.count.comUser.email" type="email"></div></div><div class="form-group col-md-4"><label for="phone" class="col-sm-4 control-label">联系电话：</label><div class="col-sm-8"><input id="phone" class="form-control input-sm" name="phone" ng-model="vm.count.comUser.phone" type="tel"></div></div><div class="form-group col-md-4"><label for="papersType" class="col-sm-4 control-label">身份证件类型：</label><div class="col-sm-8"><select id="papersType" name="papersType" ng-model="vm.count.comUser.papersType" class="form-control input-sm"><option value="01" label="身份证"></option><option value="02" label="居住证"></option><option value="03" label="签证"></option><option value="04" label="护照"></option><option value="05" label="军人证"></option></select></div></div><div class="form-group col-md-4"><label for="papersNo" class="col-sm-4 control-label">身份证件号码：</label><div class="col-sm-8"><input type="text" id="papersNo" name="papersNo" ng-model="vm.count.comUser.papersNo" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="practiceNo" class="col-sm-4 control-label">执业证书编号：</label><div class="col-sm-8"><input type="text" id="practiceNo" name="practiceNo" ng-model="vm.count.comUser.practiceNo" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="practiceApproveDate" class="col-sm-4 control-label">首次注册时间：</label><div class="col-sm-8"><span class="input-group"><input type="text" id="practiceApproveDate" name="practiceApproveDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.practiceApproveDateIsOpen" ng-model="vm.count.comUser.practiceApproveDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'practiceApproveDateIsOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">注册机构：</label><div class="col-sm-8"><input ng-model="vm.count.comUser.duty" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="education" class="col-sm-4 control-label">原始学历：</label><div class="col-sm-8"><input type="text" id="education" name="education" ng-model="vm.count.comUser.education" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="graduationDate" class="col-sm-4 control-label">取得时间：</label><div class="col-sm-8"><span class="input-group"><input type="text" id="graduationDate" name="graduationDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.graduationDateOpen" ng-model="vm.count.comUser.graduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'graduationDateOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label for="graduationSchool" class="col-sm-4 control-label">学校：</label><div class="col-sm-8"><input type="text" id="graduationSchool" name="nativePlace" ng-model="vm.count.comUser.graduationSchool" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">最高学历：</label><div class="col-sm-8"><input type="text" ng-model="vm.count.comUser.hEducation" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">取得时间：</label><div class="col-sm-8"><span class="input-group"><input type="text" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.hGraduationDateOpen" ng-model="vm.count.comUser.hGraduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'hGraduationDateOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">学校：</label><div class="col-sm-8"><input type="text" name="nativePlace" ng-model="vm.count.comUser.hGraduationSchool" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label for="duty" class="col-sm-4 control-label">职务：</label><div class="col-sm-8"><input id="duty" name="duty" ng-model="vm.count.comUser.duty" class="form-control input-sm" type="text"></div></div><div class="form-group col-md-4"><label for="technicalPost" class="col-sm-4 control-label">职称：</label><div class="col-sm-8"><input type="text" id="technicalPost" name="technicalPost" ng-model="vm.count.comUser.technicalPost" class="form-control input-sm"></div></div><div class="form-group col-md-4"><label class="col-sm-4 control-label">临床层级：</label><div class="col-sm-8"><input type="text" ng-model="vm.count.comUser.clinical" class="form-control input-sm"></div></div></div><div class="container-fluid"><div class="form-group col-md-2 pull-right"><button data-type="comUser" w5c-form-submit="vm.save(\'comUser\', $event)" class="btn btn-success btn-sm">保存</button></div></div></form></uib-tab><uib-tab index="1" heading="家属" disable="!vm.accessible"><form class="form-horizontal comUserFamily-form" w5c-form-validate="vm.user.validationOption" name="comUserFamilyForm"><table class="table table-striped table-condensed table-no-border"><tr><th>姓名</th><th>亲属关系</th><th>联系电话</th><th>邮件</th><th>备注</th><th></th></tr><tr ng-repeat="item in vm.count.comUserFamily"><td><input type="text" class="form-control input-sm" ng-model="item.name"></td><td><input type="hidden" ng-model="item.userCode" ng-value="vm.comUser.userCode"> <input class="form-control input-sm" ng-model="item.relation" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.phone"></td><td><input type="text" class="form-control input-sm" ng-model="item.email"></td><td><input type="text" class="form-control input-sm" ng-model="item.remark"></td><td><button ng-click="vm.removeItem(\'comUserFamily\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table><div class="container-fluid"><button ng-click="vm.addItem(\'comUserFamily\')" class="btn btn-primary btn-sm">添加成员</button> <button data-type="comUserFamily" ng-click="vm.save(\'comUserFamily\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="2" heading="职称变更" disable="!vm.accessible" active="tab.active"><form class="form-horizontal form-inline comUserPosition-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="comUserPositionForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>职称</th><th>审批单位</th><th>开始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserPosition track by $index"><td><input class="form-control input-sm" required="" name="positionName" ng-model="item.positionName" placeholder="在职职称" type="text"></td><td><input type="text" name="reviewUnit" required="" class="form-control input-sm" ng-model="item.reviewUnit"></td><td><span class="input-group"><input type="text" id="comUserPosition_startDate_{{$index}}" required="" name="comUserPositionStartDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" on-open-focus="true" id="comUserPosition_endDate_{{$index}}" required="" name="comUserPositionEndDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserPosition\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserPosition\')" class="btn btn-primary btn-sm">添加职称</button> <button data-type="comUserPosition" w5c-form-submit="vm.save(\'comUserPosition\', $event)" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="3" heading="职务变更" disable="!vm.accessible"><form class="form-horizontal form-inline comUserNursing-form" w5c-form-validate="vm.user.validationOption" name="comUserNursingForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>工作单位</th><th>单位级别</th><th>所属部门</th><th>职务</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserNursing"><td><input class="form-control input-sm" ng-model="item.reviewUnit" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.unitLevel"></td><td><input type="text" class="form-control input-sm" ng-model="item.deptName"></td><td><input type="text" class="form-control input-sm" ng-model="item.position"></td><td><span class="input-group"><input type="text" id="comUserNursing_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserNursing_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserNursing\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserNursing\')" class="btn btn-primary btn-sm">添加教育信息</button> <button data-type="comUserNursing" w5c-form-submit="vm.save(\'comUserNursing\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="4" heading="学历信息" disable="!vm.accessible"><form class="form-horizontal form-inline comUserLearning-form" w5c-form-validate="vm.user.validationOption" name="comUserLearningForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>学校</th><th>专业</th><th>学历</th><th>学历证书编号</th><th>学位</th><th>学位证书编号</th><th>描述</th><th>开始时间</th><th>结束时间</th><th></th></tr><tr ng-repeat="item in vm.count.comUserLearning"><td><input class="form-control input-sm" ng-model="item.school" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.professional"></td><td><input type="text" class="form-control input-sm" ng-model="item.diploma"></td><td><input type="text" class="form-control input-sm" ng-model="item.diplomaNo"></td><td><input type="text" class="form-control input-sm" ng-model="item.degree"></td><td><input type="text" class="form-control input-sm" ng-model="item.degreeNo"></td><td><input type="text" class="form-control input-sm" ng-model="item.describe"></td><td><span class="input-group"><input type="text" id="comUserLearning_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserLearning_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserLearning\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserLearning\')" class="btn btn-primary btn-sm">添加学历</button> <button data-type="comUserLearning" ng-click="vm.save(\'comUserLearning\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="5" heading="继续教育" disable="!vm.accessible"><form class="form-horizontal form-inline comUserTraining-form" w5c-form-validate="vm.user.validationOption" name="comUserTrainingForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>学习内容</th><th>主办单位</th><th>学时</th><th>主讲</th><th>学分类型</th><th>学分</th><th>经费</th><th>描述</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserTraining"><td><input class="form-control input-sm" ng-model="item.learnContent" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.professional"></td><td><input type="text" class="form-control input-sm" style="width: 3em;" ng-model="item.diploma"></td><td><input type="text" class="form-control input-sm" ng-model="item.speaker"></td><td><input type="text" class="form-control input-sm" ng-model="item.creditType"></td><td><input type="text" class="form-control input-sm" style="width: 4em;" ng-model="item.credit"></td><td><input type="text" class="form-control input-sm" style="width: 4em;" ng-model="item.funding"></td><td><input type="text" class="form-control input-sm" ng-model="item.describe"></td><td><span class="input-group"><input type="text" id="comUserTraining_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserTraining_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserTraining\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserTraining\')" class="btn btn-primary btn-sm">添加继续教育</button> <button data-type="comUserTraining" ng-click="vm.save(\'comUserTraining\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="6" heading="教育工作" disable="!vm.accessible"><form class="form-horizontal form-inline comUserEducation-form" w5c-form-validate="vm.user.validationOption" name="comUserEducationForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>代课类型</th><th>学时数</th><th>课程专题</th><th>课程内容</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserEducation"><td><input class="form-control input-sm" ng-model="item.educationType" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.leaningTime"></td><td><input type="text" class="form-control input-sm" ng-model="item.courseTopics"></td><td><input type="text" class="form-control input-sm" ng-model="item.courseContent"></td><td><span class="input-group"><input type="text" id="comUserEducation_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserEducation_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserEducation\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserEducation\')" class="btn btn-primary btn-sm">添加教育信息</button> <button data-type="comUserEducation" ng-click="vm.save(\'comUserEducation\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab></uib-tabset></div></div>'),e.put("app/quality/check/check.tpl.html",'<div><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>质量检查</span></div><div class="panel-body"><form class="form-inline pull-right"><div class="form-group quality-filter"><label for="month" class="control-label">月份&nbsp;</label><select class="form-control input-sm" id="month"><option>1</option></select></div><div class="form-group quality-filter"><label for="type" class="control-label">类型&nbsp;</label><select class="form-control input-sm" id="type"><option value="">全部</option></select></div><div class="form-group quality-filter"><label for="area" class="control-label">病区&nbsp;</label><select class="form-control input-sm" id="area"></select></div><div class="form-group quality-filter"><button class="btn btn-xs btn-primary">查询</button></div></form><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'检查日期\'" class="text-center">{{ row.taskDate }}</td><td data-title="\'检查病区\'" class="text-center">{{ row.deptCode }}</td><td data-title="\'检查类型\'" class="text-center">{{ row.formType }}</td><td data-title="\'检查表\'" class="text-center">{{ row.formName }}</td><td data-title="\'得分\'" class="text-center">{{ row.count }}</td><td data-title="\'状态\'" class="text-center">{{ row.status }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.edit(row)" uib-tooltip="修改"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/quality/check/editCheck.tpl.html",'<div class="mod-pop-dateForm clearfix editCheck"><form class="form-inlne form-horizontal w5c-form" name="addCheckForm" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" form="addCheckForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">质量检查-交班</h5></div><div class="modal-body clearfix"><div class="row"><div class="form-group col-xs-6"><label for="date" class="control-label col-xs-3 partial-label">日期：</label><div class="col-xs-9"><input class="form-control input-sm input-none" readonly="" ng-value="vm.formData.taskDate"></div></div><div class="form-group col-xs-6"><label for="area" class="control-label col-xs-3 partial-label">病区：</label><div class="col-xs-9"><input class="form-control input-sm input-none" readonly="" ng-value="vm.formData.deptCode"></div></div></div>{{vm.formData.qualityResultDetailList}}<table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.formData.qualityResultDetailList"><td data-title="\'序号\'" class="text-center"></td><td data-title="\'检查内容及要求\'" class="text-center">{{ row.item }}</td><td data-title="\'分值\'" class="text-center">{{ row.points }}</td><td data-title="\'得分\'" class="col-xs-2 partial-td"><input type="number" class="form-control input-sm text-center" ng-model="row.count" placeholder="点击填写"></td><td data-title="\'扣分原因\'" class="text-center col-xs-4 partial-td"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="row.cause">\r\n                </textarea></td></tr></table></div><div class="modal-footer clearfix"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/quality/deal/addDeal.tpl.html",'<div class="mod-pop-dateForm addDeal"><form class="form-inline w5c-form" name="addDealForm" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" form="addDealForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">质量检查问题处理</h5></div><div class="modal-body clearfix"><div class="form-group"><label for="code" class="control-label">检查日期：</label> <input type="text" class="form-control input-sm" uib-datepicker-popup="yyyy-MM-dd" is-open="popup1" id="date" name="date" placeholder="年-月-日" clear-text="清除" close-text="关闭" current-text="今天" ng-click="popup1 = true" ng-model="vm.formData.checkDetail.taskDate" required="" readonly=""></div><div class="form-group"><label for="form_name" class="control-label">病区：</label> <input type="text" value="" class="form-control input-sm" id="form_name" name="form_name" ng-model="vm.formData.checkDetail.deptCode" required="" autocomplete="off"></div><div class="form-group"><label for="form_type" class="control-label">检查表单：</label><select class="form-control input-sm" id="select_form" name="select_form" required="" ng-model="vm.formData.checkDetail.selectForm" ng-options="x.formName for x in vm.metaData.qualityFormList"></select></div><div class="form-group"><button class="btn btn-xs btn-primary" ng-click="vm.checkDetail()">查看检查情况</button></div><div class="table-box"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped partial-table"><tr><td data-title="\'存在问题\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.issueContent"></textarea></td><td data-title="\'原因分析\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.reasonAnalysis"></textarea></td><td data-title="\'整改要求\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.resDescribe"></textarea></td><td data-title="\'整改措施\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.resPlan"></textarea></td><td data-title="\'效果评估\'"><textarea class="form-control input-sm" placeholder="点击填写" ng-model="vm.formData.evaluation"></textarea></td></tr></table></div></div><div class="modal-footer clearfix"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/quality/deal/checkDetail.tpl.html",'<form role="form" form="addDealForm"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.metaData.checkDetailList[0].qualityResultDetailList"><td data-title="\'序号\'" class="text-center">{{ $index }}</td><td data-title="\'检查内容及要求\'" class="text-center">{{ row.item }}</td><td data-title="\'分值\'" class="text-center">{{ row.points }}</td><td data-title="\'得分\'" class="text-center">{{ row.count }}</td><td data-title="\'扣分原因\'" class="text-center">{{ row.cause }}</td></tr></table><div class="text-center"><button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">关闭</button></div></form>'),e.put("app/quality/deal/deal.tpl.html",'<div><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>质量检查问题处理</span><div class="pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.add()">新增问题</button></div></div><div class="panel-body"><form class="form-inline pull-right"><div class="form-group quality-filter"><label for="month" class="control-label">月份&nbsp;</label><select class="form-control input-sm" id="month"><option>1</option></select></div><div class="form-group quality-filter"><label for="type" class="control-label">类型&nbsp;</label><select class="form-control input-sm" id="type"><option value="">全部</option></select></div><div class="form-group quality-filter"><label for="area" class="control-label">病区&nbsp;</label><select class="form-control input-sm" id="area"></select></div><div class="form-group quality-filter"><button class="btn btn-xs btn-primary">查询</button></div></form><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in $data"><td data-title="\'检查日期\'" class="text-center">{{ row.taskTime }}</td><td data-title="\'检查病区\'" class="text-center">{{ row.deptName }}</td><td data-title="\'存在问题\'" class="text-center">{{ row.issueContent }}</td><td data-title="\'问题分析\'" class="text-center">{{ row.reasonAnalysis }}</td><td data-title="\'整改要求\'" class="text-center">{{ row.resDescribe }}</td><td data-title="\'整改措施\'" class="text-center">{{ row.resPlan }}</td><td data-title="\'整改效果评估\'" class="text-center">{{ row.evaluation }}</td><td data-title="\'检查类型\'" class="text-center">{{ row.type }}</td><td data-title="\'检查表\'" class="text-center">{{ row.formName }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.edit(row)" uib-tooltip="修改"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/quality/form/addForm.tpl.html",'<div class="mod-pop-dateForm addQualityForm"><form class="form-inline w5c-form" name="addQualityForm" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" form="addQualityForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">新增质量检查表单</h5></div><div class="modal-body"><div class="input-row"><div class="form-group"><label for="code" class="control-label">编号：</label> <input type="text" value="" class="form-control input-sm" id="code" ng-model="vm.formData.formCode" autocomplete="off"></div><div class="form-group"><label for="form_name" class="control-label">名称：</label> <input type="text" value="" class="form-control input-sm" id="form_name" name="form_name" ng-model="vm.formData.formName" autocomplete="off" required=""></div><div class="form-group"><label for="form_type" class="control-label">类型：</label><select class="form-control input-sm" id="form_type" required="" name="form_type" ng-model="vm.formData.formType"><option>1</option></select></div></div><div class="form-group dept-row"><label for="dept" class="control-label pull-left">使用科室：</label><div class="dept-row-input"><ul class="deptList"><li ng-repeat="item in vm.formData.deptList track by $index"><span>{{ item }}</span> <a ng-click="vm.removeDept($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></li></ul><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.deptText" autocomplete="off" name="useDept" id="dept"> <span class="input-group-btn add"><button ng-click="vm.addDept()" class="btn btn-primary btn-sm fa fa-plus" ng-disabled="addQualityForm.useDept.$invalid || addQualityForm.useDept.$pristine"></button></span></div></div></div><div class="clearfix"><table class="table table-condensed table-bordered table-striped partial-grid"><thead><tr><th class="text-center col">序号</th><th class="text-center col">检查内容及要求</th><th class="text-center col">标准分</th><th class="text-center col">检查方法及扣分标准</th><th class="text-center col">操作</th></tr></thead><tbody><tr ng-repeat="row in vm.formData.qualityFormDetailList track by $index"><td class="text-center">{{ row.detailCode }}</td><td class="text-center">{{ row.item }}</td><td class="text-center">{{ row.points }}</td><td class="text-center">{{ row.stantard }}</td><td class="text-center"><button class="btn btn-danger btn-xs" uib-tooltip="删除" ng-click="vm.removeDetailList($index)"><span class="fa fa-trash"></span></button></td></tr></tbody></table><ul class="clearfix partial-grid partial-list"><li class="pull-left col"><input type="text" class="form-control input-sm text-center" ng-model="vm.detailList.detailCode"></li><li class="pull-left col"><textarea class="form-control text-center" ng-model="vm.detailList.item"></textarea></li><li class="pull-left col"><input type="text" class="form-control input-sm text-center" ng-model="vm.detailList.points"></li><li class="pull-left col"><textarea class="form-control text-center" ng-model="vm.detailList.stantard"></textarea></li><li class="text-center pull-left col"><button class="btn btn-primary btn-xs text-center" uib-tooltip="增加" ng-click="vm.addDetailList(vm.detailList)"><span class="fa fa-plus"></span></button></li></ul></div></div><div class="modal-footer clearfix"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),
e.put("app/quality/form/form.tpl.html",'<div><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>质量检查表单管理</span><div class="pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.addForm()">新增表单</button></div></div><div class="panel-body"><form class="form-inline pull-right"><div class="form-group quality-filter"><label for="type" class="control-label">{{vm.filter_type.selected}}类型&nbsp;</label><select class="form-control input-sm" id="type" ng-model="vm.filter_type.selected" ng-options="x.type for x in vm.filter_type"></select></div><div class="form-group quality-filter"><label for="area" class="control-label">病区&nbsp;</label><select class="form-control input-sm" id="area" ng-model="vm.filter_area.selected" ng-options="x.type for x in vm.filter_area"></select></div><div class="form-group quality-filter"><button class="btn btn-xs btn-primary">查询</button></div></form><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'编号\'" class="text-center">{{ row.seqId }}</td><td data-title="\'类型\'" class="text-center">{{ row.formType }}</td><td data-title="\'表单名称\'" class="text-center">{{ row.formName }}</td><td data-title="\'使用科室\'" class="text-center">{{ row.deptCode }}</td><td data-title="\'创建时间\'" class="text-center">{{ row.createTime }}</td><td data-title="\'状态\'" class="text-center">{{ row.status }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.edit(row)" uib-tooltip="修改" ng-if="!row.isEditing"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/quality/task/addTask.tpl.html",'<div class="mod-pop-dateForm clearfix"><form class="form-inlne form-horizontal w5c-form" name="addQualityForm" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" form="addQualityForm"><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">质量检查任务</h5></div><div class="modal-body clearfix"><div class="form-group"><label for="date" class="control-label col-xs-2 partial-label">检查日期：</label><div class="col-xs-4"><input type="text" class="form-control input-sm" uib-datepicker-popup="yyyy-MM-dd" is-open="popup1" id="date" name="date" required="" placeholder="年-月-日" clear-text="清除" close-text="关闭" current-text="今天" ng-click="popup1 = true" ng-model="vm.formData.taskDate" readonly=""></div></div><div class="form-group"><label for="dept" class="control-label col-xs-2 partial-label">检查科室：</label><div class="col-xs-10"><ul class="deptList"><li ng-repeat="item in vm.formData.deptList track by $index"><span>{{ item }}</span> <a ng-click="vm.removeDept($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></li></ul><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.deptText" autocomplete="off" name="useDept" id="dept"> <span class="input-group-btn add"><button ng-click="vm.addDept()" class="btn btn-primary btn-sm fa fa-plus" ng-disabled="addQualityForm.useDept.$invalid || addQualityForm.useDept.$pristine"></button></span></div></div></div><div class="form-group"><label for="select_form" class="control-label col-xs-2 partial-label">检查表单：</label><div class="col-xs-4"><select class="form-control input-sm" id="select_form" required="" name="select_form" ng-model="vm.formData.formCode" ng-options="x.formName for x in vm.metaData.qualityFormList"></select></div></div><div class="form-group"><label for="hand_user" class="control-label col-xs-2 partial-label">检查组长：</label><div class="col-xs-4"><input type="text" class="form-control input-sm" id="hand_user" autocomplete="off" required="" name="handUserName" ng-model="vm.formData.handUserName" value=""></div></div><div class="form-group"><label for="member" class="control-label col-xs-2 partial-label">检查组员：</label><div class="col-xs-10"><ul class="deptList"><li ng-repeat="item in vm.formData.memberList track by $index"><span>{{ item }}</span> <a ng-click="vm.removeMember($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></li></ul><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.memberText" autocomplete="off" name="member" id="member"> <span class="input-group-btn"><button ng-click="vm.addMember()" class="btn btn-primary btn-sm fa fa-plus" ng-disabled="addQualityForm.member.$invalid || addQualityForm.member.$pristine"></button></span></div></div></div></div><div class="modal-footer clearfix"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/quality/task/task.tpl.html",'<div><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>任务管理</span><div class="pull-right"><button class="btn btn-xs btn-primary" ng-click="vm.addTask()">新增任务</button></div></div><div class="panel-body">{{vm.formData.task_form.current_selected}}<form class="form-inline pull-right"><div class="form-group quality-filter"><label for="month" class="control-label">月份&nbsp;</label><select class="form-control input-sm" id="month"><option>1</option></select></div><div class="form-group quality-filter"><label for="type" class="control-label">类型&nbsp;</label><select class="form-control input-sm" id="type"></select></div><div class="form-group quality-filter"><label for="area" class="control-label">病区&nbsp;</label><select class="form-control input-sm" id="area"></select></div><div class="form-group quality-filter"><button class="btn btn-xs btn-primary">查询</button></div></form><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'检查日期\'" class="text-center">{{ row.taskDate }}</td><td data-title="\'状态\'" class="text-center">{{ row.status }}</td><td data-title="\'检查病区\'" class="text-center">{{ row.deptCode }}</td><td data-title="\'检查类型\'" class="text-center">{{ row.formType }}</td><td data-title="\'检查表\'" class="text-center">{{ row.formName }}</td><td data-title="\'检查组长\'" class="text-center">{{ row.handUserName }}</td><td data-title="\'检查组成员\'" class="text-center">{{ row.joinUserName }}</td><td data-title="\'操作\'" class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.editTask(row)" uib-tooltip="修改" ng-if="!row.isEditing"><span class="fa fa-edit"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.deleteTask(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/research/item/item.model.html",'<div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写科研管理</h5></div><form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="static-form-item container-fluid"><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">课题名称：</label></div><div class="col-sm-8"><input ng-model="vm.formData.subjectName"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">项目来源：</label></div><div class="col-sm-8"><input ng-model="vm.formData.itemSource"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">起始日期：</label></div><div class="col-sm-8"><input ng-model="vm.formData.startDate"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">结束日期：</label></div><div class="col-sm-8"><input ng-model="vm.formData.endDate"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">经费：</label></div><div class="col-sm-8"><input ng-model="vm.formData.cost"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">负责人：</label></div><div class="col-sm-8"><input ng-model="vm.formData.subjectHead"></div></div><div class="form-group col-md-12"><div class="col-sm-2"><label class="control-label">参与人：</label></div><div class="col-sm-10"><input ng-model="vm.formData.subjectParticipant"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),e.put("app/research/item/item.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-balance-scale"></i> <span>科研项目管理</span><div class="pull-right"><button class="btn btn-primary btn-xs" ng-click="vm.open()">新增</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr><th>课题名称</th><th>项目来源</th><th>起始日期</th><th>结束日期</th><th>经费</th><th>课题负责人</th><th>课题参与人</th><th>操作</th></tr><tr ng-repeat="row in vm.lst"><td class="text-center" ng-click="vm.edit(row)">{{ row.subjectName }}</td><td class="text-center" ng-click="vm.edit(row)">{{ row.itemSource }}</td><td class="text-center" ng-click="vm.edit(row)">{{ row.startDate }}</td><td class="text-center" ng-click="vm.edit(row)">{{ row.endDate }}</td><td class="text-center" ng-click="vm.edit(row)">{{ row.cost }}</td><td class="text-center" ng-click="vm.edit(row)">{{ row.subjectHead }}</td><td class="text-center" ng-click="vm.edit(row)">{{ row.subjectParticipant }}</td><td class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.edit(row)" uib-tooltip="编辑" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.deleteGroup(row.seqId)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/research/papers/papers.model.html",'<div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写科研论文</h5></div><form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="static-form-item container-fluid"><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">论文名称：</label></div><div class="col-sm-8"><input ng-model="vm.formData.paperName"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">作者：</label></div><div class="col-sm-8"><input ng-model="vm.formData.author"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">刊物名称：</label></div><div class="col-sm-8"><input ng-model="vm.formData.publictionName"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">刊号：</label></div><div class="col-sm-8"><input ng-model="vm.formData.publictionNo"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">字数：</label></div><div class="col-sm-8"><input ng-model="vm.formData.wordsNumber"></div></div><div class="form-group col-md-6"><div class="col-sm-4"><label class="control-label">核心刊物：</label></div><div class="col-sm-8"><input ng-model="vm.formData.corePubliction"></div></div><div class="form-group col-md-12"><div class="col-sm-2"><label class="control-label">发表日期：</label></div><div class="col-sm-10"><input ng-model="vm.formData.publishDate"></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),e.put("app/research/papers/papers.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-balance-scale"></i> <span>科研论文管理</span><div class="pull-right"><button class="btn btn-primary btn-xs" ng-click="vm.add()">新增</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr><th>论文名称</th><th>作者</th><th>刊物名称</th><th>刊号</th><th>字数</th><th>核心刊物</th><th>发表日期</th><th>操作</th></tr><tr ng-repeat="row in vm.lst"><td class="text-center">{{ row.paperName }}</td><td class="text-center">{{ row.author }}</td><td class="text-center">{{ row.publictionName }}</td><td class="text-center">{{ row.publictionNo }}</td><td class="text-center">{{ row.wordsNumber }}</td><td class="text-center">{{ row.corePubliction }}</td><td class="text-center">{{ row.publishDate }}</td><td class="text-center"><button class="btn btn-danger btn-xs" ng-click="vm.edit(row)" uib-tooltip="编辑"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.deletePapers(row.seqId)" uib-tooltip="删除"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/system/roles/addRole.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写角色信息</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="userForm"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">角色名称：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.roleName" id="roleName" name="roleName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" name="remark" ng-model="vm.formData.remark"></textarea></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),e.put("app/system/roles/roles.tpl.html",'<div class="col-md-2"><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>角色列表</span></div><div class="panel-body list"><ul class="sublist"><li ng-repeat="item in vm.roleData" class="accordion-item" ng-class="{\'active\': item.roleCode === vm.roleDetail.roleCode}"><a ng-click="vm.load(item)" data-role-code="{{item.roleCode}}" class="sublist__item">{{item.roleName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>角色信息</span><div class="pull-right"><button ng-click="vm.open()" class="btn btn-primary btn-xs">添加角色</button></div></div><div class="panel-body"><form data-role-id="{{vm.roleDetail.seqId}}" class="form form-horizontal w5c-form role-edit-form change-user-form" novalidate="" w5c-form-validate="vm.validationOption" name="roleEditForm"><div class="container-fluid"><div class="col-md-6"><div class="form-group"><label for="roleCode" class="col-sm-3 control-label">角色编号：</label><div class="col-sm-9"><input class="form-control input-sm" ng-model="vm.roleDetail.roleCode" id="roleCode" name="roleCode" type="text"></div></div><div class="form-group"><label for="roleName" class="col-sm-3 control-label">角色名称：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.roleDetail.roleName" id="roleName" name="roleName" type="text"></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" ng-disabled="" w5c-form-submit="vm.edit()">保存</button> <button class="btn btn-sm btn-danger" type="button" ng-disabled="" ng-click="vm.del()">删除</button></div></div></div><div class="col-md-6"><div class="form-group"><label for="remark" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" id="remark" name="remark" ng-model="vm.roleDetail.remark"></textarea></div></div></div></div><div class="navgation-edition container-fluid" ng-if="vm.roleDetail"><div class="col-md-5"><div class="panel panel-danger"><div class="panel-heading"><i class="fa fa-bars"></i> <span>未添加的功能</span></div><uib-accordion class="list-accordion" close-others="false"><uib-accordion-group ng-repeat="item in vm.notHaveList" panel-class="list__title" is-open="item.isOpen"><uib-accordion-heading><span class="dept-list__text">{{item.funName}}</span> <i class="pull-right fa" ng-class="{\'fa-angle-down\': item.isOpen, \'fa-angle-right\': !item.isOpen}"></i></uib-accordion-heading><ul class="dept-sublist"><li ng-repeat="subItem in item.child"><a ng-click="vm.navExchange(item, subItem, $parent.$index, $index, \'add\')" class="sublist__item">{{subItem.funName}}</a></li></ul></uib-accordion-group></uib-accordion></div></div><div class="col-md-2 exchange-icon"><div class="text-center"><i class="fa fa-exchange"></i></div></div><div class="col-md-5"><div class="panel panel-success"><div class="panel-heading"><i class="fa fa-bars"></i> <span>已添加的功能</span></div><uib-accordion class="list-accordion" close-others="false"><uib-accordion-group ng-repeat="item in vm.hadList" panel-class="list__title" is-open="item.isOpen"><uib-accordion-heading><span class="dept-list__text">{{item.funName}}</span> <i class="pull-right fa" ng-class="{\'fa-angle-down\': item.isOpen, \'fa-angle-right\': !item.isOpen}"></i></uib-accordion-heading><ul class="dept-sublist"><li ng-repeat="subItem in item.child"><a ng-click="vm.navExchange(item, subItem, $parent.$index, $index, \'remove\')" class="sublist__item">{{subItem.funName}}</a></li></ul></uib-accordion-group></uib-accordion></div></div></div></form></div></div></div>'),e.put("app/system/users/addExistRole.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">编辑用户角色信息</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="userForm"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">角色名称：</label><div class="col-sm-9"><select class="form-controll input-sm" ng-options="role.roleName for role in vm.metaData.roleList track by role.roleCode" name="userName" ng-model="vm.formData.role"></select></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">所属科室：</label><div class="col-sm-9"><select class="form-controll input-sm" ng-options="dept.deptName for dept in vm.metaData.deptList track by dept.deptCode" name="dept" ng-model="vm.formData.dept"></select></div></div></div></div></form></div><div class="modal-footer"><button class="btn btn-sm btn-success {{vm.roleBtnStatus.state}}" type="button" ng-click="vm.formData = {data: [{roleCode:vm.formData.role.roleCode,deptCode: vm.formData.dept.deptCode, userId: vm.metaData.currentUser.seqId}]}; vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div>'),e.put("app/system/users/addUser.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写角色信息</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="userForm"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">所属部门：</label><div class="col-sm-9"><input type="hidden" name="deptCode" ng-model="vm.formData.deptCode"> <input class="form-control input-sm" required="" ng-model="vm.formData.deptName" readonly="" id="deptCode" type="text"></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label">用户姓名：</label><div class="col-sm-9"><select class="form-controll input-sm" name="userName" ng-model="vm.formData.userName" ng-change="vm.formData.userCode = (vm.metaData.userList | filter:vm.formData.userName)[0].userCode"><option ng-repeat="user in vm.metaData.userList" value="{{user.userName}}">{{user.userName}}</option></select></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label">用户编号：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.userCode" id="userCode" readonly="" name="userCode" type="text"></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label">登录名：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.loginName" id="loginName" name="loginName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">密码：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.password" id="password" name="password" type="text"></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),e.put("app/system/users/users.tpl.html",'<div class="col-md-2"><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><uib-accordion class="list-accordion"><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode, vm.deptData.deptName)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter:vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode, subItem.deptName)" class="sublist__item">{{subItem.deptName}}</a></li></ul></uib-accordion></div></div></div><div class="col-md-10"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>用户信息</span><div class="pull-right"><button ng-click="vm.open()" class="btn btn-primary btn-xs" ng-disabled="!vm.selectedDept">添加用户</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data" ng-class="{\'info\': row.userCode === vm.selectedUser.userCode}" ng-click="vm.showRole(row)"><td data-title="\'员工编号\'">{{row.userCode}}</td><td data-title="\'用户姓名\'">{{row.userName}}</td><td data-title="\'登录名\'">{{row.loginName}}</td><td data-title="\'操作\'"><button class="btn btn-default btn-xs" uib-tooltip="编辑用户信息" ng-click="vm.open(row)" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" uib-tooltip="删除用户" ng-click="vm.del(row.seqId)" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div><div class="panel panel-default" ng-if="vm.selectedUser"><div class="panel-heading"><i class="fa fa-user"></i> <span>用户角色</span><div class="pull-right"><button ng-click="vm.openRole()" class="btn btn-primary btn-xs" ng-disabled="!vm.selectedDept">添加现有角色</button></div></div><div class="panel-body"><table ng-table="vm.roleTableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data"><td data-title="\'角色编号\'">{{row.roleCode}}</td><td data-title="\'所属部门\'">{{row.deptName}}</td><td data-title="\'角色名称\'">{{row.roleName}}</td><td data-title="\'操作\'"><button class="btn btn-danger btn-xs" uib-tooltip="删除这个角色" ng-click="vm.delUserRole(row.seqId)" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>'),e.put("app/techFiles/jci/jci.tpl.html",'<div class="col-md-2" print-remove=""><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter: vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode)" class="sublist__item">{{subItem.deptName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>人员数据</span><div class="pull-right"><button print-btn="" class="btn btn-primary btn-xs">打印</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" print-table="vm.userDataList" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data" ng-class="{\'info\': vm.selectedUserId === row.userCode}" ng-click="vm.loadDetail(row.userCode)"><td data-title="\'工号\'">{{row.hisCode}}</td><td data-title="\'姓名\'">{{row.userName}}</td><td data-title="\'病区\'">{{ row.area }}</td><td data-title="\'出生时间\'">{{row.birthday}}</td><td data-title="\'性别\'">{{row.gender == \'1\' ? \'男\': \'女\'}}</td><td data-title="\'毕业时间\'">{{row.graduationDate}}</td><td data-title="\'毕业院校\'">{{row.graduationSchool}}</td><td data-title="\'获得学位\'">{{row.degree}}</td><td data-title="\'护士资格证编号\'">{{row.NQCCode}}</td><td data-title="\'操作\'" print-remove="" ng-click="coreCtrl.limitEvent($event)"><button class="btn btn-default btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑员工信息" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button></td></tr></table></div></div><div class="panel panel-default" ng-show="vm.selectedUserId"><div class="panel-body"><uib-tabset active="active"><uib-tab index="0" heading="岗位职责"><table class="table table-striped table-condensed table-no-border"><tr><th>岗位名称</th><th>工作概要</th><th>上下关系</th><th>工作职责</th><th>工作标准</th><th>其他要求</th><th>开始时间</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.posStatement"><td>{{item.positionName}}</td><td>{{item.jobSummary}}</td><td>{{item.leaderMemberRelation}}</td><td>{{item.responsibilities}}</td><td>{{item.jobStandard}}</td><td>{{item.otherRequirements}}</td><td>{{item.beginTime}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="1" heading="岗前培训"><table class="table table-striped table-condensed table-no-border"><tr><th>级别</th><th>培训名称</th><th>开始时间</th><th>结束时间</th><th>考核情况</th><th>合格证书</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.preJobTrain"><td>{{item.rank}}</td><td>{{item.trainName}}</td><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.assessmentCondition}}</td><td>{{item.certificateQualification}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="2" heading="评估考核"><table class="table table-striped table-condensed table-no-border"><tr><th>考核内容</th><th>考核时间</th><th>考核结果</th><th>审核人</th></tr><tr ng-repeat="item in vm.detail.assessment"><td>{{item.assessmentContent}}</td><td>{{item.assessmentTime}}</td><td>{{item.assessmentResult}}</td><td>{{item.auditor}}</td></tr></table></uib-tab><uib-tab index="3" heading="继续教育"><table class="table table-striped table-condensed table-no-border"><tr><th>级别</th><th>教育名称</th><th>开始时间</th><th>结束时间</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.conEducation"><td>{{item.rank}}</td><td>{{item.educationName}}</td><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="4" heading="CPR/ACLS证书"><table class="table table-striped table-condensed table-no-border"><tr><th>培训时间</th><th>培训名称</th><th>考核情况</th><th>合格证书</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.cprAcls"><td>{{item.trainTime}}</td><td>{{item.trainName}}</td><td>{{item.assessmentContent}}</td><td>{{item.certificateQualification}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="5" heading="教育记录与考核"><table class="table table-striped table-condensed table-no-border"><tr><th>开始时间</th><th>结束时间</th><th>级别</th><th>培训名称</th><th>考核结果</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.eduRecord"><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.rank}}</td><td>{{item.trainName}}</td><td>{{item.assessmentResult}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab></uib-tabset></div></div></div>'),e.put("app/techFiles/jci/modal.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写护士信息</h5></div><div class="modal-body"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="static-form-item container-fluid"><div class="col-md-6"><div class="form-group"><label for="hisCode" class="col-sm-3 control-label">工号：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.detail.info.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group"><label for="userName" class="col-sm-3 control-label">姓名：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.detail.info.userName" id="userName" name="userName" type="text"></div></div><div class="form-group"><label for="male" class="col-sm-3 control-label">性别：</label><div class="col-sm-9"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.info.gender" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.info.gender" id="female" value="0"> 女</label></div></div><div class="form-group"><label for="birthday" class="col-sm-3 control-label">出生日期：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="birthday" name="birthday" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.birthdayOpen" ng-model="vm.detail.info.birthday" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.birthdayOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div></div><div class="col-md-6"><div class="form-group"><label for="graduationSchool" class="col-sm-3 control-label">毕业学校：</label><div class="col-sm-9"><input type="text" id="graduationSchool" name="nativePlace" ng-model="vm.detail.info.graduationSchool" class="form-control input-sm"></div></div><div class="form-group"><label for="graduationDate" class="col-sm-3 control-label">毕业时间：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="graduationDate" name="graduationDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.graduationDateOpen" ng-model="vm.detail.info.graduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.graduationDateOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><label for="education" class="col-sm-3 control-label">学历：</label><div class="col-sm-9"><input type="text" id="education" name="education" ng-model="vm.detail.info.education" class="form-control input-sm"></div></div><div class="form-group"><label for="practiceNo" class="col-sm-3 control-label">护士资格证编号：</label><div class="col-sm-9"><input type="text" id="practiceNo" name="practiceNo" ng-model="vm.detail.info.practiceNo" class="form-control input-sm"></div></div></div></div><div class="container-fluid"><div class="col-md-6"><div class="form-group"><label class="col-sm-3 control-label"></label> <button w5c-form-submit="vm.save()" class="btn btn-success btn-sm">保存</button></div></div></div></form></uib-tab><uib-tab index="1" heading="岗位职责"><form class="form-horizontal form-inline posStatement-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="posStatementForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>岗位名称</th><th>工作概要</th><th>上下关系</th><th>工作职责</th><th>工作标准</th><th>其他要求</th><th>开始时间</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.posStatement track by $index"><td><input class="form-control input-sm input-tiny" name="positionName" type="text" required="" ng-model="item.positionName"></td><td><input class="form-control input-sm input-tiny" name="jobSummary" type="text" required="" ng-model="item.jobSummary"></td><td><input class="form-control input-sm input-tiny" name="leaderMemberRelation" type="text" required="" ng-model="item.leaderMemberRelation"></td><td><input class="form-control input-sm input-tiny" name="responsibilities" type="text" required="" ng-model="item.responsibilities"></td><td><input class="form-control input-sm input-tiny" name="jobStandard" type="text" required="" ng-model="item.jobStandard"></td><td><input class="form-control input-sm input-tiny" name="otherRequirements" type="text" required="" ng-model="item.otherRequirements"></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" ng-model="item.beginTime" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'posStatement\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'posStatement\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'posStatement\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="2" heading="岗前培训" active="tab.active"><form class="form-horizontal form-inline preJobTrain-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="preJobTrainForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>级别</th><th>培训名称</th><th>开始时间</th><th>结束时间</th><th>状态</th><th>合格证书</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.preJobTrain track by $index"><td><select class="form-control input-sm" name="rank" ng-model="item.rank"><option value="{{rank}}" ng-repeat="rank in vm.rankArray">{{rank}}</option></select></td><td><input class="form-control input-sm input-tiny" name="trainName" type="text" required="" ng-model="item.trainName"></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><select class="form-control input-sm" name="assessmentCondition" ng-model="item.assessmentCondition"><option value="{{result}}" ng-repeat="result in vm.resultArray">{{result}}</option></select></td><td><input class="form-control input-sm input-tiny" name="certificateQualification" type="text" required="" ng-model="item.certificateQualification"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'preJobTrain\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'preJobTrain\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'preJobTrain\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="3" heading="评估考核" active="tab.active"><form class="form-horizontal form-inline assessment-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="assessmentForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>考核内容</th><th>考核时间</th><th>考核结果</th><th>审核人</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.assessment track by $index"><td><input class="form-control input-sm" name="assessmentContent" type="text" required="" ng-model="item.assessmentContent"></td><td><span class="input-group"><input type="text" name="assessmentTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.assDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.assessmentTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.assDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm" name="assessmentResult" type="text" required="" ng-model="item.assessmentResult"></td><td><input class="form-control input-sm" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><button ng-click="vm.saveItem(\'assessment\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'assessment\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'assessment\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="4" heading="继续教育" active="tab.active"><form class="form-horizontal form-inline conEducation-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="conEducationForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>级别</th><th>教育名称</th><th>开始时间</th><th>结束时间</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.conEducation track by $index"><td><select class="form-control input-sm" name="rank" ng-model="item.rank"><option value="{{rank}}" ng-repeat="rank in vm.rankArray">{{rank}}</option></select></td><td><input class="form-control input-sm input-tiny" name="educationName" type="text" required="" ng-model="item.educationName"></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.beginTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.beginTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'conEducation\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'conEducation\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'conEducation\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="5" heading="CPR/ACLS证书" active="tab.active"><form class="form-horizontal form-inline cprAcls-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="cprAclsForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>培训时间</th><th>培训名称</th><th>考核情况</th><th>合格证书</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.cprAcls track by $index"><td><span class="input-group"><input type="text" name="trainTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.trainTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.trainTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.trainTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="trainName" type="text" required="" ng-model="item.trainName"></td><td><select class="form-control input-sm" name="assessmentContent" ng-model="item.assessmentContent"><option value="{{result}}" ng-repeat="result in vm.resultArray">{{result}}</option></select></td><td><input class="form-control input-sm input-tiny" name="certificateQualification" type="text" required="" ng-model="item.certificateQualification"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'cprAcls\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'cprAcls\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'cprAcls\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="6" heading="教育记录与考核" active="tab.active"><form class="form-horizontal form-inline eduRecord-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="eduRecordForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>开始时间</th><th>结束时间</th><th>级别</th><th>培训名称</th><th>考核结果</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.eduRecord track by $index"><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><select class="form-control input-sm" name="rank" ng-model="item.rank"><option value="{{rank}}" ng-repeat="rank in vm.rankArray">{{rank}}</option></select></td><td><input class="form-control input-sm input-tiny" name="trainName" type="text" required="" ng-model="item.trainName"></td><td><select class="form-control input-sm" name="assessmentResult" ng-model="item.assessmentResult"><option value="{{result}}" ng-repeat="result in vm.resultArray">{{result}}</option></select></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'eduRecord\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'eduRecord\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'eduRecord\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab></uib-tabset></div></div>'),
e.put("app/techFiles/techFiles/modal.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写护士信息</h5></div><div class="modal-body"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="static-form-item container-fluid"><div class="col-md-6"><div class="form-group"><label for="hisCode" class="col-sm-3 control-label">工号：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.detail.info.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group"><label for="userName" class="col-sm-3 control-label">姓名：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.detail.info.userName" id="userName" name="userName" type="text"></div></div><div class="form-group"><label for="male" class="col-sm-3 control-label">性别：</label><div class="col-sm-9"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.info.gender" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.detail.info.gender" id="female" value="0"> 女</label></div></div><div class="form-group"><label for="birthday" class="col-sm-3 control-label">出生日期：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="birthday" name="birthday" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.birthdayOpen" ng-model="vm.detail.info.birthday" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.birthdayOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div></div><div class="col-md-6"><div class="form-group"><label for="graduationSchool" class="col-sm-3 control-label">毕业学校：</label><div class="col-sm-9"><input type="text" id="graduationSchool" name="nativePlace" ng-model="vm.detail.info.graduationSchool" class="form-control input-sm"></div></div><div class="form-group"><label for="graduationDate" class="col-sm-3 control-label">毕业时间：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="graduationDate" name="graduationDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.graduationDateOpen" ng-model="vm.detail.info.graduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.graduationDateOpen = true"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><label for="education" class="col-sm-3 control-label">学历：</label><div class="col-sm-9"><input type="text" id="education" name="education" ng-model="vm.detail.info.education" class="form-control input-sm"></div></div><div class="form-group"><label for="practiceNo" class="col-sm-3 control-label">护士资格证编号：</label><div class="col-sm-9"><input type="text" id="practiceNo" name="practiceNo" ng-model="vm.detail.info.practiceNo" class="form-control input-sm"></div></div></div></div><div class="container-fluid"><div class="col-md-6"><div class="form-group"><label class="col-sm-3 control-label"></label> <button w5c-form-submit="vm.save()" class="btn btn-success btn-sm">保存</button></div></div></div></form></uib-tab><uib-tab index="1" heading="护士分层分级登记" active="tab.active"><form class="form-horizontal form-inline nurseHirReg-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="nurseHirRegForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>开始时间</th><th>结束时间</th><th>层级</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.nurseHirReg track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="hierarchy" type="text" required="" ng-model="item.hierarchy"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'nurseHirReg\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'nurseHirReg\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'nurseHirReg\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="2" heading="专科护士经历" active="tab.active"><form class="form-horizontal form-inline nurseExp-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="nurseExpForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>开始时间</th><th>结束时间</th><th>级别</th><th>所属专科</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.nurseExp track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="beginTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.beginTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.startDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" name="endTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.endTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.endDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><select class="form-control input-sm" name="rank" ng-model="item.rank"><option value="{{rank}}" ng-repeat="rank in vm.rankArray">{{rank}}</option></select></td><td><input class="form-control input-sm input-tiny" name="juniorCollege" type="text" required="" ng-model="item.juniorCollege"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'nurseExp\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'nurseExp\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'nurseExp\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="3" heading="学术会议、学习班" active="tab.active"><form class="form-horizontal form-inline academic-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="academicForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>会议名称</th><th>会议时间</th><th>会议地点</th><th>主办单位</th><th>学分</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.academic track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><input class="form-control input-sm input-tiny" name="meetingName" type="text" required="" ng-model="item.meetingName"></td><td><span class="input-group"><input type="text" name="meetingDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.meetingDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.meetingDate" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.meetingDateIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="meetingSite" type="text" required="" ng-model="item.meetingSite"></td><td><input class="form-control input-sm input-tiny" name="hostUnit" type="text" required="" ng-model="item.hostUnit"></td><td><input class="form-control input-sm input-tiny" name="credit" type="text" required="" ng-model="item.credit"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'academic\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'academic\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'academic\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="4" heading="奖励情况" active="tab.active"><form class="form-horizontal form-inline award-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="awardForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>奖励时间</th><th>奖励原因</th><th>奖励措施</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.award track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="apTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.apTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.apTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.apTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="reason" type="text" required="" ng-model="item.reason"></td><td><input class="form-control input-sm input-tiny" name="measure" type="text" required="" ng-model="item.measure"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'awardPunish\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'awardPunish\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'award\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="5" heading="惩罚情况" active="tab.active"><form class="form-horizontal form-inline punish-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="punishForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>惩罚时间</th><th>惩罚原因</th><th>惩罚措施</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.punish track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="apTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.apTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.apTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.apTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="reason" type="text" required="" ng-model="item.reason"></td><td><input class="form-control input-sm input-tiny" name="measure" type="text" required="" ng-model="item.measure"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'awardPunish\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'awardPunish\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'punish\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab><uib-tab index="6" heading="个人考核结果" active="tab.active"><form class="form-horizontal form-inline perAssessment-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="perAssessmentForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>考核时间</th><th>考核项目</th><th>考核结果</th><th>审核人</th><th>备注</th><th>操作</th></tr><tr ng-repeat="item in vm.detail.perAssessment track by $index"><td><select class="form-control input-sm" name="wardCode" ng-model="item.wardCode"><option value="">请选择</option><option value="{{item.deptCode}}" ng-repeat="item in vm.deptData">{{item.deptName}}</option></select></td><td><span class="input-group"><input type="text" name="assessmentTime" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.assessmentTimeIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" required="" ng-model="item.assessmentTime" timestamp-to-string=""> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="item.assessmentTimeIsOpen = true"><i class="fa fa-calendar"></i></button></span></span></td><td><input class="form-control input-sm input-tiny" name="assessmentItem" type="text" required="" ng-model="item.assessmentItem"></td><td><input class="form-control input-sm input-tiny" name="assessmentResult" type="text" required="" ng-model="item.assessmentResult"></td><td><input class="form-control input-sm input-tiny" name="auditor" type="text" required="" ng-model="item.auditor"></td><td><input class="form-control input-sm input-tiny" name="remark" type="text" required="" ng-model="item.remark"></td><td><button ng-click="vm.saveItem(\'perAssessment\', item)" class="btn btn-sm btn-info">保存</button> <button ng-click="vm.removeItem(\'perAssessment\', item.seqId, $index)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'perAssessment\')" class="btn btn-primary btn-sm">添加</button></div></form></uib-tab></uib-tabset></div></div>'),e.put("app/techFiles/techFiles/techFiles.tpl.html",'<div class="col-md-2" print-remove=""><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter: vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode)" class="sublist__item">{{subItem.deptName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>人员数据</span><div class="pull-right"><button print-btn="" class="btn btn-primary btn-xs">打印</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" print-table="vm.userDataList" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data" ng-class="{\'info\': vm.selectedUserId === row.userCode}" ng-click="vm.loadDetail(row.userCode)"><td data-title="\'工号\'">{{row.hisCode}}</td><td data-title="\'姓名\'">{{row.userName}}</td><td data-title="\'病区\'">{{ row.area }}</td><td data-title="\'出生时间\'">{{row.birthday}}</td><td data-title="\'性别\'">{{row.gender == \'1\' ? \'男\': \'女\'}}</td><td data-title="\'毕业时间\'">{{row.graduationDate}}</td><td data-title="\'毕业院校\'">{{row.graduationSchool}}</td><td data-title="\'获得学位\'">{{row.degree}}</td><td data-title="\'护士资格证编号\'">{{row.NQCCode}}</td><td data-title="\'操作\'" print-remove="" ng-click="coreCtrl.limitEvent($event)"><button class="btn btn-default btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑员工信息" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button></td></tr></table></div></div><div class="panel panel-default" ng-show="vm.selectedUserId"><div class="panel-body"><uib-tabset active="active"><uib-tab index="0" heading="护士分层分级登记"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>开始时间</th><th>结束时间</th><th>层级</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.nurseHirReg"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.hierarchy}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="1" heading="专科护士经历"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>开始时间</th><th>结束时间</th><th>级别</th><th>所属专科</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.nurseExp"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.beginTime}}</td><td>{{item.endTime}}</td><td>{{item.rank}}</td><td>{{item.juniorCollege}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="2" heading="学术会议、学习班"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>会议名称</th><th>会议时间</th><th>会议地点</th><th>主办单位</th><th>学分</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.academic"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.meetingName}}</td><td>{{item.meetingDate}}</td><td>{{item.meetingSite}}</td><td>{{item.hostUnit}}</td><td>{{item.credit}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="3" heading="奖励情况"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>奖励时间</th><th>奖励原因</th><th>奖励措施</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.awardPunish | filter: {apType: 1}"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.apTime}}</td><td>{{item.reason}}</td><td>{{item.measure}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="4" heading="惩罚情况"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>惩罚时间</th><th>惩罚原因</th><th>惩罚措施</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.awardPunish | filter: {apType: 2}"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.apTime}}</td><td>{{item.reason}}</td><td>{{item.measure}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab><uib-tab index="5" heading="个人考核结果"><table class="table table-striped table-condensed table-no-border"><tr><th>病区</th><th>考核时间</th><th>考核项目</th><th>考核结果</th><th>审核人</th><th>备注</th></tr><tr ng-repeat="item in vm.detail.perAssessment"><td>{{vm.getDeptName(item.wardCode)}}</td><td>{{item.assessmentTime}}</td><td>{{item.assessmentItem}}</td><td>{{item.assessmentResult}}</td><td>{{item.auditor}}</td><td>{{item.remark}}</td></tr></table></uib-tab></uib-tabset></div></div></div>'),e.put("app/common/tpls/timepicker/timepicer.html",'<div class="uib-timepicker"><div class="form-input"><div class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}"><input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()"><div class="time-spinner" ng-show="::showSpinners"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link time-spinner_btn" ng-disabled="noIncrementHours()" tabindex="-1"><span class="fa fa-chevron-up"></span></a> <a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link time-spinner_btn" ng-disabled="noDecrementHours()" tabindex="-1"><span class="fa fa-chevron-down"></span></a></div></div><div class="uib-separator">:</div><div class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}"><input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()"><div class="time-spinner" ng-show="::showSpinners"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link time-spinner_btn" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="fa fa-chevron-up"></span></a> <a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link time-spinner_btn" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="fa fa-chevron-down"></span></a></div></div><div class="uib-separator" ng-show="showSeconds">:</div><div class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds"><input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()"><div class="time-spinner" ng-show="::showSpinners"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link time-spinner_btn" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="fa fa-chevron-up"></span></a> <a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link time-spinner_btn" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="fa fa-chevron-down"></span></a></div></div><div ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></div></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-ee9f0aa194.js.map
